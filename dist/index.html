<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link
      rel="icon"
      type="image/svg+xml"
      href="data:image/svg+xml, %3Csvg data-v-6805eed4='' version='1.0' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='100%25' height='100%25' viewBox='0 0 70.000000 70.000000' preserveAspectRatio='xMidYMid meet' color-interpolation-filters='sRGB' style='margin: auto;'%3E%3Cg data-v-6805eed4='' fill='%23333' class='icon-text-wrapper icon-svg-group iconsvg' transform='translate(71.40499877929688,97.81155776977539)'%3E%3Cg class='iconsvg-imagesvg' transform='matrix(1,0,0,1,0,0)' opacity='1'%3E%3Cg%3E%3Crect fill='%23333' fill-opacity='0' stroke-width='2' x='0' y='0' width='60' height='54.37688619824' class='image-rect'%3E%3C/rect%3E%3Csvg x='-120' y='-95' width='160' height='54.37688619824' filtersec='colorsb2791788449' class='image-svg-svg primary' style='overflow: visible;'%3E%3Csvg xmlns='http://www.w3.org/2000/svg' xlink='http://www.w3.org/1999/xlink' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='ae8194c03-b976-4110-a715-bc6a7dcd8efe' x1='127.09' y1='100.34' x2='11.24' y2='19.22' gradientUnits='userSpaceOnUse'%3E%3Cstop offset='0' stop-color='%23fad5a5'%3E%3C/stop%3E%3Cstop offset='1' stop-color='%23f06c68'%3E%3C/stop%3E%3C/linearGradient%3E%3ClinearGradient id='b74247629-084e-4695-a572-5323a7fe49da' x1='12.79' y1='-21.54' x2='83.81' y2='101.47' href='%23ae8194c03-b976-4110-a715-bc6a7dcd8efe'%3E%3C/linearGradient%3E%3C/defs%3E%3Cpath d='M108.13 58.27L88.82 91.72A16.56 16.56 0 0 1 74.49 100H35.86a16.54 16.54 0 0 1-8.72-2.49C86.56 97.51 82.65 50 82.65 50a8.59 8.59 0 0 0-2.52-6.09L61.26 25a8.62 8.62 0 0 0-12.18 0L30.22 43.91a8.51 8.51 0 0 0-2.41 4.69c-.06-8.11 2.5-46 55.56-46a16.43 16.43 0 0 1 5.43 5.68l19.31 33.45a16.51 16.51 0 0 1 .02 16.54z' fill='url(%23ae8194c03-b976-4110-a715-bc6a7dcd8efe)'%3E%3C/path%3E%3Cpath d='M27.81 48.6a8.61 8.61 0 0 0 2.41 7.49L49.08 75a8.62 8.62 0 0 0 12.18 0l18.87-18.91A8.59 8.59 0 0 0 82.65 50s3.91 47.51-55.51 47.51a16.48 16.48 0 0 1-5.61-5.79L2.22 58.27a16.51 16.51 0 0 1 0-16.54L21.53 8.28A16.56 16.56 0 0 1 35.86 0h38.63a16.54 16.54 0 0 1 8.9 2.6c-53.08 0-55.64 37.89-55.58 46z' fill='url(%23b74247629-084e-4695-a572-5323a7fe49da)'%3E%3C/path%3E%3C/svg%3E%3C/svg%3E%3C!----%3E%3C/g%3E%3C/g%3E%3C/g%3E%3Cdefs v-gra='od'%3E%3C/defs%3E%3C/svg%3E"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script type="module" crossorigin>
var Ne=Object.defineProperty;var Pe=(t,e,r)=>e in t?Ne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Ce=(t,e,r)=>(Pe(t,typeof e!="symbol"?e+"":e,r),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();function noop(){}const identity$3=t=>t;function assign(t,e){for(const r in e)t[r]=e[r];return t}function run(t){return t()}function blank_object(){return Object.create(null)}function run_all(t){t.forEach(run)}function is_function(t){return typeof t=="function"}function safe_not_equal(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function is_empty(t){return Object.keys(t).length===0}function subscribe(t,...e){if(t==null){for(const a of e)a(void 0);return noop}const r=t.subscribe(...e);return r.unsubscribe?()=>r.unsubscribe():r}function get_store_value(t){let e;return subscribe(t,r=>e=r)(),e}function component_subscribe(t,e,r){t.$$.on_destroy.push(subscribe(e,r))}function create_slot(t,e,r,a){if(t){const i=get_slot_context(t,e,r,a);return t[0](i)}}function get_slot_context(t,e,r,a){return t[1]&&a?assign(r.ctx.slice(),t[1](a(e))):r.ctx}function get_slot_changes(t,e,r,a){if(t[2]&&a){const i=t[2](a(r));if(e.dirty===void 0)return i;if(typeof i=="object"){const o=[],u=Math.max(e.dirty.length,i.length);for(let c=0;c<u;c+=1)o[c]=e.dirty[c]|i[c];return o}return e.dirty|i}return e.dirty}function update_slot_base(t,e,r,a,i,o){if(i){const u=get_slot_context(e,r,a,o);t.p(u,i)}}function get_all_dirty_from_scope(t){if(t.ctx.length>32){const e=[],r=t.ctx.length/32;for(let a=0;a<r;a++)e[a]=-1;return e}return-1}function null_to_empty(t){return t??""}function set_store_value(t,e,r){return t.set(r),e}function action_destroyer(t){return t&&is_function(t.destroy)?t.destroy:noop}const is_client=typeof window<"u";let now$1=is_client?()=>window.performance.now():()=>Date.now(),raf=is_client?t=>requestAnimationFrame(t):noop;const tasks=new Set;function run_tasks(t){tasks.forEach(e=>{e.c(t)||(tasks.delete(e),e.f())}),tasks.size!==0&&raf(run_tasks)}function loop(t){let e;return tasks.size===0&&raf(run_tasks),{promise:new Promise(r=>{tasks.add(e={c:t,f:r})}),abort(){tasks.delete(e)}}}const globals=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function append(t,e){t.appendChild(e)}function get_root_for_style(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function append_empty_stylesheet(t){const e=element("style");return e.textContent="/* empty */",append_stylesheet(get_root_for_style(t),e),e.sheet}function append_stylesheet(t,e){return append(t.head||t,e),e.sheet}function insert(t,e,r){t.insertBefore(e,r||null)}function detach(t){t.parentNode&&t.parentNode.removeChild(t)}function destroy_each(t,e){for(let r=0;r<t.length;r+=1)t[r]&&t[r].d(e)}function element(t){return document.createElement(t)}function svg_element(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function text(t){return document.createTextNode(t)}function space(){return text(" ")}function empty$1(){return text("")}function listen(t,e,r,a){return t.addEventListener(e,r,a),()=>t.removeEventListener(e,r,a)}function prevent_default(t){return function(e){return e.preventDefault(),t.call(this,e)}}function attr(t,e,r){r==null?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function to_number(t){return t===""?null:+t}function children$1(t){return Array.from(t.childNodes)}function set_data(t,e){e=""+e,t.data!==e&&(t.data=e)}function set_input_value(t,e){t.value=e??""}function set_style(t,e,r,a){r==null?t.style.removeProperty(e):t.style.setProperty(e,r,a?"important":"")}function select_option(t,e,r){for(let a=0;a<t.options.length;a+=1){const i=t.options[a];if(i.__value===e){i.selected=!0;return}}(!r||e!==void 0)&&(t.selectedIndex=-1)}function select_value(t){const e=t.querySelector(":checked");return e&&e.__value}function toggle_class(t,e,r){t.classList.toggle(e,!!r)}function custom_event(t,e,{bubbles:r=!1,cancelable:a=!1}={}){return new CustomEvent(t,{detail:e,bubbles:r,cancelable:a})}class HtmlTag{constructor(e=!1){Ce(this,"is_svg",!1);Ce(this,"e");Ce(this,"n");Ce(this,"t");Ce(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,r,a=null){this.e||(this.is_svg?this.e=svg_element(r.nodeName):this.e=element(r.nodeType===11?"TEMPLATE":r.nodeName),this.t=r.tagName!=="TEMPLATE"?r:r.content,this.c(e)),this.i(a)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let r=0;r<this.n.length;r+=1)insert(this.t,this.n[r],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(detach)}}function construct_svelte_component(t,e){return new t(e)}const managed_styles=new Map;let active=0;function hash(t){let e=5381,r=t.length;for(;r--;)e=(e<<5)-e^t.charCodeAt(r);return e>>>0}function create_style_information(t,e){const r={stylesheet:append_empty_stylesheet(e),rules:{}};return managed_styles.set(t,r),r}function create_rule(t,e,r,a,i,o,u,c=0){const d=16.666/a;let f=`{
`;for(let w=0;w<=1;w+=d){const v=e+(r-e)*o(w);f+=w*100+`%{${u(v,1-v)}}
`}const m=f+`100% {${u(r,1-r)}}
}`,h=`__svelte_${hash(m)}_${c}`,p=get_root_for_style(t),{stylesheet:_,rules:y}=managed_styles.get(p)||create_style_information(p,t);y[h]||(y[h]=!0,_.insertRule(`@keyframes ${h} ${m}`,_.cssRules.length));const S=t.style.animation||"";return t.style.animation=`${S?`${S}, `:""}${h} ${a}ms linear ${i}ms 1 both`,active+=1,h}function delete_rule(t,e){const r=(t.style.animation||"").split(", "),a=r.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),i=r.length-a.length;i&&(t.style.animation=a.join(", "),active-=i,active||clear_rules())}function clear_rules(){raf(()=>{active||(managed_styles.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&detach(e)}),managed_styles.clear())})}let current_component;function set_current_component(t){current_component=t}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function onMount(t){get_current_component().$$.on_mount.push(t)}function afterUpdate(t){get_current_component().$$.after_update.push(t)}function onDestroy(t){get_current_component().$$.on_destroy.push(t)}function createEventDispatcher(){const t=get_current_component();return(e,r,{cancelable:a=!1}={})=>{const i=t.$$.callbacks[e];if(i){const o=custom_event(e,r,{cancelable:a});return i.slice().forEach(u=>{u.call(t,o)}),!o.defaultPrevented}return!0}}function setContext(t,e){return get_current_component().$$.context.set(t,e),e}function getContext(t){return get_current_component().$$.context.get(t)}const dirty_components=[],binding_callbacks=[];let render_callbacks=[];const flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function tick(){return schedule_update(),resolved_promise}function add_render_callback(t){render_callbacks.push(t)}function add_flush_callback(t){flush_callbacks.push(t)}const seen_callbacks=new Set;let flushidx=0;function flush(){if(flushidx!==0)return;const t=current_component;do{try{for(;flushidx<dirty_components.length;){const e=dirty_components[flushidx];flushidx++,set_current_component(e),update(e.$$)}}catch(e){throw dirty_components.length=0,flushidx=0,e}for(set_current_component(null),dirty_components.length=0,flushidx=0;binding_callbacks.length;)binding_callbacks.pop()();for(let e=0;e<render_callbacks.length;e+=1){const r=render_callbacks[e];seen_callbacks.has(r)||(seen_callbacks.add(r),r())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,seen_callbacks.clear(),set_current_component(t)}function update(t){if(t.fragment!==null){t.update(),run_all(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(add_render_callback)}}function flush_render_callbacks(t){const e=[],r=[];render_callbacks.forEach(a=>t.indexOf(a)===-1?e.push(a):r.push(a)),r.forEach(a=>a()),render_callbacks=e}let promise;function wait(){return promise||(promise=Promise.resolve(),promise.then(()=>{promise=null})),promise}function dispatch(t,e,r){t.dispatchEvent(custom_event(`${e?"intro":"outro"}${r}`))}const outroing=new Set;let outros;function group_outros(){outros={r:0,c:[],p:outros}}function check_outros(){outros.r||run_all(outros.c),outros=outros.p}function transition_in(t,e){t&&t.i&&(outroing.delete(t),t.i(e))}function transition_out(t,e,r,a){if(t&&t.o){if(outroing.has(t))return;outroing.add(t),outros.c.push(()=>{outroing.delete(t),a&&(r&&t.d(1),a())}),t.o(e)}else a&&a()}const null_transition={duration:0};function create_bidirectional_transition(t,e,r,a){let o=e(t,r,{direction:"both"}),u=a?0:1,c=null,d=null,f=null,m;function h(){f&&delete_rule(t,f)}function p(y,S){const w=y.b-u;return S*=Math.abs(w),{a:u,b:y.b,d:w,duration:S,start:y.start,end:y.start+S,group:y.group}}function _(y){const{delay:S=0,duration:w=300,easing:v=identity$3,tick:g=noop,css:b}=o||null_transition,T={start:now$1()+S,b:y};y||(T.group=outros,outros.r+=1),"inert"in t&&(y?m!==void 0&&(t.inert=m):(m=t.inert,t.inert=!0)),c||d?d=T:(b&&(h(),f=create_rule(t,u,y,w,S,v,b)),y&&g(0,1),c=p(T,w),add_render_callback(()=>dispatch(t,y,"start")),loop(O=>{if(d&&O>d.start&&(c=p(d,w),d=null,dispatch(t,c.b,"start"),b&&(h(),f=create_rule(t,u,c.b,c.duration,0,v,o.css))),c){if(O>=c.end)g(u=c.b,1-u),dispatch(t,c.b,"end"),d||(c.b?h():--c.group.r||run_all(c.group.c)),c=null;else if(O>=c.start){const k=O-c.start;u=c.a+c.d*v(k/c.duration),g(u,1-u)}}return!!(c||d)}))}return{run(y){is_function(o)?wait().then(()=>{o=o({direction:y?"in":"out"}),_(y)}):_(y)},end(){h(),c=d=null}}}function ensure_array_like(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function outro_and_destroy_block(t,e){transition_out(t,1,1,()=>{e.delete(t.key)})}function update_keyed_each(t,e,r,a,i,o,u,c,d,f,m,h){let p=t.length,_=o.length,y=p;const S={};for(;y--;)S[t[y].key]=y;const w=[],v=new Map,g=new Map,b=[];for(y=_;y--;){const $=h(i,o,y),M=r($);let R=u.get(M);R?a&&b.push(()=>R.p($,e)):(R=f(M,$),R.c()),v.set(M,w[y]=R),M in S&&g.set(M,Math.abs(y-S[M]))}const T=new Set,O=new Set;function k($){transition_in($,1),$.m(c,m),u.set($.key,$),m=$.first,_--}for(;p&&_;){const $=w[_-1],M=t[p-1],R=$.key,A=M.key;$===M?(m=$.first,p--,_--):v.has(A)?!u.has(R)||T.has(R)?k($):O.has(A)?p--:g.get(R)>g.get(A)?(O.add(R),k($)):(T.add(A),p--):(d(M,u),p--)}for(;p--;){const $=t[p];v.has($.key)||d($,u)}for(;_;)k(w[_-1]);return run_all(b),w}function bind(t,e,r){const a=t.$$.props[e];a!==void 0&&(t.$$.bound[a]=r,r(t.$$.ctx[a]))}function create_component(t){t&&t.c()}function mount_component(t,e,r){const{fragment:a,after_update:i}=t.$$;a&&a.m(e,r),add_render_callback(()=>{const o=t.$$.on_mount.map(run).filter(is_function);t.$$.on_destroy?t.$$.on_destroy.push(...o):run_all(o),t.$$.on_mount=[]}),i.forEach(add_render_callback)}function destroy_component(t,e){const r=t.$$;r.fragment!==null&&(flush_render_callbacks(r.after_update),run_all(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function make_dirty(t,e){t.$$.dirty[0]===-1&&(dirty_components.push(t),schedule_update(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function init(t,e,r,a,i,o,u=null,c=[-1]){const d=current_component;set_current_component(t);const f=t.$$={fragment:null,ctx:[],props:o,update:noop,not_equal:i,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:blank_object(),dirty:c,skip_bound:!1,root:e.target||d.$$.root};u&&u(f.root);let m=!1;if(f.ctx=r?r(t,e.props||{},(h,p,..._)=>{const y=_.length?_[0]:p;return f.ctx&&i(f.ctx[h],f.ctx[h]=y)&&(!f.skip_bound&&f.bound[h]&&f.bound[h](y),m&&make_dirty(t,h)),p}):[],f.update(),m=!0,run_all(f.before_update),f.fragment=a?a(f.ctx):!1,e.target){if(e.hydrate){const h=children$1(e.target);f.fragment&&f.fragment.l(h),h.forEach(detach)}else f.fragment&&f.fragment.c();e.intro&&transition_in(t.$$.fragment),mount_component(t,e.target,e.anchor),flush()}set_current_component(d)}class SvelteComponent{constructor(){Ce(this,"$$");Ce(this,"$$set")}$destroy(){destroy_component(this,1),this.$destroy=noop}$on(e,r){if(!is_function(r))return noop;const a=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return a.push(r),()=>{const i=a.indexOf(r);i!==-1&&a.splice(i,1)}}$set(e){this.$$set&&!is_empty(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const PUBLIC_VERSION="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(PUBLIC_VERSION);const subscriber_queue=[];function writable(t,e=noop){let r;const a=new Set;function i(c){if(safe_not_equal(t,c)&&(t=c,r)){const d=!subscriber_queue.length;for(const f of a)f[1](),subscriber_queue.push(f,t);if(d){for(let f=0;f<subscriber_queue.length;f+=2)subscriber_queue[f][0](subscriber_queue[f+1]);subscriber_queue.length=0}}}function o(c){i(c(t))}function u(c,d=noop){const f=[c,d];return a.add(f),a.size===1&&(r=e(i,o)||noop),c(t),()=>{a.delete(f),a.size===0&&r&&(r(),r=null)}}return{set:i,update:o,subscribe:u}}var data=writable([]),graphTabs=writable([]),activeGraphTab=writable(-1),graphs=writable([]),dataIDsforTables=writable([]),showalldata=writable([]),activeTableTab=writable(-1),menuModalType=writable(null),contextMenu=writable({labels:[],funcs:[]}),selectedTheme=writable("light"),statusData=writable([]);const BROWSER=!0;function pxToNumber(t){if(!t.endsWith("px"))return;const e=parseFloat(t.slice(0,t.length-2));return isNaN(e)?void 0:e}const getDimensionName=t=>t?"height":"width",calcComputedStyle=t=>window.getComputedStyle(t),getElementRect=t=>t.getBoundingClientRect(),getBordersSizeOffsets=(t,e=!0)=>{if(t.getPropertyValue("box-sizing")==="border-box")return;const r=pxToNumber(t.getPropertyValue("border-left-width"));if(r===void 0){console.error("Splitpanes Error: Fail to parse container `border-left-width`.");return}const a=pxToNumber(t.getPropertyValue("border-top-width"));if(a===void 0){console.error("Splitpanes Error: Fail to parse container `border-top-width`.");return}const i={left:r,top:a};if(e){const o=pxToNumber(t.getPropertyValue("border-right-width"));if(o===void 0){console.error("Splitpanes Error: Fail to parse container `border-right-width`.");return}const u=pxToNumber(t.getPropertyValue("border-bottom-width"));if(u===void 0){console.error("Splitpanes Error: Fail to parse container `border-bottom-width`.");return}const c=i;c.right=o,c.bottom=u}return i};function elementRectWithoutBorder(t,e){e||(e=calcComputedStyle(t));const r=getElementRect(t),a=getBordersSizeOffsets(e,!0)||{left:0,top:0,right:0,bottom:0};return{width:r.width-a.left-a.right,height:r.height-a.top-a.bottom,left:r.left+a.left,top:r.top+a.top}}const positionDiff=(t,e)=>({left:t.left-e.left,top:t.top-e.top});function getGlobalMousePosition(t){const e=t,r=t,{clientX:a,clientY:i}="ontouchstart"in window&&r.touches?r.touches[0]:e;return{left:a,top:i}}function sumPartial(t,e,r,a){let i=0;for(let o=e;o<r;o++)i+=a(t[o],o);return i}function forEachPartial(t,e,r,a){for(let i=e;i<r;i++)a(t[i],i)}function create_fragment$u(t){let e,r,a,i,o=!BROWSER;const u=t[16].default,c=create_slot(u,t,t[18],null);return{c(){e=element("div"),r=space(),c&&c.c(),attr(e,"id",t[0]),attr(e,"class",a=`splitpanes ${t[3]||""} ${t[4]||""}`),attr(e,"style",t[2]),toggle_class(e,"splitpanes--horizontal",t[1]),toggle_class(e,"splitpanes--vertical",!t[1]),toggle_class(e,"splitpanes--dragging",t[7]||t[8]),toggle_class(e,"splitpanes--freeze",!t[6])},m(d,f){insert(d,e,f),append(e,r),c&&c.m(e,null),t[17](e),i=!0},p(d,f){c&&c.p&&(!i||f[0]&262144)&&update_slot_base(c,u,d,d[18],i?get_slot_changes(u,d[18],f,null):get_all_dirty_from_scope(d[18]),null),(!i||f[0]&1)&&attr(e,"id",d[0]),(!i||f[0]&24&&a!==(a=`splitpanes ${d[3]||""} ${d[4]||""}`))&&attr(e,"class",a),(!i||f[0]&4)&&attr(e,"style",d[2]),(!i||f[0]&26)&&toggle_class(e,"splitpanes--horizontal",d[1]),(!i||f[0]&26)&&toggle_class(e,"splitpanes--vertical",!d[1]),(!i||f[0]&408)&&toggle_class(e,"splitpanes--dragging",d[7]||d[8]),(!i||f[0]&88)&&toggle_class(e,"splitpanes--freeze",!d[6])},i(d){i||(transition_in(o),transition_in(c,d),i=!0)},o(d){transition_out(o),transition_out(c,d),i=!1},d(d){d&&detach(e),c&&c.d(d),t[17](null)}}}const KEY={};function instance$v(t,e,r){let a,i,o,{$$slots:u={},$$scope:c}=e,{id:d=void 0}=e,{horizontal:f=!1}=e,{pushOtherPanes:m=!0}=e,{dblClickSplitter:h=!0}=e,{rtl:p="auto"}=e,{firstSplitter:_=!1}=e,{style:y=null}=e,{theme:S="default-theme"}=e,{class:w=""}=e;const v=createEventDispatcher();let g,b=!1,T=!1,O=!1,k=!1,$=!1,M=-1,R=-1,A,N=new Array,L=writable(f);component_subscribe(t,L,P=>r(31,o=P));const V=writable(_);component_subscribe(t,V,P=>r(30,i=P));const C=writable(void 0);component_subscribe(t,C,P=>r(29,a=P));let F=null,z=null;setContext(KEY,{showFirstSplitter:V,veryFirstPaneKey:C,isHorizontal:L,ssrRegisterPaneSize:void 0,onPaneInit:P=>(a===void 0&&set_store_value(C,a=P,a),{undefinedPaneInitSize:0}),clientOnly:{onPaneAdd:E,onPaneRemove:D}});function E(P){let B=-1;Array.from(P.element.parentNode.children).some(J=>(J.className.includes("splitpanes__pane")&&B++,J===P.element)),B===0&&set_store_value(C,a=P.key,a),N.splice(B,0,P);for(let J=0;J<N.length;J++)N[J].index=J;b&&de().then(()=>{P.isReady=!0,v("pane-add",{index:B,panes:ue()})});const ne=(J,fe=!0)=>W=>{(fe||P.index>0)&&J(W,P)};return{onSplitterDown:ne(q,!1),onSplitterClick:ne(ce,!1),onSplitterDblClick:ne(me),onPaneClick:ne(I),reportGivenSizeChange:ne(U)}}async function D(P){const B=N.findIndex(ne=>ne.key===P);if(B>=0){const ne=N.splice(B,1)[0];for(let J=0;J<N.length;J++)N[J].index=J;B===0&&set_store_value(C,a=N.length>0?N[0].key:void 0,a),b&&(await de(),v("pane-remove",{removed:ne,panes:ue()}))}}function I(P,B){v("pane-click",B)}function U(P,B){B.setSz(P),de()}onMount(()=>{be(),Te();for(let P=0;P<N.length;P++)N[P].isReady=!0;b=!0,v("ready"),setTimeout(()=>{r(6,O=!0)},0)}),onDestroy(()=>{b&&X(),b=!1}),afterUpdate(()=>{be()});function Z(P){if(p==="auto")try{return(P??calcComputedStyle(g)).direction==="rtl"}catch{}return p===!0}function G(){document.body.style.cursor=L?"col-resize":"row-resize",document.addEventListener("mousemove",_e,{passive:!1}),document.addEventListener("mouseup",Q),"ontouchstart"in window&&(document.addEventListener("touchmove",_e,{passive:!1}),document.addEventListener("touchend",Q))}function X(){document.body.style.cursor="",document.removeEventListener("mousemove",_e),document.removeEventListener("mouseup",Q),"ontouchstart"in window&&(document.removeEventListener("touchmove",_e),document.removeEventListener("touchend",Q))}const x=P=>P.nodeType===Node.ELEMENT_NODE&&P.classList.contains("splitpanes__splitter");function le(P,B,ne){let J=P[f?"top":"left"];return ne&&!f&&(J=B-J),J}const ie=()=>getDimensionName(f);function q(P,B){r(7,k=!0),M=B.index,B.setSplitterActive(!0);let J=B.element;for(;J!=null&&(J=J.previousSibling,!x(J)););if(J==null){console.error("Splitpane Error: Active splitter wasn't found!");return}F=J;const fe=getGlobalMousePosition(P),W=getElementRect(F);z=le(positionDiff(fe,W),W[ie()],Z()),G()}function _e(P){if(k){P.preventDefault(),r(8,$=!0);const B=getGlobalMousePosition(P),ne=calcComputedStyle(g),J=elementRectWithoutBorder(g,ne),fe=J[ie()],W=Z(ne),K=positionDiff(B,J),te=le(K,fe,W);se(te,fe),v("resize",ue())}}function Q(){$&&v("resized",ue()),r(7,k=!1),N[M].setSplitterActive(!1),setTimeout(()=>{r(8,$=!1),X()},100)}function ce(P,B){if("ontouchstart"in window){P.preventDefault();const ne=B.index;h&&(R===ne?(A&&clearTimeout(A),A=null,me(P,B),R=-1):(R=ne,A=setTimeout(()=>{R=-1},500)))}$||v("splitter-click",B)}function me(P,B){if(h){const ne=B.index;let J=0;for(let K=0;K<N.length;K++){const te=N[K];K!==ne&&(J+=te.min())}const fe=Math.min(Math.max(0,100-J),B.max()),W=J+fe;if(W>=100)for(let K=0;K<N.length;K++){const te=N[K];te!==B?te.setSz(te.min()):te.setSz(100-J)}else{let K=100-W;B.setSz(fe);const te=pe=>{const ve=pe.min(),$e=pe.max(),Me=Math.min(Math.max(0,K),$e-ve);pe.setSz(ve+Me),K-=Me};for(let pe=ne-1;pe>=0;pe--)te(N[pe]);for(let pe=ne+1;pe<N.length;pe++)te(N[pe]);K!=0&&console.warn("Splitpanes: there is a left spare size after computation of splitter double click, which means there are issues on the size constains of the panes.")}v("pane-maximize",B),v("resized",ue())}r(7,k=!1)}const ue=()=>N.map(P=>({min:P.min(),max:P.max(),size:P.sz(),snap:P.snap()}));function ye(P,B){const ne=$e=>getElementRect($e)[ie()],J=ne(F);let fe=0,W=F.previousSibling;for(;W!=null;)x(W)&&(fe+=ne(W)),W=W.previousSibling;let K=0,te=F.nextSibling;for(;te!=null;)x(te)&&(K+=ne(te)),te=te.nextSibling;const pe=fe+z,ve=fe+J+K;return(P-pe)/(B-ve)*100}function se(P,B){let ne=M-1,J=N[ne],fe=M,W=N[fe],K={prevPanesSize:he(ne),nextPanesSize:Se(fe),prevReachedMinPanes:0,nextReachedMinPanes:0};const te=0+(m?0:K.prevPanesSize),pe=100-(m?0:K.nextPanesSize),ve=Math.max(Math.min(ye(P,B),pe),te),$e=K.prevPanesSize+J.min()+J.snap(),Me=100-(K.nextPanesSize+W.min()+W.snap());let De=ve,Oe=!1;ve<=$e?ve>K.prevPanesSize+J.min()&&(De=Math.max(J.min()+K.prevPanesSize,100-(W.max()+K.nextPanesSize)),Oe=!0):ve>=Me&&ve<100-K.nextPanesSize-W.min()&&(De=Math.min(100-(W.min()+K.nextPanesSize),J.max()+K.prevPanesSize),Oe=!0);const we=J.max()<100&&De>=J.max()+K.prevPanesSize,Ee=W.max()<100&&De<=100-(W.max()+K.nextPanesSize);if(we||Ee)we?(J.setSz(J.max()),W.setSz(Math.max(100-J.max()-K.prevPanesSize-K.nextPanesSize,0))):(J.setSz(Math.max(100-W.max()-K.prevPanesSize-K.nextPanesSize,0)),W.setSz(W.max()));else{if(m&&!Oe){const Ae=ke(K,De);if(!Ae)return;({sums:K,paneBeforeIndex:ne,paneAfterIndex:fe}=Ae),J=N[ne],W=N[fe]}ne!=null&&J.setSz(Math.min(Math.max(De-K.prevPanesSize-K.prevReachedMinPanes,J.min()),J.max())),fe!=null&&W.setSz(Math.min(Math.max(100-De-K.nextPanesSize-K.nextReachedMinPanes,W.min()),W.max()))}}function ke(P,B){var W,K;const ne=M-1;let J=ne,fe=ne+1;if(B<P.prevPanesSize+N[J].min()&&(J=(W=oe(ne))==null?void 0:W.index,P.prevReachedMinPanes=0,J<ne&&forEachPartial(N,J+1,ne+1,te=>{te.setSz(te.min()),P.prevReachedMinPanes+=te.min()}),P.prevPanesSize=he(J),J==null))return P.prevReachedMinPanes=0,N[0].setSz(N[0].min()),forEachPartial(N,1,ne+1,te=>{te.setSz(te.min()),P.prevReachedMinPanes+=te.min()}),N[fe].setSz(100-P.prevReachedMinPanes-N[0].min()-P.prevPanesSize-P.nextPanesSize),null;if(B>100-P.nextPanesSize-N[fe].min()){fe=(K=ee(ne))==null?void 0:K.index,P.nextReachedMinPanes=0,fe>ne+1&&forEachPartial(N,ne+1,fe,pe=>{pe.setSz(pe.min()),P.nextReachedMinPanes+=pe.min()}),P.nextPanesSize=Se(fe);const te=N.length;if(fe==null)return P.nextReachedMinPanes=0,N[te-1].setSz(N[te-1].min()),forEachPartial(N,ne+1,te-1,pe=>{pe.setSz(pe.min()),P.nextReachedMinPanes+=pe.min()}),N[J].setSz(100-P.prevPanesSize-P.nextReachedMinPanes-N[te-1].min()-P.nextPanesSize),null}return{sums:P,paneBeforeIndex:J,paneAfterIndex:fe}}const Y=P=>P.sz(),he=P=>sumPartial(N,0,P,Y),Se=P=>sumPartial(N,P+1,N.length,Y),oe=P=>[...N].reverse().find(B=>B.index<P&&B.sz()>B.min()),ee=P=>N.find(B=>B.index>P+1&&B.sz()>B.min());async function de(){T=!0,await tick(),T&&(Te(),T=!1)}function Te(){ge(),b&&v("resized",ue())}function ge(){if(N.length===0)return;const P=N.length;let B=100,ne=0,J=0,fe=0,W=[],K=[];for(let Me=0;Me<P;Me++){const De=N[Me],Oe=De.sz();De.givenSize==null?De.isReady?(fe+=Oe,Oe>=De.max()&&W.push(De),Oe<=De.min()&&K.push(De)):J+=1:(B-=Oe,ne++,W.push(De),K.push(De))}const te=P-ne,pe=te-J;let ve,$e;if(pe>0?(ve=fe/pe,ve>.1&&B>.1?(fe+=J*ve,$e=B/fe):(ve=0,$e=1)):(ve=B/te,$e=1),B+fe>.1){B=100;for(let Me=0;Me<P;Me++){const De=N[Me];if(De.givenSize==null){const Oe=De.isReady?De.sz():ve,we=Math.max(Math.min(Oe*$e,De.max()),De.min());De.setSz(we)}B-=De.sz()}Math.abs(B)>.1&&(B=ae(B,W,K))}isFinite(B)?Math.abs(B)>.1&&console.warn("Splitpanes: Could not resize panes correctly due to their constraints."):console.warn("Splitpanes: Internal error, sizes might be NaN as a result.")}function ae(P,B,ne){const fe=N.length-(P>0?B.length:ne.length);if(fe<=0)return P;const W=P/fe;if(N.length===1)N[0].setSz(100),P=0;else for(let K=0;K<N.length;K++){const te=N[K],pe=te.sz();if(P>0&&!B.includes(te)){const ve=Math.max(Math.min(pe+W,te.max()),te.min()),$e=ve-pe;P-=$e,te.setSz(ve)}else if(!ne.includes(te)){const ve=Math.max(Math.min(pe+W,te.max()),te.min()),$e=ve-pe;P-=$e,te.setSz(ve)}}return P}function be(){var J;const{children:P}=g;let B=0,ne=!1;for(let fe=0;fe<P.length;fe++){const W=P.item(fe),K=W.classList.contains("splitpanes__pane"),te=W.classList.contains("splitpanes__splitter");if(!K&&!te){(J=W.parentNode)==null||J.removeChild(W),console.warn("Splitpanes: Only <Pane> elements are allowed at the root of <Splitpanes>. One of your DOM nodes was removed.");return}else K&&(!ne&&N[B].element!==W&&(ne=!0),B++)}if(ne){const fe=[];for(let W=0;W<P.length;W++){const K=P.item(W);if(K.classList.contains("splitpanes__pane")){const pe=N.find(ve=>ve.element===K);pe!=null?(pe.index=fe.length,fe.push(pe)):console.warn("Splitpanes: Internal error - found a <Pane> elements which isn't tracked.")}}N=fe,set_store_value(C,a=N.length>0?N[0].key:void 0,a)}}function j(P){binding_callbacks[P?"unshift":"push"](()=>{g=P,r(5,g)})}return t.$$set=P=>{"id"in P&&r(0,d=P.id),"horizontal"in P&&r(1,f=P.horizontal),"pushOtherPanes"in P&&r(12,m=P.pushOtherPanes),"dblClickSplitter"in P&&r(13,h=P.dblClickSplitter),"rtl"in P&&r(14,p=P.rtl),"firstSplitter"in P&&r(15,_=P.firstSplitter),"style"in P&&r(2,y=P.style),"theme"in P&&r(3,S=P.theme),"class"in P&&r(4,w=P.class),"$$scope"in P&&r(18,c=P.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&2&&set_store_value(L,o=f,o),t.$$.dirty[0]&32768&&set_store_value(V,i=_,i)},[d,f,y,S,w,g,O,k,$,L,V,C,m,h,p,_,u,j,c]}class Splitpanes extends SvelteComponent{constructor(e){super(),init(this,e,instance$v,create_fragment$u,safe_not_equal,{id:0,horizontal:1,pushOtherPanes:12,dblClickSplitter:13,rtl:14,firstSplitter:15,style:2,theme:3,class:4},null,[-1,-1,-1])}}const carefullCallbackGenerator=(t,e)=>r=>{const a=t();a!=null&&a[e](r)},carefullCallbackSource=t=>carefullCallbackGenerator.bind(null,t);function create_if_block$j(t){let e,r,a,i,o,u,c=(t[4]!==t[9]||t[5])&&create_if_block_1$a(t);const d=t[20].default,f=create_slot(d,t,t[19],null);return{c(){c&&c.c(),e=space(),r=element("div"),f&&f.c(),attr(r,"class",a=`splitpanes__pane ${t[0]||""}`),attr(r,"style",t[3])},m(m,h){c&&c.m(m,h),insert(m,e,h),insert(m,r,h),f&&f.m(r,null),t[21](r),i=!0,o||(u=listen(r,"click",t[11]("onPaneClick")),o=!0)},p(m,h){m[4]!==m[9]||m[5]?c?c.p(m,h):(c=create_if_block_1$a(m),c.c(),c.m(e.parentNode,e)):c&&(c.d(1),c=null),f&&f.p&&(!i||h&524288)&&update_slot_base(f,d,m,m[19],i?get_slot_changes(d,m[19],h,null):get_all_dirty_from_scope(m[19]),null),(!i||h&1&&a!==(a=`splitpanes__pane ${m[0]||""}`))&&attr(r,"class",a),(!i||h&8)&&attr(r,"style",m[3])},i(m){i||(transition_in(f,m),i=!0)},o(m){transition_out(f,m),i=!1},d(m){m&&(detach(e),detach(r)),c&&c.d(m),f&&f.d(m),t[21](null),o=!1,u()}}}function create_if_block_1$a(t){let e,r,a,i;return{c(){e=element("div"),attr(e,"class",r="splitpanes__splitter "+(t[2]?"splitpanes__splitter__active":""))},m(o,u){insert(o,e,u),a||(i=[listen(e,"mousedown",t[11]("onSplitterDown")),listen(e,"touchstart",t[11]("onSplitterDown")),listen(e,"click",t[11]("onSplitterClick")),listen(e,"dblclick",t[11]("onSplitterDblClick"))],a=!0)},p(o,u){u&4&&r!==(r="splitpanes__splitter "+(o[2]?"splitpanes__splitter__active":""))&&attr(e,"class",r)},d(o){o&&detach(e),a=!1,run_all(i)}}}function create_fragment$t(t){let e,r,a=!t[10]&&create_if_block$j(t);return{c(){a&&a.c(),e=empty$1()},m(i,o){a&&a.m(i,o),insert(i,e,o),r=!0},p(i,[o]){i[10]||a.p(i,o)},i(i){r||(transition_in(a),r=!0)},o(i){transition_out(a),r=!1},d(i){i&&detach(e),a&&a.d(i)}}}function instance$u(t,e,r){let a,i,o,u,c,{$$slots:d={},$$scope:f}=e;const{ssrRegisterPaneSize:m,onPaneInit:h,clientOnly:p,isHorizontal:_,showFirstSplitter:y,veryFirstPaneKey:S}=getContext(KEY);component_subscribe(t,_,F=>r(18,o=F)),component_subscribe(t,y,F=>r(5,c=F)),component_subscribe(t,S,F=>r(4,u=F));let{size:w=null}=e,{minSize:v=0}=e,{maxSize:g=100}=e,{snapSize:b=0}=e,{class:T=""}=e;const O={},k=!BROWSER,{undefinedPaneInitSize:$}=h(O);let M,R=w??$,A=!1,N;const L=carefullCallbackSource(()=>N),V=F=>{F!=R&&L("reportGivenSizeChange")(F)};onMount(()=>{const F={key:O,element:M,givenSize:w,sz:()=>R,setSz:z=>{r(16,R=z),w!=null&&w!=R&&r(12,w=R)},min:()=>v,max:()=>g,snap:()=>b,setSplitterActive:z=>{r(2,A=z)},isReady:!1};N=p.onPaneAdd(F)}),onDestroy(()=>{p.onPaneRemove(O)});function C(F){binding_callbacks[F?"unshift":"push"](()=>{M=F,r(1,M)})}return t.$$set=F=>{"size"in F&&r(12,w=F.size),"minSize"in F&&r(13,v=F.minSize),"maxSize"in F&&r(14,g=F.maxSize),"snapSize"in F&&r(15,b=F.snapSize),"class"in F&&r(0,T=F.class),"$$scope"in F&&r(19,f=F.$$scope)},t.$$.update=()=>{t.$$.dirty&4096&&w!=null&&V(w),t.$$.dirty&262144&&r(17,a=getDimensionName(o)),t.$$.dirty&196608&&r(3,i=`${a}: ${R}%;`)},[T,M,A,i,u,c,_,y,S,O,k,L,w,v,g,b,R,a,o,f,d,C]}class Pane extends SvelteComponent{constructor(e){super(),init(this,e,instance$u,create_fragment$t,safe_not_equal,{size:12,minSize:13,maxSize:14,snapSize:15,class:0})}}function fade(t,{delay:e=0,duration:r=400,easing:a=identity$3}={}){const i=+getComputedStyle(t).opacity;return{delay:e,duration:r,easing:a,css:o=>`opacity: ${o*i}`}}function create_fragment$s(t){let e,r,a,i,o,u,c,d,f,m,h,p,_,y,S;const w=t[4].default,v=create_slot(w,t,t[3],null);return{c(){e=element("div"),a=space(),i=element("dialog"),o=element("div"),u=element("button"),u.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="svelte-r5e5cj"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg>',c=space(),d=element("h1"),f=text(t[0]),m=space(),h=element("div"),v&&v.c(),attr(e,"class","backdrop svelte-r5e5cj"),attr(u,"class","closeDialogButton svelte-r5e5cj"),set_style(h,"margin-left","1em"),attr(o,"class","modal-box"),attr(i,"id","modal_data"),attr(i,"class","dialog svelte-r5e5cj")},m(g,b){insert(g,e,b),insert(g,a,b),insert(g,i,b),append(i,o),append(o,u),append(o,c),append(o,d),append(d,f),append(o,m),append(o,h),v&&v.m(h,null),_=!0,y||(S=[listen(window,"keydown",t[2]),listen(e,"click",t[1]),listen(u,"click",t[1])],y=!0)},p(g,[b]){t=g,(!_||b&1)&&set_data(f,t[0]),v&&v.p&&(!_||b&8)&&update_slot_base(v,w,t,t[3],_?get_slot_changes(w,t[3],b,null):get_all_dirty_from_scope(t[3]),null)},i(g){_||(g&&add_render_callback(()=>{_&&(r||(r=create_bidirectional_transition(e,fade,{duration:fadeTime_ms},!0)),r.run(1))}),transition_in(v,g),g&&add_render_callback(()=>{_&&(p||(p=create_bidirectional_transition(i,fade,{duration:fadeTime_ms},!0)),p.run(1))}),_=!0)},o(g){g&&(r||(r=create_bidirectional_transition(e,fade,{duration:fadeTime_ms},!1)),r.run(0)),transition_out(v,g),g&&(p||(p=create_bidirectional_transition(i,fade,{duration:fadeTime_ms},!1)),p.run(0)),_=!1},d(g){g&&(detach(e),detach(a),detach(i)),g&&r&&r.end(),v&&v.d(g),g&&p&&p.end(),y=!1,run_all(S)}}}let fadeTime_ms=250;function instance$t(t,e,r){let a;component_subscribe(t,menuModalType,f=>r(5,a=f));let{$$slots:i={},$$scope:o}=e,{title:u=""}=e;function c(){set_store_value(menuModalType,a=null,a)}function d(f){f.key,f.keyCode===27&&c()}return t.$$set=f=>{"title"in f&&r(0,u=f.title),"$$scope"in f&&r(3,o=f.$$scope)},[u,c,d,o,i]}class Dialog extends SvelteComponent{constructor(e){super(),init(this,e,instance$t,create_fragment$s,safe_not_equal,{title:0})}}function create_fragment$r(t){let e,r,a,i,o,u,c,d,f,m,h=truncateDecimalPlaces(t[0])+"",p,_,y,S,w=truncateDecimalPlaces(t[1])+"",v,g,b;return{c(){e=element("div"),r=element("label"),a=element("span"),i=text(t[5]),o=space(),u=element("input"),c=space(),d=element("input"),f=space(),m=element("span"),p=text(h),y=space(),S=element("span"),v=text(w),attr(a,"class","svelte-1o4zp2p"),attr(u,"class","numberInput svelte-1o4zp2p"),attr(u,"type","number"),attr(u,"id","val"),attr(u,"min",t[0]),attr(u,"max",t[1]),attr(u,"step",t[3]),attr(r,"for","val"),attr(r,"class","sliderLabel svelte-1o4zp2p"),attr(d,"class","sliderInput svelte-1o4zp2p"),attr(d,"type","range"),attr(d,"min",t[0]),attr(d,"max",t[1]),attr(d,"step",t[3]),attr(m,"class",_="min "+(t[0]===t[4][0]?"stop":"")+" svelte-1o4zp2p"),attr(S,"class","max svelte-1o4zp2p"),attr(e,"class","processItem svelte-1o4zp2p")},m(T,O){insert(T,e,O),append(e,r),append(r,a),append(a,i),append(r,o),append(r,u),set_input_value(u,t[2]),append(e,c),append(e,d),set_input_value(d,t[2]),append(e,f),append(e,m),append(m,p),append(e,y),append(e,S),append(S,v),g||(b=[listen(u,"change",t[8]),listen(u,"input",t[9]),listen(u,"input",t[10]),listen(d,"change",t[11]),listen(d,"input",t[12]),listen(d,"change",t[13]),listen(d,"input",t[13])],g=!0)},p(T,[O]){O&32&&set_data(i,T[5]),O&1&&attr(u,"min",T[0]),O&2&&attr(u,"max",T[1]),O&8&&attr(u,"step",T[3]),O&4&&to_number(u.value)!==T[2]&&set_input_value(u,T[2]),O&1&&attr(d,"min",T[0]),O&2&&attr(d,"max",T[1]),O&8&&attr(d,"step",T[3]),O&4&&set_input_value(d,T[2]),O&1&&h!==(h=truncateDecimalPlaces(T[0])+"")&&set_data(p,h),O&17&&_!==(_="min "+(T[0]===T[4][0]?"stop":"")+" svelte-1o4zp2p")&&attr(m,"class",_),O&2&&w!==(w=truncateDecimalPlaces(T[1])+"")&&set_data(v,w)},i:noop,o:noop,d(T){T&&detach(e),g=!1,run_all(b)}}}function truncateDecimalPlaces(t,e=2){const r=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);if(!r||!r[1])return t;const a=r[1].slice(0,e);return parseFloat(r[0].replace(r[1],a))}function instance$s(t,e,r){let{min:a=-100}=e,{max:i=100}=e,{step:o=1}=e,{limits:u=[-1/0,1/0]}=e,{value:c}=e,{label:d="Label:"}=e;function f(){a<u[0]&&r(0,a=u[0]),i>u[1]&&r(1,i=u[1]),c<u[0]&&(r(2,c=u[0]),r(0,a=c)),c>u[1]&&(r(2,c=u[1]),r(1,i=c))}function m(){const v=Math.abs(i-a),g=Math.max(u[0],a+v*.2),b=Math.min(u[1],i-v*.2);Number.isInteger(o)?(c>b||c<g)&&(r(1,i=Math.ceil(c+v/2)),r(0,a=Math.floor(c-v/2))):(c>b||c<g)&&(r(1,i=c+v/2),r(0,a=c-v/2)),f()}const h=()=>m(),p=()=>{f()};function _(){c=to_number(this.value),r(2,c)}const y=()=>m(),S=()=>{f()};function w(){c=to_number(this.value),r(2,c)}return t.$$set=v=>{"min"in v&&r(0,a=v.min),"max"in v&&r(1,i=v.max),"step"in v&&r(3,o=v.step),"limits"in v&&r(4,u=v.limits),"value"in v&&r(2,c=v.value),"label"in v&&r(5,d=v.label)},[a,i,c,o,u,d,f,m,h,p,_,y,S,w]}class Slider extends SvelteComponent{constructor(e){super(),init(this,e,instance$s,create_fragment$r,safe_not_equal,{min:0,max:1,step:3,limits:4,value:2,label:5})}}class LuxonError extends Error{}class InvalidDateTimeError extends LuxonError{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class InvalidIntervalError extends LuxonError{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class InvalidDurationError extends LuxonError{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class ConflictingSpecificationError extends LuxonError{}class InvalidUnitError extends LuxonError{constructor(e){super(`Invalid unit ${e}`)}}class InvalidArgumentError extends LuxonError{}class ZoneIsAbstractError extends LuxonError{constructor(){super("Zone is an abstract class")}}const n="numeric",s="short",l="long",DATE_SHORT={year:n,month:n,day:n},DATE_MED={year:n,month:s,day:n},DATE_MED_WITH_WEEKDAY={year:n,month:s,day:n,weekday:s},DATE_FULL={year:n,month:l,day:n},DATE_HUGE={year:n,month:l,day:n,weekday:l},TIME_SIMPLE={hour:n,minute:n},TIME_WITH_SECONDS={hour:n,minute:n,second:n},TIME_WITH_SHORT_OFFSET={hour:n,minute:n,second:n,timeZoneName:s},TIME_WITH_LONG_OFFSET={hour:n,minute:n,second:n,timeZoneName:l},TIME_24_SIMPLE={hour:n,minute:n,hourCycle:"h23"},TIME_24_WITH_SECONDS={hour:n,minute:n,second:n,hourCycle:"h23"},TIME_24_WITH_SHORT_OFFSET={hour:n,minute:n,second:n,hourCycle:"h23",timeZoneName:s},TIME_24_WITH_LONG_OFFSET={hour:n,minute:n,second:n,hourCycle:"h23",timeZoneName:l},DATETIME_SHORT={year:n,month:n,day:n,hour:n,minute:n},DATETIME_SHORT_WITH_SECONDS={year:n,month:n,day:n,hour:n,minute:n,second:n},DATETIME_MED={year:n,month:s,day:n,hour:n,minute:n},DATETIME_MED_WITH_SECONDS={year:n,month:s,day:n,hour:n,minute:n,second:n},DATETIME_MED_WITH_WEEKDAY={year:n,month:s,day:n,weekday:s,hour:n,minute:n},DATETIME_FULL={year:n,month:l,day:n,hour:n,minute:n,timeZoneName:s},DATETIME_FULL_WITH_SECONDS={year:n,month:l,day:n,hour:n,minute:n,second:n,timeZoneName:s},DATETIME_HUGE={year:n,month:l,day:n,weekday:l,hour:n,minute:n,timeZoneName:l},DATETIME_HUGE_WITH_SECONDS={year:n,month:l,day:n,weekday:l,hour:n,minute:n,second:n,timeZoneName:l};class Zone{get type(){throw new ZoneIsAbstractError}get name(){throw new ZoneIsAbstractError}get ianaName(){return this.name}get isUniversal(){throw new ZoneIsAbstractError}offsetName(e,r){throw new ZoneIsAbstractError}formatOffset(e,r){throw new ZoneIsAbstractError}offset(e){throw new ZoneIsAbstractError}equals(e){throw new ZoneIsAbstractError}get isValid(){throw new ZoneIsAbstractError}}let singleton$1=null;class SystemZone extends Zone{static get instance(){return singleton$1===null&&(singleton$1=new SystemZone),singleton$1}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:r,locale:a}){return parseZoneInfo(e,r,a)}formatOffset(e,r){return formatOffset(this.offset(e),r)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let dtfCache={};function makeDTF(t){return dtfCache[t]||(dtfCache[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),dtfCache[t]}const typeToPos={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function hackyOffset(t,e){const r=t.format(e).replace(/\u200E/g,""),a=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,i,o,u,c,d,f,m]=a;return[u,i,o,c,d,f,m]}function partsOffset(t,e){const r=t.formatToParts(e),a=[];for(let i=0;i<r.length;i++){const{type:o,value:u}=r[i],c=typeToPos[o];o==="era"?a[c]=u:isUndefined(c)||(a[c]=parseInt(u,10))}return a}let ianaZoneCache={};class IANAZone extends Zone{static create(e){return ianaZoneCache[e]||(ianaZoneCache[e]=new IANAZone(e)),ianaZoneCache[e]}static resetCache(){ianaZoneCache={},dtfCache={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=IANAZone.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:r,locale:a}){return parseZoneInfo(e,r,a,this.name)}formatOffset(e,r){return formatOffset(this.offset(e),r)}offset(e){const r=new Date(e);if(isNaN(r))return NaN;const a=makeDTF(this.name);let[i,o,u,c,d,f,m]=a.formatToParts?partsOffset(a,r):hackyOffset(a,r);c==="BC"&&(i=-Math.abs(i)+1);const p=objToLocalTS({year:i,month:o,day:u,hour:d===24?0:d,minute:f,second:m,millisecond:0});let _=+r;const y=_%1e3;return _-=y>=0?y:1e3+y,(p-_)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let intlLFCache={};function getCachedLF(t,e={}){const r=JSON.stringify([t,e]);let a=intlLFCache[r];return a||(a=new Intl.ListFormat(t,e),intlLFCache[r]=a),a}let intlDTCache={};function getCachedDTF(t,e={}){const r=JSON.stringify([t,e]);let a=intlDTCache[r];return a||(a=new Intl.DateTimeFormat(t,e),intlDTCache[r]=a),a}let intlNumCache={};function getCachedINF(t,e={}){const r=JSON.stringify([t,e]);let a=intlNumCache[r];return a||(a=new Intl.NumberFormat(t,e),intlNumCache[r]=a),a}let intlRelCache={};function getCachedRTF(t,e={}){const{base:r,...a}=e,i=JSON.stringify([t,a]);let o=intlRelCache[i];return o||(o=new Intl.RelativeTimeFormat(t,e),intlRelCache[i]=o),o}let sysLocaleCache=null;function systemLocale(){return sysLocaleCache||(sysLocaleCache=new Intl.DateTimeFormat().resolvedOptions().locale,sysLocaleCache)}let weekInfoCache={};function getCachedWeekInfo(t){let e=weekInfoCache[t];if(!e){const r=new Intl.Locale(t);e="getWeekInfo"in r?r.getWeekInfo():r.weekInfo,weekInfoCache[t]=e}return e}function parseLocaleString(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const r=t.indexOf("-u-");if(r===-1)return[t];{let a,i;try{a=getCachedDTF(t).resolvedOptions(),i=t}catch{const d=t.substring(0,r);a=getCachedDTF(d).resolvedOptions(),i=d}const{numberingSystem:o,calendar:u}=a;return[i,o,u]}}function intlConfigString(t,e,r){return(r||e)&&(t.includes("-u-")||(t+="-u"),r&&(t+=`-ca-${r}`),e&&(t+=`-nu-${e}`)),t}function mapMonths(t){const e=[];for(let r=1;r<=12;r++){const a=DateTime.utc(2009,r,1);e.push(t(a))}return e}function mapWeekdays(t){const e=[];for(let r=1;r<=7;r++){const a=DateTime.utc(2016,11,13+r);e.push(t(a))}return e}function listStuff(t,e,r,a){const i=t.listingMode();return i==="error"?null:i==="en"?r(e):a(e)}function supportsFastNumbers(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}class PolyNumberFormatter{constructor(e,r,a){this.padTo=a.padTo||0,this.floor=a.floor||!1;const{padTo:i,floor:o,...u}=a;if(!r||Object.keys(u).length>0){const c={useGrouping:!1,...a};a.padTo>0&&(c.minimumIntegerDigits=a.padTo),this.inf=getCachedINF(e,c)}}format(e){if(this.inf){const r=this.floor?Math.floor(e):e;return this.inf.format(r)}else{const r=this.floor?Math.floor(e):roundTo(e,3);return padStart(r,this.padTo)}}}class PolyDateFormatter{constructor(e,r,a){this.opts=a,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const u=-1*(e.offset/60),c=u>=0?`Etc/GMT+${u}`:`Etc/GMT${u}`;e.offset!==0&&IANAZone.create(c).valid?(i=c,this.dt=e):(i="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,i=e.zone.name):(i="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const o={...this.opts};o.timeZone=o.timeZone||i,this.dtf=getCachedDTF(r,o)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(r=>{if(r.type==="timeZoneName"){const a=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...r,value:a}}else return r}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class PolyRelFormatter{constructor(e,r,a){this.opts={style:"long",...a},!r&&hasRelative()&&(this.rtf=getCachedRTF(e,a))}format(e,r){return this.rtf?this.rtf.format(e,r):formatRelativeTime(r,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,r){return this.rtf?this.rtf.formatToParts(e,r):[]}}const fallbackWeekSettings={firstDay:1,minimalDays:4,weekend:[6,7]};class Locale{static fromOpts(e){return Locale.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,r,a,i,o=!1){const u=e||Settings.defaultLocale,c=u||(o?"en-US":systemLocale()),d=r||Settings.defaultNumberingSystem,f=a||Settings.defaultOutputCalendar,m=validateWeekSettings(i)||Settings.defaultWeekSettings;return new Locale(c,d,f,m,u)}static resetCache(){sysLocaleCache=null,intlDTCache={},intlNumCache={},intlRelCache={}}static fromObject({locale:e,numberingSystem:r,outputCalendar:a,weekSettings:i}={}){return Locale.create(e,r,a,i)}constructor(e,r,a,i,o){const[u,c,d]=parseLocaleString(e);this.locale=u,this.numberingSystem=r||c||null,this.outputCalendar=a||d||null,this.weekSettings=i,this.intl=intlConfigString(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=o,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=supportsFastNumbers(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&r?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Locale.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,validateWeekSettings(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,r=!1){return listStuff(this,e,months,()=>{const a=r?{month:e,day:"numeric"}:{month:e},i=r?"format":"standalone";return this.monthsCache[i][e]||(this.monthsCache[i][e]=mapMonths(o=>this.extract(o,a,"month"))),this.monthsCache[i][e]})}weekdays(e,r=!1){return listStuff(this,e,weekdays,()=>{const a=r?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=r?"format":"standalone";return this.weekdaysCache[i][e]||(this.weekdaysCache[i][e]=mapWeekdays(o=>this.extract(o,a,"weekday"))),this.weekdaysCache[i][e]})}meridiems(){return listStuff(this,void 0,()=>meridiems,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[DateTime.utc(2016,11,13,9),DateTime.utc(2016,11,13,19)].map(r=>this.extract(r,e,"dayperiod"))}return this.meridiemCache})}eras(e){return listStuff(this,e,eras,()=>{const r={era:e};return this.eraCache[e]||(this.eraCache[e]=[DateTime.utc(-40,1,1),DateTime.utc(2017,1,1)].map(a=>this.extract(a,r,"era"))),this.eraCache[e]})}extract(e,r,a){const i=this.dtFormatter(e,r),o=i.formatToParts(),u=o.find(c=>c.type.toLowerCase()===a);return u?u.value:null}numberFormatter(e={}){return new PolyNumberFormatter(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,r={}){return new PolyDateFormatter(e,this.intl,r)}relFormatter(e={}){return new PolyRelFormatter(this.intl,this.isEnglish(),e)}listFormatter(e={}){return getCachedLF(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:hasLocaleWeekInfo()?getCachedWeekInfo(this.locale):fallbackWeekSettings}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let singleton=null;class FixedOffsetZone extends Zone{static get utcInstance(){return singleton===null&&(singleton=new FixedOffsetZone(0)),singleton}static instance(e){return e===0?FixedOffsetZone.utcInstance:new FixedOffsetZone(e)}static parseSpecifier(e){if(e){const r=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new FixedOffsetZone(signedOffset(r[1],r[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${formatOffset(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${formatOffset(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,r){return formatOffset(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class InvalidZone extends Zone{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function normalizeZone(t,e){if(isUndefined(t)||t===null)return e;if(t instanceof Zone)return t;if(isString(t)){const r=t.toLowerCase();return r==="default"?e:r==="local"||r==="system"?SystemZone.instance:r==="utc"||r==="gmt"?FixedOffsetZone.utcInstance:FixedOffsetZone.parseSpecifier(r)||IANAZone.create(t)}else return isNumber(t)?FixedOffsetZone.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new InvalidZone(t)}let now=()=>Date.now(),defaultZone="system",defaultLocale$1=null,defaultNumberingSystem=null,defaultOutputCalendar=null,twoDigitCutoffYear=60,throwOnInvalid,defaultWeekSettings=null;class Settings{static get now(){return now}static set now(e){now=e}static set defaultZone(e){defaultZone=e}static get defaultZone(){return normalizeZone(defaultZone,SystemZone.instance)}static get defaultLocale(){return defaultLocale$1}static set defaultLocale(e){defaultLocale$1=e}static get defaultNumberingSystem(){return defaultNumberingSystem}static set defaultNumberingSystem(e){defaultNumberingSystem=e}static get defaultOutputCalendar(){return defaultOutputCalendar}static set defaultOutputCalendar(e){defaultOutputCalendar=e}static get defaultWeekSettings(){return defaultWeekSettings}static set defaultWeekSettings(e){defaultWeekSettings=validateWeekSettings(e)}static get twoDigitCutoffYear(){return twoDigitCutoffYear}static set twoDigitCutoffYear(e){twoDigitCutoffYear=e%100}static get throwOnInvalid(){return throwOnInvalid}static set throwOnInvalid(e){throwOnInvalid=e}static resetCaches(){Locale.resetCache(),IANAZone.resetCache()}}class Invalid{constructor(e,r){this.reason=e,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const nonLeapLadder=[0,31,59,90,120,151,181,212,243,273,304,334],leapLadder=[0,31,60,91,121,152,182,213,244,274,305,335];function unitOutOfRange(t,e){return new Invalid("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function dayOfWeek(t,e,r){const a=new Date(Date.UTC(t,e-1,r));t<100&&t>=0&&a.setUTCFullYear(a.getUTCFullYear()-1900);const i=a.getUTCDay();return i===0?7:i}function computeOrdinal(t,e,r){return r+(isLeapYear(t)?leapLadder:nonLeapLadder)[e-1]}function uncomputeOrdinal(t,e){const r=isLeapYear(t)?leapLadder:nonLeapLadder,a=r.findIndex(o=>o<e),i=e-r[a];return{month:a+1,day:i}}function isoWeekdayToLocal(t,e){return(t-e+7)%7+1}function gregorianToWeek(t,e=4,r=1){const{year:a,month:i,day:o}=t,u=computeOrdinal(a,i,o),c=isoWeekdayToLocal(dayOfWeek(a,i,o),r);let d=Math.floor((u-c+14-e)/7),f;return d<1?(f=a-1,d=weeksInWeekYear(f,e,r)):d>weeksInWeekYear(a,e,r)?(f=a+1,d=1):f=a,{weekYear:f,weekNumber:d,weekday:c,...timeObject(t)}}function weekToGregorian(t,e=4,r=1){const{weekYear:a,weekNumber:i,weekday:o}=t,u=isoWeekdayToLocal(dayOfWeek(a,1,e),r),c=daysInYear(a);let d=i*7+o-u-7+e,f;d<1?(f=a-1,d+=daysInYear(f)):d>c?(f=a+1,d-=daysInYear(a)):f=a;const{month:m,day:h}=uncomputeOrdinal(f,d);return{year:f,month:m,day:h,...timeObject(t)}}function gregorianToOrdinal(t){const{year:e,month:r,day:a}=t,i=computeOrdinal(e,r,a);return{year:e,ordinal:i,...timeObject(t)}}function ordinalToGregorian(t){const{year:e,ordinal:r}=t,{month:a,day:i}=uncomputeOrdinal(e,r);return{year:e,month:a,day:i,...timeObject(t)}}function usesLocalWeekValues(t,e){if(!isUndefined(t.localWeekday)||!isUndefined(t.localWeekNumber)||!isUndefined(t.localWeekYear)){if(!isUndefined(t.weekday)||!isUndefined(t.weekNumber)||!isUndefined(t.weekYear))throw new ConflictingSpecificationError("Cannot mix locale-based week fields with ISO-based week fields");return isUndefined(t.localWeekday)||(t.weekday=t.localWeekday),isUndefined(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),isUndefined(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function hasInvalidWeekData(t,e=4,r=1){const a=isInteger(t.weekYear),i=integerBetween(t.weekNumber,1,weeksInWeekYear(t.weekYear,e,r)),o=integerBetween(t.weekday,1,7);return a?i?o?!1:unitOutOfRange("weekday",t.weekday):unitOutOfRange("week",t.weekNumber):unitOutOfRange("weekYear",t.weekYear)}function hasInvalidOrdinalData(t){const e=isInteger(t.year),r=integerBetween(t.ordinal,1,daysInYear(t.year));return e?r?!1:unitOutOfRange("ordinal",t.ordinal):unitOutOfRange("year",t.year)}function hasInvalidGregorianData(t){const e=isInteger(t.year),r=integerBetween(t.month,1,12),a=integerBetween(t.day,1,daysInMonth(t.year,t.month));return e?r?a?!1:unitOutOfRange("day",t.day):unitOutOfRange("month",t.month):unitOutOfRange("year",t.year)}function hasInvalidTimeData(t){const{hour:e,minute:r,second:a,millisecond:i}=t,o=integerBetween(e,0,23)||e===24&&r===0&&a===0&&i===0,u=integerBetween(r,0,59),c=integerBetween(a,0,59),d=integerBetween(i,0,999);return o?u?c?d?!1:unitOutOfRange("millisecond",i):unitOutOfRange("second",a):unitOutOfRange("minute",r):unitOutOfRange("hour",e)}function isUndefined(t){return typeof t>"u"}function isNumber(t){return typeof t=="number"}function isInteger(t){return typeof t=="number"&&t%1===0}function isString(t){return typeof t=="string"}function isDate(t){return Object.prototype.toString.call(t)==="[object Date]"}function hasRelative(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function hasLocaleWeekInfo(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function maybeArray(t){return Array.isArray(t)?t:[t]}function bestBy(t,e,r){if(t.length!==0)return t.reduce((a,i)=>{const o=[e(i),i];return a&&r(a[0],o[0])===a[0]?a:o},null)[1]}function pick(t,e){return e.reduce((r,a)=>(r[a]=t[a],r),{})}function hasOwnProperty(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function validateWeekSettings(t){if(t==null)return null;if(typeof t!="object")throw new InvalidArgumentError("Week settings must be an object");if(!integerBetween(t.firstDay,1,7)||!integerBetween(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!integerBetween(e,1,7)))throw new InvalidArgumentError("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function integerBetween(t,e,r){return isInteger(t)&&t>=e&&t<=r}function floorMod(t,e){return t-e*Math.floor(t/e)}function padStart(t,e=2){const r=t<0;let a;return r?a="-"+(""+-t).padStart(e,"0"):a=(""+t).padStart(e,"0"),a}function parseInteger(t){if(!(isUndefined(t)||t===null||t===""))return parseInt(t,10)}function parseFloating(t){if(!(isUndefined(t)||t===null||t===""))return parseFloat(t)}function parseMillis(t){if(!(isUndefined(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function roundTo(t,e,r=!1){const a=10**e;return(r?Math.trunc:Math.round)(t*a)/a}function isLeapYear(t){return t%4===0&&(t%100!==0||t%400===0)}function daysInYear(t){return isLeapYear(t)?366:365}function daysInMonth(t,e){const r=floorMod(e-1,12)+1,a=t+(e-r)/12;return r===2?isLeapYear(a)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function objToLocalTS(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function firstWeekOffset(t,e,r){return-isoWeekdayToLocal(dayOfWeek(t,1,e),r)+e-1}function weeksInWeekYear(t,e=4,r=1){const a=firstWeekOffset(t,e,r),i=firstWeekOffset(t+1,e,r);return(daysInYear(t)-a+i)/7}function untruncateYear(t){return t>99?t:t>Settings.twoDigitCutoffYear?1900+t:2e3+t}function parseZoneInfo(t,e,r,a=null){const i=new Date(t),o={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};a&&(o.timeZone=a);const u={timeZoneName:e,...o},c=new Intl.DateTimeFormat(r,u).formatToParts(i).find(d=>d.type.toLowerCase()==="timezonename");return c?c.value:null}function signedOffset(t,e){let r=parseInt(t,10);Number.isNaN(r)&&(r=0);const a=parseInt(e,10)||0,i=r<0||Object.is(r,-0)?-a:a;return r*60+i}function asNumber(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new InvalidArgumentError(`Invalid unit value ${t}`);return e}function normalizeObject(t,e){const r={};for(const a in t)if(hasOwnProperty(t,a)){const i=t[a];if(i==null)continue;r[e(a)]=asNumber(i)}return r}function formatOffset(t,e){const r=Math.trunc(Math.abs(t/60)),a=Math.trunc(Math.abs(t%60)),i=t>=0?"+":"-";switch(e){case"short":return`${i}${padStart(r,2)}:${padStart(a,2)}`;case"narrow":return`${i}${r}${a>0?`:${a}`:""}`;case"techie":return`${i}${padStart(r,2)}${padStart(a,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function timeObject(t){return pick(t,["hour","minute","second","millisecond"])}const monthsLong=["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthsNarrow=["J","F","M","A","M","J","J","A","S","O","N","D"];function months(t){switch(t){case"narrow":return[...monthsNarrow];case"short":return[...monthsShort];case"long":return[...monthsLong];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const weekdaysLong=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],weekdaysShort=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],weekdaysNarrow=["M","T","W","T","F","S","S"];function weekdays(t){switch(t){case"narrow":return[...weekdaysNarrow];case"short":return[...weekdaysShort];case"long":return[...weekdaysLong];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const meridiems=["AM","PM"],erasLong=["Before Christ","Anno Domini"],erasShort=["BC","AD"],erasNarrow=["B","A"];function eras(t){switch(t){case"narrow":return[...erasNarrow];case"short":return[...erasShort];case"long":return[...erasLong];default:return null}}function meridiemForDateTime(t){return meridiems[t.hour<12?0:1]}function weekdayForDateTime(t,e){return weekdays(e)[t.weekday-1]}function monthForDateTime(t,e){return months(e)[t.month-1]}function eraForDateTime(t,e){return eras(e)[t.year<0?0:1]}function formatRelativeTime(t,e,r="always",a=!1){const i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},o=["hours","minutes","seconds"].indexOf(t)===-1;if(r==="auto"&&o){const h=t==="days";switch(e){case 1:return h?"tomorrow":`next ${i[t][0]}`;case-1:return h?"yesterday":`last ${i[t][0]}`;case 0:return h?"today":`this ${i[t][0]}`}}const u=Object.is(e,-0)||e<0,c=Math.abs(e),d=c===1,f=i[t],m=a?d?f[1]:f[2]||f[1]:d?i[t][0]:t;return u?`${c} ${m} ago`:`in ${c} ${m}`}function stringifyTokens(t,e){let r="";for(const a of t)a.literal?r+=a.val:r+=e(a.val);return r}const macroTokenToFormatOpts={D:DATE_SHORT,DD:DATE_MED,DDD:DATE_FULL,DDDD:DATE_HUGE,t:TIME_SIMPLE,tt:TIME_WITH_SECONDS,ttt:TIME_WITH_SHORT_OFFSET,tttt:TIME_WITH_LONG_OFFSET,T:TIME_24_SIMPLE,TT:TIME_24_WITH_SECONDS,TTT:TIME_24_WITH_SHORT_OFFSET,TTTT:TIME_24_WITH_LONG_OFFSET,f:DATETIME_SHORT,ff:DATETIME_MED,fff:DATETIME_FULL,ffff:DATETIME_HUGE,F:DATETIME_SHORT_WITH_SECONDS,FF:DATETIME_MED_WITH_SECONDS,FFF:DATETIME_FULL_WITH_SECONDS,FFFF:DATETIME_HUGE_WITH_SECONDS};class Formatter{static create(e,r={}){return new Formatter(e,r)}static parseFormat(e){let r=null,a="",i=!1;const o=[];for(let u=0;u<e.length;u++){const c=e.charAt(u);c==="'"?(a.length>0&&o.push({literal:i||/^\s+$/.test(a),val:a}),r=null,a="",i=!i):i||c===r?a+=c:(a.length>0&&o.push({literal:/^\s+$/.test(a),val:a}),a=c,r=c)}return a.length>0&&o.push({literal:i||/^\s+$/.test(a),val:a}),o}static macroTokenToFormatOpts(e){return macroTokenToFormatOpts[e]}constructor(e,r){this.opts=r,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...r}).format()}dtFormatter(e,r={}){return this.loc.dtFormatter(e,{...this.opts,...r})}formatDateTime(e,r){return this.dtFormatter(e,r).format()}formatDateTimeParts(e,r){return this.dtFormatter(e,r).formatToParts()}formatInterval(e,r){return this.dtFormatter(e.start,r).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,r){return this.dtFormatter(e,r).resolvedOptions()}num(e,r=0){if(this.opts.forceSimple)return padStart(e,r);const a={...this.opts};return r>0&&(a.padTo=r),this.loc.numberFormatter(a).format(e)}formatDateTimeFromString(e,r){const a=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",o=(_,y)=>this.loc.extract(e,_,y),u=_=>e.isOffsetFixed&&e.offset===0&&_.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,_.format):"",c=()=>a?meridiemForDateTime(e):o({hour:"numeric",hourCycle:"h12"},"dayperiod"),d=(_,y)=>a?monthForDateTime(e,_):o(y?{month:_}:{month:_,day:"numeric"},"month"),f=(_,y)=>a?weekdayForDateTime(e,_):o(y?{weekday:_}:{weekday:_,month:"long",day:"numeric"},"weekday"),m=_=>{const y=Formatter.macroTokenToFormatOpts(_);return y?this.formatWithSystemDefault(e,y):_},h=_=>a?eraForDateTime(e,_):o({era:_},"era"),p=_=>{switch(_){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return u({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return u({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return u({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return c();case"d":return i?o({day:"numeric"},"day"):this.num(e.day);case"dd":return i?o({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return f("short",!0);case"cccc":return f("long",!0);case"ccccc":return f("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return f("short",!1);case"EEEE":return f("long",!1);case"EEEEE":return f("narrow",!1);case"L":return i?o({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?o({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return d("short",!0);case"LLLL":return d("long",!0);case"LLLLL":return d("narrow",!0);case"M":return i?o({month:"numeric"},"month"):this.num(e.month);case"MM":return i?o({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return d("short",!1);case"MMMM":return d("long",!1);case"MMMMM":return d("narrow",!1);case"y":return i?o({year:"numeric"},"year"):this.num(e.year);case"yy":return i?o({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?o({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?o({year:"numeric"},"year"):this.num(e.year,6);case"G":return h("short");case"GG":return h("long");case"GGGGG":return h("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return m(_)}};return stringifyTokens(Formatter.parseFormat(r),p)}formatDurationFromString(e,r){const a=d=>{switch(d[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},i=d=>f=>{const m=a(f);return m?this.num(d.get(m),f.length):f},o=Formatter.parseFormat(r),u=o.reduce((d,{literal:f,val:m})=>f?d:d.concat(m),[]),c=e.shiftTo(...u.map(a).filter(d=>d));return stringifyTokens(o,i(c))}}const ianaRegex=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function combineRegexes(...t){const e=t.reduce((r,a)=>r+a.source,"");return RegExp(`^${e}$`)}function combineExtractors(...t){return e=>t.reduce(([r,a,i],o)=>{const[u,c,d]=o(e,i);return[{...r,...u},c||a,d]},[{},null,1]).slice(0,2)}function parse(t,...e){if(t==null)return[null,null];for(const[r,a]of e){const i=r.exec(t);if(i)return a(i)}return[null,null]}function simpleParse(...t){return(e,r)=>{const a={};let i;for(i=0;i<t.length;i++)a[t[i]]=parseInteger(e[r+i]);return[a,null,r+i]}}const offsetRegex=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,isoExtendedZone=`(?:${offsetRegex.source}?(?:\\[(${ianaRegex.source})\\])?)?`,isoTimeBaseRegex=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,isoTimeRegex=RegExp(`${isoTimeBaseRegex.source}${isoExtendedZone}`),isoTimeExtensionRegex=RegExp(`(?:T${isoTimeRegex.source})?`),isoYmdRegex=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,isoWeekRegex=/(\d{4})-?W(\d\d)(?:-?(\d))?/,isoOrdinalRegex=/(\d{4})-?(\d{3})/,extractISOWeekData=simpleParse("weekYear","weekNumber","weekDay"),extractISOOrdinalData=simpleParse("year","ordinal"),sqlYmdRegex=/(\d{4})-(\d\d)-(\d\d)/,sqlTimeRegex=RegExp(`${isoTimeBaseRegex.source} ?(?:${offsetRegex.source}|(${ianaRegex.source}))?`),sqlTimeExtensionRegex=RegExp(`(?: ${sqlTimeRegex.source})?`);function int(t,e,r){const a=t[e];return isUndefined(a)?r:parseInteger(a)}function extractISOYmd(t,e){return[{year:int(t,e),month:int(t,e+1,1),day:int(t,e+2,1)},null,e+3]}function extractISOTime(t,e){return[{hours:int(t,e,0),minutes:int(t,e+1,0),seconds:int(t,e+2,0),milliseconds:parseMillis(t[e+3])},null,e+4]}function extractISOOffset(t,e){const r=!t[e]&&!t[e+1],a=signedOffset(t[e+1],t[e+2]),i=r?null:FixedOffsetZone.instance(a);return[{},i,e+3]}function extractIANAZone(t,e){const r=t[e]?IANAZone.create(t[e]):null;return[{},r,e+1]}const isoTimeOnly=RegExp(`^T?${isoTimeBaseRegex.source}$`),isoDuration=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function extractISODuration(t){const[e,r,a,i,o,u,c,d,f]=t,m=e[0]==="-",h=d&&d[0]==="-",p=(_,y=!1)=>_!==void 0&&(y||_&&m)?-_:_;return[{years:p(parseFloating(r)),months:p(parseFloating(a)),weeks:p(parseFloating(i)),days:p(parseFloating(o)),hours:p(parseFloating(u)),minutes:p(parseFloating(c)),seconds:p(parseFloating(d),d==="-0"),milliseconds:p(parseMillis(f),h)}]}const obsOffsets={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function fromStrings(t,e,r,a,i,o,u){const c={year:e.length===2?untruncateYear(parseInteger(e)):parseInteger(e),month:monthsShort.indexOf(r)+1,day:parseInteger(a),hour:parseInteger(i),minute:parseInteger(o)};return u&&(c.second=parseInteger(u)),t&&(c.weekday=t.length>3?weekdaysLong.indexOf(t)+1:weekdaysShort.indexOf(t)+1),c}const rfc2822=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function extractRFC2822(t){const[,e,r,a,i,o,u,c,d,f,m,h]=t,p=fromStrings(e,i,a,r,o,u,c);let _;return d?_=obsOffsets[d]:f?_=0:_=signedOffset(m,h),[p,new FixedOffsetZone(_)]}function preprocessRFC2822(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const rfc1123=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,rfc850=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,ascii=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function extractRFC1123Or850(t){const[,e,r,a,i,o,u,c]=t;return[fromStrings(e,i,a,r,o,u,c),FixedOffsetZone.utcInstance]}function extractASCII(t){const[,e,r,a,i,o,u,c]=t;return[fromStrings(e,c,r,a,i,o,u),FixedOffsetZone.utcInstance]}const isoYmdWithTimeExtensionRegex=combineRegexes(isoYmdRegex,isoTimeExtensionRegex),isoWeekWithTimeExtensionRegex=combineRegexes(isoWeekRegex,isoTimeExtensionRegex),isoOrdinalWithTimeExtensionRegex=combineRegexes(isoOrdinalRegex,isoTimeExtensionRegex),isoTimeCombinedRegex=combineRegexes(isoTimeRegex),extractISOYmdTimeAndOffset=combineExtractors(extractISOYmd,extractISOTime,extractISOOffset,extractIANAZone),extractISOWeekTimeAndOffset=combineExtractors(extractISOWeekData,extractISOTime,extractISOOffset,extractIANAZone),extractISOOrdinalDateAndTime=combineExtractors(extractISOOrdinalData,extractISOTime,extractISOOffset,extractIANAZone),extractISOTimeAndOffset=combineExtractors(extractISOTime,extractISOOffset,extractIANAZone);function parseISODate(t){return parse(t,[isoYmdWithTimeExtensionRegex,extractISOYmdTimeAndOffset],[isoWeekWithTimeExtensionRegex,extractISOWeekTimeAndOffset],[isoOrdinalWithTimeExtensionRegex,extractISOOrdinalDateAndTime],[isoTimeCombinedRegex,extractISOTimeAndOffset])}function parseRFC2822Date(t){return parse(preprocessRFC2822(t),[rfc2822,extractRFC2822])}function parseHTTPDate(t){return parse(t,[rfc1123,extractRFC1123Or850],[rfc850,extractRFC1123Or850],[ascii,extractASCII])}function parseISODuration(t){return parse(t,[isoDuration,extractISODuration])}const extractISOTimeOnly=combineExtractors(extractISOTime);function parseISOTimeOnly(t){return parse(t,[isoTimeOnly,extractISOTimeOnly])}const sqlYmdWithTimeExtensionRegex=combineRegexes(sqlYmdRegex,sqlTimeExtensionRegex),sqlTimeCombinedRegex=combineRegexes(sqlTimeRegex),extractISOTimeOffsetAndIANAZone=combineExtractors(extractISOTime,extractISOOffset,extractIANAZone);function parseSQL(t){return parse(t,[sqlYmdWithTimeExtensionRegex,extractISOYmdTimeAndOffset],[sqlTimeCombinedRegex,extractISOTimeOffsetAndIANAZone])}const INVALID$2="Invalid Duration",lowOrderMatrix={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},casualMatrix={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...lowOrderMatrix},daysInYearAccurate=146097/400,daysInMonthAccurate=146097/4800,accurateMatrix={years:{quarters:4,months:12,weeks:daysInYearAccurate/7,days:daysInYearAccurate,hours:daysInYearAccurate*24,minutes:daysInYearAccurate*24*60,seconds:daysInYearAccurate*24*60*60,milliseconds:daysInYearAccurate*24*60*60*1e3},quarters:{months:3,weeks:daysInYearAccurate/28,days:daysInYearAccurate/4,hours:daysInYearAccurate*24/4,minutes:daysInYearAccurate*24*60/4,seconds:daysInYearAccurate*24*60*60/4,milliseconds:daysInYearAccurate*24*60*60*1e3/4},months:{weeks:daysInMonthAccurate/7,days:daysInMonthAccurate,hours:daysInMonthAccurate*24,minutes:daysInMonthAccurate*24*60,seconds:daysInMonthAccurate*24*60*60,milliseconds:daysInMonthAccurate*24*60*60*1e3},...lowOrderMatrix},orderedUnits$1=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],reverseUnits=orderedUnits$1.slice(0).reverse();function clone$1(t,e,r=!1){const a={values:r?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new Duration(a)}function durationToMillis(t,e){let r=e.milliseconds??0;for(const a of reverseUnits.slice(1))e[a]&&(r+=e[a]*t[a].milliseconds);return r}function normalizeValues(t,e){const r=durationToMillis(t,e)<0?-1:1;orderedUnits$1.reduceRight((a,i)=>{if(isUndefined(e[i]))return a;if(a){const o=e[a]*r,u=t[i][a],c=Math.floor(o/u);e[i]+=c*r,e[a]-=c*u*r}return i},null),orderedUnits$1.reduce((a,i)=>{if(isUndefined(e[i]))return a;if(a){const o=e[a]%1;e[a]-=o,e[i]+=o*t[a][i]}return i},null)}function removeZeroes(t){const e={};for(const[r,a]of Object.entries(t))a!==0&&(e[r]=a);return e}class Duration{constructor(e){const r=e.conversionAccuracy==="longterm"||!1;let a=r?accurateMatrix:casualMatrix;e.matrix&&(a=e.matrix),this.values=e.values,this.loc=e.loc||Locale.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=a,this.isLuxonDuration=!0}static fromMillis(e,r){return Duration.fromObject({milliseconds:e},r)}static fromObject(e,r={}){if(e==null||typeof e!="object")throw new InvalidArgumentError(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Duration({values:normalizeObject(e,Duration.normalizeUnit),loc:Locale.fromObject(r),conversionAccuracy:r.conversionAccuracy,matrix:r.matrix})}static fromDurationLike(e){if(isNumber(e))return Duration.fromMillis(e);if(Duration.isDuration(e))return e;if(typeof e=="object")return Duration.fromObject(e);throw new InvalidArgumentError(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,r){const[a]=parseISODuration(e);return a?Duration.fromObject(a,r):Duration.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,r){const[a]=parseISOTimeOnly(e);return a?Duration.fromObject(a,r):Duration.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,r=null){if(!e)throw new InvalidArgumentError("need to specify a reason the Duration is invalid");const a=e instanceof Invalid?e:new Invalid(e,r);if(Settings.throwOnInvalid)throw new InvalidDurationError(a);return new Duration({invalid:a})}static normalizeUnit(e){const r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!r)throw new InvalidUnitError(e);return r}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,r={}){const a={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?Formatter.create(this.loc,a).formatDurationFromString(this,e):INVALID$2}toHuman(e={}){if(!this.isValid)return INVALID$2;const r=orderedUnits$1.map(a=>{const i=this.values[a];return isUndefined(i)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:a.slice(0,-1)}).format(i)}).filter(a=>a);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=roundTo(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const r=this.toMillis();return r<0||r>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},DateTime.fromMillis(r,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?durationToMillis(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const r=Duration.fromDurationLike(e),a={};for(const i of orderedUnits$1)(hasOwnProperty(r.values,i)||hasOwnProperty(this.values,i))&&(a[i]=r.get(i)+this.get(i));return clone$1(this,{values:a},!0)}minus(e){if(!this.isValid)return this;const r=Duration.fromDurationLike(e);return this.plus(r.negate())}mapUnits(e){if(!this.isValid)return this;const r={};for(const a of Object.keys(this.values))r[a]=asNumber(e(this.values[a],a));return clone$1(this,{values:r},!0)}get(e){return this[Duration.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const r={...this.values,...normalizeObject(e,Duration.normalizeUnit)};return clone$1(this,{values:r})}reconfigure({locale:e,numberingSystem:r,conversionAccuracy:a,matrix:i}={}){const u={loc:this.loc.clone({locale:e,numberingSystem:r}),matrix:i,conversionAccuracy:a};return clone$1(this,u)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return normalizeValues(this.matrix,e),clone$1(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=removeZeroes(this.normalize().shiftToAll().toObject());return clone$1(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(u=>Duration.normalizeUnit(u));const r={},a={},i=this.toObject();let o;for(const u of orderedUnits$1)if(e.indexOf(u)>=0){o=u;let c=0;for(const f in a)c+=this.matrix[f][u]*a[f],a[f]=0;isNumber(i[u])&&(c+=i[u]);const d=Math.trunc(c);r[u]=d,a[u]=(c*1e3-d*1e3)/1e3}else isNumber(i[u])&&(a[u]=i[u]);for(const u in a)a[u]!==0&&(r[o]+=u===o?a[u]:a[u]/this.matrix[o][u]);return normalizeValues(this.matrix,r),clone$1(this,{values:r},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const r of Object.keys(this.values))e[r]=this.values[r]===0?0:-this.values[r];return clone$1(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function r(a,i){return a===void 0||a===0?i===void 0||i===0:a===i}for(const a of orderedUnits$1)if(!r(this.values[a],e.values[a]))return!1;return!0}}const INVALID$1="Invalid Interval";function validateStartEnd(t,e){return!t||!t.isValid?Interval.invalid("missing or invalid start"):!e||!e.isValid?Interval.invalid("missing or invalid end"):e<t?Interval.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class Interval{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,r=null){if(!e)throw new InvalidArgumentError("need to specify a reason the Interval is invalid");const a=e instanceof Invalid?e:new Invalid(e,r);if(Settings.throwOnInvalid)throw new InvalidIntervalError(a);return new Interval({invalid:a})}static fromDateTimes(e,r){const a=friendlyDateTime(e),i=friendlyDateTime(r),o=validateStartEnd(a,i);return o??new Interval({start:a,end:i})}static after(e,r){const a=Duration.fromDurationLike(r),i=friendlyDateTime(e);return Interval.fromDateTimes(i,i.plus(a))}static before(e,r){const a=Duration.fromDurationLike(r),i=friendlyDateTime(e);return Interval.fromDateTimes(i.minus(a),i)}static fromISO(e,r){const[a,i]=(e||"").split("/",2);if(a&&i){let o,u;try{o=DateTime.fromISO(a,r),u=o.isValid}catch{u=!1}let c,d;try{c=DateTime.fromISO(i,r),d=c.isValid}catch{d=!1}if(u&&d)return Interval.fromDateTimes(o,c);if(u){const f=Duration.fromISO(i,r);if(f.isValid)return Interval.after(o,f)}else if(d){const f=Duration.fromISO(a,r);if(f.isValid)return Interval.before(c,f)}}return Interval.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",r){if(!this.isValid)return NaN;const a=this.start.startOf(e,r);let i;return r!=null&&r.useLocaleWeeks?i=this.end.reconfigure({locale:a.locale}):i=this.end,i=i.startOf(e,r),Math.floor(i.diff(a,e).get(e))+(i.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:r}={}){return this.isValid?Interval.fromDateTimes(e||this.s,r||this.e):this}splitAt(...e){if(!this.isValid)return[];const r=e.map(friendlyDateTime).filter(u=>this.contains(u)).sort((u,c)=>u.toMillis()-c.toMillis()),a=[];let{s:i}=this,o=0;for(;i<this.e;){const u=r[o]||this.e,c=+u>+this.e?this.e:u;a.push(Interval.fromDateTimes(i,c)),i=c,o+=1}return a}splitBy(e){const r=Duration.fromDurationLike(e);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s:a}=this,i=1,o;const u=[];for(;a<this.e;){const c=this.start.plus(r.mapUnits(d=>d*i));o=+c>+this.e?this.e:c,u.push(Interval.fromDateTimes(a,o)),a=o,i+=1}return u}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const r=this.s>e.s?this.s:e.s,a=this.e<e.e?this.e:e.e;return r>=a?null:Interval.fromDateTimes(r,a)}union(e){if(!this.isValid)return this;const r=this.s<e.s?this.s:e.s,a=this.e>e.e?this.e:e.e;return Interval.fromDateTimes(r,a)}static merge(e){const[r,a]=e.sort((i,o)=>i.s-o.s).reduce(([i,o],u)=>o?o.overlaps(u)||o.abutsStart(u)?[i,o.union(u)]:[i.concat([o]),u]:[i,u],[[],null]);return a&&r.push(a),r}static xor(e){let r=null,a=0;const i=[],o=e.map(d=>[{time:d.s,type:"s"},{time:d.e,type:"e"}]),u=Array.prototype.concat(...o),c=u.sort((d,f)=>d.time-f.time);for(const d of c)a+=d.type==="s"?1:-1,a===1?r=d.time:(r&&+r!=+d.time&&i.push(Interval.fromDateTimes(r,d.time)),r=null);return Interval.merge(i)}difference(...e){return Interval.xor([this].concat(e)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:INVALID$1}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=DATE_SHORT,r={}){return this.isValid?Formatter.create(this.s.loc.clone(r),e).formatInterval(this):INVALID$1}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:INVALID$1}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:INVALID$1}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:INVALID$1}toFormat(e,{separator:r="  "}={}){return this.isValid?`${this.s.toFormat(e)}${r}${this.e.toFormat(e)}`:INVALID$1}toDuration(e,r){return this.isValid?this.e.diff(this.s,e,r):Duration.invalid(this.invalidReason)}mapEndpoints(e){return Interval.fromDateTimes(e(this.s),e(this.e))}}class Info{static hasDST(e=Settings.defaultZone){const r=DateTime.now().setZone(e).set({month:12});return!e.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(e){return IANAZone.isValidZone(e)}static normalizeZone(e){return normalizeZone(e,Settings.defaultZone)}static getStartOfWeek({locale:e=null,locObj:r=null}={}){return(r||Locale.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:r=null}={}){return(r||Locale.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:r=null}={}){return(r||Locale.create(e)).getWeekendDays().slice()}static months(e="long",{locale:r=null,numberingSystem:a=null,locObj:i=null,outputCalendar:o="gregory"}={}){return(i||Locale.create(r,a,o)).months(e)}static monthsFormat(e="long",{locale:r=null,numberingSystem:a=null,locObj:i=null,outputCalendar:o="gregory"}={}){return(i||Locale.create(r,a,o)).months(e,!0)}static weekdays(e="long",{locale:r=null,numberingSystem:a=null,locObj:i=null}={}){return(i||Locale.create(r,a,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:r=null,numberingSystem:a=null,locObj:i=null}={}){return(i||Locale.create(r,a,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Locale.create(e).meridiems()}static eras(e="short",{locale:r=null}={}){return Locale.create(r,null,"gregory").eras(e)}static features(){return{relative:hasRelative(),localeWeek:hasLocaleWeekInfo()}}}function dayDiff(t,e){const r=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),a=r(e)-r(t);return Math.floor(Duration.fromMillis(a).as("days"))}function highOrderDiffs(t,e,r){const a=[["years",(d,f)=>f.year-d.year],["quarters",(d,f)=>f.quarter-d.quarter+(f.year-d.year)*4],["months",(d,f)=>f.month-d.month+(f.year-d.year)*12],["weeks",(d,f)=>{const m=dayDiff(d,f);return(m-m%7)/7}],["days",dayDiff]],i={},o=t;let u,c;for(const[d,f]of a)r.indexOf(d)>=0&&(u=d,i[d]=f(t,e),c=o.plus(i),c>e?(i[d]--,t=o.plus(i),t>e&&(c=t,i[d]--,t=o.plus(i))):t=c);return[t,i,c,u]}function diff(t,e,r,a){let[i,o,u,c]=highOrderDiffs(t,e,r);const d=e-i,f=r.filter(h=>["hours","minutes","seconds","milliseconds"].indexOf(h)>=0);f.length===0&&(u<e&&(u=i.plus({[c]:1})),u!==i&&(o[c]=(o[c]||0)+d/(u-i)));const m=Duration.fromObject(o,a);return f.length>0?Duration.fromMillis(d,a).shiftTo(...f).plus(m):m}const numberingSystems={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},numberingSystemsUTF16={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},hanidecChars=numberingSystems.hanidec.replace(/[\[|\]]/g,"").split("");function parseDigits(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let r=0;r<t.length;r++){const a=t.charCodeAt(r);if(t[r].search(numberingSystems.hanidec)!==-1)e+=hanidecChars.indexOf(t[r]);else for(const i in numberingSystemsUTF16){const[o,u]=numberingSystemsUTF16[i];a>=o&&a<=u&&(e+=a-o)}}return parseInt(e,10)}else return e}function digitRegex({numberingSystem:t},e=""){return new RegExp(`${numberingSystems[t||"latn"]}${e}`)}const MISSING_FTP="missing Intl.DateTimeFormat.formatToParts support";function intUnit(t,e=r=>r){return{regex:t,deser:([r])=>e(parseDigits(r))}}const NBSP="",spaceOrNBSP=`[ ${NBSP}]`,spaceOrNBSPRegExp=new RegExp(spaceOrNBSP,"g");function fixListRegex(t){return t.replace(/\./g,"\\.?").replace(spaceOrNBSPRegExp,spaceOrNBSP)}function stripInsensitivities(t){return t.replace(/\./g,"").replace(spaceOrNBSPRegExp," ").toLowerCase()}function oneOf(t,e){return t===null?null:{regex:RegExp(t.map(fixListRegex).join("|")),deser:([r])=>t.findIndex(a=>stripInsensitivities(r)===stripInsensitivities(a))+e}}function offset(t,e){return{regex:t,deser:([,r,a])=>signedOffset(r,a),groups:e}}function simple(t){return{regex:t,deser:([e])=>e}}function escapeToken(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function unitForToken(t,e){const r=digitRegex(e),a=digitRegex(e,"{2}"),i=digitRegex(e,"{3}"),o=digitRegex(e,"{4}"),u=digitRegex(e,"{6}"),c=digitRegex(e,"{1,2}"),d=digitRegex(e,"{1,3}"),f=digitRegex(e,"{1,6}"),m=digitRegex(e,"{1,9}"),h=digitRegex(e,"{2,4}"),p=digitRegex(e,"{4,6}"),_=w=>({regex:RegExp(escapeToken(w.val)),deser:([v])=>v,literal:!0}),S=(w=>{if(t.literal)return _(w);switch(w.val){case"G":return oneOf(e.eras("short"),0);case"GG":return oneOf(e.eras("long"),0);case"y":return intUnit(f);case"yy":return intUnit(h,untruncateYear);case"yyyy":return intUnit(o);case"yyyyy":return intUnit(p);case"yyyyyy":return intUnit(u);case"M":return intUnit(c);case"MM":return intUnit(a);case"MMM":return oneOf(e.months("short",!0),1);case"MMMM":return oneOf(e.months("long",!0),1);case"L":return intUnit(c);case"LL":return intUnit(a);case"LLL":return oneOf(e.months("short",!1),1);case"LLLL":return oneOf(e.months("long",!1),1);case"d":return intUnit(c);case"dd":return intUnit(a);case"o":return intUnit(d);case"ooo":return intUnit(i);case"HH":return intUnit(a);case"H":return intUnit(c);case"hh":return intUnit(a);case"h":return intUnit(c);case"mm":return intUnit(a);case"m":return intUnit(c);case"q":return intUnit(c);case"qq":return intUnit(a);case"s":return intUnit(c);case"ss":return intUnit(a);case"S":return intUnit(d);case"SSS":return intUnit(i);case"u":return simple(m);case"uu":return simple(c);case"uuu":return intUnit(r);case"a":return oneOf(e.meridiems(),0);case"kkkk":return intUnit(o);case"kk":return intUnit(h,untruncateYear);case"W":return intUnit(c);case"WW":return intUnit(a);case"E":case"c":return intUnit(r);case"EEE":return oneOf(e.weekdays("short",!1),1);case"EEEE":return oneOf(e.weekdays("long",!1),1);case"ccc":return oneOf(e.weekdays("short",!0),1);case"cccc":return oneOf(e.weekdays("long",!0),1);case"Z":case"ZZ":return offset(new RegExp(`([+-]${c.source})(?::(${a.source}))?`),2);case"ZZZ":return offset(new RegExp(`([+-]${c.source})(${a.source})?`),2);case"z":return simple(/[a-z_+-/]{1,256}?/i);case" ":return simple(/[^\S\n\r]/);default:return _(w)}})(t)||{invalidReason:MISSING_FTP};return S.token=t,S}const partTypeStyleToTokenVal={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function tokenForPart(t,e,r){const{type:a,value:i}=t;if(a==="literal"){const d=/^\s+$/.test(i);return{literal:!d,val:d?" ":i}}const o=e[a];let u=a;a==="hour"&&(e.hour12!=null?u=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?u="hour12":u="hour24":u=r.hour12?"hour12":"hour24");let c=partTypeStyleToTokenVal[u];if(typeof c=="object"&&(c=c[o]),c)return{literal:!1,val:c}}function buildRegex(t){return[`^${t.map(r=>r.regex).reduce((r,a)=>`${r}(${a.source})`,"")}$`,t]}function match(t,e,r){const a=t.match(e);if(a){const i={};let o=1;for(const u in r)if(hasOwnProperty(r,u)){const c=r[u],d=c.groups?c.groups+1:1;!c.literal&&c.token&&(i[c.token.val[0]]=c.deser(a.slice(o,o+d))),o+=d}return[a,i]}else return[a,{}]}function dateTimeFromMatches(t){const e=o=>{switch(o){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let r=null,a;return isUndefined(t.z)||(r=IANAZone.create(t.z)),isUndefined(t.Z)||(r||(r=new FixedOffsetZone(t.Z)),a=t.Z),isUndefined(t.q)||(t.M=(t.q-1)*3+1),isUndefined(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),isUndefined(t.u)||(t.S=parseMillis(t.u)),[Object.keys(t).reduce((o,u)=>{const c=e(u);return c&&(o[c]=t[u]),o},{}),r,a]}let dummyDateTimeCache=null;function getDummyDateTime(){return dummyDateTimeCache||(dummyDateTimeCache=DateTime.fromMillis(1555555555555)),dummyDateTimeCache}function maybeExpandMacroToken(t,e){if(t.literal)return t;const r=Formatter.macroTokenToFormatOpts(t.val),a=formatOptsToTokens(r,e);return a==null||a.includes(void 0)?t:a}function expandMacroTokens(t,e){return Array.prototype.concat(...t.map(r=>maybeExpandMacroToken(r,e)))}function explainFromTokens(t,e,r){const a=expandMacroTokens(Formatter.parseFormat(r),t),i=a.map(u=>unitForToken(u,t)),o=i.find(u=>u.invalidReason);if(o)return{input:e,tokens:a,invalidReason:o.invalidReason};{const[u,c]=buildRegex(i),d=RegExp(u,"i"),[f,m]=match(e,d,c),[h,p,_]=m?dateTimeFromMatches(m):[null,null,void 0];if(hasOwnProperty(m,"a")&&hasOwnProperty(m,"H"))throw new ConflictingSpecificationError("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:a,regex:d,rawMatches:f,matches:m,result:h,zone:p,specificOffset:_}}}function parseFromTokens(t,e,r){const{result:a,zone:i,specificOffset:o,invalidReason:u}=explainFromTokens(t,e,r);return[a,i,o,u]}function formatOptsToTokens(t,e){if(!t)return null;const a=Formatter.create(e,t).dtFormatter(getDummyDateTime()),i=a.formatToParts(),o=a.resolvedOptions();return i.map(u=>tokenForPart(u,t,o))}const INVALID="Invalid DateTime",MAX_DATE=864e13;function unsupportedZone(t){return new Invalid("unsupported zone",`the zone "${t.name}" is not supported`)}function possiblyCachedWeekData(t){return t.weekData===null&&(t.weekData=gregorianToWeek(t.c)),t.weekData}function possiblyCachedLocalWeekData(t){return t.localWeekData===null&&(t.localWeekData=gregorianToWeek(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function clone(t,e){const r={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new DateTime({...r,...e,old:r})}function fixOffset(t,e,r){let a=t-e*60*1e3;const i=r.offset(a);if(e===i)return[a,e];a-=(i-e)*60*1e3;const o=r.offset(a);return i===o?[a,i]:[t-Math.min(i,o)*60*1e3,Math.max(i,o)]}function tsToObj(t,e){t+=e*60*1e3;const r=new Date(t);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function objToTS(t,e,r){return fixOffset(objToLocalTS(t),e,r)}function adjustTime(t,e){const r=t.o,a=t.c.year+Math.trunc(e.years),i=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,o={...t.c,year:a,month:i,day:Math.min(t.c.day,daysInMonth(a,i))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},u=Duration.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),c=objToLocalTS(o);let[d,f]=fixOffset(c,r,t.zone);return u!==0&&(d+=u,f=t.zone.offset(d)),{ts:d,o:f}}function parseDataToDateTime(t,e,r,a,i,o){const{setZone:u,zone:c}=r;if(t&&Object.keys(t).length!==0||e){const d=e||c,f=DateTime.fromObject(t,{...r,zone:d,specificOffset:o});return u?f:f.setZone(c)}else return DateTime.invalid(new Invalid("unparsable",`the input "${i}" can't be parsed as ${a}`))}function toTechFormat(t,e,r=!0){return t.isValid?Formatter.create(Locale.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(t,e):null}function toISODate(t,e){const r=t.c.year>9999||t.c.year<0;let a="";return r&&t.c.year>=0&&(a+="+"),a+=padStart(t.c.year,r?6:4),e?(a+="-",a+=padStart(t.c.month),a+="-",a+=padStart(t.c.day)):(a+=padStart(t.c.month),a+=padStart(t.c.day)),a}function toISOTime(t,e,r,a,i,o){let u=padStart(t.c.hour);return e?(u+=":",u+=padStart(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!r)&&(u+=":")):u+=padStart(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!r)&&(u+=padStart(t.c.second),(t.c.millisecond!==0||!a)&&(u+=".",u+=padStart(t.c.millisecond,3))),i&&(t.isOffsetFixed&&t.offset===0&&!o?u+="Z":t.o<0?(u+="-",u+=padStart(Math.trunc(-t.o/60)),u+=":",u+=padStart(Math.trunc(-t.o%60))):(u+="+",u+=padStart(Math.trunc(t.o/60)),u+=":",u+=padStart(Math.trunc(t.o%60)))),o&&(u+="["+t.zone.ianaName+"]"),u}const defaultUnitValues={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},defaultWeekUnitValues={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},defaultOrdinalUnitValues={ordinal:1,hour:0,minute:0,second:0,millisecond:0},orderedUnits=["year","month","day","hour","minute","second","millisecond"],orderedWeekUnits=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],orderedOrdinalUnits=["year","ordinal","hour","minute","second","millisecond"];function normalizeUnit(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new InvalidUnitError(t);return e}function normalizeUnitWithLocalWeeks(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return normalizeUnit(t)}}function quickDT(t,e){const r=normalizeZone(e.zone,Settings.defaultZone),a=Locale.fromObject(e),i=Settings.now();let o,u;if(isUndefined(t.year))o=i;else{for(const f of orderedUnits)isUndefined(t[f])&&(t[f]=defaultUnitValues[f]);const c=hasInvalidGregorianData(t)||hasInvalidTimeData(t);if(c)return DateTime.invalid(c);const d=r.offset(i);[o,u]=objToTS(t,d,r)}return new DateTime({ts:o,zone:r,loc:a,o:u})}function diffRelative(t,e,r){const a=isUndefined(r.round)?!0:r.round,i=(u,c)=>(u=roundTo(u,a||r.calendary?0:2,!0),e.loc.clone(r).relFormatter(r).format(u,c)),o=u=>r.calendary?e.hasSame(t,u)?0:e.startOf(u).diff(t.startOf(u),u).get(u):e.diff(t,u).get(u);if(r.unit)return i(o(r.unit),r.unit);for(const u of r.units){const c=o(u);if(Math.abs(c)>=1)return i(c,u)}return i(t>e?-0:0,r.units[r.units.length-1])}function lastOpts(t){let e={},r;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],r=Array.from(t).slice(0,t.length-1)):r=Array.from(t),[e,r]}class DateTime{constructor(e){const r=e.zone||Settings.defaultZone;let a=e.invalid||(Number.isNaN(e.ts)?new Invalid("invalid input"):null)||(r.isValid?null:unsupportedZone(r));this.ts=isUndefined(e.ts)?Settings.now():e.ts;let i=null,o=null;if(!a)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(r))[i,o]=[e.old.c,e.old.o];else{const c=r.offset(this.ts);i=tsToObj(this.ts,c),a=Number.isNaN(i.year)?new Invalid("invalid input"):null,i=a?null:i,o=a?null:c}this._zone=r,this.loc=e.loc||Locale.create(),this.invalid=a,this.weekData=null,this.localWeekData=null,this.c=i,this.o=o,this.isLuxonDateTime=!0}static now(){return new DateTime({})}static local(){const[e,r]=lastOpts(arguments),[a,i,o,u,c,d,f]=r;return quickDT({year:a,month:i,day:o,hour:u,minute:c,second:d,millisecond:f},e)}static utc(){const[e,r]=lastOpts(arguments),[a,i,o,u,c,d,f]=r;return e.zone=FixedOffsetZone.utcInstance,quickDT({year:a,month:i,day:o,hour:u,minute:c,second:d,millisecond:f},e)}static fromJSDate(e,r={}){const a=isDate(e)?e.valueOf():NaN;if(Number.isNaN(a))return DateTime.invalid("invalid input");const i=normalizeZone(r.zone,Settings.defaultZone);return i.isValid?new DateTime({ts:a,zone:i,loc:Locale.fromObject(r)}):DateTime.invalid(unsupportedZone(i))}static fromMillis(e,r={}){if(isNumber(e))return e<-MAX_DATE||e>MAX_DATE?DateTime.invalid("Timestamp out of range"):new DateTime({ts:e,zone:normalizeZone(r.zone,Settings.defaultZone),loc:Locale.fromObject(r)});throw new InvalidArgumentError(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,r={}){if(isNumber(e))return new DateTime({ts:e*1e3,zone:normalizeZone(r.zone,Settings.defaultZone),loc:Locale.fromObject(r)});throw new InvalidArgumentError("fromSeconds requires a numerical input")}static fromObject(e,r={}){e=e||{};const a=normalizeZone(r.zone,Settings.defaultZone);if(!a.isValid)return DateTime.invalid(unsupportedZone(a));const i=Locale.fromObject(r),o=normalizeObject(e,normalizeUnitWithLocalWeeks),{minDaysInFirstWeek:u,startOfWeek:c}=usesLocalWeekValues(o,i),d=Settings.now(),f=isUndefined(r.specificOffset)?a.offset(d):r.specificOffset,m=!isUndefined(o.ordinal),h=!isUndefined(o.year),p=!isUndefined(o.month)||!isUndefined(o.day),_=h||p,y=o.weekYear||o.weekNumber;if((_||m)&&y)throw new ConflictingSpecificationError("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(p&&m)throw new ConflictingSpecificationError("Can't mix ordinal dates with month/day");const S=y||o.weekday&&!_;let w,v,g=tsToObj(d,f);S?(w=orderedWeekUnits,v=defaultWeekUnitValues,g=gregorianToWeek(g,u,c)):m?(w=orderedOrdinalUnits,v=defaultOrdinalUnitValues,g=gregorianToOrdinal(g)):(w=orderedUnits,v=defaultUnitValues);let b=!1;for(const A of w){const N=o[A];isUndefined(N)?b?o[A]=v[A]:o[A]=g[A]:b=!0}const T=S?hasInvalidWeekData(o,u,c):m?hasInvalidOrdinalData(o):hasInvalidGregorianData(o),O=T||hasInvalidTimeData(o);if(O)return DateTime.invalid(O);const k=S?weekToGregorian(o,u,c):m?ordinalToGregorian(o):o,[$,M]=objToTS(k,f,a),R=new DateTime({ts:$,zone:a,o:M,loc:i});return o.weekday&&_&&e.weekday!==R.weekday?DateTime.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${R.toISO()}`):R}static fromISO(e,r={}){const[a,i]=parseISODate(e);return parseDataToDateTime(a,i,r,"ISO 8601",e)}static fromRFC2822(e,r={}){const[a,i]=parseRFC2822Date(e);return parseDataToDateTime(a,i,r,"RFC 2822",e)}static fromHTTP(e,r={}){const[a,i]=parseHTTPDate(e);return parseDataToDateTime(a,i,r,"HTTP",r)}static fromFormat(e,r,a={}){if(isUndefined(e)||isUndefined(r))throw new InvalidArgumentError("fromFormat requires an input string and a format");const{locale:i=null,numberingSystem:o=null}=a,u=Locale.fromOpts({locale:i,numberingSystem:o,defaultToEN:!0}),[c,d,f,m]=parseFromTokens(u,e,r);return m?DateTime.invalid(m):parseDataToDateTime(c,d,a,`format ${r}`,e,f)}static fromString(e,r,a={}){return DateTime.fromFormat(e,r,a)}static fromSQL(e,r={}){const[a,i]=parseSQL(e);return parseDataToDateTime(a,i,r,"SQL",e)}static invalid(e,r=null){if(!e)throw new InvalidArgumentError("need to specify a reason the DateTime is invalid");const a=e instanceof Invalid?e:new Invalid(e,r);if(Settings.throwOnInvalid)throw new InvalidDateTimeError(a);return new DateTime({invalid:a})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,r={}){const a=formatOptsToTokens(e,Locale.fromObject(r));return a?a.map(i=>i?i.val:null).join(""):null}static expandFormat(e,r={}){return expandMacroTokens(Formatter.parseFormat(e),Locale.fromObject(r)).map(i=>i.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?possiblyCachedWeekData(this).weekYear:NaN}get weekNumber(){return this.isValid?possiblyCachedWeekData(this).weekNumber:NaN}get weekday(){return this.isValid?possiblyCachedWeekData(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?possiblyCachedLocalWeekData(this).weekday:NaN}get localWeekNumber(){return this.isValid?possiblyCachedLocalWeekData(this).weekNumber:NaN}get localWeekYear(){return this.isValid?possiblyCachedLocalWeekData(this).weekYear:NaN}get ordinal(){return this.isValid?gregorianToOrdinal(this.c).ordinal:NaN}get monthShort(){return this.isValid?Info.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Info.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Info.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Info.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,r=6e4,a=objToLocalTS(this.c),i=this.zone.offset(a-e),o=this.zone.offset(a+e),u=this.zone.offset(a-i*r),c=this.zone.offset(a-o*r);if(u===c)return[this];const d=a-u*r,f=a-c*r,m=tsToObj(d,u),h=tsToObj(f,c);return m.hour===h.hour&&m.minute===h.minute&&m.second===h.second&&m.millisecond===h.millisecond?[clone(this,{ts:d}),clone(this,{ts:f})]:[this]}get isInLeapYear(){return isLeapYear(this.year)}get daysInMonth(){return daysInMonth(this.year,this.month)}get daysInYear(){return this.isValid?daysInYear(this.year):NaN}get weeksInWeekYear(){return this.isValid?weeksInWeekYear(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?weeksInWeekYear(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:r,numberingSystem:a,calendar:i}=Formatter.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:r,numberingSystem:a,outputCalendar:i}}toUTC(e=0,r={}){return this.setZone(FixedOffsetZone.instance(e),r)}toLocal(){return this.setZone(Settings.defaultZone)}setZone(e,{keepLocalTime:r=!1,keepCalendarTime:a=!1}={}){if(e=normalizeZone(e,Settings.defaultZone),e.equals(this.zone))return this;if(e.isValid){let i=this.ts;if(r||a){const o=e.offset(this.ts),u=this.toObject();[i]=objToTS(u,o,e)}return clone(this,{ts:i,zone:e})}else return DateTime.invalid(unsupportedZone(e))}reconfigure({locale:e,numberingSystem:r,outputCalendar:a}={}){const i=this.loc.clone({locale:e,numberingSystem:r,outputCalendar:a});return clone(this,{loc:i})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const r=normalizeObject(e,normalizeUnitWithLocalWeeks),{minDaysInFirstWeek:a,startOfWeek:i}=usesLocalWeekValues(r,this.loc),o=!isUndefined(r.weekYear)||!isUndefined(r.weekNumber)||!isUndefined(r.weekday),u=!isUndefined(r.ordinal),c=!isUndefined(r.year),d=!isUndefined(r.month)||!isUndefined(r.day),f=c||d,m=r.weekYear||r.weekNumber;if((f||u)&&m)throw new ConflictingSpecificationError("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(d&&u)throw new ConflictingSpecificationError("Can't mix ordinal dates with month/day");let h;o?h=weekToGregorian({...gregorianToWeek(this.c,a,i),...r},a,i):isUndefined(r.ordinal)?(h={...this.toObject(),...r},isUndefined(r.day)&&(h.day=Math.min(daysInMonth(h.year,h.month),h.day))):h=ordinalToGregorian({...gregorianToOrdinal(this.c),...r});const[p,_]=objToTS(h,this.o,this.zone);return clone(this,{ts:p,o:_})}plus(e){if(!this.isValid)return this;const r=Duration.fromDurationLike(e);return clone(this,adjustTime(this,r))}minus(e){if(!this.isValid)return this;const r=Duration.fromDurationLike(e).negate();return clone(this,adjustTime(this,r))}startOf(e,{useLocaleWeeks:r=!1}={}){if(!this.isValid)return this;const a={},i=Duration.normalizeUnit(e);switch(i){case"years":a.month=1;case"quarters":case"months":a.day=1;case"weeks":case"days":a.hour=0;case"hours":a.minute=0;case"minutes":a.second=0;case"seconds":a.millisecond=0;break}if(i==="weeks")if(r){const o=this.loc.getStartOfWeek(),{weekday:u}=this;u<o&&(a.weekNumber=this.weekNumber-1),a.weekday=o}else a.weekday=1;if(i==="quarters"){const o=Math.ceil(this.month/3);a.month=(o-1)*3+1}return this.set(a)}endOf(e,r){return this.isValid?this.plus({[e]:1}).startOf(e,r).minus(1):this}toFormat(e,r={}){return this.isValid?Formatter.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,e):INVALID}toLocaleString(e=DATE_SHORT,r={}){return this.isValid?Formatter.create(this.loc.clone(r),e).formatDateTime(this):INVALID}toLocaleParts(e={}){return this.isValid?Formatter.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:r=!1,suppressMilliseconds:a=!1,includeOffset:i=!0,extendedZone:o=!1}={}){if(!this.isValid)return null;const u=e==="extended";let c=toISODate(this,u);return c+="T",c+=toISOTime(this,u,r,a,i,o),c}toISODate({format:e="extended"}={}){return this.isValid?toISODate(this,e==="extended"):null}toISOWeekDate(){return toTechFormat(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:r=!1,includeOffset:a=!0,includePrefix:i=!1,extendedZone:o=!1,format:u="extended"}={}){return this.isValid?(i?"T":"")+toISOTime(this,u==="extended",r,e,a,o):null}toRFC2822(){return toTechFormat(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return toTechFormat(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?toISODate(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:r=!1,includeOffsetSpace:a=!0}={}){let i="HH:mm:ss.SSS";return(r||e)&&(a&&(i+=" "),r?i+="z":e&&(i+="ZZ")),toTechFormat(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():INVALID}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const r={...this.c};return e.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,r="milliseconds",a={}){if(!this.isValid||!e.isValid)return Duration.invalid("created by diffing an invalid DateTime");const i={locale:this.locale,numberingSystem:this.numberingSystem,...a},o=maybeArray(r).map(Duration.normalizeUnit),u=e.valueOf()>this.valueOf(),c=u?this:e,d=u?e:this,f=diff(c,d,o,i);return u?f.negate():f}diffNow(e="milliseconds",r={}){return this.diff(DateTime.now(),e,r)}until(e){return this.isValid?Interval.fromDateTimes(this,e):this}hasSame(e,r,a){if(!this.isValid)return!1;const i=e.valueOf(),o=this.setZone(e.zone,{keepLocalTime:!0});return o.startOf(r,a)<=i&&i<=o.endOf(r,a)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const r=e.base||DateTime.fromObject({},{zone:this.zone}),a=e.padding?this<r?-e.padding:e.padding:0;let i=["years","months","days","hours","minutes","seconds"],o=e.unit;return Array.isArray(e.unit)&&(i=e.unit,o=void 0),diffRelative(r,this.plus(a),{...e,numeric:"always",units:i,unit:o})}toRelativeCalendar(e={}){return this.isValid?diffRelative(e.base||DateTime.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(DateTime.isDateTime))throw new InvalidArgumentError("min requires all arguments be DateTimes");return bestBy(e,r=>r.valueOf(),Math.min)}static max(...e){if(!e.every(DateTime.isDateTime))throw new InvalidArgumentError("max requires all arguments be DateTimes");return bestBy(e,r=>r.valueOf(),Math.max)}static fromFormatExplain(e,r,a={}){const{locale:i=null,numberingSystem:o=null}=a,u=Locale.fromOpts({locale:i,numberingSystem:o,defaultToEN:!0});return explainFromTokens(u,e,r)}static fromStringExplain(e,r,a={}){return DateTime.fromFormatExplain(e,r,a)}static get DATE_SHORT(){return DATE_SHORT}static get DATE_MED(){return DATE_MED}static get DATE_MED_WITH_WEEKDAY(){return DATE_MED_WITH_WEEKDAY}static get DATE_FULL(){return DATE_FULL}static get DATE_HUGE(){return DATE_HUGE}static get TIME_SIMPLE(){return TIME_SIMPLE}static get TIME_WITH_SECONDS(){return TIME_WITH_SECONDS}static get TIME_WITH_SHORT_OFFSET(){return TIME_WITH_SHORT_OFFSET}static get TIME_WITH_LONG_OFFSET(){return TIME_WITH_LONG_OFFSET}static get TIME_24_SIMPLE(){return TIME_24_SIMPLE}static get TIME_24_WITH_SECONDS(){return TIME_24_WITH_SECONDS}static get TIME_24_WITH_SHORT_OFFSET(){return TIME_24_WITH_SHORT_OFFSET}static get TIME_24_WITH_LONG_OFFSET(){return TIME_24_WITH_LONG_OFFSET}static get DATETIME_SHORT(){return DATETIME_SHORT}static get DATETIME_SHORT_WITH_SECONDS(){return DATETIME_SHORT_WITH_SECONDS}static get DATETIME_MED(){return DATETIME_MED}static get DATETIME_MED_WITH_SECONDS(){return DATETIME_MED_WITH_SECONDS}static get DATETIME_MED_WITH_WEEKDAY(){return DATETIME_MED_WITH_WEEKDAY}static get DATETIME_FULL(){return DATETIME_FULL}static get DATETIME_FULL_WITH_SECONDS(){return DATETIME_FULL_WITH_SECONDS}static get DATETIME_HUGE(){return DATETIME_HUGE}static get DATETIME_HUGE_WITH_SECONDS(){return DATETIME_HUGE_WITH_SECONDS}}function friendlyDateTime(t){if(DateTime.isDateTime(t))return t;if(t&&t.valueOf&&isNumber(t.valueOf()))return DateTime.fromJSDate(t);if(t&&typeof t=="object")return DateTime.fromObject(t);throw new InvalidArgumentError(`Unknown datetime argument: ${t}, of type ${typeof t}`)}class Token{constructor(e,r){this._value=e,this._type=r,this._format=""}get value(){return this._value}set value(e){this._value=e}get type(){return this._type}set type(e){this._type=e}get format(){return this._format}set format(e){this._format=e}}class Parser{constructor(e,r){this.name=e,this.pattern=r}parse(e){const r=this.pattern.exec(e);if(!r||!r.groups)return;let a=[];for(const[i,o]of Object.entries(r.groups))o&&a.push(new Token(o,/delim\d+/.test(i)?"delimiter":i));return{tokens:a,index:r.index,parser:this.name}}}const abbreviatedTimezones="UT|CAT|CET|CVT|EAT|EET|GMT|MUT|RET|SAST|SCT|WAST|WAT|WEST|WET|WST|WT|ADT|AFT|ALMT|AMST|AMT|ANAST|ANAT|AQTT|AST|AZST|AZT|BNT|BST|BTT|CHOST|CHOT|CST|EEST|EET|GET|GST|HKT|HOVST|HOVT|ICT|IDT|IRDT|IRKST|IRKT|IST|JST|KGT|KRAST|KRAT|KST|MAGST|MAGT|MMT|MSK|MVT|NOVST|NOVT|NPT|OMSST|OMST|ORAT|PETST|PETT|PHT|PKT|PYT|QYZT|SAKT|SGT|SRET|TJT|TLT|TMT|TRT|ULAST|ULAT|UZT|VLAST|VLAT|WIB|WIT|YAKST|YAKT|YEKST|YEKT|ART|CAST|CEST|CLST|CLT|DAVT|DDUT|GMT|MAWT|NZDT|NZST|ROTT|SYOT|VOST|ADT|AST|AT|AZOST|AZOT|ACDT|ACST|ACT|ACWST|AEDT|AEST|AET|AWDT|AWST|CXT|LHDT|LHST|NFDT|NFT|AST|AT|CDT|CIDST|CIST|CST|EDT|EST|ET|CST|CT|EST|ET|BST|CEST|CET|EEST|EET|FET|GET|GMT|IST|KUYT|MSD|MSK|SAMT|TRT|WEST|WET|CCT|EAT|IOT|TFT|ADT|AKDT|AKST|AST|AT|CDT|CST|CT|EDT|EGST|EGT|ET|GMT|HDT|HST|MDT|MST|MT|NDT|NST|PDT|PMDT|PMST|PST|PT|WGST|WGT|AoE|BST|CHADT|CHAST|CHUT|CKT|ChST|EASST|EAST|FJST|FJT|GALT|GAMT|GILT|HST|KOST|LINT|MART|MHT|NCT|NRT|NUT|NZDT|NZST|PGT|PHOT|PONT|PST|PWT|SBT|SST|TAHT|TKT|TOST|TOT|TVT|VUT|WAKT|WFT|WST|YAPT|ACT|AMST|AMT|ART|BOT|BRST|BRT|CLST|CLT|COT|ECT|FKST|FKT|FNT|GFT|GST|GYT|PET|PYST|PYT|SRT|UYST|UYT|VET|WARST",dayOfMonthAndMonthNameDateFormatParser=new Parser("DayOfMonthAndMonthNameDateFormatParser",new RegExp(`^(?<dayOfWeek>(?:Sun?|Mon?|Tu(?:es)?|We(?:dnes)?|Th(?:urs)?|Fri?|Sa(?:tur)?)(?:day)?)?(?<delim1>,)?(?<delim2>\\s)?(?<dayOfMonth>(?:3[0-1]|[1-2]\\d|0?[1-9])(?:st|nd|rd|th)?)(?<delim3>\\s)(?<month>Jan(?:uary)?|Feb(?:ruary)?|Mar(?:ch)?|Apr(?:il)?|May|June?|July?|Aug(?:ust)?|Sep(?:tember)?|Oct(?:ober)?|Nov(?:ember)?|Dec(?:ember)?)(?<delim4>,)?(?<delim5>\\s)?(?<year>\\d{4}|\\d{2})?(?:(?<delim6>,)?(?<delim7>\\s)(?:(?<twentyFourHour>2[0-3]|0?\\d|1\\d)|(?<twelveHour>0?[1-9]|1[0-2]))(?:(?<delim8>[:.])(?<minute>[0-5]\\d))?(?:(?<delim9>[:.])(?<second>[0-5]\\d))?(?:(?<delim10>.)(?<millisecond>\\d{3}))?(?<delim11>\\s)?(?<meridiem>am|pm|AM|PM)?(?:(?<delim12>\\s)(?<timezone>[+-]\\d{2}(?::?\\d{2})?|Z|${abbreviatedTimezones}))?)?$`)),iSO8601BasicDateTimeFormatParser=new Parser("ISO8601BasicDateTimeFormatParser",new RegExp("^(?<year>[+-]\\d{6}|\\d{4})(?:(?<month>\\d{2})(?:(?<dayOfMonth>\\d{2}))?|(?<escapeText>W)(?<isoWeekOfYear>\\d{2})(?:(?<isoDayOfWeek>\\d))?|(?<dayOfYear>\\d{3}))?(?:(?<delim1>T| )(?:(?<twentyFourHour>\\d{2})(?:(?<minute>\\d{2})(?:(?<second>\\d{2})(?:(?<delim2>[.,])(?<millisecond>\\d{1,9}))?)?)?)(?<timezone>[+-]\\d{2}(?::?\\d{2})?|Z)?)?$")),iSO8601ExtendedDateTimeFormatParser=new Parser("ISO8601ExtendedDateTimeFormatParser",new RegExp("^(?<year>[+-]\\d{6}|\\d{4})(?<delim1>\\-)(?:(?<month>\\d{2})(?:(?<delim2>\\-)(?<dayOfMonth>\\d{2}))?|(?<escapeText>W)(?<isoWeekOfYear>\\d{2})(?:(?<delim3>\\-)(?<isoDayOfWeek>\\d))?|(?<dayOfYear>\\d{3}))(?:(?<delim4>T| )(?:(?<twentyFourHour>\\d{2})(?:(?<delim5>:)(?<minute>\\d{2})(?:(?<delim6>:)(?<second>\\d{2})(?:(?<delim7>[.,])(?<millisecond>\\d{1,9}))?)?)?)(?<timezone>[+-]\\d{2}(?::?\\d{2})?|Z)?)?$")),monthNameAndDayOfMonthDateFormatParser=new Parser("MonthNameAndDayOfMonthDateFormatParser",new RegExp(`^(?<dayOfWeek>(?:Sun?|Mon?|Tu(?:es)?|We(?:dnes)?|Th(?:urs)?|Fri?|Sa(?:tur)?)(?:day)?)?(?<delim1>,)?(?<delim2>\\s)?(?<month>Jan(?:uary)?|Feb(?:ruary)?|Mar(?:ch)?|Apr(?:il)?|May|June?|July?|Aug(?:ust)?|Sep(?:tember)?|Oct(?:ober)?|Nov(?:ember)?|Dec(?:ember)?)(?<delim3>\\s)(?<dayOfMonth>(?:3[0-1]|[1-2]\\d|0?[1-9])(?:st|nd|rd|th)?)(?<delim4>,)?(?<delim5>\\s)?(?<year>\\d{4}|\\d{2})?(?:(?:(?<delim6>,)?(?<delim7>\\s)(?:(?<twentyFourHour>2[0-3]|0?\\d|1\\d)|(?<twelveHour>0?[1-9]|1[0-2]))(?:(?<delim8>[:.])(?<minute>[0-5]\\d))?(?:(?<delim9>[:.])(?<second>[0-5]\\d))?(?:(?<delim10>.)(?<millisecond>\\d{3}))?(?<delim11>\\s)?(?<meridiem>am|pm|AM|PM)?(?:(?<delim12>\\s)(?<timezone>[+-]\\d{2}(?::?\\d{2})?|Z|${abbreviatedTimezones}))?)?)?$`)),rFC2822DateTimeFormatParser=new Parser("RFC2822DateTimeFormatParser",new RegExp("^(?:(?<dayOfWeek>Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?<delim1>,)?(?<delim2>\\s))?(?<dayOfMonth>\\d{1,2})(?<delim3>\\s)(?<month>Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)(?<delim4>\\s)(?<year>\\d{2,4})(?<delim5>\\s)(?<twentyFourHour>\\d{2})(?<delim6>:)(?<minute>\\d{2})(?:(?<delim7>:)(?<second>\\d{2}))?(?<delim8>\\s)(?<timezone>(?:(?:UT|GMT|[ECMP][SD]T)|[Zz]|[+-]\\d{4}))$")),slashDelimitedDateTimeFormatParser=new Parser("SlashDelimitedDateFormatParser",new RegExp(`^(?<year>\\d{4}|\\d{2})(?<delim1>[/.-])(?<month>0?[1-9]|1[0-2])(?:(?<delim2>[/.-])(?<dayOfMonth>0?[1-9]|[1-2]\\d|3[0-1]))?(?:(?:(?<delim3>,)?(?<delim4>\\s)(?:(?<twentyFourHour>2[0-3]|0?\\d|1\\d)|(?<twelveHour>0?[1-9]|1[0-2]))(?:(?<delim5>[:.])(?<minute>[0-5]\\d))?(?:(?<delim6>[:.])(?<second>[0-5]\\d))?(?:(?<delim7>.)(?<millisecond>\\d{3}))?(?<delim8>\\s)?(?<meridiem>am|pm|AM|PM)?(?:(?<delim9>\\s)(?<timezone>[+-]\\d{2}(?::?\\d{2})?|Z|${abbreviatedTimezones}))?)?)?$`)),twelveHourTimeFormatParser=new Parser("TwelveHourTimeFormatParser",new RegExp(`^(?<twelveHour>0?[1-9]|1[0-2])(?:(?<delim1>[:.])(?<minute>[0-5]\\d))?(?:(?<delim2>[:.])(?<second>[0-5]\\d))?(?:(?<delim3>.)(?<millisecond>\\d{3}))?(?<delim4>\\s)?(?<meridiem>am|pm|AM|PM)(?:(?<delim5>\\s)(?<timezone>[+-]\\d{2}(?::?\\d{2})?|Z|${abbreviatedTimezones}))?$`)),twentyFourHourTimeFormatParser=new Parser("TwentyFourHourTimeFormatParser",new RegExp(`^(?<twentyFourHour>2[0-3]|0?\\d|1\\d)(?<delim1>[:.])(?<minute>[0-5]\\d)(?:(?<delim2>[:.])(?<second>[0-5]\\d))?(?:(?<delim3>.)(?<millisecond>\\d{3}))?(?:(?<delim4>\\s)(?<timezone>[+-]\\d{2}(?::?\\d{2})?|Z|${abbreviatedTimezones}))?$`)),uKStyleSlashDelimitedDateTimeFormatParser=new Parser("UKStyleSlashDelimitedDateFormatParser",new RegExp(`^(?<dayOfMonth>0?[1-9]|[1-2]\\d|3[0-1])(?<delim1>[/.-])(?<month>0?[1-9]|1[0-2])(?:(?<delim2>[/.-])(?<year>\\d{4}|\\d{2}))?(?:(?:(?<delim3>,)?(?<delim4>\\s)(?:(?<twentyFourHour>2[0-3]|0?\\d|1\\d)|(?<twelveHour>0?[1-9]|1[0-2]))(?:(?<delim5>[:.])(?<minute>[0-5]\\d))?(?:(?<delim6>[:.])(?<second>[0-5]\\d))?(?:(?<delim7>.)(?<millisecond>\\d{3}))?(?<delim8>\\s)?(?<meridiem>am|pm|AM|PM)?(?:(?<delim9>\\s)(?<timezone>[+-]\\d{2}(?::?\\d{2})?|Z|${abbreviatedTimezones}))?)?)?$`)),uSStyleSlashDelimitedDateTimeFormatParser=new Parser("USStyleSlashDelimitedDateFormatParser",new RegExp(`^(?<month>0?[1-9]|1[0-2])(?<delim1>[/.-])(?<dayOfMonth>0?[1-9]|[1-2]\\d|3[0-1])(?:(?<delim2>[/.-])(?<year>\\d{4}|\\d{2}))?(?:(?:(?<delim3>,)?(?<delim4>\\s)(?:(?<twentyFourHour>2[0-3]|0?\\d|1\\d)|(?<twelveHour>0?[1-9]|1[0-2]))(?:(?<delim5>[:.])(?<minute>[0-5]\\d))?(?:(?<delim6>[:.])(?<second>[0-5]\\d))?(?:(?<delim7>.)(?<millisecond>\\d{3}))?(?<delim8>\\s)?(?<meridiem>am|pm|AM|PM)?(?:(?<delim9>\\s)(?<timezone>[+-]\\d{2}(?::?\\d{2})?|Z|${abbreviatedTimezones}))?)?)?$`)),dashDelimitedWithMonthNameDateTimeFormatParser=new Parser("DashDelimitedWithMonthNameDateTimeFormatParser",new RegExp(`^(?<dayOfMonth>0?[1-9]|[1-2]\\d|3[0-1])(?<delim1>-)(?<month>Jan(?:uary)?|Feb(?:ruary)?|Mar(?:ch)?|Apr(?:il)?|May|June?|July?|Aug(?:ust)?|Sep(?:tember)?|Oct(?:ober)?|Nov(?:ember)?|Dec(?:ember)?)(?<delim2>-)?(?<year>\\d{4}|\\d{2})?(?:(?:(?<delim3>,)?(?<delim4>\\s)(?:(?<twentyFourHour>2[0-3]|0?\\d|1\\d)|(?<twelveHour>0?[1-9]|1[0-2]))(?:(?<delim5>[:.])(?<minute>[0-5]\\d))?(?:(?<delim6>[:.])(?<second>[0-5]\\d))?(?:(?<delim7>.)(?<millisecond>\\d{3}))?(?<delim8>\\s)?(?<meridiem>am|pm|AM|PM)?(?:(?<delim9>\\s)(?<timezone>[+-]\\d{2}(?::?\\d{2})?|Z|${abbreviatedTimezones}))?)?)?$`)),parsers=[iSO8601ExtendedDateTimeFormatParser,iSO8601BasicDateTimeFormatParser,rFC2822DateTimeFormatParser,slashDelimitedDateTimeFormatParser,uKStyleSlashDelimitedDateTimeFormatParser,uSStyleSlashDelimitedDateTimeFormatParser,monthNameAndDayOfMonthDateFormatParser,dayOfMonthAndMonthNameDateFormatParser,twentyFourHourTimeFormatParser,twelveHourTimeFormatParser,dashDelimitedWithMonthNameDateTimeFormatParser];class StandardFormatParsersRefiner{constructor(e){this.name=e}refine(e){const r=e.filter(a=>a.parser==="ISO8601ExtendedDateTimeFormatParser"||a.parser==="ISO8601BasicDateTimeFormatParser"||a.parser==="RFC2822DateTimeFormatParser");return r.length===0?e:r}}class TimeFormatRefiner{constructor(e){this.name=e}refine(e){return e.forEach(r=>{let a=!1;r.tokens.forEach(i=>{i.type==="meridiem"&&(a=!0)}),a&&r.tokens.forEach(i=>{i.type==="twentyFourHour"&&(i.type="twelveHour")})}),e}}const timeFormatRefiner=new TimeFormatRefiner("TimeFormatRefiner"),standardFormatParsersRefiner=new StandardFormatParsersRefiner("StandardFormatParsersRefiner"),refiners=[standardFormatParsersRefiner,timeFormatRefiner];class YearFormatTokenAssigner{constructor(e,r,a){this.name=e,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?(this._map.set(/\d{2}/,"YY"),this._map.set(/\d{4}/,"YYYY"),this._map.set(/[+-]\d{6}/,"YYYYYY")):(this._map.set(/\d{2}/,"%y"),this._map.set(/\d{4}/,"%Y"),this._map.set(/[+-]\d{6}/,"NA"))}_testTokenType(e){return e.type===this.type}assign(e){this._map.forEach((r,a)=>{this._testTokenType(e)&&a.test(e.value)&&(e.format=r)})}}class MonthFormatTokenAssigner{constructor(e,r,a){this.name=e,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?(this._map.set(/\d{1,2}/,"M"),this._map.set(/\d{2}/,"MM"),this._map.set(/\d{1,2}(?:st|nd|rd|th)/,"Mo"),this._map.set(/^(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)$/,"MMM"),this._map.set(/^(January|February|March|April|May|June|July|August|September|October|November|December)$/,"MMMM")):(this._map.set(/\d{1,2}/,"NA"),this._map.set(/\d{2}/,"%m"),this._map.set(/\d{1,2}(?:st|nd|rd|th)/,"NA"),this._map.set(/^(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)$/,"%b"),this._map.set(/^(January|February|March|April|May|June|July|August|September|October|November|December)$/,"%B"))}_testTokenType(e){return e.type===this.type}assign(e){this._map.forEach((r,a)=>{this._testTokenType(e)&&a.test(e.value)&&(e.format=r)})}}class DayOfMonthFormatTokenAssigner{constructor(e,r,a){this.name=e,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?(this._map.set(/\d{1,2}/,"D"),this._map.set(/\d{2}/,"DD"),this._map.set(/\d{1,2}(?:st|nd|rd|th)/,"Do")):(this._map.set(/\d{1,2}/,"%-e"),this._map.set(/\d{2}/,"%d"),this._map.set(/\d{1,2}(?:st|nd|rd|th)/,"%o"))}_testTokenType(e){return e.type===this.type}assign(e){this._map.forEach((r,a)=>{this._testTokenType(e)&&a.test(e.value)&&(e.format=r)})}}class DelimiterFormatTokenAssigner{constructor(e,r,a){this.name=e,this.format=a,this.type=r}assign(e){}}class MinuteFormatTokenAssigner{constructor(e,r,a){this.name=e,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?(this._map.set(/\d{1,2}/,"m"),this._map.set(/\d{2}/,"mm")):(this._map.set(/\d{1,2}/,"NA"),this._map.set(/\d{2}/,"%M"))}_testTokenType(e){return e.type===this.type}assign(e){this._map.forEach((r,a)=>{this._testTokenType(e)&&a.test(e.value)&&(e.format=r)})}}class SecondFormatTokenAssigner{constructor(e,r,a){this.name=e,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?(this._map.set(/\d{2}/,"ss"),this._map.set(/\d{1,2}/,"s")):(this._map.set(/\d{1,2}/,"NA"),this._map.set(/\d{2}/,"%S"))}_testTokenType(e){return e.type===this.type}assign(e){this._map.forEach((r,a)=>{this._testTokenType(e)&&a.test(e.value)&&(e.format=r)})}}class MillisecondFormatTokenAssigner{constructor(e,r,a){this.name=e,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?(this._map.set(/\d/,"S"),this._map.set(/\d{2}/,"SS"),this._map.set(/\d{3}/,"SSS")):(this._map.set(/\d/,"NA"),this._map.set(/\d{2}/,"NA"),this._map.set(/\d{3}/,"%L"))}_testTokenType(e){return e.type===this.type}assign(e){this._map.forEach((r,a)=>{this._testTokenType(e)&&a.test(e.value)&&(e.format=r)})}}class TimezoneFormatTokenAssigner{constructor(e,r,a){this.name=e,this.type=r,this.format=a,this._map=new Map;const i=new RegExp("UT|CAT|CET|CVT|EAT|EET|GMT|MUT|RET|SAST|SCT|WAST|WAT|WEST|WET|WST|WT|ADT|AFT|ALMT|AMST|AMT|ANAST|ANAT|AQTT|AST|AZST|AZT|BNT|BST|BTT|CHOST|CHOT|CST|EEST|EET|GET|GST|HKT|HOVST|HOVT|ICT|IDT|IRDT|IRKST|IRKT|IST|JST|KGT|KRAST|KRAT|KST|MAGST|MAGT|MMT|MSK|MVT|NOVST|NOVT|NPT|OMSST|OMST|ORAT|PETST|PETT|PHT|PKT|PYT|QYZT|SAKT|SGT|SRET|TJT|TLT|TMT|TRT|ULAST|ULAT|UZT|VLAST|VLAT|WIB|WIT|YAKST|YAKT|YEKST|YEKT|ART|CAST|CEST|CLST|CLT|DAVT|DDUT|GMT|MAWT|NZDT|NZST|ROTT|SYOT|VOST|ADT|AST|AT|AZOST|AZOT|ACDT|ACST|ACT|ACWST|AEDT|AEST|AET|AWDT|AWST|CXT|LHDT|LHST|NFDT|NFT|AST|AT|CDT|CIDST|CIST|CST|EDT|EST|ET|CST|CT|EST|ET|BST|CEST|CET|EEST|EET|FET|GET|GMT|IST|KUYT|MSD|MSK|SAMT|TRT|WEST|WET|CCT|EAT|IOT|TFT|ADT|AKDT|AKST|AST|AT|CDT|CST|CT|EDT|EGST|EGT|ET|GMT|HDT|HST|MDT|MST|MT|NDT|NST|PDT|PMDT|PMST|PST|PT|WGST|WGT|AoE|BST|CHADT|CHAST|CHUT|CKT|ChST|EASST|EAST|FJST|FJT|GALT|GAMT|GILT|HST|KOST|LINT|MART|MHT|NCT|NRT|NUT|NZDT|NZST|PGT|PHOT|PONT|PST|PWT|SBT|SST|TAHT|TKT|TOST|TOT|TVT|VUT|WAKT|WFT|WST|YAPT|ACT|AMST|AMT|ART|BOT|BRST|BRT|CLST|CLT|COT|ECT|FKST|FKT|FNT|GFT|GST|GYT|PET|PYST|PYT|SRT|UYST|UYT|VET|WARST");!a||a==="default"?(this._map.set(/[+-]\d{2}(?::\d{2})?/,"Z"),this._map.set(/[+-]\d{4}/,"ZZ"),this._map.set(/Z/,"[Z]"),this._map.set(/z/,"[z]"),this._map.set(i,"z")):(this._map.set(/[+-]\d{2}(?::\d{2})?/,"%:z"),this._map.set(/[+-]\d{4}/,"%z"),this._map.set(/Z/,"Z"),this._map.set(/z/,"z"),this._map.set(i,"%Z"))}_testTokenType(e){return e.type===this.type}assign(e){this._map.forEach((r,a)=>{this._testTokenType(e)&&a.test(e.value)&&(e.format=r)})}}class DayOfYearFormatTokenAssigner{constructor(e,r,a){this.name=e,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?(this._map.set(/\d{1,3}/,"DDD"),this._map.set(/\d{3}/,"DDDD"),this._map.set(/\d{1,3}(?:st|nd|rd|th)/,"DDDo")):(this._map.set(/\d{1,3}/,"NA"),this._map.set(/\d{3}/,"%j"),this._map.set(/\d{1,3}(?:st|nd|rd|th)/,"NA"))}_testTokenType(e){return e.type===this.type}assign(e){this._map.forEach((r,a)=>{this._testTokenType(e)&&a.test(e.value)&&(e.format=r)})}}class EscapeTextFormatTokenAssigner{constructor(e,r,a){this.name=e,this.type=r,this.format=a}_testTokenType(e){return e.type===this.type}assign(e){this._testTokenType(e)&&(e.format=!this.format||this.format==="default"?`[${e.value}]`:e.value)}}class ISODayOfWeekFormatTokenAssigner{constructor(e,r,a){this.name=e,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?this._map.set(/[1-7]/,"E"):this._map.set(/[1-7]/,"%u")}_testTokenType(e){return e.type===this.type}assign(e){this._map.forEach((r,a)=>{this._testTokenType(e)&&a.test(e.value)&&(e.format=r)})}}class ISOWeekOfYearFormatTokenAssigner{constructor(e,r,a){this.name=e,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?(this._map.set(/\d{1,2}/,"W"),this._map.set(/\d{2}/,"WW"),this._map.set(/\d{1,2}(?:st|nd|rd|th)/,"Wo")):(this._map.set(/\d{1,2}/,"NA"),this._map.set(/\d{2}/,"%U"),this._map.set(/\d{1,2}(?:st|nd|rd|th)/,"NA"))}_testTokenType(e){return e.type===this.type}assign(e){this._map.forEach((r,a)=>{this._testTokenType(e)&&a.test(e.value)&&(e.format=r)})}}class TwentyFourHourFormatTokenAssigner{constructor(e,r,a){this.name=e,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?(this._map.set(/^([0-1]\d|2[0-3])$/,"HH"),this._map.set(/^(\d|1\d|2[0-3])$/,"H")):(this._map.set(/^(\d|1\d|2[0-3])$/,"%-k"),this._map.set(/^([0-1]\d|2[0-3])$/,"%H"))}_testTokenType(e){return e.type===this.type}assign(e){this._map.forEach((r,a)=>{this._testTokenType(e)&&a.test(e.value)&&(e.format=r)})}}class TwelveHourFormatTokenAssigner{constructor(e,r,a){this.name=e,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?(this._map.set(/^(0\d|1[0-2])$/,"hh"),this._map.set(/^([1-9]|1[0-9])$/,"h")):(this._map.set(/^([1-9]|1[0-2])$/,"%-l"),this._map.set(/^(0\d|1[0-2])$/,"%I"))}_testTokenType(e){return e.type===this.type}assign(e){this._map.forEach((r,a)=>{this._testTokenType(e)&&a.test(e.value)&&(e.format=r)})}}class DayOfWeekFormatTokenAssigner{constructor(e,r,a){this.name=e,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?(this._map.set(/[0-6](?:st|nd|rd|th)/,"do"),this._map.set(/(?:Su|Mo|Tu|We|Th|Fr|Sa)/,"dd"),this._map.set(/(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)/,"ddd"),this._map.set(/(?:Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday)/,"dddd")):(this._map.set(/[0-6]/,"%w"),this._map.set(/[0-6](?:st|nd|rd|th)/,"NA"),this._map.set(/(?:Su|Mo|Tu|We|Th|Fr|Sa)/,"NA"),this._map.set(/(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)/,"%a"),this._map.set(/(?:Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday)/,"%A"))}_testTokenType(e){return e.type===this.type}assign(e){this._map.forEach((r,a)=>{this._testTokenType(e)&&a.test(e.value)&&(e.format=r)})}}class MeridiemFormatTokenAssigner{constructor(e,r,a){this.name=e,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?(this._map.set(/am|pm/,"a"),this._map.set(/AM|PM/,"A")):(this._map.set(/am|pm/,"%P"),this._map.set(/AM|PM/,"%p"))}_testTokenType(e){return e.type===this.type}assign(e){this._map.forEach((r,a)=>{this._testTokenType(e)&&a.test(e.value)&&(e.format=r)})}}const dayOfMonthFormatTokenAssigner=new DayOfMonthFormatTokenAssigner("DelimiterFormatTokenAssigner","dayOfMonth"),dayOfWeekFormatTokenAssigner=new DayOfWeekFormatTokenAssigner("DayOfWeekFormatTokenAssigner","dayOfWeek"),dayOfYearFormatTokenAssigner=new DayOfYearFormatTokenAssigner("DayOfYearFormatTokenAssigner","dayOfYear"),delimiterFormatTokenAssigner=new DelimiterFormatTokenAssigner("DelimiterFormatTokenAssigner","delimiter"),escapeTextFormatTokenAssigner=new EscapeTextFormatTokenAssigner("EscapeTextFormatTokenAssigner","escapeText"),iSODayOfWeekFormatTokenAssigner=new ISODayOfWeekFormatTokenAssigner("ISODayOfWeekFormatTokenAssigner","isoDayOfWeek"),iSOWeekOfYearFormatTokenAssigner=new ISOWeekOfYearFormatTokenAssigner("ISOWeekOfYearFormatTokenAssigner","isoWeekOfYear"),meridiemFormatTokenAssigner=new MeridiemFormatTokenAssigner("MeridiemFormatTokenAssigner","meridiem"),millisecondFormatTokenAssigner=new MillisecondFormatTokenAssigner("MillisecondFormatTokenAssigner","millisecond"),minuteFormatTokenAssigner=new MinuteFormatTokenAssigner("MinuteFormatTokenAssigner","minute"),monthFormatTokenAssigner=new MonthFormatTokenAssigner("MonthFormatTokenAssigner","month"),secondFormatTokenAssigner=new SecondFormatTokenAssigner("SecondFormatTokenAssigner","second"),timezoneFormatTokenAssigner=new TimezoneFormatTokenAssigner("TimezoneFormatTokenAssigner","timezone"),twelveHourFormatTokenAssigner=new TwelveHourFormatTokenAssigner("TwelveHourFormatTokenAssigner","twelveHour"),twentyFourHourFormatTokenAssigner=new TwentyFourHourFormatTokenAssigner("TwentyFourHourFormatTokenAssigner","twentyFourHour"),yearFormatTokenAssigner=new YearFormatTokenAssigner("YearFormatTokenAssigner","year"),strftimeDayOfMonthFormatTokenAssigner=new DayOfMonthFormatTokenAssigner("DelimiterFormatTokenAssigner","dayOfMonth","strftime"),strftimeDayOfWeekFormatTokenAssigner=new DayOfWeekFormatTokenAssigner("DayOfWeekFormatTokenAssigner","dayOfWeek","strftime"),strftimeDayOfYearFormatTokenAssigner=new DayOfYearFormatTokenAssigner("DayOfYearFormatTokenAssigner","dayOfYear","strftime"),strftimeDelimiterFormatTokenAssigner=new DelimiterFormatTokenAssigner("DelimiterFormatTokenAssigner","delimiter","strftime"),strftimeEscapeTextFormatTokenAssigner=new EscapeTextFormatTokenAssigner("EscapeTextFormatTokenAssigner","escapeText","strftime"),strftimeISODayOfWeekFormatTokenAssigner=new ISODayOfWeekFormatTokenAssigner("ISODayOfWeekFormatTokenAssigner","isoDayOfWeek","strftime"),strftimeISOWeekOfYearFormatTokenAssigner=new ISOWeekOfYearFormatTokenAssigner("ISOWeekOfYearFormatTokenAssigner","isoWeekOfYear","strftime"),strftimeMeridiemFormatTokenAssigner=new MeridiemFormatTokenAssigner("MeridiemFormatTokenAssigner","meridiem","strftime"),strftimeMillisecondFormatTokenAssigner=new MillisecondFormatTokenAssigner("MillisecondFormatTokenAssigner","millisecond","strftime"),strftimeMinuteFormatTokenAssigner=new MinuteFormatTokenAssigner("MinuteFormatTokenAssigner","minute","strftime"),strftimeMonthFormatTokenAssigner=new MonthFormatTokenAssigner("MonthFormatTokenAssigner","month","strftime"),strftimeSecondFormatTokenAssigner=new SecondFormatTokenAssigner("SecondFormatTokenAssigner","second","strftime"),strftimeTimezoneFormatTokenAssigner=new TimezoneFormatTokenAssigner("TimezoneFormatTokenAssigner","timezone","strftime"),strftimeTwelveHourFormatTokenAssigner=new TwelveHourFormatTokenAssigner("TwelveHourFormatTokenAssigner","twelveHour","strftime"),strftimeTwentyFourHourFormatTokenAssigner=new TwentyFourHourFormatTokenAssigner("TwentyFourHourFormatTokenAssigner","twentyFourHour","strftime"),strftimeYearFormatTokenAssigner=new YearFormatTokenAssigner("YearFormatTokenAssigner","year","strftime"),defaultAssigners=[yearFormatTokenAssigner,monthFormatTokenAssigner,dayOfMonthFormatTokenAssigner,delimiterFormatTokenAssigner,minuteFormatTokenAssigner,secondFormatTokenAssigner,millisecondFormatTokenAssigner,timezoneFormatTokenAssigner,dayOfYearFormatTokenAssigner,escapeTextFormatTokenAssigner,iSODayOfWeekFormatTokenAssigner,iSOWeekOfYearFormatTokenAssigner,twentyFourHourFormatTokenAssigner,twelveHourFormatTokenAssigner,dayOfWeekFormatTokenAssigner,meridiemFormatTokenAssigner],strftimeAssigners=[strftimeDayOfMonthFormatTokenAssigner,strftimeDayOfWeekFormatTokenAssigner,strftimeDayOfYearFormatTokenAssigner,strftimeDelimiterFormatTokenAssigner,strftimeEscapeTextFormatTokenAssigner,strftimeISODayOfWeekFormatTokenAssigner,strftimeISOWeekOfYearFormatTokenAssigner,strftimeMeridiemFormatTokenAssigner,strftimeMillisecondFormatTokenAssigner,strftimeMinuteFormatTokenAssigner,strftimeMonthFormatTokenAssigner,strftimeSecondFormatTokenAssigner,strftimeTimezoneFormatTokenAssigner,strftimeTwelveHourFormatTokenAssigner,strftimeTwentyFourHourFormatTokenAssigner,strftimeYearFormatTokenAssigner];class Guesser{constructor(){}static parse(e){const r=[];return parsers.forEach(a=>{const i=a.parse(e);i&&r.push(Object.assign({},i))}),r}static refine(e){let r=[...e];return refiners.forEach(a=>{r=[...a.refine(r)]}),r}static assign(e,r){(!r||r==="default"?defaultAssigners:strftimeAssigners).forEach(i=>{e.forEach(o=>{i.assign(o)})})}static getFormatString(e){let r="";return e.forEach(a=>{if(a.format==="NA")throw Error(`Couldn't find strftime modifier for "${a.value}"`);r+=a.format?a.format:a.value}),r}}function guessFormat(t,e){const r=Guesser.parse(t),a=Guesser.refine(r);if(a.length===0)throw Error("Couldn't parse date");a.forEach(o=>Guesser.assign(o.tokens,e));let i=[];return a.forEach(o=>i.push(Guesser.getFormatString(o.tokens))),i.length===1?i[0]:i}const decimalPlaces=4;function convertFormat(t){const e={from:["A","D","DD","M","MM","YY","YYYY"],to:["a","d","dd","L","LL","yy","yyyy"]};let r=t;return e.from.forEach((a,i)=>{const o=e.to[i],u=new RegExp(`\\b${a}\\b`,"g");r=r.replace(u,o)}),r}function guessDateFormat(t){const e=guessFormat(t);return typeof e=="string"?[e]:e}function guessDateofArray(t){try{let e=guessDateFormat(t[0]);for(let a=1;a<t.length;a++)e=[...new Set([...e,...guessDateFormat(t[a])])];const r=e.filter(a=>t.every(i=>DateTime.fromFormat(i,convertFormat(a)).invalid===null));return r.length==1?r[0]:e[0]}catch{return-1}}function calculateTimeDifference(t,e,r){if(t===null||e===null||t===void 0||e===void 0)return null;t=DateTime.fromFormat(t,r),e=DateTime.fromFormat(e,r);var a=e.diff(t,"hours");return a.hours.toFixed(decimalPlaces)}function getPeriod(t,e){let r=new Array(t.length-1);for(let a=1;a<t.length;a++)r[a-1]=calculateTimeDifference(t[a-1],t[a],convertFormat(e));return console.log(Math.min(...r)+", "+Math.max(...r)),console.log(r),{minDiff:Math.min(...r),constant:Math.min(...r)===Math.max(...r)}}function getstartTimeOffset(t,e,r){let a=DateTime.fromISO(t);return DateTime.fromFormat(e,convertFormat(r)).diff(a,"hours").hours.toFixed(decimalPlaces)}function getGuessedFormat(t){return guessDateofArray(t)}function forceFormat(t,e){return t.map(a=>calculateTimeDifference(t[0],a,convertFormat(e)))}function formatTimeFromISO(t){if(t){const[e,r]=t.split("T"),[a,i,o]=e.split("-"),[u,c]=r.split(":"),f=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][+i-1];return`${o} ${f} ${a} ${u}:${c}`}else return""}function getISODate(t,e){return DateTime.fromFormat(t,convertFormat(e)).toISO()}function addTime(t,e){return formatTimeFromISO(DateTime.fromISO(t).plus({hours:e}).toISO())}function get_each_context$d(t,e,r){const a=t.slice();return a[20]=e[r],a[21]=e,a[22]=r,a}function create_if_block$i(t){let e,r;return e=new Dialog({props:{title:"GENERATE SIMULATED DATA",$$slots:{default:[create_default_slot$7]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment)},m(a,i){mount_component(e,a,i),r=!0},p(a,i){const o={};i&8388671&&(o.$$scope={dirty:i,ctx:a}),e.$set(o)},i(a){r||(transition_in(e.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),r=!1},d(a){destroy_component(e,a)}}}function create_each_block$d(t){let e,r,a,i,o,u,c,d,f,m,h,p,_,y,S,w,v;function g(){return t[15](t[22])}function b($){t[16]($,t[22])}let T={min:21,max:26,limits:[6,72],step:"0.1",label:"Rhythm period (hours):"};t[4][t[22]]!==void 0&&(T.value=t[4][t[22]]),f=new Slider({props:T}),binding_callbacks.push(()=>bind(f,"value",b));function O($){t[17]($,t[22])}let k={min:1,max:100,limits:[10,1e4],label:"Max values:"};return t[5][t[22]]!==void 0&&(k.value=t[5][t[22]]),_=new Slider({props:k}),binding_callbacks.push(()=>bind(_,"value",O)),{c(){e=element("div"),r=element("div"),a=element("div"),a.textContent=`value${t[22]}:`,i=space(),o=element("div"),o.textContent="",u=space(),c=element("div"),d=element("div"),create_component(f.$$.fragment),h=space(),p=element("div"),create_component(_.$$.fragment),attr(o,"class","removeData hoverbutton svelte-13hhe3j"),attr(r,"class","dataTitle svelte-13hhe3j"),attr(e,"class","datum svelte-13hhe3j")},m($,M){insert($,e,M),append(e,r),append(r,a),append(r,i),append(r,o),append(r,u),append(r,c),append(c,d),mount_component(f,d,null),append(c,h),append(c,p),mount_component(_,p,null),S=!0,w||(v=listen(o,"click",g),w=!0)},p($,M){t=$;const R={};!m&&M&16&&(m=!0,R.value=t[4][t[22]],add_flush_callback(()=>m=!1)),f.$set(R);const A={};!y&&M&32&&(y=!0,A.value=t[5][t[22]],add_flush_callback(()=>y=!1)),_.$set(A)},i($){S||(transition_in(f.$$.fragment,$),transition_in(_.$$.fragment,$),S=!0)},o($){transition_out(f.$$.fragment,$),transition_out(_.$$.fragment,$),S=!1},d($){$&&detach(e),destroy_component(f),destroy_component(_),w=!1,v()}}}function create_default_slot$7(t){let e,r,a,i,o,u,c,d,f,m,h,p,_,y,S,w,v,g,b,T,O,k,$,M;function R(z){t[10](z)}let A={min:5,max:30,limits:[1,1/0],label:"Days:"};t[0]!==void 0&&(A.value=t[0]),r=new Slider({props:A}),binding_callbacks.push(()=>bind(r,"value",R));function N(z){t[11](z)}let L={min:1,max:240,step:1,limits:[1,240],label:"Sampling period (minutes):"};t[1]!==void 0&&(L.value=t[1]),u=new Slider({props:L}),binding_callbacks.push(()=>bind(u,"value",N));let V=ensure_array_like(Array.from({length:t[3]})),C=[];for(let z=0;z<V.length;z+=1)C[z]=create_each_block$d(get_each_context$d(t,V,z));const F=z=>transition_out(C[z],1,1,()=>{C[z]=null});return{c(){e=element("div"),create_component(r.$$.fragment),i=space(),o=element("div"),create_component(u.$$.fragment),d=space(),f=element("div"),m=element("label"),m.textContent="Start time:",h=space(),p=element("input"),_=space(),y=element("hr"),S=space(),w=element("h2"),w.textContent="Data:",v=space(),g=element("span"),g.textContent="",b=space();for(let z=0;z<C.length;z+=1)C[z].c();T=space(),O=element("button"),O.textContent="Generate",attr(m,"for","val"),attr(p,"type","datetime-local"),attr(p,"name","start"),attr(g,"class","addSimDataButton svelte-13hhe3j")},m(z,H){insert(z,e,H),mount_component(r,e,null),insert(z,i,H),insert(z,o,H),mount_component(u,o,null),insert(z,d,H),insert(z,f,H),append(f,m),append(f,h),append(f,p),set_input_value(p,t[2]),insert(z,_,H),insert(z,y,H),insert(z,S,H),insert(z,w,H),insert(z,v,H),insert(z,g,H),insert(z,b,H);for(let E=0;E<C.length;E+=1)C[E]&&C[E].m(z,H);insert(z,T,H),insert(z,O,H),k=!0,$||(M=[listen(p,"input",t[12]),listen(p,"change",t[13]),listen(g,"click",t[14]),listen(O,"click",t[18])],$=!0)},p(z,H){const E={};!a&&H&1&&(a=!0,E.value=z[0],add_flush_callback(()=>a=!1)),r.$set(E);const D={};if(!c&&H&2&&(c=!0,D.value=z[1],add_flush_callback(()=>c=!1)),u.$set(D),H&4&&set_input_value(p,z[2]),H&312){V=ensure_array_like(Array.from({length:z[3]}));let I;for(I=0;I<V.length;I+=1){const U=get_each_context$d(z,V,I);C[I]?(C[I].p(U,H),transition_in(C[I],1)):(C[I]=create_each_block$d(U),C[I].c(),transition_in(C[I],1),C[I].m(T.parentNode,T))}for(group_outros(),I=V.length;I<C.length;I+=1)F(I);check_outros()}},i(z){if(!k){transition_in(r.$$.fragment,z),transition_in(u.$$.fragment,z);for(let H=0;H<V.length;H+=1)transition_in(C[H]);k=!0}},o(z){transition_out(r.$$.fragment,z),transition_out(u.$$.fragment,z),C=C.filter(Boolean);for(let H=0;H<C.length;H+=1)transition_out(C[H]);k=!1},d(z){z&&(detach(e),detach(i),detach(o),detach(d),detach(f),detach(_),detach(y),detach(S),detach(w),detach(v),detach(g),detach(b),detach(T),detach(O)),destroy_component(r),destroy_component(u),destroy_each(C,z),$=!1,run_all(M)}}}function create_fragment$q(t){let e,r,a=t[6]==="generateSim"&&create_if_block$i(t);return{c(){a&&a.c(),e=empty$1()},m(i,o){a&&a.m(i,o),insert(i,e,o),r=!0},p(i,[o]){i[6]==="generateSim"?a?(a.p(i,o),o&64&&transition_in(a,1)):(a=create_if_block$i(i),a.c(),transition_in(a,1),a.m(e.parentNode,e)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(i){r||(transition_in(a),r=!0)},o(i){transition_out(a),r=!1},d(i){i&&detach(e),a&&a.d(i)}}}function instance$r(t,e,r){let a,i;component_subscribe(t,menuModalType,$=>r(6,a=$)),component_subscribe(t,data,$=>r(19,i=$)),onMount(()=>{o(28,15,DateTime.now().set({hour:0,minute:0,second:0,millisecond:0}).toJSDate(),[24,28],[100,150])});function o($,M,R,A,N){const L={id:i.length,importedFrom:`simulated(${$},${N[0]})`,displayName:`Simulated_${i.length+1}`,datalength:$*24*(60/M),data:{}},V=[];for(let H=0;H<L.datalength;H++){const E=new Date(R.getTime()+H*M*60*1e3).toLocaleString("en-US");V.push(E)}const C=guessDateofArray(V),F=forceFormat(V,C),z=getPeriod(V,C);L.data.time={name:"time",type:"time",data:V,timeData:F,processSteps:[],processedData:[],timeFormat:C,recordPeriod:z};for(let H=0;H<A.length;H++){const E=`value${H}`,D=[],I=N[H],Z=A[H]*(60/M);for(let G=0;G<L.datalength;G++){const x=G%Z<Z/2?I*.05:I,le=Math.random()*x;D.push(Math.round(le))}L.data[E]={name:E,type:"value",data:D,processSteps:[],processedData:[]}}data.update(H=>[...H,L]),set_store_value(menuModalType,a=null,a)}let u=28,c=15,d=DateTime.now().set({hour:0,minute:0,second:0,millisecond:0}).toJSDate(),f=2,m=[24,25],h=[200,400];function p($){r(3,f-=1),m.slice($,1),h.slice($,1)}function _(){r(3,f+=1),m.push(24),h.push(100)}function y($){u=$,r(0,u)}function S($){c=$,r(1,c)}function w(){d=this.value,r(2,d)}const v=$=>console.log($),g=()=>_(),b=$=>p($);function T($,M){t.$$.not_equal(m[M],$)&&(m[M]=$,r(4,m))}function O($,M){t.$$.not_equal(h[M],$)&&(h[M]=$,r(5,h))}return[u,c,d,f,m,h,a,o,p,_,y,S,w,v,g,b,T,O,()=>o(u,c,d,m,h)]}class GenerateSimulated extends SvelteComponent{constructor(e){super(),init(this,e,instance$r,create_fragment$q,safe_not_equal,{})}}function create_fragment$p(t){let e,r,a,i,o,u,c;return{c(){e=element("label"),e.textContent="From:",r=element("input"),a=space(),i=element("label"),i.textContent="To:",o=element("input")},m(d,f){insert(d,e,f),insert(d,r,f),set_input_value(r,t[0].from),insert(d,a,f),insert(d,i,f),insert(d,o,f),set_input_value(o,t[0].to),u||(c=[listen(r,"input",t[3]),listen(o,"input",t[4])],u=!0)},p(d,[f]){f&1&&r.value!==d[0].from&&set_input_value(r,d[0].from),f&1&&o.value!==d[0].to&&set_input_value(o,d[0].to)},i:noop,o:noop,d(d){d&&(detach(e),detach(r),detach(a),detach(i),detach(o)),u=!1,run_all(c)}}}function replace(t=[1,2,3],e={from:0,to:100}){var r=[...t];for(let a=0;a<r.length;a++)r[a]==e.from&&(r[a]=e.to);return r}function instance$q(t,e,r){const a=createEventDispatcher();let{paramsStart:i}=e,{typeTime:o}=e,{params:u={from:0,to:100}}=e;Object.keys(i).length>0&&(u=Object.assign({},i));function c(){u.from=this.value,r(0,u)}function d(){u.to=this.value,r(0,u)}return t.$$set=f=>{"paramsStart"in f&&r(1,i=f.paramsStart),"typeTime"in f&&r(2,o=f.typeTime),"params"in f&&r(0,u=f.params)},t.$$.update=()=>{t.$$.dirty&1&&a("update",{params:u})},[u,i,o,c,d]}class Replace extends SvelteComponent{constructor(e){super(),init(this,e,instance$q,create_fragment$p,safe_not_equal,{paramsStart:1,typeTime:2,params:0})}}function create_if_block_1$9(t){let e,r,a,i,o,u;function c(h){t[5](h)}let d={min:dataMin-1,max:dataMax+1,label:"Min (hrs):"};t[0].min!==void 0&&(d.value=t[0].min),e=new Slider({props:d}),binding_callbacks.push(()=>bind(e,"value",c));function f(h){t[6](h)}let m={min:dataMin-1,max:dataMax+1,label:"Max (hrs):"};return t[0].max!==void 0&&(m.value=t[0].max),i=new Slider({props:m}),binding_callbacks.push(()=>bind(i,"value",f)),{c(){create_component(e.$$.fragment),a=space(),create_component(i.$$.fragment)},m(h,p){mount_component(e,h,p),insert(h,a,p),mount_component(i,h,p),u=!0},p(h,p){const _={};!r&&p&1&&(r=!0,_.value=h[0].min,add_flush_callback(()=>r=!1)),e.$set(_);const y={};!o&&p&1&&(o=!0,y.value=h[0].max,add_flush_callback(()=>o=!1)),i.$set(y)},i(h){u||(transition_in(e.$$.fragment,h),transition_in(i.$$.fragment,h),u=!0)},o(h){transition_out(e.$$.fragment,h),transition_out(i.$$.fragment,h),u=!1},d(h){h&&detach(a),destroy_component(e,h),destroy_component(i,h)}}}function create_if_block$h(t){let e,r,a,i,o,u;function c(h){t[3](h)}let d={min:dataMin-1,max:dataMax+1,label:"Min:"};t[0].min!==void 0&&(d.value=t[0].min),e=new Slider({props:d}),binding_callbacks.push(()=>bind(e,"value",c));function f(h){t[4](h)}let m={min:dataMin-1,max:dataMax+1,label:"Max:"};return t[0].max!==void 0&&(m.value=t[0].max),i=new Slider({props:m}),binding_callbacks.push(()=>bind(i,"value",f)),{c(){create_component(e.$$.fragment),a=space(),create_component(i.$$.fragment)},m(h,p){mount_component(e,h,p),insert(h,a,p),mount_component(i,h,p),u=!0},p(h,p){const _={};!r&&p&1&&(r=!0,_.value=h[0].min,add_flush_callback(()=>r=!1)),e.$set(_);const y={};!o&&p&1&&(o=!0,y.value=h[0].max,add_flush_callback(()=>o=!1)),i.$set(y)},i(h){u||(transition_in(e.$$.fragment,h),transition_in(i.$$.fragment,h),u=!0)},o(h){transition_out(e.$$.fragment,h),transition_out(i.$$.fragment,h),u=!1},d(h){h&&detach(a),destroy_component(e,h),destroy_component(i,h)}}}function create_fragment$o(t){let e,r,a,i;const o=[create_if_block$h,create_if_block_1$9],u=[];function c(d,f){return d[1].type==="value"?0:d[1].type==="time"?1:-1}return~(e=c(t))&&(r=u[e]=o[e](t)),{c(){r&&r.c(),a=empty$1()},m(d,f){~e&&u[e].m(d,f),insert(d,a,f),i=!0},p(d,[f]){let m=e;e=c(d),e===m?~e&&u[e].p(d,f):(r&&(group_outros(),transition_out(u[m],1,1,()=>{u[m]=null}),check_outros()),~e?(r=u[e],r?r.p(d,f):(r=u[e]=o[e](d),r.c()),transition_in(r,1),r.m(a.parentNode,a)):r=null)},i(d){i||(transition_in(r),i=!0)},o(d){transition_out(r),i=!1},d(d){d&&detach(a),~e&&u[e].d(d)}}}function filter$1(t=[1,2,3],e={min:0,max:12}){Math.min(...t),Math.max(...t);var r=[...t];for(let a=0;a<r.length;a++)r[a]<e.min?r[a]=NaN:r[a]>e.max&&(r[a]=NaN);return r}const dataMin=0,dataMax=1e4;function instance$p(t,e,r){const a=createEventDispatcher();let{paramsStart:i}=e,{typeTime:o}=e,{params:u={min:dataMin,max:dataMax}}=e;Object.keys(i).length>0&&(u=Object.assign({},i));function c(h){t.$$.not_equal(u.min,h)&&(u.min=h,r(0,u))}function d(h){t.$$.not_equal(u.max,h)&&(u.max=h,r(0,u))}function f(h){t.$$.not_equal(u.min,h)&&(u.min=h,r(0,u))}function m(h){t.$$.not_equal(u.max,h)&&(u.max=h,r(0,u))}return t.$$set=h=>{"paramsStart"in h&&r(2,i=h.paramsStart),"typeTime"in h&&r(1,o=h.typeTime),"params"in h&&r(0,u=h.params)},t.$$.update=()=>{t.$$.dirty&1&&u.max<u.min&&r(0,u.max=u.min,u),t.$$.dirty&1&&a("update",{params:u})},[u,o,i,c,d,f,m]}class Filter extends SvelteComponent{constructor(e){super(),init(this,e,instance$p,create_fragment$o,safe_not_equal,{paramsStart:2,typeTime:1,params:0})}}function create_if_block_1$8(t){let e,r,a;function i(u){t[4](u)}let o={min:-20,max:20,step:.5,label:"Add (hrs):"};return t[0].val!==void 0&&(o.value=t[0].val),e=new Slider({props:o}),binding_callbacks.push(()=>bind(e,"value",i)),{c(){create_component(e.$$.fragment)},m(u,c){mount_component(e,u,c),a=!0},p(u,c){const d={};!r&&c&1&&(r=!0,d.value=u[0].val,add_flush_callback(()=>r=!1)),e.$set(d)},i(u){a||(transition_in(e.$$.fragment,u),a=!0)},o(u){transition_out(e.$$.fragment,u),a=!1},d(u){destroy_component(e,u)}}}function create_if_block$g(t){let e,r,a;function i(u){t[3](u)}let o={min:-20,max:20,label:"Add:"};return t[0].val!==void 0&&(o.value=t[0].val),e=new Slider({props:o}),binding_callbacks.push(()=>bind(e,"value",i)),{c(){create_component(e.$$.fragment)},m(u,c){mount_component(e,u,c),a=!0},p(u,c){const d={};!r&&c&1&&(r=!0,d.value=u[0].val,add_flush_callback(()=>r=!1)),e.$set(d)},i(u){a||(transition_in(e.$$.fragment,u),a=!0)},o(u){transition_out(e.$$.fragment,u),a=!1},d(u){destroy_component(e,u)}}}function create_fragment$n(t){let e,r,a,i;const o=[create_if_block$g,create_if_block_1$8],u=[];function c(d,f){return d[1].type==="value"?0:d[1].type==="time"?1:-1}return~(e=c(t))&&(r=u[e]=o[e](t)),{c(){r&&r.c(),a=empty$1()},m(d,f){~e&&u[e].m(d,f),insert(d,a,f),i=!0},p(d,[f]){let m=e;e=c(d),e===m?~e&&u[e].p(d,f):(r&&(group_outros(),transition_out(u[m],1,1,()=>{u[m]=null}),check_outros()),~e?(r=u[e],r?r.p(d,f):(r=u[e]=o[e](d),r.c()),transition_in(r,1),r.m(a.parentNode,a)):r=null)},i(d){i||(transition_in(r),i=!0)},o(d){transition_out(r),i=!1},d(d){d&&detach(a),~e&&u[e].d(d)}}}function add(t=[1,2,3],e={val:0}){var r=[...t];for(let a=0;a<r.length;a++)r[a]=r[a]+e.val;return r}function instance$o(t,e,r){const a=createEventDispatcher();let{paramsStart:i}=e,{typeTime:o}=e,{params:u={val:0}}=e;Object.keys(i).length>0&&(u=Object.assign({},i));function c(f){t.$$.not_equal(u.val,f)&&(u.val=f,r(0,u))}function d(f){t.$$.not_equal(u.val,f)&&(u.val=f,r(0,u))}return t.$$set=f=>{"paramsStart"in f&&r(2,i=f.paramsStart),"typeTime"in f&&r(1,o=f.typeTime),"params"in f&&r(0,u=f.params)},t.$$.update=()=>{t.$$.dirty&1&&a("update",{params:u})},[u,o,i,c,d]}class Add extends SvelteComponent{constructor(e){super(),init(this,e,instance$o,create_fragment$n,safe_not_equal,{paramsStart:2,typeTime:1,params:0})}}function getDataFromTable(t,e,r=!0){const a=get_store_value(data)[get_store_value(data).findIndex(i=>i.id===t)].data[e];return a.processedData.length>0&&r?a.processedData:a.type==="time"?a.timeData:a.data}function getFieldName(t,e){return get_store_value(data)[get_store_value(data).findIndex(a=>a.id===t)].data[e].name}function getFieldNames(t){return Object.keys(get_store_value(data)[get_store_value(data).findIndex(e=>e.id===t.tableID)].data)}function getDataFromSource(t,e){const r=get_store_value(graphs)[get_store_value(activeGraphTab)].sourceData[t];if(e.processedData.length>0)return e.processedData;{const a=r.tableID;return getDataFromTable(a,e.field)}}function getFieldType(t,e){return get_store_value(data)[get_store_value(data).findIndex(a=>a.id===t)].data[e].type}function removeGraphData(t){graphs.update(e=>{const r=[...e],a=r[get_store_value(activeGraphTab)].id,i=r.find(o=>o.id===a);return i&&i.sourceData&&i.sourceData.splice(t,1),r})}function createnewDataForGraph(t,e){contextMenu.update(r=>(r.labels=[],r.funcs=[],r));for(let r=0;r<get_store_value(data).length;r++)contextMenu.update(a=>(a.labels.push(get_store_value(data)[r].displayName),a.funcs.push(()=>addDataToGraph(get_store_value(data)[r].id,t,e)),a))}function addDataToGraph(t,e,r){let a={};Object.keys(e).forEach((i,o)=>{a[i]={field:Object.keys(get_store_value(data)[get_store_value(data).findIndex(u=>u.id===t)].data)[o],processSteps:[],processedData:[]}}),graphs.update(i=>(i[get_store_value(activeGraphTab)].sourceData.push({tableID:t,name:"Data "+(1+get_store_value(graphs)[get_store_value(activeGraphTab)].sourceData.length),chartvalues:a,...deepCopy$1(r)}),i)),console.log(get_store_value(graphs))}function deepCopy$1(t){return JSON.parse(JSON.stringify(t))}function averageBinnedValues(t,e,r){const a=Math.ceil((Math.max(...t.filter(d=>d||0))+r)/r)||1,i=new Array(a),o=new Array(a),u=new Array(a);for(let d=0;d<a;d++)i[d]=d*r+r/2,o[d]=0,u[d]=0;for(let d=0;d<t.length;d++){const f=Math.floor(t[d]/r);e[d]&&(o[f]+=e[d],u[f]++)}const c=o.map((d,f)=>u[f]>0?d/u[f]:0);return{time:i,values:c}}function getDiffs(t){let e=[];for(let r=1;r<t.length;r++)e[r-1]=t[r]-t[r-1];return e}function bestFitOnsets(t){const e=calculateMedian(t),r=calculateMAD(t,e),a=t.filter(o=>Math.abs(o-e)<=2*r);return calculateMean(a)}function calculateMedian(t){const e=t.slice().sort((a,i)=>a-i),r=Math.floor(e.length/2);return e.length%2===0?(e[r-1]+e[r])/2:e[r]}function calculateMAD(t,e){const r=t.map(a=>Math.abs(a-e));return calculateMedian(r)}function calculateMean(t){return t.reduce((r,a)=>r+a,0)/t.length}const componentMap={add:{component:Add,startParams:{val:0},func:add,forTypes:["value","time"]},filter:{component:Filter,startParams:{min:0,max:12},func:filter$1,forTypes:["value","time"]},replace:{component:Replace,startParams:{from:-999,to:NaN},func:replace,forTypes:["value"]}};let selectedSettings=null;function addProcess(t,e,r,a){selectedSettings={process:t,parameters:componentMap[t].startParams},e==="data"&&(data.update(i=>{const o=[...i],u=o.find(c=>c.id===r);return u&&u.data[a]&&u.data[a].processSteps.push(selectedSettings),o}),updateDataProcess(r,a)),e==="graph"&&(graphs.update(i=>{const o=[...i];return o.find(u=>u.id===r),o[get_store_value(activeGraphTab)].sourceData[r].chartvalues[a].processSteps.push(selectedSettings),o}),updateGraphProcess(get_store_value(activeGraphTab),r,a))}function processData(t,e){for(const r of t){const a=r.process,i=componentMap[a].func;typeof i=="function"?e=i(e,r.parameters):console.error(`Function '${a}' does not exist.`)}return e}function updateGraphProcess(t,e,r){let a=get_store_value(graphs)[t].sourceData[e].tableID,i=get_store_value(graphs)[t].sourceData[e].chartvalues[r].field,o=getDataFromTable(a,i),u=get_store_value(graphs)[t].sourceData[e].chartvalues[r].processSteps;u.length>0&&(o=processData(u,o)),graphs.update(c=>{const d=[...c];return d[t].sourceData[e].chartvalues[r].processedData=o,d})}function updateDataProcess(t,e){let r=getDataFromTable(t,e,!1),a=get_store_value(data).find(i=>i.id===t).data[e].processSteps;a.length>0&&(r=processData(a,r)),data.update(i=>{const o=[...i],u=o.find(c=>c.id===t);return u&&u.data[e]&&(u.data[e].processedData=r),o}),get_store_value(graphs).forEach((i,o)=>{i.sourceData.forEach((u,c)=>{u.tableID===t&&Object.keys(u.chartvalues).forEach(d=>{u.chartvalues[d].field===e&&updateGraphProcess(o,c,d)})})})}function updateProcess(t,e,r,a){get_store_value(graphs)[get_store_value(activeGraphTab)].sourceData[e].chartvalues[t].processSteps[r].parameters=a,updateGraphProcess(get_store_value(activeGraphTab),e,t)}function removeProcess(t,e,r){get_store_value(graphs)[get_store_value(activeGraphTab)].sourceData[t].chartvalues[e].processSteps.splice(r,1),updateGraphProcess(get_store_value(activeGraphTab),t,e)}function addProcessToGraphData(t,e,r){contextMenu.set({labels:[],funcs:[]});const a=getFieldType(get_store_value(graphs)[get_store_value(activeGraphTab)].sourceData[e].tableID,get_store_value(graphs)[get_store_value(activeGraphTab)].sourceData[e].chartvalues[r].field),i=Object.keys(componentMap);contextMenu.update(o=>{for(let u=0;u<i.length;u++)componentMap[i[u]].forTypes.includes(a)&&(console.log(i[u]),o.labels[u]=i[u],o.funcs[u]=()=>addProcess(i[u],t,e,r));return o})}class ProcessStep extends SvelteComponent{constructor(e){super(),init(this,e,null,null,safe_not_equal,{})}}function create_else_block$6(t){let e,r,a,i;return{c(){e=element("span"),r=text(t[0]),attr(e,"class","svelte-1tdrfqa")},m(o,u){insert(o,e,u),append(e,r),a||(i=[listen(e,"dblclick",t[9]),listen(e,"click",click_handler$1)],a=!0)},p(o,u){u&1&&set_data(r,o[0])},d(o){o&&detach(e),a=!1,run_all(i)}}}function create_if_block$f(t){let e,r,a,i,o;return{c(){e=element("form"),r=element("input"),r.required=t[1],attr(r,"class",a=null_to_empty(t[2]?"editing":"")+" svelte-1tdrfqa"),attr(e,"class","svelte-1tdrfqa")},m(u,c){insert(u,e,c),append(e,r),set_input_value(r,t[0]),t[8](r),i||(o=[listen(r,"input",t[7]),listen(r,"blur",t[5]),listen(e,"submit",prevent_default(t[5])),listen(e,"keydown",t[6])],i=!0)},p(u,c){c&2&&(r.required=u[1]),c&4&&a!==(a=null_to_empty(u[2]?"editing":"")+" svelte-1tdrfqa")&&attr(r,"class",a),c&1&&r.value!==u[0]&&set_input_value(r,u[0])},d(u){u&&detach(e),t[8](null),i=!1,run_all(o)}}}function create_fragment$m(t){let e;function r(o,u){return o[2]?create_if_block$f:create_else_block$6}let a=r(t),i=a(t);return{c(){i.c(),e=empty$1()},m(o,u){i.m(o,u),insert(o,e,u)},p(o,[u]){a===(a=r(o))&&i?i.p(o,u):(i.d(1),i=a(o),i&&(i.c(),i.m(e.parentNode,e)))},i:noop,o:noop,d(o){o&&detach(e),i.d(o)}}}function containsNonSpaceCharacter(t){return/\S/.test(t)}const click_handler$1=t=>{t.target.parentElement.className.includes("tabname")||t.preventDefault()};function instance$n(t,e,r){let{value:a,required:i=!0}=e;const o=createEventDispatcher();let u=!1,c,d;onMount(()=>{c=a}),afterUpdate(()=>{u&&(d.focus(),d.click())});function f(S){r(2,u=!0)}function m(){a!=c&&containsNonSpaceCharacter(a)?o("submit",a):r(0,a=c),r(2,u=!1)}function h(S){S.key=="Escape"&&(S.preventDefault(),r(0,a=c),r(2,u=!1))}function p(){a=this.value,r(0,a)}function _(S){binding_callbacks[S?"unshift":"push"](()=>{d=S,r(3,d)})}const y=S=>{f()};return t.$$set=S=>{"value"in S&&r(0,a=S.value),"required"in S&&r(1,i=S.required)},[a,i,u,d,f,m,h,p,_,y]}class InPlaceEdit extends SvelteComponent{constructor(e){super(),init(this,e,instance$n,create_fragment$m,safe_not_equal,{value:0,required:1})}}function get_each_context$c(t,e,r){const a=t.slice();return a[17]=e[r],a[18]=e,a[19]=r,a}function get_each_context_1$8(t,e,r){const a=t.slice();return a[20]=e[r][0],a[21]=e[r][1],a[22]=e,a[23]=r,a}function get_each_context_2$6(t,e,r){const a=t.slice();return a[24]=e[r],a[26]=r,a}function create_each_block_2$6(t){let e,r,a=t[24].process+"",i,o,u,c,d,f,m,h,p;function _(...v){return t[11](t[17],t[20],t[26],...v)}function y(...v){return t[12](t[17],t[20],t[26],...v)}var S=componentMap[t[24].process].component;function w(v,g){return{props:{paramsStart:v[24].parameters,typeTime:{type:v[0][v[19]].data[v[20]].type,tocheck:{tableID:v[17].id,key:v[20]}}}}}return S&&(f=construct_svelte_component(S,w(t)),f.$on("update",y)),{c(){e=element("details"),r=element("summary"),i=text(a),o=space(),u=element("div"),u.textContent="",c=space(),d=element("div"),f&&create_component(f.$$.fragment),attr(u,"class","deleteProcess hoverbutton svelte-uakoe0"),attr(r,"class","svelte-uakoe0"),attr(d,"class","processDetails svelte-uakoe0"),e.open=!0,attr(e,"class","process svelte-uakoe0")},m(v,g){insert(v,e,g),append(e,r),append(r,i),append(r,o),append(r,u),append(e,c),append(e,d),f&&mount_component(f,d,null),m=!0,h||(p=listen(u,"click",_),h=!0)},p(v,g){if(t=v,(!m||g&1)&&a!==(a=t[24].process+"")&&set_data(i,a),g&1&&S!==(S=componentMap[t[24].process].component)){if(f){group_outros();const b=f;transition_out(b.$$.fragment,1,0,()=>{destroy_component(b,1)}),check_outros()}S?(f=construct_svelte_component(S,w(t)),f.$on("update",y),create_component(f.$$.fragment),transition_in(f.$$.fragment,1),mount_component(f,d,null)):f=null}else if(S){const b={};g&1&&(b.paramsStart=t[24].parameters),g&1&&(b.typeTime={type:t[0][t[19]].data[t[20]].type,tocheck:{tableID:t[17].id,key:t[20]}}),f.$set(b)}},i(v){m||(f&&transition_in(f.$$.fragment,v),m=!0)},o(v){f&&transition_out(f.$$.fragment,v),m=!1},d(v){v&&detach(e),f&&destroy_component(f),h=!1,p()}}}function create_each_block_1$8(t,e){let r,a,i,o,u,c,d,f,m,h,p;function _(b){e[9](b,e[17],e[20])}let y={};e[17].data[e[20]].name!==void 0&&(y.value=e[17].data[e[20]].name),i=new InPlaceEdit({props:y}),binding_callbacks.push(()=>bind(i,"value",_));function S(...b){return e[10](e[17],e[20],...b)}let w=ensure_array_like(e[17].data[e[20]].processSteps),v=[];for(let b=0;b<w.length;b+=1)v[b]=create_each_block_2$6(get_each_context_2$6(e,w,b));const g=b=>transition_out(v[b],1,1,()=>{v[b]=null});return{key:t,first:null,c(){r=element("details"),a=element("summary"),create_component(i.$$.fragment),u=space(),c=element("span"),c.textContent="+",d=space();for(let b=0;b<v.length;b+=1)v[b].c();attr(c,"class","addbutton hoverbutton showContextMenu svelte-uakoe0"),attr(a,"class","svelte-uakoe0"),r.open=!0,attr(r,"class",f="field "+(e[17].data[e[20]].processSteps.length>0?"":"no-arrow")+" svelte-uakoe0"),this.first=r},m(b,T){insert(b,r,T),append(r,a),mount_component(i,a,null),append(a,u),append(a,c),append(r,d);for(let O=0;O<v.length;O+=1)v[O]&&v[O].m(r,null);m=!0,h||(p=listen(c,"click",S),h=!0)},p(b,T){e=b;const O={};if(!o&&T&1&&(o=!0,O.value=e[17].data[e[20]].name,add_flush_callback(()=>o=!1)),i.$set(O),T&13){w=ensure_array_like(e[17].data[e[20]].processSteps);let k;for(k=0;k<w.length;k+=1){const $=get_each_context_2$6(e,w,k);v[k]?(v[k].p($,T),transition_in(v[k],1)):(v[k]=create_each_block_2$6($),v[k].c(),transition_in(v[k],1),v[k].m(r,null))}for(group_outros(),k=w.length;k<v.length;k+=1)g(k);check_outros()}(!m||T&1&&f!==(f="field "+(e[17].data[e[20]].processSteps.length>0?"":"no-arrow")+" svelte-uakoe0"))&&attr(r,"class",f)},i(b){if(!m){transition_in(i.$$.fragment,b);for(let T=0;T<w.length;T+=1)transition_in(v[T]);m=!0}},o(b){transition_out(i.$$.fragment,b),v=v.filter(Boolean);for(let T=0;T<v.length;T+=1)transition_out(v[T]);m=!1},d(b){b&&detach(r),destroy_component(i),destroy_each(v,b),h=!1,p()}}}function create_each_block$c(t){let e,r,a,i,o,u,c,d,f,m=[],h=new Map,p,_,y,S;function w(k){t[6](k,t[17])}let v={};t[17].displayName!==void 0&&(v.value=t[17].displayName),a=new InPlaceEdit({props:v}),binding_callbacks.push(()=>bind(a,"value",w));function g(...k){return t[7](t[17],...k)}function b(...k){return t[8](t[17],...k)}let T=ensure_array_like(Object.entries(t[17].data));const O=k=>k[20];for(let k=0;k<T.length;k+=1){let $=get_each_context_1$8(t,T,k),M=O($);h.set(M,m[k]=create_each_block_1$8(M,$))}return{c(){e=element("details"),r=element("summary"),create_component(a.$$.fragment),o=space(),u=element("div"),u.textContent="",c=space(),d=element("div"),d.textContent="",f=space();for(let k=0;k<m.length;k+=1)m[k].c();p=space(),attr(u,"class","deleteTable hoverbutton svelte-uakoe0"),attr(d,"class","viewTable hoverbutton svelte-uakoe0"),attr(r,"class","svelte-uakoe0"),e.open=!0,attr(e,"class","dataTable svelte-uakoe0")},m(k,$){insert(k,e,$),append(e,r),mount_component(a,r,null),append(r,o),append(r,u),append(r,c),append(r,d),append(e,f);for(let M=0;M<m.length;M+=1)m[M]&&m[M].m(e,null);append(e,p),_=!0,y||(S=[listen(u,"click",g),listen(d,"click",b)],y=!0)},p(k,$){t=k;const M={};!i&&$&1&&(i=!0,M.value=t[17].displayName,add_flush_callback(()=>i=!1)),a.$set(M),$&45&&(T=ensure_array_like(Object.entries(t[17].data)),group_outros(),m=update_keyed_each(m,$,O,1,t,T,h,e,outro_and_destroy_block,create_each_block_1$8,p,get_each_context_1$8),check_outros())},i(k){if(!_){transition_in(a.$$.fragment,k);for(let $=0;$<T.length;$+=1)transition_in(m[$]);_=!0}},o(k){transition_out(a.$$.fragment,k);for(let $=0;$<m.length;$+=1)transition_out(m[$]);_=!1},d(k){k&&detach(e),destroy_component(a);for(let $=0;$<m.length;$+=1)m[$].d();y=!1,run_all(S)}}}function create_fragment$l(t){let e,r,a,i,o,u=ensure_array_like(t[0]),c=[];for(let f=0;f<u.length;f+=1)c[f]=create_each_block$c(get_each_context$c(t,u,f));const d=f=>transition_out(c[f],1,1,()=>{c[f]=null});return{c(){e=element("div"),r=element("h1"),r.textContent="Data Tables",a=space(),i=element("div");for(let f=0;f<c.length;f+=1)c[f].c();attr(i,"class","dataTree scroll-shadows svelte-uakoe0"),attr(e,"id","dataTreeContainer"),set_style(e,"overflow","auto"),set_style(e,"height","100%"),set_style(e,"width","auto")},m(f,m){insert(f,e,m),append(e,r),append(e,a),append(e,i);for(let h=0;h<c.length;h+=1)c[h]&&c[h].m(i,null);o=!0},p(f,[m]){if(m&63){u=ensure_array_like(f[0]);let h;for(h=0;h<u.length;h+=1){const p=get_each_context$c(f,u,h);c[h]?(c[h].p(p,m),transition_in(c[h],1)):(c[h]=create_each_block$c(p),c[h].c(),transition_in(c[h],1),c[h].m(i,null))}for(group_outros(),h=u.length;h<c.length;h+=1)d(h);check_outros()}},i(f){if(!o){for(let m=0;m<u.length;m+=1)transition_in(c[m]);o=!0}},o(f){c=c.filter(Boolean);for(let m=0;m<c.length;m+=1)transition_out(c[m]);o=!1},d(f){f&&detach(e),destroy_each(c,f)}}}function instance$m(t,e,r){let a,i,o,u,c;component_subscribe(t,contextMenu,T=>r(13,a=T)),component_subscribe(t,data,T=>r(0,i=T)),component_subscribe(t,dataIDsforTables,T=>r(14,o=T)),component_subscribe(t,activeTableTab,T=>r(15,u=T)),component_subscribe(t,showalldata,T=>r(16,c=T));function d(T){const O=o.indexOf(T);O<0?(o.push(T),dataIDsforTables.set(o),c.push(!1),showalldata.set(c),set_store_value(activeTableTab,u=o.length-1,u)):set_store_value(activeTableTab,u=O,u)}function f(T,O,k,$){let M=i.findIndex(R=>R.id===T);set_store_value(data,i[M].data[O].processSteps[k].parameters=$,i),updateDataProcess(T,O)}function m(T,O,k){let $=i.findIndex(M=>M.id===T);i[$].data[O].processSteps.splice(k,1),updateDataProcess(T,O),i[$].data[O].processSteps.length===0&&set_store_value(data,i[$].data[O].processedData=[],i)}function h(T){set_store_value(dataIDsforTables,o=o.filter(k=>k!==T),o),set_store_value(activeTableTab,u=o.length>0?0:-1,u),graphs.update(k=>k.map($=>{const M=$.sourceData.filter(R=>R.tableID!==T);return{...$,sourceData:M}}));let O=i.findIndex(k=>k.id===T);data.update(k=>(k.splice(O,1),k))}function p(T,O,k){set_store_value(contextMenu,a={labels:[],funcs:[]},a);const $=getFieldType(O,k),M=Object.keys(componentMap);for(let R=0;R<M.length;R++)componentMap[M[R]].forTypes.includes($)&&(set_store_value(contextMenu,a.labels[R]=M[R],a),set_store_value(contextMenu,a.funcs[R]=()=>addProcess(M[R],T,O,k),a))}function _(T,O){t.$$.not_equal(O.displayName,T)&&(O.displayName=T,data.set(i))}const y=(T,O)=>{O.preventDefault(),h(T.id)},S=(T,O)=>{O.preventDefault(),d(T.id)};function w(T,O,k){t.$$.not_equal(O.data[k].name,T)&&(O.data[k].name=T,data.set(i))}return[i,d,f,m,h,p,_,y,S,w,(T,O,k)=>{k.preventDefault(),p("data",T.id,O)},(T,O,k,$)=>{$.preventDefault(),m(T.id,O,k)},(T,O,k,$)=>f(T.id,O,k,$.detail.params)]}class DataTree extends SvelteComponent{constructor(e){super(),init(this,e,instance$m,create_fragment$l,safe_not_equal,{})}}function create_if_block$e(t){let e,r;return{c(){e=element("div"),r=text(t[0]),set_style(e,"top",t[3]+"px"),set_style(e,"left",t[2]+"px"),attr(e,"class","tooltip svelte-1926ilb")},m(a,i){insert(a,e,i),append(e,r)},p(a,i){i&1&&set_data(r,a[0]),i&8&&set_style(e,"top",a[3]+"px"),i&4&&set_style(e,"left",a[2]+"px")},d(a){a&&detach(e)}}}function create_fragment$k(t){let e,r,a,i,o,u;const c=t[8].default,d=create_slot(c,t,t[7],null);let f=t[1]&&create_if_block$e(t);return{c(){e=element("div"),d&&d.c(),r=space(),f&&f.c(),a=empty$1()},m(m,h){insert(m,e,h),d&&d.m(e,null),insert(m,r,h),f&&f.m(m,h),insert(m,a,h),i=!0,o||(u=[listen(e,"mouseover",t[4]),listen(e,"mouseleave",t[6]),listen(e,"mousemove",t[5])],o=!0)},p(m,[h]){d&&d.p&&(!i||h&128)&&update_slot_base(d,c,m,m[7],i?get_slot_changes(c,m[7],h,null):get_all_dirty_from_scope(m[7]),null),m[1]?f?f.p(m,h):(f=create_if_block$e(m),f.c(),f.m(a.parentNode,a)):f&&(f.d(1),f=null)},i(m){i||(transition_in(d,m),i=!0)},o(m){transition_out(d,m),i=!1},d(m){m&&(detach(e),detach(r),detach(a)),d&&d.d(m),f&&f.d(m),o=!1,run_all(u)}}}function instance$l(t,e,r){let{$$slots:a={},$$scope:i}=e,{tipcontent:o=""}=e,u=!1,c,d;function f(p){r(1,u=!0),r(2,c=p.clientX+5),r(3,d=p.clientY+5)}function m(p){r(2,c=p.clientX+5),r(3,d=p.clientY+5)}function h(){r(1,u=!1)}return t.$$set=p=>{"tipcontent"in p&&r(0,o=p.tipcontent),"$$scope"in p&&r(7,i=p.$$scope)},[o,u,c,d,f,m,h,i,a]}class Tooltip extends SvelteComponent{constructor(e){super(),init(this,e,instance$l,create_fragment$k,safe_not_equal,{tipcontent:0})}}function create_default_slot_2$3(t){let e,r,a;return{c(){e=element("div"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M304 192v32c0 6.6-5.4 12-12 12h-56v56c0 6.6-5.4 12-12 12h-32c-6.6 0-12-5.4-12-12v-56h-56c-6.6 0-12-5.4-12-12v-32c0-6.6 5.4-12 12-12h56v-56c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v56h56c6.6 0 12 5.4 12 12zm201 284.7L476.7 505c-9.4 9.4-24.6 9.4-33.9 0L343 405.3c-4.5-4.5-7-10.6-7-17V372c-35.3 27.6-79.7 44-128 44C93.1 416 0 322.9 0 208S93.1 0 208 0s208 93.1 208 208c0 48.3-16.4 92.7-44 128h16.3c6.4 0 12.5 2.5 17 7l99.7 99.7c9.3 9.4 9.3 24.6 0 34zM344 208c0-75.2-60.8-136-136-136S72 132.8 72 208s60.8 136 136 136 136-60.8 136-136z" style="transform: scale(0.04); fill: var(--font-color); "></path></svg>',attr(e,"class","button svelte-1289zmx"),attr(e,"id","Zoom in")},m(i,o){insert(i,e,o),r||(a=listen(e,"click",t[0]),r=!0)},p:noop,d(i){i&&detach(e),r=!1,a()}}}function create_default_slot_1$3(t){let e,r,a;return{c(){e=element("div"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M304 192v32c0 6.6-5.4 12-12 12H124c-6.6 0-12-5.4-12-12v-32c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm201 284.7L476.7 505c-9.4 9.4-24.6 9.4-33.9 0L343 405.3c-4.5-4.5-7-10.6-7-17V372c-35.3 27.6-79.7 44-128 44C93.1 416 0 322.9 0 208S93.1 0 208 0s208 93.1 208 208c0 48.3-16.4 92.7-44 128h16.3c6.4 0 12.5 2.5 17 7l99.7 99.7c9.3 9.4 9.3 24.6 0 34zM344 208c0-75.2-60.8-136-136-136S72 132.8 72 208s60.8 136 136 136 136-60.8 136-136z" style="transform: scale(0.04); fill: var(--font-color); "></path></svg>',attr(e,"class","button svelte-1289zmx"),attr(e,"id","Zoom in")},m(i,o){insert(i,e,o),r||(a=listen(e,"click",t[1]),r=!0)},p:noop,d(i){i&&detach(e),r=!1,a()}}}function create_default_slot$6(t){let e,r,a;return{c(){e=element("div"),e.textContent="",attr(e,"class","button svelte-1289zmx"),attr(e,"id","export")},m(i,o){insert(i,e,o),r||(a=listen(e,"click",t[2]),r=!0)},p:noop,d(i){i&&detach(e),r=!1,a()}}}function create_fragment$j(t){let e,r,a,i,o,u,c;return r=new Tooltip({props:{tipcontent:"Zoom in",$$slots:{default:[create_default_slot_2$3]},$$scope:{ctx:t}}}),i=new Tooltip({props:{tipcontent:"Zoom out",$$slots:{default:[create_default_slot_1$3]},$$scope:{ctx:t}}}),u=new Tooltip({props:{tipcontent:"Save plot",$$slots:{default:[create_default_slot$6]},$$scope:{ctx:t}}}),{c(){e=element("div"),create_component(r.$$.fragment),a=space(),create_component(i.$$.fragment),o=space(),create_component(u.$$.fragment),attr(e,"id","chartTools"),attr(e,"class","svelte-1289zmx")},m(d,f){insert(d,e,f),mount_component(r,e,null),append(e,a),mount_component(i,e,null),append(e,o),mount_component(u,e,null),c=!0},p(d,[f]){const m={};f&8&&(m.$$scope={dirty:f,ctx:d}),r.$set(m);const h={};f&8&&(h.$$scope={dirty:f,ctx:d}),i.$set(h);const p={};f&8&&(p.$$scope={dirty:f,ctx:d}),u.$set(p)},i(d){c||(transition_in(r.$$.fragment,d),transition_in(i.$$.fragment,d),transition_in(u.$$.fragment,d),c=!0)},o(d){transition_out(r.$$.fragment,d),transition_out(i.$$.fragment,d),transition_out(u.$$.fragment,d),c=!1},d(d){d&&detach(e),destroy_component(r),destroy_component(i),destroy_component(u)}}}function exportSVG(){if(get_store_value(activeGraphTab)<0){console.log("Nothing to export");return}const t=document.getElementById("thePlot").querySelector("svg").outerHTML,e=new Blob([t],{type:"image/svg+xml;charset=utf-8"}),r=URL.createObjectURL(e),a=document.createElement("a");a.href=r,a.download=get_store_value(graphTabs)[get_store_value(activeGraphTab)].name+".svg",document.body.appendChild(a),a.click(),URL.revokeObjectURL(r)}function Zoom(t="in"){const e=document.getElementById("svgContainer");var a=parseFloat(e.style.transform.slice(e.style.transform.indexOf("scale")+6));t==="in"?a+=.1:a-=.1,graphs.update(i=>(i[get_store_value(activeGraphTab)].zoom=a,i)),e.style.transform="scale("+a+")",e.style.width=""}function instance$k(t){return[i=>Zoom("in"),()=>Zoom("out"),()=>exportSVG()]}class Charttools extends SvelteComponent{constructor(e){super(),init(this,e,instance$k,create_fragment$j,safe_not_equal,{})}}function get_each_context$b(t,e,r){const a=t.slice();return a[8]=e[r],a[9]=e,a[10]=r,a}function create_else_block$5(t){let e,r,a,i,o,u=ensure_array_like(t[0]),c=[];for(let f=0;f<u.length;f+=1)c[f]=create_each_block$b(get_each_context$b(t,u,f));const d=f=>transition_out(c[f],1,1,()=>{c[f]=null});return i=new Charttools({}),{c(){e=element("nav"),r=element("ul");for(let f=0;f<c.length;f+=1)c[f].c();a=space(),create_component(i.$$.fragment),attr(r,"class","svelte-1gfrvzx"),attr(e,"class","svelte-1gfrvzx")},m(f,m){insert(f,e,m),append(e,r);for(let h=0;h<c.length;h+=1)c[h]&&c[h].m(r,null);insert(f,a,m),mount_component(i,f,m),o=!0},p(f,m){if(m&15){u=ensure_array_like(f[0]);let h;for(h=0;h<u.length;h+=1){const p=get_each_context$b(f,u,h);c[h]?(c[h].p(p,m),transition_in(c[h],1)):(c[h]=create_each_block$b(p),c[h].c(),transition_in(c[h],1),c[h].m(r,null))}for(group_outros(),h=u.length;h<c.length;h+=1)d(h);check_outros()}},i(f){if(!o){for(let m=0;m<u.length;m+=1)transition_in(c[m]);transition_in(i.$$.fragment,f),o=!0}},o(f){c=c.filter(Boolean);for(let m=0;m<c.length;m+=1)transition_out(c[m]);transition_out(i.$$.fragment,f),o=!1},d(f){f&&(detach(e),detach(a)),destroy_each(c,f),destroy_component(i,f)}}}function create_if_block$d(t){let e;return{c(){e=element("h3"),e.textContent="Need to add a chart"},m(r,a){insert(r,e,a)},p:noop,i:noop,o:noop,d(r){r&&detach(e)}}}function create_each_block$b(t){let e,r,a,i,o,u,c,d,f,m,h;function p(w){t[4](w,t[8])}let _={};t[8].name!==void 0&&(_.value=t[8].name),a=new InPlaceEdit({props:_}),binding_callbacks.push(()=>bind(a,"value",p));function y(){return t[5](t[10])}function S(){return t[6](t[10])}return{c(){e=element("li"),r=element("span"),create_component(a.$$.fragment),o=space(),u=element("button"),u.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="svelte-1gfrvzx"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg>',c=space(),attr(r,"class","tabname svelte-1gfrvzx"),attr(u,"class","closeButton svelte-1gfrvzx"),attr(e,"class",d=null_to_empty(t[1]===t[10]?"active":"")+" svelte-1gfrvzx")},m(w,v){insert(w,e,v),append(e,r),mount_component(a,r,null),append(e,o),append(e,u),append(e,c),f=!0,m||(h=[listen(r,"click",y),listen(u,"click",S)],m=!0)},p(w,v){t=w;const g={};!i&&v&1&&(i=!0,g.value=t[8].name,add_flush_callback(()=>i=!1)),a.$set(g),(!f||v&2&&d!==(d=null_to_empty(t[1]===t[10]?"active":"")+" svelte-1gfrvzx"))&&attr(e,"class",d)},i(w){f||(transition_in(a.$$.fragment,w),f=!0)},o(w){transition_out(a.$$.fragment,w),f=!1},d(w){w&&detach(e),destroy_component(a),m=!1,run_all(h)}}}function create_fragment$i(t){let e,r,a,i;const o=[create_if_block$d,create_else_block$5],u=[];function c(d,f){return d[1]<0?0:1}return r=c(t),a=u[r]=o[r](t),{c(){e=element("div"),a.c(),attr(e,"id","graphTabs"),set_style(e,"margin","0 1em"),attr(e,"class","svelte-1gfrvzx")},m(d,f){insert(d,e,f),u[r].m(e,null),i=!0},p(d,[f]){let m=r;r=c(d),r===m?u[r].p(d,f):(group_outros(),transition_out(u[m],1,1,()=>{u[m]=null}),check_outros(),a=u[r],a?a.p(d,f):(a=u[r]=o[r](d),a.c()),transition_in(a,1),a.m(e,null))},i(d){i||(transition_in(a),i=!0)},o(d){transition_out(a),i=!1},d(d){d&&detach(e),u[r].d()}}}function instance$j(t,e,r){let a,i,o;component_subscribe(t,graphTabs,h=>r(0,a=h)),component_subscribe(t,graphs,h=>r(7,i=h)),component_subscribe(t,activeGraphTab,h=>r(1,o=h));function u(h){set_store_value(activeGraphTab,o=h,o)}function c(h){i.splice(h,1),a.splice(h,1),set_store_value(activeGraphTab,o=i.length-1,o),console.log(o),graphs.set(i),graphTabs.set(a)}function d(h,p){t.$$.not_equal(p.name,h)&&(p.name=h,graphTabs.set(a))}return[a,o,u,c,d,h=>u(h),h=>c(h)]}class GraphTabs extends SvelteComponent{constructor(e){super(),init(this,e,instance$j,create_fragment$i,safe_not_equal,{})}}function instance$i(t,e,r){let a,i;return component_subscribe(t,activeGraphTab,o=>r(0,a=o)),component_subscribe(t,graphs,o=>r(1,i=o)),onMount(()=>{updateGraphProcess(a,0,"time"),updateGraphProcess(a,1,"time"),set_store_value(graphs,i[a].params.dayHeight=15,i)}),[]}class ChartMaster extends SvelteComponent{constructor(e){super(),init(this,e,instance$i,null,safe_not_equal,{})}}function ascending$1(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function descending(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function bisector(t){let e,r,a;t.length!==2?(e=ascending$1,r=(c,d)=>ascending$1(t(c),d),a=(c,d)=>t(c)-d):(e=t===ascending$1||t===descending?t:zero$1,r=t,a=t);function i(c,d,f=0,m=c.length){if(f<m){if(e(d,d)!==0)return m;do{const h=f+m>>>1;r(c[h],d)<0?f=h+1:m=h}while(f<m)}return f}function o(c,d,f=0,m=c.length){if(f<m){if(e(d,d)!==0)return m;do{const h=f+m>>>1;r(c[h],d)<=0?f=h+1:m=h}while(f<m)}return f}function u(c,d,f=0,m=c.length){const h=i(c,d,f,m-1);return h>f&&a(c[h-1],d)>-a(c[h],d)?h-1:h}return{left:i,center:u,right:o}}function zero$1(){return 0}function number$2(t){return t===null?NaN:+t}const ascendingBisect=bisector(ascending$1),bisectRight=ascendingBisect.right;bisector(number$2).center;const e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(t,e,r){const a=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(a)),o=a/Math.pow(10,i),u=o>=e10?10:o>=e5?5:o>=e2?2:1;let c,d,f;return i<0?(f=Math.pow(10,-i)/u,c=Math.round(t*f),d=Math.round(e*f),c/f<t&&++c,d/f>e&&--d,f=-f):(f=Math.pow(10,i)*u,c=Math.round(t/f),d=Math.round(e/f),c*f<t&&++c,d*f>e&&--d),d<c&&.5<=r&&r<2?tickSpec(t,e,r*2):[c,d,f]}function ticks(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const a=e<t,[i,o,u]=a?tickSpec(e,t,r):tickSpec(t,e,r);if(!(o>=i))return[];const c=o-i+1,d=new Array(c);if(a)if(u<0)for(let f=0;f<c;++f)d[f]=(o-f)/-u;else for(let f=0;f<c;++f)d[f]=(o-f)*u;else if(u<0)for(let f=0;f<c;++f)d[f]=(i+f)/-u;else for(let f=0;f<c;++f)d[f]=(i+f)*u;return d}function tickIncrement(t,e,r){return e=+e,t=+t,r=+r,tickSpec(t,e,r)[2]}function tickStep(t,e,r){e=+e,t=+t,r=+r;const a=e<t,i=a?tickIncrement(e,t,r):tickIncrement(t,e,r);return(a?-1:1)*(i<0?1/-i:i)}function initRange(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function define(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function extend(t,e){var r=Object.create(t.prototype);for(var a in e)r[a]=e[a];return r}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=reHex.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?rgbn(e):r===3?new Rgb(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?rgba(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?rgba(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=reRgbInteger.exec(t))?new Rgb(e[1],e[2],e[3],1):(e=reRgbPercent.exec(t))?new Rgb(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=reRgbaInteger.exec(t))?rgba(e[1],e[2],e[3],e[4]):(e=reRgbaPercent.exec(t))?rgba(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=reHslPercent.exec(t))?hsla(e[1],e[2]/100,e[3]/100,1):(e=reHslaPercent.exec(t))?hsla(e[1],e[2]/100,e[3]/100,e[4]):named.hasOwnProperty(t)?rgbn(named[t]):t==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(t){return new Rgb(t>>16&255,t>>8&255,t&255,1)}function rgba(t,e,r,a){return a<=0&&(t=e=r=NaN),new Rgb(t,e,r,a)}function rgbConvert(t){return t instanceof Color||(t=color(t)),t?(t=t.rgb(),new Rgb(t.r,t.g,t.b,t.opacity)):new Rgb}function rgb$1(t,e,r,a){return arguments.length===1?rgbConvert(t):new Rgb(t,e,r,a??1)}function Rgb(t,e,r,a){this.r=+t,this.g=+e,this.b=+r,this.opacity=+a}define(Rgb,rgb$1,extend(Color,{brighter(t){return t=t==null?brighter:Math.pow(brighter,t),new Rgb(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?darker:Math.pow(darker,t),new Rgb(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const t=clampa(this.opacity);return`${t===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${t===1?")":`, ${t})`}`}function clampa(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function clampi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function hex(t){return t=clampi(t),(t<16?"0":"")+t.toString(16)}function hsla(t,e,r,a){return a<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Hsl(t,e,r,a)}function hslConvert(t){if(t instanceof Hsl)return new Hsl(t.h,t.s,t.l,t.opacity);if(t instanceof Color||(t=color(t)),!t)return new Hsl;if(t instanceof Hsl)return t;t=t.rgb();var e=t.r/255,r=t.g/255,a=t.b/255,i=Math.min(e,r,a),o=Math.max(e,r,a),u=NaN,c=o-i,d=(o+i)/2;return c?(e===o?u=(r-a)/c+(r<a)*6:r===o?u=(a-e)/c+2:u=(e-r)/c+4,c/=d<.5?o+i:2-o-i,u*=60):c=d>0&&d<1?0:u,new Hsl(u,c,d,t.opacity)}function hsl(t,e,r,a){return arguments.length===1?hslConvert(t):new Hsl(t,e,r,a??1)}function Hsl(t,e,r,a){this.h=+t,this.s=+e,this.l=+r,this.opacity=+a}define(Hsl,hsl,extend(Color,{brighter(t){return t=t==null?brighter:Math.pow(brighter,t),new Hsl(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?darker:Math.pow(darker,t),new Hsl(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,a=r+(r<.5?r:1-r)*e,i=2*r-a;return new Rgb(hsl2rgb(t>=240?t-240:t+120,i,a),hsl2rgb(t,i,a),hsl2rgb(t<120?t+240:t-120,i,a),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=clampa(this.opacity);return`${t===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${t===1?")":`, ${t})`}`}}));function clamph(t){return t=(t||0)%360,t<0?t+360:t}function clampt(t){return Math.max(0,Math.min(1,t||0))}function hsl2rgb(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const constant$1=t=>()=>t;function linear$1(t,e){return function(r){return t+r*e}}function exponential(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(a){return Math.pow(t+a*e,r)}}function gamma(t){return(t=+t)==1?nogamma:function(e,r){return r-e?exponential(e,r,t):constant$1(isNaN(e)?r:e)}}function nogamma(t,e){var r=e-t;return r?linear$1(t,r):constant$1(isNaN(t)?e:t)}const rgb=function t(e){var r=gamma(e);function a(i,o){var u=r((i=rgb$1(i)).r,(o=rgb$1(o)).r),c=r(i.g,o.g),d=r(i.b,o.b),f=nogamma(i.opacity,o.opacity);return function(m){return i.r=u(m),i.g=c(m),i.b=d(m),i.opacity=f(m),i+""}}return a.gamma=t,a}(1);function numberArray(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,a=e.slice(),i;return function(o){for(i=0;i<r;++i)a[i]=t[i]*(1-o)+e[i]*o;return a}}function isNumberArray(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function genericArray(t,e){var r=e?e.length:0,a=t?Math.min(r,t.length):0,i=new Array(a),o=new Array(r),u;for(u=0;u<a;++u)i[u]=interpolate(t[u],e[u]);for(;u<r;++u)o[u]=e[u];return function(c){for(u=0;u<a;++u)o[u]=i[u](c);return o}}function date(t,e){var r=new Date;return t=+t,e=+e,function(a){return r.setTime(t*(1-a)+e*a),r}}function interpolateNumber(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function object(t,e){var r={},a={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=interpolate(t[i],e[i]):a[i]=e[i];return function(o){for(i in r)a[i]=r[i](o);return a}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(t){return function(){return t}}function one(t){return function(e){return t(e)+""}}function string(t,e){var r=reA.lastIndex=reB.lastIndex=0,a,i,o,u=-1,c=[],d=[];for(t=t+"",e=e+"";(a=reA.exec(t))&&(i=reB.exec(e));)(o=i.index)>r&&(o=e.slice(r,o),c[u]?c[u]+=o:c[++u]=o),(a=a[0])===(i=i[0])?c[u]?c[u]+=i:c[++u]=i:(c[++u]=null,d.push({i:u,x:interpolateNumber(a,i)})),r=reB.lastIndex;return r<e.length&&(o=e.slice(r),c[u]?c[u]+=o:c[++u]=o),c.length<2?d[0]?one(d[0].x):zero(e):(e=d.length,function(f){for(var m=0,h;m<e;++m)c[(h=d[m]).i]=h.x(f);return c.join("")})}function interpolate(t,e){var r=typeof e,a;return e==null||r==="boolean"?constant$1(e):(r==="number"?interpolateNumber:r==="string"?(a=color(e))?(e=a,rgb):string:e instanceof color?rgb:e instanceof Date?date:isNumberArray(e)?numberArray:Array.isArray(e)?genericArray:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?object:interpolateNumber)(t,e)}function interpolateRound(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function constants(t){return function(){return t}}function number$1(t){return+t}var unit=[0,1];function identity$2(t){return t}function normalize(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:constants(isNaN(e)?NaN:.5)}function clamper(t,e){var r;return t>e&&(r=t,t=e,e=r),function(a){return Math.max(t,Math.min(e,a))}}function bimap(t,e,r){var a=t[0],i=t[1],o=e[0],u=e[1];return i<a?(a=normalize(i,a),o=r(u,o)):(a=normalize(a,i),o=r(o,u)),function(c){return o(a(c))}}function polymap(t,e,r){var a=Math.min(t.length,e.length)-1,i=new Array(a),o=new Array(a),u=-1;for(t[a]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++u<a;)i[u]=normalize(t[u],t[u+1]),o[u]=r(e[u],e[u+1]);return function(c){var d=bisectRight(t,c,1,a)-1;return o[d](i[d](c))}}function copy(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function transformer(){var t=unit,e=unit,r=interpolate,a,i,o,u=identity$2,c,d,f;function m(){var p=Math.min(t.length,e.length);return u!==identity$2&&(u=clamper(t[0],t[p-1])),c=p>2?polymap:bimap,d=f=null,h}function h(p){return p==null||isNaN(p=+p)?o:(d||(d=c(t.map(a),e,r)))(a(u(p)))}return h.invert=function(p){return u(i((f||(f=c(e,t.map(a),interpolateNumber)))(p)))},h.domain=function(p){return arguments.length?(t=Array.from(p,number$1),m()):t.slice()},h.range=function(p){return arguments.length?(e=Array.from(p),m()):e.slice()},h.rangeRound=function(p){return e=Array.from(p),r=interpolateRound,m()},h.clamp=function(p){return arguments.length?(u=p?!0:identity$2,m()):u!==identity$2},h.interpolate=function(p){return arguments.length?(r=p,m()):r},h.unknown=function(p){return arguments.length?(o=p,h):o},function(p,_){return a=p,i=_,m()}}function continuous(){return transformer()(identity$2,identity$2)}function formatDecimal(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function formatDecimalParts(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,a=t.slice(0,r);return[a.length>1?a[0]+a.slice(2):a,+t.slice(r+1)]}function exponent(t){return t=formatDecimalParts(Math.abs(t)),t?t[1]:NaN}function formatGroup(t,e){return function(r,a){for(var i=r.length,o=[],u=0,c=t[0],d=0;i>0&&c>0&&(d+c+1>a&&(c=Math.max(1,a-d)),o.push(r.substring(i-=c,i+c)),!((d+=c+1)>a));)c=t[u=(u+1)%t.length];return o.reverse().join(e)}}function formatNumerals(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(t){if(!(e=re.exec(t)))throw new Error("invalid format: "+t);var e;return new FormatSpecifier({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(t){e:for(var e=t.length,r=1,a=-1,i;r<e;++r)switch(t[r]){case".":a=i=r;break;case"0":a===0&&(a=r),i=r;break;default:if(!+t[r])break e;a>0&&(a=0);break}return a>0?t.slice(0,a)+t.slice(i+1):t}var prefixExponent;function formatPrefixAuto(t,e){var r=formatDecimalParts(t,e);if(!r)return t+"";var a=r[0],i=r[1],o=i-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,u=a.length;return o===u?a:o>u?a+new Array(o-u+1).join("0"):o>0?a.slice(0,o)+"."+a.slice(o):"0."+new Array(1-o).join("0")+formatDecimalParts(t,Math.max(0,e+o-1))[0]}function formatRounded(t,e){var r=formatDecimalParts(t,e);if(!r)return t+"";var a=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+a:a.length>i+1?a.slice(0,i+1)+"."+a.slice(i+1):a+new Array(i-a.length+2).join("0")}const formatTypes={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:formatDecimal,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>formatRounded(t*100,e),r:formatRounded,s:formatPrefixAuto,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function identity$1(t){return t}var map=Array.prototype.map,prefixes=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function formatLocale(t){var e=t.grouping===void 0||t.thousands===void 0?identity$1:formatGroup(map.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",a=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?identity$1:formatNumerals(map.call(t.numerals,String)),u=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"":t.minus+"",d=t.nan===void 0?"NaN":t.nan+"";function f(h){h=formatSpecifier(h);var p=h.fill,_=h.align,y=h.sign,S=h.symbol,w=h.zero,v=h.width,g=h.comma,b=h.precision,T=h.trim,O=h.type;O==="n"?(g=!0,O="g"):formatTypes[O]||(b===void 0&&(b=12),T=!0,O="g"),(w||p==="0"&&_==="=")&&(w=!0,p="0",_="=");var k=S==="$"?r:S==="#"&&/[boxX]/.test(O)?"0"+O.toLowerCase():"",$=S==="$"?a:/[%p]/.test(O)?u:"",M=formatTypes[O],R=/[defgprs%]/.test(O);b=b===void 0?6:/[gprs]/.test(O)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function A(N){var L=k,V=$,C,F,z;if(O==="c")V=M(N)+V,N="";else{N=+N;var H=N<0||1/N<0;if(N=isNaN(N)?d:M(Math.abs(N),b),T&&(N=formatTrim(N)),H&&+N==0&&y!=="+"&&(H=!1),L=(H?y==="("?y:c:y==="-"||y==="("?"":y)+L,V=(O==="s"?prefixes[8+prefixExponent/3]:"")+V+(H&&y==="("?")":""),R){for(C=-1,F=N.length;++C<F;)if(z=N.charCodeAt(C),48>z||z>57){V=(z===46?i+N.slice(C+1):N.slice(C))+V,N=N.slice(0,C);break}}}g&&!w&&(N=e(N,1/0));var E=L.length+N.length+V.length,D=E<v?new Array(v-E+1).join(p):"";switch(g&&w&&(N=e(D+N,D.length?v-V.length:1/0),D=""),_){case"<":N=L+N+V+D;break;case"=":N=L+D+N+V;break;case"^":N=D.slice(0,E=D.length>>1)+L+N+V+D.slice(E);break;default:N=D+L+N+V;break}return o(N)}return A.toString=function(){return h+""},A}function m(h,p){var _=f((h=formatSpecifier(h),h.type="f",h)),y=Math.max(-8,Math.min(8,Math.floor(exponent(p)/3)))*3,S=Math.pow(10,-y),w=prefixes[8+y/3];return function(v){return _(S*v)+w}}return{format:f,formatPrefix:m}}var locale,format,formatPrefix;defaultLocale({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale(t){return locale=formatLocale(t),format=locale.format,formatPrefix=locale.formatPrefix,locale}function precisionFixed(t){return Math.max(0,-exponent(Math.abs(t)))}function precisionPrefix(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(e)/3)))*3-exponent(Math.abs(t)))}function precisionRound(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,exponent(e)-exponent(t))+1}function tickFormat(t,e,r,a){var i=tickStep(t,e,r),o;switch(a=formatSpecifier(a??",f"),a.type){case"s":{var u=Math.max(Math.abs(t),Math.abs(e));return a.precision==null&&!isNaN(o=precisionPrefix(i,u))&&(a.precision=o),formatPrefix(a,u)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(o=precisionRound(i,Math.max(Math.abs(t),Math.abs(e))))&&(a.precision=o-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(o=precisionFixed(i))&&(a.precision=o-(a.type==="%")*2);break}}return format(a)}function linearish(t){var e=t.domain;return t.ticks=function(r){var a=e();return ticks(a[0],a[a.length-1],r??10)},t.tickFormat=function(r,a){var i=e();return tickFormat(i[0],i[i.length-1],r??10,a)},t.nice=function(r){r==null&&(r=10);var a=e(),i=0,o=a.length-1,u=a[i],c=a[o],d,f,m=10;for(c<u&&(f=u,u=c,c=f,f=i,i=o,o=f);m-- >0;){if(f=tickIncrement(u,c,r),f===d)return a[i]=u,a[o]=c,e(a);if(f>0)u=Math.floor(u/f)*f,c=Math.ceil(c/f)*f;else if(f<0)u=Math.ceil(u*f)/f,c=Math.floor(c*f)/f;else break;d=f}return t},t}function linear(){var t=continuous();return t.copy=function(){return copy(t,linear())},initRange.apply(t,arguments),linearish(t)}var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),namespaces.hasOwnProperty(e)?{space:namespaces[e],local:t}:t}function creatorInherit(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===xhtml&&e.documentElement.namespaceURI===xhtml?e.createElement(t):e.createElementNS(r,t)}}function creatorFixed(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function creator(t){var e=namespace(t);return(e.local?creatorFixed:creatorInherit)(e)}function none(){}function selector(t){return t==null?none:function(){return this.querySelector(t)}}function selection_select(t){typeof t!="function"&&(t=selector(t));for(var e=this._groups,r=e.length,a=new Array(r),i=0;i<r;++i)for(var o=e[i],u=o.length,c=a[i]=new Array(u),d,f,m=0;m<u;++m)(d=o[m])&&(f=t.call(d,d.__data__,m,o))&&("__data__"in d&&(f.__data__=d.__data__),c[m]=f);return new Selection(a,this._parents)}function array(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function empty(){return[]}function selectorAll(t){return t==null?empty:function(){return this.querySelectorAll(t)}}function arrayAll(t){return function(){return array(t.apply(this,arguments))}}function selection_selectAll(t){typeof t=="function"?t=arrayAll(t):t=selectorAll(t);for(var e=this._groups,r=e.length,a=[],i=[],o=0;o<r;++o)for(var u=e[o],c=u.length,d,f=0;f<c;++f)(d=u[f])&&(a.push(t.call(d,d.__data__,f,u)),i.push(d));return new Selection(a,i)}function matcher(t){return function(){return this.matches(t)}}function childMatcher(t){return function(e){return e.matches(t)}}var find=Array.prototype.find;function childFind(t){return function(){return find.call(this.children,t)}}function childFirst(){return this.firstElementChild}function selection_selectChild(t){return this.select(t==null?childFirst:childFind(typeof t=="function"?t:childMatcher(t)))}var filter=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(t){return function(){return filter.call(this.children,t)}}function selection_selectChildren(t){return this.selectAll(t==null?children:childrenFilter(typeof t=="function"?t:childMatcher(t)))}function selection_filter(t){typeof t!="function"&&(t=matcher(t));for(var e=this._groups,r=e.length,a=new Array(r),i=0;i<r;++i)for(var o=e[i],u=o.length,c=a[i]=[],d,f=0;f<u;++f)(d=o[f])&&t.call(d,d.__data__,f,o)&&c.push(d);return new Selection(a,this._parents)}function sparse(t){return new Array(t.length)}function selection_enter(){return new Selection(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}EnterNode.prototype={constructor:EnterNode,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function constant(t){return function(){return t}}function bindIndex(t,e,r,a,i,o){for(var u=0,c,d=e.length,f=o.length;u<f;++u)(c=e[u])?(c.__data__=o[u],a[u]=c):r[u]=new EnterNode(t,o[u]);for(;u<d;++u)(c=e[u])&&(i[u]=c)}function bindKey(t,e,r,a,i,o,u){var c,d,f=new Map,m=e.length,h=o.length,p=new Array(m),_;for(c=0;c<m;++c)(d=e[c])&&(p[c]=_=u.call(d,d.__data__,c,e)+"",f.has(_)?i[c]=d:f.set(_,d));for(c=0;c<h;++c)_=u.call(t,o[c],c,o)+"",(d=f.get(_))?(a[c]=d,d.__data__=o[c],f.delete(_)):r[c]=new EnterNode(t,o[c]);for(c=0;c<m;++c)(d=e[c])&&f.get(p[c])===d&&(i[c]=d)}function datum(t){return t.__data__}function selection_data(t,e){if(!arguments.length)return Array.from(this,datum);var r=e?bindKey:bindIndex,a=this._parents,i=this._groups;typeof t!="function"&&(t=constant(t));for(var o=i.length,u=new Array(o),c=new Array(o),d=new Array(o),f=0;f<o;++f){var m=a[f],h=i[f],p=h.length,_=arraylike(t.call(m,m&&m.__data__,f,a)),y=_.length,S=c[f]=new Array(y),w=u[f]=new Array(y),v=d[f]=new Array(p);r(m,h,S,w,v,_,e);for(var g=0,b=0,T,O;g<y;++g)if(T=S[g]){for(g>=b&&(b=g+1);!(O=w[b])&&++b<y;);T._next=O||null}}return u=new Selection(u,a),u._enter=c,u._exit=d,u}function arraylike(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function selection_exit(){return new Selection(this._exit||this._groups.map(sparse),this._parents)}function selection_join(t,e,r){var a=this.enter(),i=this,o=this.exit();return typeof t=="function"?(a=t(a),a&&(a=a.selection())):a=a.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),r==null?o.remove():r(o),a&&i?a.merge(i).order():i}function selection_merge(t){for(var e=t.selection?t.selection():t,r=this._groups,a=e._groups,i=r.length,o=a.length,u=Math.min(i,o),c=new Array(i),d=0;d<u;++d)for(var f=r[d],m=a[d],h=f.length,p=c[d]=new Array(h),_,y=0;y<h;++y)(_=f[y]||m[y])&&(p[y]=_);for(;d<i;++d)c[d]=r[d];return new Selection(c,this._parents)}function selection_order(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var a=t[e],i=a.length-1,o=a[i],u;--i>=0;)(u=a[i])&&(o&&u.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(u,o),o=u);return this}function selection_sort(t){t||(t=ascending);function e(h,p){return h&&p?t(h.__data__,p.__data__):!h-!p}for(var r=this._groups,a=r.length,i=new Array(a),o=0;o<a;++o){for(var u=r[o],c=u.length,d=i[o]=new Array(c),f,m=0;m<c;++m)(f=u[m])&&(d[m]=f);d.sort(e)}return new Selection(i,this._parents).order()}function ascending(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function selection_call(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var a=t[e],i=0,o=a.length;i<o;++i){var u=a[i];if(u)return u}return null}function selection_size(){let t=0;for(const e of this)++t;return t}function selection_empty(){return!this.node()}function selection_each(t){for(var e=this._groups,r=0,a=e.length;r<a;++r)for(var i=e[r],o=0,u=i.length,c;o<u;++o)(c=i[o])&&t.call(c,c.__data__,o,i);return this}function attrRemove(t){return function(){this.removeAttribute(t)}}function attrRemoveNS(t){return function(){this.removeAttributeNS(t.space,t.local)}}function attrConstant(t,e){return function(){this.setAttribute(t,e)}}function attrConstantNS(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function attrFunction(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function attrFunctionNS(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function selection_attr(t,e){var r=namespace(t);if(arguments.length<2){var a=this.node();return r.local?a.getAttributeNS(r.space,r.local):a.getAttribute(r)}return this.each((e==null?r.local?attrRemoveNS:attrRemove:typeof e=="function"?r.local?attrFunctionNS:attrFunction:r.local?attrConstantNS:attrConstant)(r,e))}function defaultView(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function styleRemove(t){return function(){this.style.removeProperty(t)}}function styleConstant(t,e,r){return function(){this.style.setProperty(t,e,r)}}function styleFunction(t,e,r){return function(){var a=e.apply(this,arguments);a==null?this.style.removeProperty(t):this.style.setProperty(t,a,r)}}function selection_style(t,e,r){return arguments.length>1?this.each((e==null?styleRemove:typeof e=="function"?styleFunction:styleConstant)(t,e,r??"")):styleValue(this.node(),t)}function styleValue(t,e){return t.style.getPropertyValue(e)||defaultView(t).getComputedStyle(t,null).getPropertyValue(e)}function propertyRemove(t){return function(){delete this[t]}}function propertyConstant(t,e){return function(){this[t]=e}}function propertyFunction(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function selection_property(t,e){return arguments.length>1?this.each((e==null?propertyRemove:typeof e=="function"?propertyFunction:propertyConstant)(t,e)):this.node()[t]}function classArray(t){return t.trim().split(/^|\s+/)}function classList(t){return t.classList||new ClassList(t)}function ClassList(t){this._node=t,this._names=classArray(t.getAttribute("class")||"")}ClassList.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function classedAdd(t,e){for(var r=classList(t),a=-1,i=e.length;++a<i;)r.add(e[a])}function classedRemove(t,e){for(var r=classList(t),a=-1,i=e.length;++a<i;)r.remove(e[a])}function classedTrue(t){return function(){classedAdd(this,t)}}function classedFalse(t){return function(){classedRemove(this,t)}}function classedFunction(t,e){return function(){(e.apply(this,arguments)?classedAdd:classedRemove)(this,t)}}function selection_classed(t,e){var r=classArray(t+"");if(arguments.length<2){for(var a=classList(this.node()),i=-1,o=r.length;++i<o;)if(!a.contains(r[i]))return!1;return!0}return this.each((typeof e=="function"?classedFunction:e?classedTrue:classedFalse)(r,e))}function textRemove(){this.textContent=""}function textConstant(t){return function(){this.textContent=t}}function textFunction(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function selection_text(t){return arguments.length?this.each(t==null?textRemove:(typeof t=="function"?textFunction:textConstant)(t)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(t){return function(){this.innerHTML=t}}function htmlFunction(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function selection_html(t){return arguments.length?this.each(t==null?htmlRemove:(typeof t=="function"?htmlFunction:htmlConstant)(t)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(t){var e=typeof t=="function"?t:creator(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function constantNull(){return null}function selection_insert(t,e){var r=typeof t=="function"?t:creator(t),a=e==null?constantNull:typeof e=="function"?e:selector(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),a.apply(this,arguments)||null)})}function remove(){var t=this.parentNode;t&&t.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function selection_cloneDeep(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function selection_clone(t){return this.select(t?selection_cloneDeep:selection_cloneShallow)}function selection_datum(t){return arguments.length?this.property("__data__",t):this.node().__data__}function contextListener(t){return function(e){t.call(this,e,this.__data__)}}function parseTypenames(t){return t.trim().split(/^|\s+/).map(function(e){var r="",a=e.indexOf(".");return a>=0&&(r=e.slice(a+1),e=e.slice(0,a)),{type:e,name:r}})}function onRemove(t){return function(){var e=this.__on;if(e){for(var r=0,a=-1,i=e.length,o;r<i;++r)o=e[r],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++a]=o;++a?e.length=a:delete this.__on}}}function onAdd(t,e,r){return function(){var a=this.__on,i,o=contextListener(e);if(a){for(var u=0,c=a.length;u<c;++u)if((i=a[u]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=r),i.value=e;return}}this.addEventListener(t.type,o,r),i={type:t.type,name:t.name,value:e,listener:o,options:r},a?a.push(i):this.__on=[i]}}function selection_on(t,e,r){var a=parseTypenames(t+""),i,o=a.length,u;if(arguments.length<2){var c=this.node().__on;if(c){for(var d=0,f=c.length,m;d<f;++d)for(i=0,m=c[d];i<o;++i)if((u=a[i]).type===m.type&&u.name===m.name)return m.value}return}for(c=e?onAdd:onRemove,i=0;i<o;++i)this.each(c(a[i],e,r));return this}function dispatchEvent(t,e,r){var a=defaultView(t),i=a.CustomEvent;typeof i=="function"?i=new i(e,r):(i=a.document.createEvent("Event"),r?(i.initEvent(e,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function dispatchConstant(t,e){return function(){return dispatchEvent(this,t,e)}}function dispatchFunction(t,e){return function(){return dispatchEvent(this,t,e.apply(this,arguments))}}function selection_dispatch(t,e){return this.each((typeof e=="function"?dispatchFunction:dispatchConstant)(t,e))}function*selection_iterator(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var a=t[e],i=0,o=a.length,u;i<o;++i)(u=a[i])&&(yield u)}var root=[null];function Selection(t,e){this._groups=t,this._parents=e}function selection_selection(){return this}Selection.prototype={constructor:Selection,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};function select(t){return typeof t=="string"?new Selection([[document.querySelector(t)]],[document.documentElement]):new Selection([[t]],root)}function identity(t){return t}var top=1,right=2,bottom=3,left=4,epsilon=1e-6;function translateX(t){return"translate("+t+",0)"}function translateY(t){return"translate(0,"+t+")"}function number(t){return e=>+t(e)}function center(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),r=>+t(r)+e}function entering(){return!this.__axis}function axis(t,e){var r=[],a=null,i=null,o=6,u=6,c=3,d=typeof window<"u"&&window.devicePixelRatio>1?0:.5,f=t===top||t===left?-1:1,m=t===left||t===right?"x":"y",h=t===top||t===bottom?translateX:translateY;function p(_){var y=a??(e.ticks?e.ticks.apply(e,r):e.domain()),S=i??(e.tickFormat?e.tickFormat.apply(e,r):identity),w=Math.max(o,0)+c,v=e.range(),g=+v[0]+d,b=+v[v.length-1]+d,T=(e.bandwidth?center:number)(e.copy(),d),O=_.selection?_.selection():_,k=O.selectAll(".domain").data([null]),$=O.selectAll(".tick").data(y,e).order(),M=$.exit(),R=$.enter().append("g").attr("class","tick"),A=$.select("line"),N=$.select("text");k=k.merge(k.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),$=$.merge(R),A=A.merge(R.append("line").attr("stroke","currentColor").attr(m+"2",f*o)),N=N.merge(R.append("text").attr("fill","currentColor").attr(m,f*w).attr("dy",t===top?"0em":t===bottom?"0.71em":"0.32em")),_!==O&&(k=k.transition(_),$=$.transition(_),A=A.transition(_),N=N.transition(_),M=M.transition(_).attr("opacity",epsilon).attr("transform",function(L){return isFinite(L=T(L))?h(L+d):this.getAttribute("transform")}),R.attr("opacity",epsilon).attr("transform",function(L){var V=this.parentNode.__axis;return h((V&&isFinite(V=V(L))?V:T(L))+d)})),M.remove(),k.attr("d",t===left||t===right?u?"M"+f*u+","+g+"H"+d+"V"+b+"H"+f*u:"M"+d+","+g+"V"+b:u?"M"+g+","+f*u+"V"+d+"H"+b+"V"+f*u:"M"+g+","+d+"H"+b),$.attr("opacity",1).attr("transform",function(L){return h(T(L)+d)}),A.attr(m+"2",f*o),N.attr(m,f*w).text(S),O.filter(entering).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===right?"start":t===left?"end":"middle"),O.each(function(){this.__axis=T})}return p.scale=function(_){return arguments.length?(e=_,p):e},p.ticks=function(){return r=Array.from(arguments),p},p.tickArguments=function(_){return arguments.length?(r=_==null?[]:Array.from(_),p):r.slice()},p.tickValues=function(_){return arguments.length?(a=_==null?null:Array.from(_),p):a&&a.slice()},p.tickFormat=function(_){return arguments.length?(i=_,p):i},p.tickSize=function(_){return arguments.length?(o=u=+_,p):o},p.tickSizeInner=function(_){return arguments.length?(o=+_,p):o},p.tickSizeOuter=function(_){return arguments.length?(u=+_,p):u},p.tickPadding=function(_){return arguments.length?(c=+_,p):c},p.offset=function(_){return arguments.length?(d=+_,p):d},p}function axisTop(t){return axis(top,t)}function axisRight(t){return axis(right,t)}function axisBottom(t){return axis(bottom,t)}function axisLeft(t){return axis(left,t)}function create_fragment$h(t){let e;return{c(){e=svg_element("g"),attr(e,"class","axis"),attr(e,"transform",t[1])},m(r,a){insert(r,e,a),t[10](e)},p(r,[a]){a&2&&attr(e,"transform",r[1])},i:noop,o:noop,d(r){r&&detach(e),t[10](null)}}}function instance$h(t,e,r){let{innerHeight:a=0}=e,{width:i=0}=e,{yoffset:o=0}=e,{xoffset:u=0}=e,{position:c="left"}=e,{scale:d}=e,{nticks:f=5}=e,{colour:m=""}=e,h,p;function _(y){binding_callbacks[y?"unshift":"push"](()=>{p=y,r(0,p)})}return t.$$set=y=>{"innerHeight"in y&&r(3,a=y.innerHeight),"width"in y&&r(4,i=y.width),"yoffset"in y&&r(5,o=y.yoffset),"xoffset"in y&&r(6,u=y.xoffset),"position"in y&&r(7,c=y.position),"scale"in y&&r(8,d=y.scale),"nticks"in y&&r(9,f=y.nticks),"colour"in y&&r(2,m=y.colour)},t.$$.update=()=>{if(t.$$.dirty&1021){select(p).selectAll("*").remove(),m===""&&r(2,m=getComputedStyle(document.documentElement).getPropertyValue("--font-color"));let y;switch(c){case"bottom":y=axisBottom(d).tickSizeOuter(0).ticks(f),r(1,h=`translate(0, ${a})`);break;case"top":y=axisTop(d).tickSizeOuter(0).ticks(f),r(1,h="translate(0, 0)");break;case"left":y=axisLeft(d).tickSizeOuter(0).ticks(f),r(1,h=`translate(${u}, ${o})`);break;case"right":y=axisRight(d).tickSizeOuter(0).ticks(f),r(1,h=`translate(${u+i}, ${o})`);break}select(p).call(y).selectAll("path").style("stroke",m),select(p).call(y).selectAll("text").style("fill",m)}},[p,h,m,a,i,o,u,c,d,f,_]}class Axis extends SvelteComponent{constructor(e){super(),init(this,e,instance$h,create_fragment$h,safe_not_equal,{innerHeight:3,width:4,yoffset:5,xoffset:6,position:7,scale:8,nticks:9,colour:2})}}function createSequenceArray(t,e,r=1){const a=[];for(let i=t;i<=e;i+=r)a.push(i);return a}function mean(t){return t.reduce((e,r)=>e+r,0)/t.length}function get_each_context$a(t,e,r){const a=t.slice();return a[32]=e[r],a[34]=r,a}function get_each_context_1$7(t,e,r){const a=t.slice();return a[35]=e[r],a[37]=r,a}function get_each_context_2$5(t,e,r){const a=t.slice();return a[38]=e[r],a[34]=r,a}function get_each_context_3$4(t,e,r){const a=t.slice();return a[37]=e[r],a}function create_if_block$c(t){let e,r,a,i,o,u,c,d,f,m,h,p,_,y,S;const w=[create_if_block_2$4,create_else_block$4],v=[];function g(O,k){return O[9].length>0?0:1}u=g(t),c=v[u]=w[u](t),f=new Axis({props:{innerHeight:t[12],yoffset:"0",scale:t[11],position:"top",nticks:t[6][t[5]].params.periodHrs}});let b=ensure_array_like(t[6][t[5]].chartData.onsets),T=[];for(let O=0;O<b.length;O+=1)T[O]=create_each_block$a(get_each_context$a(t,b,O));return{c(){e=element("div"),a=space(),i=svg_element("svg"),o=svg_element("g"),c.c(),d=empty$1(),create_component(f.$$.fragment);for(let O=0;O<T.length;O+=1)T[O].c();attr(e,"class","overlay svelte-1hj8mph"),attr(e,"style",r=t[7]?"display:block; left:"+t[8].x+"px; top:"+t[8].y+"px;":"display:none;"),attr(o,"transform",m=`translate(${t[0].left},${t[0].top})`),attr(i,"id","svgContainer"),attr(i,"margin-lr",h=t[0].left+t[0].right),attr(i,"style",p="transform-origin: top left; transform:scale("+t[6][t[5]].zoom+");"),attr(i,"width",t[3]),attr(i,"height",t[4])},m(O,k){insert(O,e,k),insert(O,a,k),insert(O,i,k),append(i,o),v[u].m(o,null),append(o,d),mount_component(f,o,null);for(let $=0;$<T.length;$+=1)T[$]&&T[$].m(o,null);_=!0,y||(S=[listen(i,"mousedown",t[16]),listen(i,"mousemove",t[17]),listen(i,"mouseup",t[18]),listen(i,"click",click_handler),listen(i,"dblclick",t[19])],y=!0)},p(O,k){(!_||k[0]&384&&r!==(r=O[7]?"display:block; left:"+O[8].x+"px; top:"+O[8].y+"px;":"display:none;"))&&attr(e,"style",r);let $=u;u=g(O),u===$?v[u].p(O,k):(group_outros(),transition_out(v[$],1,1,()=>{v[$]=null}),check_outros(),c=v[u],c?c.p(O,k):(c=v[u]=w[u](O),c.c()),transition_in(c,1),c.m(o,d));const M={};if(k[0]&4096&&(M.innerHeight=O[12]),k[0]&2048&&(M.scale=O[11]),k[0]&96&&(M.nticks=O[6][O[5]].params.periodHrs),f.$set(M),k[0]&2150){b=ensure_array_like(O[6][O[5]].chartData.onsets);let R;for(R=0;R<b.length;R+=1){const A=get_each_context$a(O,b,R);T[R]?T[R].p(A,k):(T[R]=create_each_block$a(A),T[R].c(),T[R].m(o,null))}for(;R<T.length;R+=1)T[R].d(1);T.length=b.length}(!_||k[0]&1&&m!==(m=`translate(${O[0].left},${O[0].top})`))&&attr(o,"transform",m),(!_||k[0]&1&&h!==(h=O[0].left+O[0].right))&&attr(i,"margin-lr",h),(!_||k[0]&96&&p!==(p="transform-origin: top left; transform:scale("+O[6][O[5]].zoom+");"))&&attr(i,"style",p),(!_||k[0]&8)&&attr(i,"width",O[3]),(!_||k[0]&16)&&attr(i,"height",O[4])},i(O){_||(transition_in(c),transition_in(f.$$.fragment,O),_=!0)},o(O){transition_out(c),transition_out(f.$$.fragment,O),_=!1},d(O){O&&(detach(e),detach(a),detach(i)),v[u].d(),destroy_component(f),destroy_each(T,O),y=!1,run_all(S)}}}function create_else_block$4(t){let e;return{c(){e=svg_element("text"),attr(e,"x","50%"),attr(e,"y","50%"),attr(e,"text-anchor","middle"),attr(e,"fill","red")},m(r,a){insert(r,e,a)},p:noop,i:noop,o:noop,d(r){r&&detach(e)}}}function create_if_block_2$4(t){let e,r,a=ensure_array_like(t[9]),i=[];for(let u=0;u<a.length;u+=1)i[u]=create_each_block_2$5(get_each_context_2$5(t,a,u));const o=u=>transition_out(i[u],1,1,()=>{i[u]=null});return{c(){for(let u=0;u<i.length;u+=1)i[u].c();e=empty$1()},m(u,c){for(let d=0;d<i.length;d+=1)i[d]&&i[d].m(u,c);insert(u,e,c),r=!0},p(u,c){if(c[0]&5743){a=ensure_array_like(u[9]);let d;for(d=0;d<a.length;d+=1){const f=get_each_context_2$5(u,a,d);i[d]?(i[d].p(f,c),transition_in(i[d],1)):(i[d]=create_each_block_2$5(f),i[d].c(),transition_in(i[d],1),i[d].m(e.parentNode,e))}for(group_outros(),d=a.length;d<i.length;d+=1)o(d);check_outros()}},i(u){if(!r){for(let c=0;c<a.length;c+=1)transition_in(i[c]);r=!0}},o(u){i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)transition_out(i[c]);r=!1},d(u){u&&detach(e),destroy_each(i,u)}}}function create_if_block_3$4(t){let e,r;return e=new Axis({props:{innerHeight:t[12],yoffset:t[37]*(t[2]+t[1]),xoffset:15*t[34],width:t[3]-t[0].left-t[0].right-15,scale:t[10][t[34]][t[37]],position:t[34]===0?"left":"right",nticks:t[2]/30+1,colour:t[6][t[5]].sourceData[t[34]].col.hex}}),{c(){create_component(e.$$.fragment)},m(a,i){mount_component(e,a,i),r=!0},p(a,i){const o={};i[0]&4096&&(o.innerHeight=a[12]),i[0]&518&&(o.yoffset=a[37]*(a[2]+a[1])),i[0]&9&&(o.width=a[3]-a[0].left-a[0].right-15),i[0]&1536&&(o.scale=a[10][a[34]][a[37]]),i[0]&4&&(o.nticks=a[2]/30+1),i[0]&96&&(o.colour=a[6][a[5]].sourceData[a[34]].col.hex),e.$set(o)},i(a){r||(transition_in(e.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),r=!1},d(a){destroy_component(e,a)}}}function create_each_block_3$4(t){let e,r,a,i,o,u,c=t[6][t[5]].params.showAxes&&create_if_block_3$4(t);return{c(){e=svg_element("path"),c&&c.c(),o=empty$1(),attr(e,"d",r=t[9][t[34]][t[37]]),attr(e,"fill",a=t[6][t[5]].sourceData[t[34]].col.hex),attr(e,"fill-opacity",i=t[6][t[5]].sourceData[t[34]].col.alpha)},m(d,f){insert(d,e,f),c&&c.m(d,f),insert(d,o,f),u=!0},p(d,f){(!u||f[0]&512&&r!==(r=d[9][d[34]][d[37]]))&&attr(e,"d",r),(!u||f[0]&96&&a!==(a=d[6][d[5]].sourceData[d[34]].col.hex))&&attr(e,"fill",a),(!u||f[0]&96&&i!==(i=d[6][d[5]].sourceData[d[34]].col.alpha))&&attr(e,"fill-opacity",i),d[6][d[5]].params.showAxes?c?(c.p(d,f),f[0]&96&&transition_in(c,1)):(c=create_if_block_3$4(d),c.c(),transition_in(c,1),c.m(o.parentNode,o)):c&&(group_outros(),transition_out(c,1,1,()=>{c=null}),check_outros())},i(d){u||(transition_in(c),u=!0)},o(d){transition_out(c),u=!1},d(d){d&&(detach(e),detach(o)),c&&c.d(d)}}}function create_each_block_2$5(t){let e,r,a=ensure_array_like(createSequenceArray(0,t[9][t[34]].length-1)),i=[];for(let u=0;u<a.length;u+=1)i[u]=create_each_block_3$4(get_each_context_3$4(t,a,u));const o=u=>transition_out(i[u],1,1,()=>{i[u]=null});return{c(){for(let u=0;u<i.length;u+=1)i[u].c();e=empty$1()},m(u,c){for(let d=0;d<i.length;d+=1)i[d]&&i[d].m(u,c);insert(u,e,c),r=!0},p(u,c){if(c[0]&5743){a=ensure_array_like(createSequenceArray(0,u[9][u[34]].length-1));let d;for(d=0;d<a.length;d+=1){const f=get_each_context_3$4(u,a,d);i[d]?(i[d].p(f,c),transition_in(i[d],1)):(i[d]=create_each_block_3$4(f),i[d].c(),transition_in(i[d],1),i[d].m(e.parentNode,e))}for(group_outros(),d=a.length;d<i.length;d+=1)o(d);check_outros()}},i(u){if(!r){for(let c=0;c<a.length;c+=1)transition_in(i[c]);r=!0}},o(u){i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)transition_out(i[c]);r=!1},d(u){u&&detach(e),destroy_each(i,u)}}}function create_if_block_1$7(t){let e,r=ensure_array_like(t[6][t[5]].chartData.onsets[t[34]].onsetTimes),a=[];for(let i=0;i<r.length;i+=1)a[i]=create_each_block_1$7(get_each_context_1$7(t,r,i));return{c(){for(let i=0;i<a.length;i+=1)a[i].c();e=empty$1()},m(i,o){for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(i,o);insert(i,e,o)},p(i,o){if(o[0]&2150){r=ensure_array_like(i[6][i[5]].chartData.onsets[i[34]].onsetTimes);let u;for(u=0;u<r.length;u+=1){const c=get_each_context_1$7(i,r,u);a[u]?a[u].p(c,o):(a[u]=create_each_block_1$7(c),a[u].c(),a[u].m(e.parentNode,e))}for(;u<a.length;u+=1)a[u].d(1);a.length=r.length}},d(i){i&&detach(e),destroy_each(a,i)}}}function create_each_block_1$7(t){let e,r,a,i;return{c(){e=svg_element("circle"),attr(e,"cx",r=t[11](t[35]-t[37]*t[6][t[5]].params.periodHrs)),attr(e,"cy",a=t[37]*(t[2]+t[1])+t[2]),attr(e,"r","2"),attr(e,"fill",i=t[6][t[5]].sourceData[t[34]].col.hex),attr(e,"stroke-width","1"),attr(e,"stroke","black")},m(o,u){insert(o,e,u)},p(o,u){u[0]&2144&&r!==(r=o[11](o[35]-o[37]*o[6][o[5]].params.periodHrs))&&attr(e,"cx",r),u[0]&6&&a!==(a=o[37]*(o[2]+o[1])+o[2])&&attr(e,"cy",a),u[0]&96&&i!==(i=o[6][o[5]].sourceData[o[34]].col.hex)&&attr(e,"fill",i)},d(o){o&&detach(e)}}}function create_each_block$a(t){let e,r=t[6][t[5]].sourceData[t[34]].showOnsets&&create_if_block_1$7(t);return{c(){r&&r.c(),e=empty$1()},m(a,i){r&&r.m(a,i),insert(a,e,i)},p(a,i){a[6][a[5]].sourceData[a[34]].showOnsets?r?r.p(a,i):(r=create_if_block_1$7(a),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},d(a){a&&detach(e),r&&r.d(a)}}}function create_fragment$g(t){var i;let e,r,a=((i=t[6][t[5]])==null?void 0:i.graph)==="actigram"&&t[6][t[5]].sourceData.length>0&&create_if_block$c(t);return{c(){a&&a.c(),e=empty$1()},m(o,u){a&&a.m(o,u),insert(o,e,u),r=!0},p(o,u){var c;((c=o[6][o[5]])==null?void 0:c.graph)==="actigram"&&o[6][o[5]].sourceData.length>0?a?(a.p(o,u),u[0]&96&&transition_in(a,1)):(a=create_if_block$c(o),a.c(),transition_in(a,1),a.m(e.parentNode,e)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(o){r||(transition_in(a),r=!0)},o(o){transition_out(a),r=!1},d(o){o&&detach(e),a&&a.d(o)}}}function findCentileValue(t,e){const a=t.filter(u=>!isNaN(u)&&u!==0).slice().sort((u,c)=>u-c),i=Math.ceil(e/100*a.length)-1;return a[i]}function findBestMatchIndex(t,e){let r=-1,a=-1/0;for(let i=0;i<=t.length-e.length;i++){let o=0;for(let u=0;u<e.length;u++)o+=t[i+u]*e[u];o>a&&(a=o,r=i)}return r}const click_handler=t=>{t.preventDefault()};function instance$g(t,e,r){let a,i,o,u,c,d,f,m,h,p,_;component_subscribe(t,activeGraphTab,D=>r(5,m=D)),component_subscribe(t,graphs,D=>r(6,h=D)),component_subscribe(t,statusData,D=>r(22,p=D)),component_subscribe(t,data,D=>r(23,_=D));let y={top:50,bottom:20,left:80,right:80},S=!1,w={x:0,y:0},v="",g=[],b=linear().domain([0,100]).range([0,f]);function T(D){D?r(0,y={top:50,bottom:20,left:80,right:80}):r(0,y={top:50,bottom:20,left:50,right:50})}function O(D,I,U){var Z,G;if(((Z=h[m])==null?void 0:Z.graph)==="actigram"){let X;return((G=h[m].chartData.onsets)==null?void 0:G.length)>0||k(h[m].sourceData,h[m].params.binSizeHrs,h[m].params.periodHrs,h[m].params.startTime),X=h[m].chartData.onsets[0].onsetTimes.length,r(4,a=D.top+D.bottom+(I+U)*X-U),a<D.top+D.bottom&&r(4,a=D.top+D.bottom),a}}function k(D,I,U,Z){var G;if(((G=h[m])==null?void 0:G.graph)==="actigram"){let X,x,le={data:[{time:[],values:[],day:[],scaleLimits:[]}],startOffsets:[],onsets:[]};D.forEach((ie,q)=>{ie.chartvalues.time.field!=""&&(X=getDataFromSource(q,ie.chartvalues.time)),ie.chartvalues.values.field!=""&&(x=getDataFromSource(q,ie.chartvalues.values));const _e=averageBinnedValues(X,x,I);le.startOffsets=$(Z,m),q>0&&(le.data[q]={time:[],values:[],day:[],scaleLimits:[]}),le.data[q].time=_e.time,le.data[q].values=_e.values;let Q=Math.floor(_e.time[0]/U);for(let ce=0;ce<_e.time.length;ce++){const me=Math.floor(_e.time[ce]/U);if(le.data[q].day[ce]=me,me===Q){const ue=_e.values[ce];le.data[q].scaleLimits[me]?(le.data[q].scaleLimits[me].min=Math.min(ue,le.data[q].scaleLimits[me].min),le.data[q].scaleLimits[me].max=Math.max(ue,le.data[q].scaleLimits[me].max)):le.data[q].scaleLimits[me]={min:ue,max:ue}}else Q=me,le.data[q].scaleLimits[Q]={min:_e.values[ce],max:_e.values[ce]}}}),set_store_value(graphs,h[m].chartData=le,h);for(let ie=0;ie<D.length;ie++)R(ie)}}function $(D,I){let U=[];if(h[I].graph==="actigram"&&h[I].sourceData.length>0){U=Array.from({length:h[I].sourceData.length},()=>0);for(let Z=0;Z<h[I].sourceData.length;Z++){const G=h[I].sourceData[Z].chartvalues.time.field,X=_.findIndex(x=>x.id===h[I].sourceData[Z].tableID);if(_[X].data[G].type=="time"){const x=_[X].data[G].data[0];U[Z]=getstartTimeOffset(D,x,_[X].data[G].timeFormat);const le=h[m].params.periodHrs*h[m].params.doublePlot;U[Z]>=le&&(U[Z]=0,set_store_value(graphs,h[m].params.startTime=getISODate(x,_[X].data[G].timeFormat),h))}}}else U=Array.from({length:1},()=>0);return set_store_value(graphs,h[m].chartData.startOffsets=U,h),U}function M(D,I,U,Z,G){if(D&&h[m].graph==="actigram"){const x=Z/G,le=h[m].chartData.data.length;r(11,b=linear().domain([0,h[m].params.periodHrs*h[m].params.doublePlot]).range([0,f]));const ie=b(i/2);r(9,v=[]),r(10,g=[]);for(let q=0;q<le;q++){r(9,v[q]=[],v),r(10,g[q]=[],g);const _e=h[m].chartData.data[q].scaleLimits.length;var X=linear().domain([Math.min(...h[m].chartData.data[q].values),Math.max(...h[m].chartData.data[q].values)]).range([I,0]);for(let Q=0;Q<_e;Q++){r(9,v[q][Q]="",v);const ce=Q*(I+c);if(h[m].params.scaleAxes==="byPlot"){let ye=h[m].chartData.data[q].scaleLimits[Q].min,se=h[m].chartData.data[q].scaleLimits[Q].max;for(let ke=Q;ke<Math.min(Q+U,h[m].chartData.data[q].scaleLimits.length);ke++)h[m].chartData.data[q].scaleLimits[ke].min<ye&&(ye=h[m].chartData.data[q].scaleLimits[ke].min),h[m].chartData.data[q].scaleLimits[ke].max>se&&(se=h[m].chartData.data[q].scaleLimits[ke].max);X=linear().domain([ye,se]).range([I,0])}r(10,g[q][Q]=X,g);const me=`M0,${Q*(I+c)+I}`;r(9,v[q][Q]=v[q][Q]+me+" ",v);for(let ye=Q*x;ye<Math.min(D.data[q].time.length,(Q+U)*x);ye++){const se=D.data[q].time[ye]-Q*Z,ke=D.data[q].values[ye],Y=X(ke)+ce,he=b(se),Se=`${he-ie},${ce+I}  ${he-ie},${Y} ${he+ie},${Y} ${he+ie},${ce+I}`;he!=null&&he!=null&&!isNaN(he)&&Y!=null&&Y!=null&&!isNaN(Y)&&r(9,v[q][Q]=v[q][Q]+Se+" ",v)}const ue=`${b(Z*U)},${Q*(I+c)+I} 0,${Q*(I+c)+I}`;r(9,v[q][Q]=v[q][Q]+ue+" Z",v)}}return v}}function R(D){const G=h[m].params.binSizeHrs,X=A(3,3,G);h[m].chartData.data[D].time;const x=h[m].chartData.data[D].values,le=findCentileValue(x,60),ie=x.map(Y=>Y<=le||isNaN(Y)?-1:1),_e=h[m].params.periodHrs/G;h[m].params.doublePlot;let Q=[],ce=[];for(let Y=0;Y<ie.length/_e;Y++)Q[Y]=findBestMatchIndex(ie.slice(Y*_e,(Y+1)*_e),X)+Math.round(3/G),ce[Y]=h[m].chartData.data[D].time[Q[Y]+Y*_e];const me=bestFitOnsets(getDiffs(ce));p.push({display:"Estimated period for "+h[m].sourceData[D].name+" = "+me.toFixed(3)}),statusData.set(p);let ue=[];for(let Y=0;Y<ce.length;Y++)ue[Y]=b(ce[Y]-Y*h[m].params.periodHrs)+y.left,Y*(u+c)+u+y.top;const ye=h[m].params.periodHrs-me,se=calculateMedian(ue),ke=ue.reduce((Y,he,Se)=>Math.abs(he-se)<Math.abs(ue[Y]-se)?Se:Y,0);set_store_value(graphs,h[m].chartData.onsets[D]={onsetTimes:ce,estimate:me,median:se,estDay:ke,moveXDay:b(ye),slope:b(ye)/(h[m].params.dayHeight+h[m].params.betweenHeight)},h)}function A(D,I,U){const Z=Math.round(D/U),G=Math.round(I/U);return Array.from({length:Z},()=>-1).concat(Array.from({length:G},()=>1))}function N(D){if(D.offsetX<y.left||D.offsetX>y.left+o||D.offsetY<y.top||D.offsetY>y.top+d)return null;const I=h[m].params.periodHrs,U=h[m].params.doublePlot,Z=Math.floor((D.offsetY-y.top)/(u+c)),G=(D.offsetX-y.left)/f*I*U;return Z*I+G}function L(D){D&&(p.push({display:V(D)}),statusData.set(p))}function V(D){Math.floor(D/h[m].params.periodHrs);let I=Math.round((D-h[m].chartData.data[0].time[0])/h[m].params.binSizeHrs);I<0&&(I=0);let U="";U=addTime(h[m].params.startTime,h[m].chartData.data[0].time[I]);for(let Z=0;Z<h[m].chartData.data.length;Z++)U+="<br><a style='color:"+h[m].sourceData[Z].col.hex+";''>"+getFieldName(h[m].sourceData[Z].tableID,h[m].sourceData[Z].chartvalues.values.field)+": "+h[m].chartData.data[Z].values[I].toFixed(2)+"</a>";return U}function C(D){r(8,w={x:10+D.pageX,y:-10+D.pageY}),(D.offsetX<y.left||D.offsetX>y.left+f||D.offsetY<y.top||D.offsetY>y.top+d)&&r(7,S=!1);try{var I=document.querySelector(".overlay");const U=N(D);I.innerHTML=V(U)}catch{r(7,S=!1)}}const F=D=>{D.preventDefault(),r(7,S=!0),C(D)},z=D=>{S&&(D.preventDefault(),N(D),C(D))},H=D=>{D.preventDefault(),r(7,S=!1),N(D)},E=D=>{D.preventDefault();const I=N(D);L(I)};return t.$$.update=()=>{var D,I,U,Z,G,X,x,le,ie,q,_e,Q,ce,me;t.$$.dirty[0]&96&&T((D=h[m])==null?void 0:D.params.showAxes),t.$$.dirty[0]&96&&r(2,u=(I=h[m])==null?void 0:I.params.dayHeight),t.$$.dirty[0]&96&&r(1,c=(U=h[m])==null?void 0:U.params.betweenHeight),t.$$.dirty[0]&7&&r(4,a=O(y,u,c)),t.$$.dirty[0]&96&&(i=(Z=h[m])==null?void 0:Z.params.binSizeHrs),t.$$.dirty[0]&96&&r(3,o=(G=h[m])==null?void 0:G.params.width),t.$$.dirty[0]&17&&r(12,d=a-y.top-y.bottom),t.$$.dirty[0]&9&&(f=o-y.left-y.right),t.$$.dirty[0]&96&&k((X=h[m])==null?void 0:X.sourceData,(x=h[m])==null?void 0:x.params.binSizeHrs,(le=h[m])==null?void 0:le.params.periodHrs,(ie=h[m])==null?void 0:ie.params.startTime),t.$$.dirty[0]&96&&r(9,v=M((q=h[m])==null?void 0:q.chartData,(_e=h[m])==null?void 0:_e.params.dayHeight,(Q=h[m])==null?void 0:Q.params.doublePlot,(ce=h[m])==null?void 0:ce.params.periodHrs,(me=h[m])==null?void 0:me.params.binSizeHrs))},[y,c,u,o,a,m,h,S,w,v,g,b,d,N,L,C,F,z,H,E]}class Actigram extends SvelteComponent{constructor(e){super(),init(this,e,instance$g,create_fragment$g,safe_not_equal,{},null,[-1,-1])}}function get_each_context$9(t,e,r){const a=t.slice();return a[32]=e[r],a[33]=e,a[34]=r,a}function get_each_context_1$6(t,e,r){const a=t.slice();return a[35]=e[r],a[36]=e,a[37]=r,a}function get_each_context_2$4(t,e,r){const a=t.slice();return a[38]=e[r],a[40]=r,a}function get_each_context_3$3(t,e,r){const a=t.slice();return a[41]=e[r],a}function create_if_block$b(t){var J,fe;let e,r,a,i,o,u=formatTimeFromISO(t[1][t[0]].params.startTime)+"",c,d,f,m,h,p,_,y,S,w,v,g,b,T,O,k,$,M,R,A,N,L,V,C,F,z,H,E,D,I,U,Z,G,X,x,le,ie,q=t[2][t[0]].name+"",_e,Q,ce,me,ue,ye,se,ke,Y;function he(W){t[10](W)}let Se={min:10,max:40,limits:[1,1/0],label:"Period (hrs):"};t[1][t[0]].params.periodHrs!==void 0&&(Se.value=t[1][t[0]].params.periodHrs),p=new Slider({props:Se}),binding_callbacks.push(()=>bind(p,"value",he));function oe(W){t[11](W)}let ee={min:.05,max:1,step:"0.05",limits:[.05,(J=t[1][t[0]])==null?void 0:J.params.periodHrs],label:"Bin size (hrs):"};t[1][t[0]].params.binSizeHrs!==void 0&&(ee.value=t[1][t[0]].params.binSizeHrs),w=new Slider({props:ee}),binding_callbacks.push(()=>bind(w,"value",oe));function de(W){t[12](W)}let Te={min:100,max:1e3,step:"1",limits:[5,1/0],label:"Width: "};t[1][t[0]].params.width!==void 0&&(Te.value=t[1][t[0]].params.width),T=new Slider({props:Te}),binding_callbacks.push(()=>bind(T,"value",de));function ge(W){t[13](W)}let ae={min:10,max:30,step:"1",limits:[5,1/0],label:"Day Height:"};t[1][t[0]].params.dayHeight!==void 0&&(ae.value=t[1][t[0]].params.dayHeight),M=new Slider({props:ae}),binding_callbacks.push(()=>bind(M,"value",ge));function be(W){t[14](W)}let j={min:1,max:20,step:"1",limits:[-((fe=t[1][t[0]])==null?void 0:fe.params.dayHeight),1/0],label:"Between Height:"};t[1][t[0]].params.betweenHeight!==void 0&&(j.value=t[1][t[0]].params.betweenHeight),L=new Slider({props:j}),binding_callbacks.push(()=>bind(L,"value",be));let P=ensure_array_like(t[1][t[0]].sourceData),B=[];for(let W=0;W<P.length;W+=1)B[W]=create_each_block$9(get_each_context$9(t,P,W));const ne=W=>transition_out(B[W],1,1,()=>{B[W]=null});return{c(){e=element("div"),r=element("div"),a=element("span"),a.textContent="Start time:",i=space(),o=element("div"),c=text(u),d=space(),f=element("input"),m=space(),h=element("div"),create_component(p.$$.fragment),y=space(),S=element("div"),create_component(w.$$.fragment),g=space(),b=element("div"),create_component(T.$$.fragment),k=space(),$=element("div"),create_component(M.$$.fragment),A=space(),N=element("div"),create_component(L.$$.fragment),C=space(),F=element("div"),z=element("a"),z.textContent="y-Axes:",H=space(),E=element("a"),E.textContent="Show",D=space(),I=element("input"),U=space(),Z=element("select"),G=element("option"),G.textContent="By row / plot",X=element("option"),X.textContent="Overall",x=space(),le=element("div"),ie=element("h1"),_e=text(q),Q=text(" Data"),ce=space(),me=element("span"),me.textContent="+",ue=space(),ye=element("div");for(let W=0;W<B.length;W+=1)B[W].c();attr(a,"class","svelte-jzkczy"),attr(o,"class","datepicklabel datepicklabelshow svelte-jzkczy"),set_style(o,"display","inline-block"),set_style(o,"margin-right","2px"),set_style(o,"margin-left","auto"),set_style(o,"text-align","center"),attr(f,"class","dateInput svelte-jzkczy"),attr(f,"type","datetime-local"),attr(f,"id","startTime"),attr(f,"name","startTime"),attr(r,"class","sliderContainer svelte-jzkczy"),attr(h,"class","sliderContainer svelte-jzkczy"),attr(S,"class","sliderContainer svelte-jzkczy"),attr(b,"class","sliderContainer svelte-jzkczy"),attr($,"class","sliderContainer svelte-jzkczy"),attr(N,"class","sliderContainer svelte-jzkczy"),attr(z,"class","svelte-jzkczy"),attr(E,"class","svelte-jzkczy"),attr(I,"type","checkbox"),attr(I,"class","svelte-jzkczy"),G.__value="byPlot",set_input_value(G,G.__value),attr(G,"class","svelte-jzkczy"),X.__value="overall",set_input_value(X,X.__value),attr(X,"class","svelte-jzkczy"),attr(Z,"class","selectField svelte-jzkczy"),set_style(Z,"margin-right","0",1),t[1][t[0]].params.scaleAxes===void 0&&add_render_callback(()=>t[16].call(Z)),attr(F,"class","sliderContainer svelte-jzkczy"),attr(e,"class","chartControls svelte-jzkczy"),set_style(ie,"display","inline"),attr(ie,"class","svelte-jzkczy"),attr(me,"class","addbutton hoverbutton showContextMenu svelte-jzkczy"),set_style(le,"margin","1em 1em 0 0"),attr(le,"class","svelte-jzkczy"),attr(ye,"class","graphDataTree svelte-jzkczy")},m(W,K){insert(W,e,K),append(e,r),append(r,a),append(r,i),append(r,o),append(o,c),append(r,d),append(r,f),set_input_value(f,t[1][t[0]].params.startTime),append(e,m),append(e,h),mount_component(p,h,null),append(e,y),append(e,S),mount_component(w,S,null),append(e,g),append(e,b),mount_component(T,b,null),append(e,k),append(e,$),mount_component(M,$,null),append(e,A),append(e,N),mount_component(L,N,null),append(e,C),append(e,F),append(F,z),append(F,H),append(F,E),append(F,D),append(F,I),I.checked=t[1][t[0]].params.showAxes,append(F,U),append(F,Z),append(Z,G),append(Z,X),select_option(Z,t[1][t[0]].params.scaleAxes,!0),insert(W,x,K),insert(W,le,K),append(le,ie),append(ie,_e),append(ie,Q),append(le,ce),append(le,me),insert(W,ue,K),insert(W,ye,K);for(let te=0;te<B.length;te+=1)B[te]&&B[te].m(ye,null);se=!0,ke||(Y=[listen(o,"dblclick",t[7]),listen(f,"input",t[8]),listen(f,"keydown",t[9]),listen(I,"change",t[15]),listen(Z,"change",t[16]),listen(me,"click",t[17])],ke=!0)},p(W,K){var De,Oe;(!se||K[0]&3)&&u!==(u=formatTimeFromISO(W[1][W[0]].params.startTime)+"")&&set_data(c,u),K[0]&3&&set_input_value(f,W[1][W[0]].params.startTime);const te={};!_&&K[0]&3&&(_=!0,te.value=W[1][W[0]].params.periodHrs,add_flush_callback(()=>_=!1)),p.$set(te);const pe={};K[0]&3&&(pe.limits=[.05,(De=W[1][W[0]])==null?void 0:De.params.periodHrs]),!v&&K[0]&3&&(v=!0,pe.value=W[1][W[0]].params.binSizeHrs,add_flush_callback(()=>v=!1)),w.$set(pe);const ve={};!O&&K[0]&3&&(O=!0,ve.value=W[1][W[0]].params.width,add_flush_callback(()=>O=!1)),T.$set(ve);const $e={};!R&&K[0]&3&&(R=!0,$e.value=W[1][W[0]].params.dayHeight,add_flush_callback(()=>R=!1)),M.$set($e);const Me={};if(K[0]&3&&(Me.limits=[-((Oe=W[1][W[0]])==null?void 0:Oe.params.dayHeight),1/0]),!V&&K[0]&3&&(V=!0,Me.value=W[1][W[0]].params.betweenHeight,add_flush_callback(()=>V=!1)),L.$set(Me),K[0]&3&&(I.checked=W[1][W[0]].params.showAxes),K[0]&3&&select_option(Z,W[1][W[0]].params.scaleAxes),(!se||K[0]&5)&&q!==(q=W[2][W[0]].name+"")&&set_data(_e,q),K[0]&11){P=ensure_array_like(W[1][W[0]].sourceData);let we;for(we=0;we<P.length;we+=1){const Ee=get_each_context$9(W,P,we);B[we]?(B[we].p(Ee,K),transition_in(B[we],1)):(B[we]=create_each_block$9(Ee),B[we].c(),transition_in(B[we],1),B[we].m(ye,null))}for(group_outros(),we=P.length;we<B.length;we+=1)ne(we);check_outros()}},i(W){if(!se){transition_in(p.$$.fragment,W),transition_in(w.$$.fragment,W),transition_in(T.$$.fragment,W),transition_in(M.$$.fragment,W),transition_in(L.$$.fragment,W);for(let K=0;K<P.length;K+=1)transition_in(B[K]);se=!0}},o(W){transition_out(p.$$.fragment,W),transition_out(w.$$.fragment,W),transition_out(T.$$.fragment,W),transition_out(M.$$.fragment,W),transition_out(L.$$.fragment,W),B=B.filter(Boolean);for(let K=0;K<B.length;K+=1)transition_out(B[K]);se=!1},d(W){W&&(detach(e),detach(x),detach(le),detach(ue),detach(ye)),destroy_component(p),destroy_component(w),destroy_component(T),destroy_component(M),destroy_component(L),destroy_each(B,W),ke=!1,run_all(Y)}}}function create_each_block_3$3(t){let e,r=t[3][t[3].findIndex(o)].data[t[41]].name+"",a,i;function o(...u){return t[22](t[32],...u)}return{c(){e=element("option"),a=text(r),e.__value=i=t[41],set_input_value(e,e.__value),attr(e,"class","svelte-jzkczy")},m(u,c){insert(u,e,c),append(e,a)},p(u,c){t=u,c[0]&11&&r!==(r=t[3][t[3].findIndex(o)].data[t[41]].name+"")&&set_data(a,r),c[0]&3&&i!==(i=t[41])&&(e.__value=i,set_input_value(e,e.__value))},d(u){u&&detach(e)}}}function create_each_block_2$4(t){let e,r,a=t[38].process+"",i,o,u,c,d,f,m,h,p;function _(...g){return t[25](t[34],t[35],t[40],...g)}function y(...g){return t[26](t[32],...g)}function S(...g){return t[27](t[35],t[34],t[40],...g)}var w=componentMap[t[38].process].component;function v(g,b){return{props:{paramsStart:g[38].parameters,typeTime:{type:g[3][g[3].findIndex(y)].data[g[32].chartvalues[g[35]].field].type,tocheck:{tableID:g[32].tableID,key:g[35]}}}}}return w&&(f=construct_svelte_component(w,v(t)),f.$on("update",S)),{c(){e=element("details"),r=element("summary"),i=text(a),o=space(),u=element("div"),u.textContent="",c=space(),d=element("div"),f&&create_component(f.$$.fragment),attr(u,"class","deleteProcess hoverbutton svelte-jzkczy"),attr(r,"class","svelte-jzkczy"),attr(d,"class","processDetails svelte-jzkczy"),e.open=!0,attr(e,"class","process svelte-jzkczy")},m(g,b){insert(g,e,b),append(e,r),append(r,i),append(r,o),append(r,u),append(e,c),append(e,d),f&&mount_component(f,d,null),m=!0,h||(p=listen(u,"click",_),h=!0)},p(g,b){if(t=g,(!m||b[0]&3)&&a!==(a=t[38].process+"")&&set_data(i,a),b[0]&3&&w!==(w=componentMap[t[38].process].component)){if(f){group_outros();const T=f;transition_out(T.$$.fragment,1,0,()=>{destroy_component(T,1)}),check_outros()}w?(f=construct_svelte_component(w,v(t)),f.$on("update",S),create_component(f.$$.fragment),transition_in(f.$$.fragment,1),mount_component(f,d,null)):f=null}else if(w){const T={};b[0]&3&&(T.paramsStart=t[38].parameters),b[0]&11&&(T.typeTime={type:t[3][t[3].findIndex(y)].data[t[32].chartvalues[t[35]].field].type,tocheck:{tableID:t[32].tableID,key:t[35]}}),f.$set(T)}},i(g){m||(f&&transition_in(f.$$.fragment,g),m=!0)},o(g){f&&transition_out(f.$$.fragment,g),m=!1},d(g){g&&detach(e),f&&destroy_component(f),h=!1,p()}}}function create_each_block_1$6(t){let e,r,a=t[35]+"",i,o,u,c,d,f,m,h,p,_,y,S;function w(...M){return t[21](t[34],t[35],...M)}let v=ensure_array_like(getFieldNames(t[32])),g=[];for(let M=0;M<v.length;M+=1)g[M]=create_each_block_3$3(get_each_context_3$3(t,v,M));function b(){t[23].call(f,t[35],t[33],t[34])}function T(...M){return t[24](t[34],t[35],...M)}let O=ensure_array_like(t[32].chartvalues[t[35]].processSteps),k=[];for(let M=0;M<O.length;M+=1)k[M]=create_each_block_2$4(get_each_context_2$4(t,O,M));const $=M=>transition_out(k[M],1,1,()=>{k[M]=null});return{c(){e=element("details"),r=element("summary"),i=text(a),o=text(`:
              
              
              `),u=element("span"),u.textContent="+",c=space(),d=element("span"),f=element("select");for(let M=0;M<g.length;M+=1)g[M].c();m=space();for(let M=0;M<k.length;M+=1)k[M].c();h=space(),attr(u,"class","addbutton hoverbutton showContextMenu svelte-jzkczy"),attr(f,"class","selectField svelte-jzkczy"),t[32].chartvalues[t[35]].field===void 0&&add_render_callback(b),attr(d,"class","svelte-jzkczy"),attr(r,"class","svelte-jzkczy"),e.open=!0,attr(e,"class",p="field "+(t[32].chartvalues[t[35]].processSteps.length>0?"":"no-arrow")+" svelte-jzkczy")},m(M,R){insert(M,e,R),append(e,r),append(r,i),append(r,o),append(r,u),append(r,c),append(r,d),append(d,f);for(let A=0;A<g.length;A+=1)g[A]&&g[A].m(f,null);select_option(f,t[32].chartvalues[t[35]].field,!0),append(e,m);for(let A=0;A<k.length;A+=1)k[A]&&k[A].m(e,null);append(e,h),_=!0,y||(S=[listen(u,"click",w),listen(f,"change",b),listen(f,"change",T)],y=!0)},p(M,R){if(t=M,(!_||R[0]&3)&&a!==(a=t[35]+"")&&set_data(i,a),R[0]&11){v=ensure_array_like(getFieldNames(t[32]));let A;for(A=0;A<v.length;A+=1){const N=get_each_context_3$3(t,v,A);g[A]?g[A].p(N,R):(g[A]=create_each_block_3$3(N),g[A].c(),g[A].m(f,null))}for(;A<g.length;A+=1)g[A].d(1);g.length=v.length}if(R[0]&3&&select_option(f,t[32].chartvalues[t[35]].field),R[0]&11){O=ensure_array_like(t[32].chartvalues[t[35]].processSteps);let A;for(A=0;A<O.length;A+=1){const N=get_each_context_2$4(t,O,A);k[A]?(k[A].p(N,R),transition_in(k[A],1)):(k[A]=create_each_block_2$4(N),k[A].c(),transition_in(k[A],1),k[A].m(e,h))}for(group_outros(),A=O.length;A<k.length;A+=1)$(A);check_outros()}(!_||R[0]&3&&p!==(p="field "+(t[32].chartvalues[t[35]].processSteps.length>0?"":"no-arrow")+" svelte-jzkczy"))&&attr(e,"class",p)},i(M){if(!_){for(let R=0;R<O.length;R+=1)transition_in(k[R]);_=!0}},o(M){k=k.filter(Boolean);for(let R=0;R<k.length;R+=1)transition_out(k[R]);_=!1},d(M){M&&detach(e),destroy_each(g,M),destroy_each(k,M),y=!1,run_all(S)}}}function create_each_block$9(t){let e,r,a,i,o,u,c,d,f,m=t[3].find(z).displayName+"",h,p,_,y,S,w,v,g,b,T,O,k,$,M,R,A,N,L;function V(X){t[18](X,t[32])}let C={};t[32].name!==void 0&&(C.value=t[32].name),a=new InPlaceEdit({props:C}),binding_callbacks.push(()=>bind(a,"value",V));function F(...X){return t[19](t[34],...X)}function z(...X){return t[20](t[32],...X)}let H=ensure_array_like(Object.keys(t[32].chartvalues)),E=[];for(let X=0;X<H.length;X+=1)E[X]=create_each_block_1$6(get_each_context_1$6(t,H,X));const D=X=>transition_out(E[X],1,1,()=>{E[X]=null});function I(){t[28].call(S,t[34])}function U(X){t[29](X,t[34])}let Z={min:"0",max:"1",step:"0.01",limits:[0,1],label:"Alpha: "};t[1][t[0]].sourceData[t[34]].col.alpha!==void 0&&(Z.value=t[1][t[0]].sourceData[t[34]].col.alpha),g=new Slider({props:Z}),binding_callbacks.push(()=>bind(g,"value",U));function G(){t[30].call(M,t[34])}return{c(){e=element("details"),r=element("summary"),create_component(a.$$.fragment),o=space(),u=element("div"),u.textContent="",c=space(),d=element("div"),f=text("Table: "),h=text(m),p=space();for(let X=0;X<E.length;X+=1)E[X].c();_=space(),y=element("div"),S=element("input"),w=space(),v=element("div"),create_component(g.$$.fragment),T=space(),O=element("div"),k=element("a"),k.textContent="Onsets",$=space(),M=element("input"),R=space(),attr(u,"class","deleteTable hoverbutton svelte-jzkczy"),attr(r,"class","svelte-jzkczy"),attr(d,"class","tableLabel svelte-jzkczy"),attr(S,"class","colourPicker svelte-jzkczy"),attr(S,"id",t[34]),attr(S,"type","color"),set_style(S,"background",t[1][t[0]].sourceData[t[34]].col.hex),attr(v,"class","sliderContainer svelte-jzkczy"),attr(y,"class","colour svelte-jzkczy"),attr(k,"class","svelte-jzkczy"),attr(M,"type","checkbox"),attr(M,"class","svelte-jzkczy"),attr(O,"class","itemsliderContainer svelte-jzkczy"),e.open=!0,attr(e,"class","dataTable svelte-jzkczy")},m(X,x){insert(X,e,x),append(e,r),mount_component(a,r,null),append(r,o),append(r,u),append(e,c),append(e,d),append(d,f),append(d,h),append(e,p);for(let le=0;le<E.length;le+=1)E[le]&&E[le].m(e,null);append(e,_),append(e,y),append(y,S),set_input_value(S,t[1][t[0]].sourceData[t[34]].col.hex),append(y,w),append(y,v),mount_component(g,v,null),append(e,T),append(e,O),append(O,k),append(O,$),append(O,M),M.checked=t[1][t[0]].sourceData[t[34]].showOnsets,insert(X,R,x),A=!0,N||(L=[listen(u,"click",F),listen(S,"input",I),listen(M,"change",G)],N=!0)},p(X,x){t=X;const le={};if(!i&&x[0]&3&&(i=!0,le.value=t[32].name,add_flush_callback(()=>i=!1)),a.$set(le),(!A||x[0]&11)&&m!==(m=t[3].find(z).displayName+"")&&set_data(h,m),x[0]&11){H=ensure_array_like(Object.keys(t[32].chartvalues));let q;for(q=0;q<H.length;q+=1){const _e=get_each_context_1$6(t,H,q);E[q]?(E[q].p(_e,x),transition_in(E[q],1)):(E[q]=create_each_block_1$6(_e),E[q].c(),transition_in(E[q],1),E[q].m(e,_))}for(group_outros(),q=H.length;q<E.length;q+=1)D(q);check_outros()}(!A||x[0]&3)&&set_style(S,"background",t[1][t[0]].sourceData[t[34]].col.hex),x[0]&3&&set_input_value(S,t[1][t[0]].sourceData[t[34]].col.hex);const ie={};!b&&x[0]&3&&(b=!0,ie.value=t[1][t[0]].sourceData[t[34]].col.alpha,add_flush_callback(()=>b=!1)),g.$set(ie),x[0]&3&&(M.checked=t[1][t[0]].sourceData[t[34]].showOnsets)},i(X){if(!A){transition_in(a.$$.fragment,X);for(let x=0;x<H.length;x+=1)transition_in(E[x]);transition_in(g.$$.fragment,X),A=!0}},o(X){transition_out(a.$$.fragment,X),E=E.filter(Boolean);for(let x=0;x<E.length;x+=1)transition_out(E[x]);transition_out(g.$$.fragment,X),A=!1},d(X){X&&(detach(e),detach(R)),destroy_component(a),destroy_each(E,X),destroy_component(g),N=!1,run_all(L)}}}function create_fragment$f(t){let e,r,a=t[0]>=0&&t[1][t[0]].graph==="actigram"&&create_if_block$b(t);return{c(){a&&a.c(),e=empty$1()},m(i,o){a&&a.m(i,o),insert(i,e,o),r=!0},p(i,o){i[0]>=0&&i[1][i[0]].graph==="actigram"?a?(a.p(i,o),o[0]&3&&transition_in(a,1)):(a=create_if_block$b(i),a.c(),transition_in(a,1),a.m(e.parentNode,e)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(i){r||(transition_in(a),r=!0)},o(i){transition_out(a),r=!1},d(i){i&&detach(e),a&&a.d(i)}}}function instance$f(t,e,r){let a,i,o,u;component_subscribe(t,activeGraphTab,D=>r(0,a=D)),component_subscribe(t,graphs,D=>r(1,i=D)),component_subscribe(t,graphTabs,D=>r(2,o=D)),component_subscribe(t,data,D=>r(3,u=D));const c={time:"time",values:"values"},d={col:{hex:"#1B1D50",alpha:.5},showOnsets:!0};let f=!0;function m(){f=!f;const D=document.querySelector(".datepicklabel"),I=document.querySelector(".dateInput");f?(D.style.display="inline-block",I.style.width="18px"):(D.style.display="none",I.style.width="60%")}const h=D=>{m()};function p(){i[a].params.startTime=this.value,graphs.set(i)}const _=D=>{D.key==="Enter"&&m()};function y(D){t.$$.not_equal(i[a].params.periodHrs,D)&&(i[a].params.periodHrs=D,graphs.set(i))}function S(D){t.$$.not_equal(i[a].params.binSizeHrs,D)&&(i[a].params.binSizeHrs=D,graphs.set(i))}function w(D){t.$$.not_equal(i[a].params.width,D)&&(i[a].params.width=D,graphs.set(i))}function v(D){t.$$.not_equal(i[a].params.dayHeight,D)&&(i[a].params.dayHeight=D,graphs.set(i))}function g(D){t.$$.not_equal(i[a].params.betweenHeight,D)&&(i[a].params.betweenHeight=D,graphs.set(i))}function b(){i[a].params.showAxes=this.checked,graphs.set(i)}function T(){i[a].params.scaleAxes=select_value(this),graphs.set(i)}const O=D=>{D.preventDefault(),createnewDataForGraph(c,d)};function k(D,I){t.$$.not_equal(I.name,D)&&(I.name=D,graphs.set(i))}const $=(D,I)=>{I.preventDefault(),removeGraphData(D)},M=(D,I)=>I.id===D.tableID,R=(D,I,U)=>{U.preventDefault(),addProcessToGraphData("graph",D,I)},A=(D,I)=>I.id===D.tableID;function N(D,I,U){I[U].chartvalues[D].field=select_value(this),graphs.set(i)}const L=(D,I,U)=>{updateGraphProcess(a,D,I)},V=(D,I,U,Z)=>{Z.preventDefault(),removeProcess(D,I,U)},C=(D,I)=>I.id===D.tableID,F=(D,I,U,Z)=>{updateProcess(D,I,U,Z.detail.params)};function z(D){i[a].sourceData[D].col.hex=this.value,graphs.set(i)}function H(D,I){t.$$.not_equal(i[a].sourceData[I].col.alpha,D)&&(i[a].sourceData[I].col.alpha=D,graphs.set(i))}function E(D){i[a].sourceData[D].showOnsets=this.checked,graphs.set(i)}return[a,i,o,u,c,d,m,h,p,_,y,S,w,v,g,b,T,O,k,$,M,R,A,N,L,V,C,F,z,H,E]}class Actigram_controls extends SvelteComponent{constructor(e){super(),init(this,e,instance$f,create_fragment$f,safe_not_equal,{},null,[-1,-1])}}function bisection(t,e,r,a,i){var o=function(f){return f>0?1:f<0?-1:0},u=o(t(e));o(t(r));for(var c=.5*(e+r),d=t(c);r-e>i&&r-e>a*Math.abs(c)&&Math.abs(d)>i;)d*u>0?(e=c,u=o(d)):r=c,c=.5*(e+r),d=t(c);return c}function gamnln(t){var e=[.5723649429247001,0,-.1207822376352452,0,.2846828704729192,.6931471805599453,1.200973602347074,1.791759469228055,2.453736570842442,3.178053830347946,3.957813967618717,4.787491742782046,5.662562059857142,6.579251212010101,7.534364236758733,8.525161361065415,9.549267257300997,10.60460290274525,11.68933342079727,12.80182748008147,13.94062521940376,15.10441257307552,16.29200047656724,17.50230784587389,18.73434751193645,19.98721449566188,21.2600761562447,22.55216385312342,23.86276584168909,25.19122118273868,26.53691449111561,27.89927138384089,29.27775451504082,30.67186010608068,32.08111489594736,33.50507345013689,34.94331577687682,36.39544520803305,37.86108650896109,39.3398841871995,40.8315009745308,42.33561646075349,43.85192586067515,45.3801388984769,46.91997879580877,48.47118135183522,50.03349410501914,51.60667556776437,53.19049452616927,54.78472939811231,56.38916764371993,58.00360522298051,59.62784609588432,61.26170176100199,62.9049908288765,64.55753862700632,66.21917683354901,67.88974313718154,69.56908092082364,71.257038967168,72.9534711841694,74.65823634883016,76.37119786778275,78.0922235533153,79.82118541361436,81.55795945611503,83.30242550295004,85.05446701758153,86.81397094178108,88.58082754219767,90.35493026581838,92.1361756036871,93.92446296229978,95.71969454214322,97.52177522288821,99.33061245478741,101.1461161558646,102.9681986145138,104.7967743971583,106.6317602606435,108.4730750690654,110.3206397147574,112.1743770431779,114.0342117814617,115.9000704704145,117.7718813997451,119.6495745463449,121.5330815154387,123.4223354844396,125.3172711493569,127.2178246736118,129.1239336391272,131.0355369995686,132.9525750356163,134.8749893121619,136.8027226373264,138.7357190232026,140.6739236482343,142.617282821146,144.5657439463449,146.5192554907206,148.477766951773,150.4412288270019,152.4095925844974,154.3828106346716,156.3608363030788,158.3436238042692,160.3311282166309,162.3233054581712,164.3201122631952,166.3215061598404,168.3274454484277,170.3378891805928,172.3527971391628,174.3721298187452,176.3958484069973,178.4239147665485,180.4562914175438,182.4929415207863,184.5338288614495,186.5789178333379,188.6281734236716,190.6815611983747,192.7390472878449,194.8005983731871,196.86618167289,198.9357649299295,201.0093163992815,203.0868048358281,205.1681994826412,207.2534700596299,209.3425867525368,211.435520202271,213.5322414945632,215.6327221499328,217.7369341139542,219.8448497478113,221.9564418191303,224.0716834930795,226.1905483237276,228.3130102456502,230.4390435657769,232.5686229554685,234.7017234428182,236.8383204051684,238.9783895618343,241.121906967029,243.2688490029827,245.4191923732478,247.5729140961868,249.7299914986334,251.8904022097232,254.0541241548883,256.2211355500095,258.3914148957209,260.5649409718632,262.7416928320802,264.9216497985528,267.1047914568685,269.2910976510198,271.4805484785288,273.6731242856937,275.8688056629533,278.0675734403662,280.2694086832001,282.4742926876305,284.6822069765408,286.893133295427,289.1070536083976,291.3239500942703,293.5438051427607,295.7666013507606,297.9923215187034,300.2209486470141,302.4524659326413,304.6868567656687,306.9241047260048,309.1641935801469,311.4071072780187,313.652829949879,315.9013459032995,318.1526396202093,320.4066957540055,322.6634991267262,324.9230347262869,327.1852877037753,329.4502433708053,331.7178871969285,333.9882048070999,336.2611819791985,338.5368046415996,340.815058870799,343.0959308890863,345.3794070622669,347.6654738974312,349.9541180407703,352.245326275435,354.5390855194408,356.835382823613,359.1342053695754];if(t<201)return e[t-1];var r=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],a=2.5066282746310007,i=.5*t,o=i,u=i+5.5;u=(i+.5)*Math.log(u)-u;for(var c=1.000000000190015,d=0;d<6;d++)o=o+1,c=c+r[d]/o;var f=u+Math.log(a*c/i);return f}function gser(t,e){for(var r=1e8,a=1e-8,i=gamnln(t),o=.5*t,u=o,c=1/o,d=c,t=1;t<r&&(u++,d=d*e/u,c+=d,!(d<c*a));t++);return c*Math.exp(-e+o*Math.log(e)-i)}function gcf(t,e){for(var r=1e8,a=1e-8,i=gamnln(t),o=.5*t,u=e+1-o,c=1e-300,d=1/c,f=1/u,m=f,h=1;h<r;h++){var p=-h*(h-o);u+=2,f=p*f+u,Math.abs(f)<c&&(f=c),d=u+p/d,Math.abs(d)<c&&(d=c),f=1/f;var _=f*d;if(m=m*_,Math.abs(_-1)<a)break}return m*Math.exp(-e+o*Math.log(e)-i)}function gammp(t,e){return e<.5*t+1?gser(t,e):1-gcf(t,e)}function gammq(t,e){return e<.5*t+1?1-gser(t,e):gcf(t,e)}function pchisq(t,e,r=1){return r==1?gammq(e,.5*t):gammp(e,.5*t)}function qchisq(t,e,r=1){if(r==1){if(t==0)return 1/0;if(t==1)return 0}if(r==2){if(t==0)return 0;if(t==1)return 1/0}var a=1e-6,i=0,o=Math.sqrt(2*e),u=2*o,c=1;for(r==2&&(c=-1);c*pchisq(u,e,r)>t*c;)i=u,u+=2*o;var d=function(f){return pchisq(f,e,r)-t};return bisection(d,i,u,a,0)}function create_fragment$e(t){let e,r;return{c(){e=element("div"),r=text(t[0]),set_style(e,"top",t[2]+5+"px"),set_style(e,"left",t[1]+5+"px"),attr(e,"class","svelte-1wb4l5o")},m(a,i){insert(a,e,i),append(e,r)},p(a,[i]){i&1&&set_data(r,a[0]),i&4&&set_style(e,"top",a[2]+5+"px"),i&2&&set_style(e,"left",a[1]+5+"px")},i:noop,o:noop,d(a){a&&detach(e)}}}function instance$e(t,e,r){let{tipcontent:a}=e,{x:i}=e,{y:o}=e;return t.$$set=u=>{"tipcontent"in u&&r(0,a=u.tipcontent),"x"in u&&r(1,i=u.x),"y"in u&&r(2,o=u.y)},[a,i,o]}class TooltipFromUse extends SvelteComponent{constructor(e){super(),init(this,e,instance$e,create_fragment$e,safe_not_equal,{tipcontent:0,x:1,y:2})}}function tooltip(t){let e,r;function a(u){e=t.getAttribute("tipcontent"),t.removeAttribute("title"),r=new TooltipFromUse({props:{tipcontent:e,x:u.pageX,y:u.pageY},target:document.body})}function i(u){r.$set({x:u.pageX,y:u.pageY})}function o(){r.$destroy(),t.setAttribute("tipcontent",e)}return t.addEventListener("mouseover",a),t.addEventListener("mouseleave",o),t.addEventListener("mousemove",i),{destroy(){t.removeEventListener("mouseover",a),t.removeEventListener("mouseleave",o),t.removeEventListener("mousemove",i)}}}function get_each_context$8(t,e,r){const a=t.slice();return a[11]=e[r],a[13]=r,a}function get_each_context_1$5(t,e,r){const a=t.slice();return a[14]=e[r],a[16]=r,a}function create_if_block$a(t){let e,r,a,i,o,u,c,d,f,m,h,p,_,y,S;function w(b,T){return b[3][b[2]].chartData.data.periods.length>0?create_if_block_1$6:create_else_block$3}let v=w(t),g=v(t);return o=new Axis({props:{innerHeight:t[6],yoffset:"0",scale:t[3][t[2]].chartData.xScale,position:"bottom"}}),u=new Axis({props:{innerHeight:t[6],yoffset:"0",scale:t[3][t[2]].chartData.yScale,position:"left"}}),{c(){e=element("div"),r=svg_element("svg"),a=svg_element("g"),g.c(),i=empty$1(),create_component(o.$$.fragment),create_component(u.$$.fragment),c=svg_element("text"),d=text("Chi-sq"),m=svg_element("text"),h=text("Period"),set_style(c,"text-anchor","middle"),attr(c,"transform",f=`translate(-50,${t[6]/2}) rotate(-90)     `),set_style(m,"text-anchor","middle"),attr(m,"x",p=t[7]/2),attr(m,"y",_=t[6]+32),attr(a,"transform",`translate(${t[8].left},${t[8].top})`),attr(r,"id","svgContainer"),attr(r,"width",t[1]),attr(r,"height",t[0]),attr(r,"style",y="transform-origin: top left; transform:scale("+t[3][t[2]].zoom+");"),attr(e,"class","periodogram")},m(b,T){insert(b,e,T),append(e,r),append(r,a),g.m(a,null),append(a,i),mount_component(o,a,null),mount_component(u,a,null),append(a,c),append(c,d),append(a,m),append(m,h),S=!0},p(b,T){v===(v=w(b))&&g?g.p(b,T):(g.d(1),g=v(b),g&&(g.c(),g.m(a,i)));const O={};T&64&&(O.innerHeight=b[6]),T&12&&(O.scale=b[3][b[2]].chartData.xScale),o.$set(O);const k={};T&64&&(k.innerHeight=b[6]),T&12&&(k.scale=b[3][b[2]].chartData.yScale),u.$set(k),(!S||T&64&&f!==(f=`translate(-50,${b[6]/2}) rotate(-90)     `))&&attr(c,"transform",f),(!S||T&128&&p!==(p=b[7]/2))&&attr(m,"x",p),(!S||T&64&&_!==(_=b[6]+32))&&attr(m,"y",_),(!S||T&2)&&attr(r,"width",b[1]),(!S||T&1)&&attr(r,"height",b[0]),(!S||T&12&&y!==(y="transform-origin: top left; transform:scale("+b[3][b[2]].zoom+");"))&&attr(r,"style",y)},i(b){S||(transition_in(o.$$.fragment,b),transition_in(u.$$.fragment,b),S=!0)},o(b){transition_out(o.$$.fragment,b),transition_out(u.$$.fragment,b),S=!1},d(b){b&&detach(e),g.d(),destroy_component(o),destroy_component(u)}}}function create_else_block$3(t){let e,r;return{c(){e=svg_element("text"),r=text("No Data "),attr(e,"x","50%"),attr(e,"y","50%"),attr(e,"text-anchor","middle"),attr(e,"fill","red")},m(a,i){insert(a,e,i),append(e,r)},p:noop,d(a){a&&detach(e)}}}function create_if_block_1$6(t){let e,r=ensure_array_like(t[3][t[2]].chartData.data.periods),a=[];for(let i=0;i<r.length;i+=1)a[i]=create_each_block$8(get_each_context$8(t,r,i));return{c(){for(let i=0;i<a.length;i+=1)a[i].c();e=empty$1()},m(i,o){for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(i,o);insert(i,e,o)},p(i,o){if(o&60){r=ensure_array_like(i[3][i[2]].chartData.data.periods);let u;for(u=0;u<r.length;u+=1){const c=get_each_context$8(i,r,u);a[u]?a[u].p(c,o):(a[u]=create_each_block$8(c),a[u].c(),a[u].m(e.parentNode,e))}for(;u<a.length;u+=1)a[u].d(1);a.length=r.length}},d(i){i&&detach(e),destroy_each(a,i)}}}function create_each_block_1$5(t){let e,r,a,i,o,u,c,d;return{c(){e=svg_element("circle"),attr(e,"tipcontent",r=t[14].toFixed(2)+", "+t[3][t[2]].chartData.data.power[t[13]][t[16]].toFixed(2)+" ("+t[3][t[2]].chartData.data.pvalue[t[13]][t[16]].toFixed(2)+")"),attr(e,"cx",a=t[3][t[2]].chartData.xScale(t[14])),attr(e,"cy",i=t[3][t[2]].chartData.yScale(t[3][t[2]].chartData.data.power[t[13]][t[16]])),attr(e,"r","3"),attr(e,"fill",o=t[3][t[2]].sourceData[t[13]].col.hex),attr(e,"fill-opacity",u=t[3][t[2]].sourceData[t[13]].col.alpha)},m(f,m){insert(f,e,m),c||(d=action_destroyer(tooltip.call(null,e)),c=!0)},p(f,m){m&12&&r!==(r=f[14].toFixed(2)+", "+f[3][f[2]].chartData.data.power[f[13]][f[16]].toFixed(2)+" ("+f[3][f[2]].chartData.data.pvalue[f[13]][f[16]].toFixed(2)+")")&&attr(e,"tipcontent",r),m&12&&a!==(a=f[3][f[2]].chartData.xScale(f[14]))&&attr(e,"cx",a),m&12&&i!==(i=f[3][f[2]].chartData.yScale(f[3][f[2]].chartData.data.power[f[13]][f[16]]))&&attr(e,"cy",i),m&12&&o!==(o=f[3][f[2]].sourceData[f[13]].col.hex)&&attr(e,"fill",o),m&12&&u!==(u=f[3][f[2]].sourceData[f[13]].col.alpha)&&attr(e,"fill-opacity",u)},d(f){f&&detach(e),c=!1,d()}}}function create_each_block$8(t){let e,r,a,i,o,u,c,d=ensure_array_like(t[11]),f=[];for(let m=0;m<d.length;m+=1)f[m]=create_each_block_1$5(get_each_context_1$5(t,d,m));return{c(){for(let m=0;m<f.length;m+=1)f[m].c();e=svg_element("path"),o=svg_element("path"),attr(e,"d",r=t[4][t[13]]),attr(e,"fill","none"),attr(e,"stroke",a=t[3][t[2]].sourceData[t[13]].col.hex),attr(e,"stroke-opacity",i=t[3][t[2]].sourceData[t[13]].col.alpha),attr(e,"stroke-width","2px"),attr(o,"d",u=t[5][t[13]]),attr(o,"fill","none"),attr(o,"stroke","red"),attr(o,"stroke-opacity",c=t[3][t[2]].sourceData[t[13]].col.alpha),attr(o,"stroke-width","1px")},m(m,h){for(let p=0;p<f.length;p+=1)f[p]&&f[p].m(m,h);insert(m,e,h),insert(m,o,h)},p(m,h){if(h&12){d=ensure_array_like(m[11]);let p;for(p=0;p<d.length;p+=1){const _=get_each_context_1$5(m,d,p);f[p]?f[p].p(_,h):(f[p]=create_each_block_1$5(_),f[p].c(),f[p].m(e.parentNode,e))}for(;p<f.length;p+=1)f[p].d(1);f.length=d.length}h&16&&r!==(r=m[4][m[13]])&&attr(e,"d",r),h&12&&a!==(a=m[3][m[2]].sourceData[m[13]].col.hex)&&attr(e,"stroke",a),h&12&&i!==(i=m[3][m[2]].sourceData[m[13]].col.alpha)&&attr(e,"stroke-opacity",i),h&32&&u!==(u=m[5][m[13]])&&attr(o,"d",u),h&12&&c!==(c=m[3][m[2]].sourceData[m[13]].col.alpha)&&attr(o,"stroke-opacity",c)},d(m){m&&(detach(e),detach(o)),destroy_each(f,m)}}}function create_fragment$d(t){var i,o;let e,r,a=((i=t[3][t[2]])==null?void 0:i.graph)==="periodogram"&&((o=t[3][t[2]])==null?void 0:o.sourceData.length)>0&&create_if_block$a(t);return{c(){a&&a.c(),e=empty$1()},m(u,c){a&&a.m(u,c),insert(u,e,c),r=!0},p(u,[c]){var d,f;((d=u[3][u[2]])==null?void 0:d.graph)==="periodogram"&&((f=u[3][u[2]])==null?void 0:f.sourceData.length)>0?a?(a.p(u,c),c&12&&transition_in(a,1)):(a=create_if_block$a(u),a.c(),transition_in(a,1),a.m(e.parentNode,e)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(u){r||(transition_in(a),r=!0)},o(u){transition_out(a),r=!1},d(u){u&&detach(e),a&&a.d(u)}}}function instance$d(t,e,r){let a,i,o,u,c,d;component_subscribe(t,activeGraphTab,y=>r(2,c=y)),component_subscribe(t,graphs,y=>r(3,d=y));let f={top:20,bottom:40,left:80,right:20},m=[],h=[];function p(y,S,w,v,g){var b;if(((b=d[c])==null?void 0:b.graph)==="periodogram"){let O,k,$={data:{periods:[],power:[],sigThreshold:[],pvalue:[]},xScale:linear().domain([w,v]).range([0,u]),yScale:linear().domain([0,100]).range([i,0])},M={ymin:1/0,ymax:-1/0};y.forEach((R,A)=>{R.chartvalues.time.field!=""&&(O=getDataFromSource(A,R.chartvalues.time)),R.chartvalues.values.field!=""&&(k=getDataFromSource(A,R.chartvalues.values));const N=averageBinnedValues(O,k,S);console.log(N.values),$.data.periods[A]=[],$.data.power[A]=[],$.data.pvalue[A]=[],$.data.sigThreshold[A]=[];let L=0;const V=1+(v-w)/g,C=Math.pow(1-.05,1/V);for(let F=w;F<v;F+=g)$.data.periods[A][L]=F,$.data.power[A][L]=_(N.values,S,F),$.data.pvalue[A][L]=pchisq($.data.power[A][L],Math.round(F/S)),$.data.sigThreshold[A][L]=qchisq(C,Math.round(F/S)),$.data.power[A][L]<M.ymin&&(M.ymin=$.data.power[A][L]),$.data.power[A][L]>M.ymax&&(M.ymax=$.data.power[A][L]),L++}),set_store_value(graphs,d[c].chartData=$,d),set_store_value(graphs,d[c].chartData.yScale=linear().domain([M.ymin,M.ymax]).range([o,0]),d),y.forEach((R,A)=>{for(let N=0;N<$.data.power[A].length;N++)N===0&&(r(4,m[A]="M ",m),r(5,h[A]="M",h)),r(4,m[A]+=`${d[c].chartData.xScale($.data.periods[A][N])} ${d[c].chartData.yScale($.data.power[A][N])} `,m),r(5,h[A]+=`${d[c].chartData.xScale($.data.periods[A][N])} ${d[c].chartData.yScale($.data.sigThreshold[A][N])} `,h)})}}function _(y,S,w){const v=Math.round(w/S),g=Math.ceil(y.length/v),b=Array.from({length:v},($,M)=>{const R=M,A=Array.from({length:g},(N,L)=>y[R+L*v]).filter(N=>N!==void 0&&!isNaN(N));return mean(A)}),T=mean(y),O=b.reduce(($,M)=>$+Math.pow(M-T,2),0)*(y.length*g),k=y.reduce(($,M)=>$+Math.pow(M-T,2),0);return O/k}return t.$$.update=()=>{var y,S,w,v,g,b,T;t.$$.dirty&12&&r(1,a=(y=d[c])==null?void 0:y.params.width),t.$$.dirty&12&&r(0,i=(S=d[c])==null?void 0:S.params.height),t.$$.dirty&1&&r(6,o=i-f.top-f.bottom),t.$$.dirty&2&&r(7,u=a-f.left-f.right),t.$$.dirty&12&&p((w=d[c])==null?void 0:w.sourceData,(v=d[c])==null?void 0:v.params.binSizeHrs,(g=d[c])==null?void 0:g.params.minPeriod,(b=d[c])==null?void 0:b.params.maxPeriod,(T=d[c])==null?void 0:T.params.stepPeriod)},[i,a,c,d,m,h,o,u,f]}class Periodogram extends SvelteComponent{constructor(e){super(),init(this,e,instance$d,create_fragment$d,safe_not_equal,{})}}function get_each_context$7(t,e,r){const a=t.slice();return a[25]=e[r],a[26]=e,a[27]=r,a}function get_each_context_1$4(t,e,r){const a=t.slice();return a[28]=e[r],a[29]=e,a[30]=r,a}function get_each_context_2$3(t,e,r){const a=t.slice();return a[31]=e[r],a[33]=r,a}function get_each_context_3$2(t,e,r){const a=t.slice();return a[34]=e[r],a}function create_if_block$9(t){let e,r,a,i,o,u,c,d,f,m,h,p,_,y,S,w,v,g,b,T,O,k,$,M,R,A,N,L=t[2][t[0]].name+"",V,C,F,z,H,E,D,I,U;function Z(Y){t[6](Y)}let G={min:10,max:t[1][t[0]].params.maxPeriod,limits:[1,1/0],label:"Min period:"};t[1][t[0]].params.minPeriod!==void 0&&(G.value=t[1][t[0]].params.minPeriod),a=new Slider({props:G}),binding_callbacks.push(()=>bind(a,"value",Z));function X(Y){t[7](Y)}let x={min:t[1][t[0]].params.minPeriod,max:30,limits:[1,1/0],label:"Max period:"};t[1][t[0]].params.maxPeriod!==void 0&&(x.value=t[1][t[0]].params.maxPeriod),c=new Slider({props:x}),binding_callbacks.push(()=>bind(c,"value",X));function le(Y){t[8](Y)}let ie={min:.1,max:1,step:.01,limits:[.1,1],label:"Period step:"};t[1][t[0]].params.stepPeriod!==void 0&&(ie.value=t[1][t[0]].params.stepPeriod),h=new Slider({props:ie}),binding_callbacks.push(()=>bind(h,"value",le));function q(Y){t[9](Y)}let _e={min:.05,max:1,step:"0.05",limits:[.05,t[1][t[0]].params.maxPeriod],label:"Bin size (hrs):"};t[1][t[0]].params.binSizeHrs!==void 0&&(_e.value=t[1][t[0]].params.binSizeHrs),S=new Slider({props:_e}),binding_callbacks.push(()=>bind(S,"value",q));function Q(Y){t[10](Y)}let ce={min:100,max:1e3,step:"1",limits:[5,1/0],label:"Width: "};t[1][t[0]].params.width!==void 0&&(ce.value=t[1][t[0]].params.width),b=new Slider({props:ce}),binding_callbacks.push(()=>bind(b,"value",Q));function me(Y){t[11](Y)}let ue={min:10,max:30,step:"1",limits:[5,1/0],label:"Height:"};t[1][t[0]].params.height!==void 0&&(ue.value=t[1][t[0]].params.height),$=new Slider({props:ue}),binding_callbacks.push(()=>bind($,"value",me));let ye=ensure_array_like(t[1][t[0]].sourceData),se=[];for(let Y=0;Y<ye.length;Y+=1)se[Y]=create_each_block$7(get_each_context$7(t,ye,Y));const ke=Y=>transition_out(se[Y],1,1,()=>{se[Y]=null});return{c(){e=element("div"),r=element("div"),create_component(a.$$.fragment),o=space(),u=element("div"),create_component(c.$$.fragment),f=space(),m=element("div"),create_component(h.$$.fragment),_=space(),y=element("div"),create_component(S.$$.fragment),v=space(),g=element("div"),create_component(b.$$.fragment),O=space(),k=element("div"),create_component($.$$.fragment),R=space(),A=element("div"),N=element("h1"),V=text(L),C=text(" Data"),F=space(),z=element("span"),z.textContent="+",H=space(),E=element("div");for(let Y=0;Y<se.length;Y+=1)se[Y].c();attr(r,"class","sliderContainer"),attr(u,"class","sliderContainer"),attr(m,"class","sliderContainer"),attr(y,"class","sliderContainer"),attr(g,"class","sliderContainer"),attr(k,"class","sliderContainer"),attr(e,"class","chartControls"),set_style(N,"display","inline"),attr(z,"class","addbutton hoverbutton showContextMenu"),set_style(A,"margin","1em 1em 0 0"),attr(E,"class","graphDataTree")},m(Y,he){insert(Y,e,he),append(e,r),mount_component(a,r,null),append(e,o),append(e,u),mount_component(c,u,null),append(e,f),append(e,m),mount_component(h,m,null),append(e,_),append(e,y),mount_component(S,y,null),append(e,v),append(e,g),mount_component(b,g,null),append(e,O),append(e,k),mount_component($,k,null),insert(Y,R,he),insert(Y,A,he),append(A,N),append(N,V),append(N,C),append(A,F),append(A,z),insert(Y,H,he),insert(Y,E,he);for(let Se=0;Se<se.length;Se+=1)se[Se]&&se[Se].m(E,null);D=!0,I||(U=listen(z,"click",t[12]),I=!0)},p(Y,he){const Se={};he[0]&3&&(Se.max=Y[1][Y[0]].params.maxPeriod),!i&&he[0]&3&&(i=!0,Se.value=Y[1][Y[0]].params.minPeriod,add_flush_callback(()=>i=!1)),a.$set(Se);const oe={};he[0]&3&&(oe.min=Y[1][Y[0]].params.minPeriod),!d&&he[0]&3&&(d=!0,oe.value=Y[1][Y[0]].params.maxPeriod,add_flush_callback(()=>d=!1)),c.$set(oe);const ee={};!p&&he[0]&3&&(p=!0,ee.value=Y[1][Y[0]].params.stepPeriod,add_flush_callback(()=>p=!1)),h.$set(ee);const de={};he[0]&3&&(de.limits=[.05,Y[1][Y[0]].params.maxPeriod]),!w&&he[0]&3&&(w=!0,de.value=Y[1][Y[0]].params.binSizeHrs,add_flush_callback(()=>w=!1)),S.$set(de);const Te={};!T&&he[0]&3&&(T=!0,Te.value=Y[1][Y[0]].params.width,add_flush_callback(()=>T=!1)),b.$set(Te);const ge={};if(!M&&he[0]&3&&(M=!0,ge.value=Y[1][Y[0]].params.height,add_flush_callback(()=>M=!1)),$.$set(ge),(!D||he[0]&5)&&L!==(L=Y[2][Y[0]].name+"")&&set_data(V,L),he[0]&11){ye=ensure_array_like(Y[1][Y[0]].sourceData);let ae;for(ae=0;ae<ye.length;ae+=1){const be=get_each_context$7(Y,ye,ae);se[ae]?(se[ae].p(be,he),transition_in(se[ae],1)):(se[ae]=create_each_block$7(be),se[ae].c(),transition_in(se[ae],1),se[ae].m(E,null))}for(group_outros(),ae=ye.length;ae<se.length;ae+=1)ke(ae);check_outros()}},i(Y){if(!D){transition_in(a.$$.fragment,Y),transition_in(c.$$.fragment,Y),transition_in(h.$$.fragment,Y),transition_in(S.$$.fragment,Y),transition_in(b.$$.fragment,Y),transition_in($.$$.fragment,Y);for(let he=0;he<ye.length;he+=1)transition_in(se[he]);D=!0}},o(Y){transition_out(a.$$.fragment,Y),transition_out(c.$$.fragment,Y),transition_out(h.$$.fragment,Y),transition_out(S.$$.fragment,Y),transition_out(b.$$.fragment,Y),transition_out($.$$.fragment,Y),se=se.filter(Boolean);for(let he=0;he<se.length;he+=1)transition_out(se[he]);D=!1},d(Y){Y&&(detach(e),detach(R),detach(A),detach(H),detach(E)),destroy_component(a),destroy_component(c),destroy_component(h),destroy_component(S),destroy_component(b),destroy_component($),destroy_each(se,Y),I=!1,U()}}}function create_each_block_3$2(t){let e,r=t[3][t[3].findIndex(o)].data[t[34]].name+"",a,i;function o(...u){return t[17](t[25],...u)}return{c(){e=element("option"),a=text(r),e.__value=i=t[34],set_input_value(e,e.__value)},m(u,c){insert(u,e,c),append(e,a)},p(u,c){t=u,c[0]&11&&r!==(r=t[3][t[3].findIndex(o)].data[t[34]].name+"")&&set_data(a,r),c[0]&3&&i!==(i=t[34])&&(e.__value=i,set_input_value(e,e.__value))},d(u){u&&detach(e)}}}function create_each_block_2$3(t){let e,r,a=t[31].process+"",i,o,u,c,d,f,m,h,p;function _(...g){return t[20](t[27],t[28],t[33],...g)}function y(...g){return t[21](t[25],...g)}function S(...g){return t[22](t[28],t[27],t[33],...g)}var w=componentMap[t[31].process].component;function v(g,b){return{props:{paramsStart:g[31].parameters,typeTime:{type:g[3][g[3].findIndex(y)].data[g[25].chartvalues[g[28]].field].type,tocheck:{tableID:g[25].tableID,key:g[28]}}}}}return w&&(f=construct_svelte_component(w,v(t)),f.$on("update",S)),{c(){e=element("details"),r=element("summary"),i=text(a),o=space(),u=element("div"),u.textContent="",c=space(),d=element("div"),f&&create_component(f.$$.fragment),attr(u,"class","deleteProcess hoverbutton"),attr(d,"class","processDetails"),e.open=!0,attr(e,"class","process")},m(g,b){insert(g,e,b),append(e,r),append(r,i),append(r,o),append(r,u),append(e,c),append(e,d),f&&mount_component(f,d,null),m=!0,h||(p=listen(u,"click",_),h=!0)},p(g,b){if(t=g,(!m||b[0]&3)&&a!==(a=t[31].process+"")&&set_data(i,a),b[0]&3&&w!==(w=componentMap[t[31].process].component)){if(f){group_outros();const T=f;transition_out(T.$$.fragment,1,0,()=>{destroy_component(T,1)}),check_outros()}w?(f=construct_svelte_component(w,v(t)),f.$on("update",S),create_component(f.$$.fragment),transition_in(f.$$.fragment,1),mount_component(f,d,null)):f=null}else if(w){const T={};b[0]&3&&(T.paramsStart=t[31].parameters),b[0]&11&&(T.typeTime={type:t[3][t[3].findIndex(y)].data[t[25].chartvalues[t[28]].field].type,tocheck:{tableID:t[25].tableID,key:t[28]}}),f.$set(T)}},i(g){m||(f&&transition_in(f.$$.fragment,g),m=!0)},o(g){f&&transition_out(f.$$.fragment,g),m=!1},d(g){g&&detach(e),f&&destroy_component(f),h=!1,p()}}}function create_each_block_1$4(t){let e,r,a=t[28]+"",i,o,u,c,d,f,m,h,p,_,y,S;function w(...M){return t[16](t[27],t[28],...M)}let v=ensure_array_like(getFieldNames(t[25])),g=[];for(let M=0;M<v.length;M+=1)g[M]=create_each_block_3$2(get_each_context_3$2(t,v,M));function b(){t[18].call(f,t[28],t[26],t[27])}function T(...M){return t[19](t[27],t[28],...M)}let O=ensure_array_like(t[25].chartvalues[t[28]].processSteps),k=[];for(let M=0;M<O.length;M+=1)k[M]=create_each_block_2$3(get_each_context_2$3(t,O,M));const $=M=>transition_out(k[M],1,1,()=>{k[M]=null});return{c(){e=element("details"),r=element("summary"),i=text(a),o=text(`:
              
              
              `),u=element("span"),u.textContent="+",c=space(),d=element("span"),f=element("select");for(let M=0;M<g.length;M+=1)g[M].c();m=space();for(let M=0;M<k.length;M+=1)k[M].c();h=space(),attr(u,"class","addbutton hoverbutton showContextMenu"),attr(f,"class","selectField"),t[25].chartvalues[t[28]].field===void 0&&add_render_callback(b),e.open=!0,attr(e,"class",p="field "+(t[25].chartvalues[t[28]].processSteps.length>0?"":"no-arrow"))},m(M,R){insert(M,e,R),append(e,r),append(r,i),append(r,o),append(r,u),append(r,c),append(r,d),append(d,f);for(let A=0;A<g.length;A+=1)g[A]&&g[A].m(f,null);select_option(f,t[25].chartvalues[t[28]].field,!0),append(e,m);for(let A=0;A<k.length;A+=1)k[A]&&k[A].m(e,null);append(e,h),_=!0,y||(S=[listen(u,"click",w),listen(f,"change",b),listen(f,"change",T)],y=!0)},p(M,R){if(t=M,(!_||R[0]&3)&&a!==(a=t[28]+"")&&set_data(i,a),R[0]&11){v=ensure_array_like(getFieldNames(t[25]));let A;for(A=0;A<v.length;A+=1){const N=get_each_context_3$2(t,v,A);g[A]?g[A].p(N,R):(g[A]=create_each_block_3$2(N),g[A].c(),g[A].m(f,null))}for(;A<g.length;A+=1)g[A].d(1);g.length=v.length}if(R[0]&3&&select_option(f,t[25].chartvalues[t[28]].field),R[0]&11){O=ensure_array_like(t[25].chartvalues[t[28]].processSteps);let A;for(A=0;A<O.length;A+=1){const N=get_each_context_2$3(t,O,A);k[A]?(k[A].p(N,R),transition_in(k[A],1)):(k[A]=create_each_block_2$3(N),k[A].c(),transition_in(k[A],1),k[A].m(e,h))}for(group_outros(),A=O.length;A<k.length;A+=1)$(A);check_outros()}(!_||R[0]&3&&p!==(p="field "+(t[25].chartvalues[t[28]].processSteps.length>0?"":"no-arrow")))&&attr(e,"class",p)},i(M){if(!_){for(let R=0;R<O.length;R+=1)transition_in(k[R]);_=!0}},o(M){k=k.filter(Boolean);for(let R=0;R<k.length;R+=1)transition_out(k[R]);_=!1},d(M){M&&detach(e),destroy_each(g,M),destroy_each(k,M),y=!1,run_all(S)}}}function create_each_block$7(t){let e,r,a,i,o,u,c,d,f,m=t[3].find(N).displayName+"",h,p,_,y,S,w,v,g,b,T,O,k,$;function M(E){t[13](E,t[25])}let R={};t[25].name!==void 0&&(R.value=t[25].name),a=new InPlaceEdit({props:R}),binding_callbacks.push(()=>bind(a,"value",M));function A(...E){return t[14](t[27],...E)}function N(...E){return t[15](t[25],...E)}let L=ensure_array_like(Object.keys(t[25].chartvalues)),V=[];for(let E=0;E<L.length;E+=1)V[E]=create_each_block_1$4(get_each_context_1$4(t,L,E));const C=E=>transition_out(V[E],1,1,()=>{V[E]=null});function F(){t[23].call(S,t[27])}function z(E){t[24](E,t[27])}let H={min:"0",max:"1",step:"0.01",limits:[0,1],label:"Alpha: "};return t[1][t[0]].sourceData[t[27]].col.alpha!==void 0&&(H.value=t[1][t[0]].sourceData[t[27]].col.alpha),g=new Slider({props:H}),binding_callbacks.push(()=>bind(g,"value",z)),{c(){e=element("details"),r=element("summary"),create_component(a.$$.fragment),o=space(),u=element("div"),u.textContent="",c=space(),d=element("div"),f=text("Table: "),h=text(m),p=space();for(let E=0;E<V.length;E+=1)V[E].c();_=space(),y=element("div"),S=element("input"),w=space(),v=element("div"),create_component(g.$$.fragment),T=space(),attr(u,"class","deleteTable hoverbutton"),attr(d,"class","tableLabel"),attr(S,"class","colourPicker"),attr(S,"id",t[27]),attr(S,"type","color"),set_style(S,"background",t[1][t[0]].sourceData[t[27]].col.hex),attr(v,"class","sliderContainer"),attr(y,"class","colour"),e.open=!0,attr(e,"class","dataTable")},m(E,D){insert(E,e,D),append(e,r),mount_component(a,r,null),append(r,o),append(r,u),append(e,c),append(e,d),append(d,f),append(d,h),append(e,p);for(let I=0;I<V.length;I+=1)V[I]&&V[I].m(e,null);append(e,_),append(e,y),append(y,S),set_input_value(S,t[1][t[0]].sourceData[t[27]].col.hex),append(y,w),append(y,v),mount_component(g,v,null),insert(E,T,D),O=!0,k||($=[listen(u,"click",A),listen(S,"input",F)],k=!0)},p(E,D){t=E;const I={};if(!i&&D[0]&3&&(i=!0,I.value=t[25].name,add_flush_callback(()=>i=!1)),a.$set(I),(!O||D[0]&11)&&m!==(m=t[3].find(N).displayName+"")&&set_data(h,m),D[0]&11){L=ensure_array_like(Object.keys(t[25].chartvalues));let Z;for(Z=0;Z<L.length;Z+=1){const G=get_each_context_1$4(t,L,Z);V[Z]?(V[Z].p(G,D),transition_in(V[Z],1)):(V[Z]=create_each_block_1$4(G),V[Z].c(),transition_in(V[Z],1),V[Z].m(e,_))}for(group_outros(),Z=L.length;Z<V.length;Z+=1)C(Z);check_outros()}(!O||D[0]&3)&&set_style(S,"background",t[1][t[0]].sourceData[t[27]].col.hex),D[0]&3&&set_input_value(S,t[1][t[0]].sourceData[t[27]].col.hex);const U={};!b&&D[0]&3&&(b=!0,U.value=t[1][t[0]].sourceData[t[27]].col.alpha,add_flush_callback(()=>b=!1)),g.$set(U)},i(E){if(!O){transition_in(a.$$.fragment,E);for(let D=0;D<L.length;D+=1)transition_in(V[D]);transition_in(g.$$.fragment,E),O=!0}},o(E){transition_out(a.$$.fragment,E),V=V.filter(Boolean);for(let D=0;D<V.length;D+=1)transition_out(V[D]);transition_out(g.$$.fragment,E),O=!1},d(E){E&&(detach(e),detach(T)),destroy_component(a),destroy_each(V,E),destroy_component(g),k=!1,run_all($)}}}function create_fragment$c(t){let e,r,a=t[0]>=0&&t[1][t[0]].graph==="periodogram"&&create_if_block$9(t);return{c(){a&&a.c(),e=empty$1()},m(i,o){a&&a.m(i,o),insert(i,e,o),r=!0},p(i,o){i[0]>=0&&i[1][i[0]].graph==="periodogram"?a?(a.p(i,o),o[0]&3&&transition_in(a,1)):(a=create_if_block$9(i),a.c(),transition_in(a,1),a.m(e.parentNode,e)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(i){r||(transition_in(a),r=!0)},o(i){transition_out(a),r=!1},d(i){i&&detach(e),a&&a.d(i)}}}function instance$c(t,e,r){let a,i,o,u;component_subscribe(t,activeGraphTab,L=>r(0,a=L)),component_subscribe(t,graphs,L=>r(1,i=L)),component_subscribe(t,graphTabs,L=>r(2,o=L)),component_subscribe(t,data,L=>r(3,u=L));const c={time:"time",values:"values"},d={col:{hex:"#1B1D50",alpha:.5}};function f(L){t.$$.not_equal(i[a].params.minPeriod,L)&&(i[a].params.minPeriod=L,graphs.set(i))}function m(L){t.$$.not_equal(i[a].params.maxPeriod,L)&&(i[a].params.maxPeriod=L,graphs.set(i))}function h(L){t.$$.not_equal(i[a].params.stepPeriod,L)&&(i[a].params.stepPeriod=L,graphs.set(i))}function p(L){t.$$.not_equal(i[a].params.binSizeHrs,L)&&(i[a].params.binSizeHrs=L,graphs.set(i))}function _(L){t.$$.not_equal(i[a].params.width,L)&&(i[a].params.width=L,graphs.set(i))}function y(L){t.$$.not_equal(i[a].params.height,L)&&(i[a].params.height=L,graphs.set(i))}const S=L=>{L.preventDefault(),createnewDataForGraph(c,d)};function w(L,V){t.$$.not_equal(V.name,L)&&(V.name=L,graphs.set(i))}const v=(L,V)=>{V.preventDefault(),removeGraphData(L)},g=(L,V)=>V.id===L.tableID,b=(L,V,C)=>{C.preventDefault(),addProcessToGraphData("graph",L,V)},T=(L,V)=>V.id===L.tableID;function O(L,V,C){V[C].chartvalues[L].field=select_value(this),graphs.set(i)}const k=(L,V,C)=>{updateGraphProcess(a,L,V)},$=(L,V,C,F)=>{F.preventDefault(),removeProcess(L,V,C)},M=(L,V)=>V.id===L.tableID,R=(L,V,C,F)=>{updateProcess(L,V,C,F.detail.params)};function A(L){i[a].sourceData[L].col.hex=this.value,graphs.set(i)}function N(L,V){t.$$.not_equal(i[a].sourceData[V].col.alpha,L)&&(i[a].sourceData[V].col.alpha=L,graphs.set(i))}return[a,i,o,u,c,d,f,m,h,p,_,y,S,w,v,g,b,T,O,k,$,M,R,A,N]}class Periodogram_controls extends SvelteComponent{constructor(e){super(),init(this,e,instance$c,create_fragment$c,safe_not_equal,{},null,[-1,-1])}}function get_each_context$6(t,e,r){const a=t.slice();return a[12]=e[r],a[14]=r,a}function get_each_context_1$3(t,e,r){const a=t.slice();return a[15]=e[r],a[17]=r,a}function create_if_block$8(t){let e,r,a,i,o,u,c,d=t[7][t[6]].params.yAxisLabel+"",f,m,h,p=t[7][t[6]].params.xAxisLabel+"",_,y,S,w,v,g=ensure_array_like(t[1]),b=[];for(let T=0;T<g.length;T+=1)b[T]=create_each_block$6(get_each_context$6(t,g,T));return o=new Axis({props:{innerHeight:t[2],scale:t[8],position:"bottom"}}),u=new Axis({props:{innerHeight:t[2],scale:t[9],position:"left"}}),{c(){e=element("div"),r=svg_element("svg"),a=svg_element("g");for(let T=0;T<b.length;T+=1)b[T].c();i=empty$1(),create_component(o.$$.fragment),create_component(u.$$.fragment),c=svg_element("text"),f=text(d),h=svg_element("text"),_=text(p),set_style(c,"text-anchor","middle"),attr(c,"transform",m=`translate(-30,${t[2]/2}) rotate(-90)     `),set_style(h,"text-anchor","middle"),attr(h,"x",y=t[3]/2),attr(h,"y",S=t[2]+32),attr(a,"transform",`translate(${t[10].left},${t[10].right})`),attr(r,"id","svgContainer"),attr(r,"width",t[4]),attr(r,"height",t[5]),attr(r,"style",w="transform-origin: top left; transform:scale("+t[7][t[6]].zoom+");"),attr(e,"class","rawGraph")},m(T,O){insert(T,e,O),append(e,r),append(r,a);for(let k=0;k<b.length;k+=1)b[k]&&b[k].m(a,null);append(a,i),mount_component(o,a,null),mount_component(u,a,null),append(a,c),append(c,f),append(a,h),append(h,_),v=!0},p(T,O){if(O&963){g=ensure_array_like(T[1]);let M;for(M=0;M<g.length;M+=1){const R=get_each_context$6(T,g,M);b[M]?b[M].p(R,O):(b[M]=create_each_block$6(R),b[M].c(),b[M].m(a,i))}for(;M<b.length;M+=1)b[M].d(1);b.length=g.length}const k={};O&4&&(k.innerHeight=T[2]),O&256&&(k.scale=T[8]),o.$set(k);const $={};O&4&&($.innerHeight=T[2]),O&512&&($.scale=T[9]),u.$set($),(!v||O&192)&&d!==(d=T[7][T[6]].params.yAxisLabel+"")&&set_data(f,d),(!v||O&4&&m!==(m=`translate(-30,${T[2]/2}) rotate(-90)     `))&&attr(c,"transform",m),(!v||O&192)&&p!==(p=T[7][T[6]].params.xAxisLabel+"")&&set_data(_,p),(!v||O&8&&y!==(y=T[3]/2))&&attr(h,"x",y),(!v||O&4&&S!==(S=T[2]+32))&&attr(h,"y",S),(!v||O&16)&&attr(r,"width",T[4]),(!v||O&32)&&attr(r,"height",T[5]),(!v||O&192&&w!==(w="transform-origin: top left; transform:scale("+T[7][T[6]].zoom+");"))&&attr(r,"style",w)},i(T){v||(transition_in(o.$$.fragment,T),transition_in(u.$$.fragment,T),v=!0)},o(T){transition_out(o.$$.fragment,T),transition_out(u.$$.fragment,T),v=!1},d(T){T&&detach(e),destroy_each(b,T),destroy_component(o),destroy_component(u)}}}function create_if_block_1$5(t){let e,r,a,i,o,u,c,d,f,m,h,p;return{c(){e=svg_element("circle"),attr(e,"tipcontent",r=t[0][t[14]][t[17]]+", "+t[15]),attr(e,"cx",a=t[8](t[0][t[14]][t[17]])),attr(e,"cy",i=t[9](t[15])),attr(e,"r",o=t[7][t[6]].sourceData[t[14]].size),attr(e,"stroke",u=t[7][t[6]].sourceData[t[14]].strokeCol.hex),attr(e,"stroke-opacity",c=t[7][t[6]].sourceData[t[14]].strokeCol.alpha),attr(e,"stroke-width",d=t[7][t[6]].sourceData[t[14]].strokeWidth),attr(e,"fill",f=t[7][t[6]].sourceData[t[14]].col.hex),attr(e,"fill-opacity",m=t[7][t[6]].sourceData[t[14]].col.alpha)},m(_,y){insert(_,e,y),h||(p=action_destroyer(tooltip.call(null,e)),h=!0)},p(_,y){y&3&&r!==(r=_[0][_[14]][_[17]]+", "+_[15])&&attr(e,"tipcontent",r),y&257&&a!==(a=_[8](_[0][_[14]][_[17]]))&&attr(e,"cx",a),y&514&&i!==(i=_[9](_[15]))&&attr(e,"cy",i),y&192&&o!==(o=_[7][_[6]].sourceData[_[14]].size)&&attr(e,"r",o),y&192&&u!==(u=_[7][_[6]].sourceData[_[14]].strokeCol.hex)&&attr(e,"stroke",u),y&192&&c!==(c=_[7][_[6]].sourceData[_[14]].strokeCol.alpha)&&attr(e,"stroke-opacity",c),y&192&&d!==(d=_[7][_[6]].sourceData[_[14]].strokeWidth)&&attr(e,"stroke-width",d),y&192&&f!==(f=_[7][_[6]].sourceData[_[14]].col.hex)&&attr(e,"fill",f),y&192&&m!==(m=_[7][_[6]].sourceData[_[14]].col.alpha)&&attr(e,"fill-opacity",m)},d(_){_&&detach(e),h=!1,p()}}}function create_each_block_1$3(t){let e=t[15]!==null&&!isNaN(t[15])&&t[0][t[14]][t[17]]!==null&&!isNaN(t[0][t[14]][t[17]]),r,a=e&&create_if_block_1$5(t);return{c(){a&&a.c(),r=empty$1()},m(i,o){a&&a.m(i,o),insert(i,r,o)},p(i,o){o&3&&(e=i[15]!==null&&!isNaN(i[15])&&i[0][i[14]][i[17]]!==null&&!isNaN(i[0][i[14]][i[17]])),e?a?a.p(i,o):(a=create_if_block_1$5(i),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null)},d(i){i&&detach(r),a&&a.d(i)}}}function create_each_block$6(t){let e,r=ensure_array_like(t[12]),a=[];for(let i=0;i<r.length;i+=1)a[i]=create_each_block_1$3(get_each_context_1$3(t,r,i));return{c(){for(let i=0;i<a.length;i+=1)a[i].c();e=empty$1()},m(i,o){for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(i,o);insert(i,e,o)},p(i,o){if(o&963){r=ensure_array_like(i[12]);let u;for(u=0;u<r.length;u+=1){const c=get_each_context_1$3(i,r,u);a[u]?a[u].p(c,o):(a[u]=create_each_block_1$3(c),a[u].c(),a[u].m(e.parentNode,e))}for(;u<a.length;u+=1)a[u].d(1);a.length=r.length}},d(i){i&&detach(e),destroy_each(a,i)}}}function create_fragment$b(t){var i,o;let e,r,a=((i=t[7][t[6]])==null?void 0:i.graph)==="raw"&&((o=t[7][t[6]])==null?void 0:o.sourceData.length)>0&&create_if_block$8(t);return{c(){a&&a.c(),e=empty$1()},m(u,c){a&&a.m(u,c),insert(u,e,c),r=!0},p(u,[c]){var d,f;((d=u[7][u[6]])==null?void 0:d.graph)==="raw"&&((f=u[7][u[6]])==null?void 0:f.sourceData.length)>0?a?(a.p(u,c),c&192&&transition_in(a,1)):(a=create_if_block$8(u),a.c(),transition_in(a,1),a.m(e.parentNode,e)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(u){r||(transition_in(a),r=!0)},o(u){transition_out(a),r=!1},d(u){u&&detach(e),a&&a.d(u)}}}function instance$b(t,e,r){let a,i,o,u,c,d,f;component_subscribe(t,activeGraphTab,S=>r(6,c=S)),component_subscribe(t,graphs,S=>r(7,d=S)),component_subscribe(t,data,S=>r(11,f=S));const m={top:20,bottom:60,left:60,right:20};let h=[],p=[],_,y;return t.$$.update=()=>{var S,w,v;if(t.$$.dirty&192&&r(4,a=(S=d[c])==null?void 0:S.params.width),t.$$.dirty&192&&r(5,i=(w=d[c])==null?void 0:w.params.height),t.$$.dirty&32&&r(2,o=i-m.top-m.bottom),t.$$.dirty&16&&r(3,u=a-m.left-m.right),t.$$.dirty&2255){r(0,h=[]),r(1,p=[]);let g,b;((v=d[c])==null?void 0:v.graph)==="raw"&&(d[c].sourceData.forEach((T,O)=>{f.findIndex(k=>k.id===T.tableID),T.chartvalues.x.field!=""&&(g=getDataFromSource(O,T.chartvalues.x)),T.chartvalues.y.field!=""&&(b=getDataFromSource(O,T.chartvalues.y)),h.push(g),p.push(b)}),r(8,_=linear().domain([d[c].params.xDomainMin,d[c].params.xDomainMax]).range([0,u])),r(9,y=linear().domain([d[c].params.yDomainMin,d[c].params.yDomainMax]).range([o,0])))}},[h,p,o,u,a,i,c,d,_,y,m,f]}class Raw extends SvelteComponent{constructor(e){super(),init(this,e,instance$b,create_fragment$b,safe_not_equal,{})}}function get_each_context$5(t,e,r){const a=t.slice();return a[31]=e[r],a[32]=e,a[33]=r,a}function get_each_context_1$2(t,e,r){const a=t.slice();return a[34]=e[r],a[35]=e,a[36]=r,a}function get_each_context_2$2(t,e,r){const a=t.slice();return a[37]=e[r],a[39]=r,a}function get_each_context_3$1(t,e,r){const a=t.slice();return a[40]=e[r],a}function create_if_block$7(t){let e,r,a,i,o,u,c,d,f,m,h,p,_,y,S,w,v,g,b,T,O,k,$,M,R,A,N,L,V,C,F,z,H,E,D,I,U,Z=t[2][t[0]].name+"",G,X,x,le,ie,q,_e,Q,ce;function me(j){t[6](j)}let ue={min:100,max:1e3,limits:[5,1/0],label:"Width:"};t[1][t[0]].params.width!==void 0&&(ue.value=t[1][t[0]].params.width),a=new Slider({props:ue}),binding_callbacks.push(()=>bind(a,"value",me));function ye(j){t[7](j)}let se={min:10,max:3e3,limits:[5,1/0],label:"Height: "};t[1][t[0]].params.height!==void 0&&(se.value=t[1][t[0]].params.height),c=new Slider({props:se}),binding_callbacks.push(()=>bind(c,"value",ye));function ke(j){t[9](j)}let Y={min:-10,max:30,label:"Min X:"};t[1][t[0]].params.xDomainMin!==void 0&&(Y.value=t[1][t[0]].params.xDomainMin),w=new Slider({props:Y}),binding_callbacks.push(()=>bind(w,"value",ke));function he(j){t[10](j)}let Se={min:-10,max:30,label:"Max X:"};t[1][t[0]].params.xDomainMax!==void 0&&(Se.value=t[1][t[0]].params.xDomainMax),T=new Slider({props:Se}),binding_callbacks.push(()=>bind(T,"value",he));function oe(j){t[12](j)}let ee={min:-10,max:30,label:"Min Y:"};t[1][t[0]].params.yDomainMin!==void 0&&(ee.value=t[1][t[0]].params.yDomainMin),V=new Slider({props:ee}),binding_callbacks.push(()=>bind(V,"value",oe));function de(j){t[13](j)}let Te={min:-10,max:30,label:"Max Y:"};t[1][t[0]].params.yDomainMax!==void 0&&(Te.value=t[1][t[0]].params.yDomainMax),H=new Slider({props:Te}),binding_callbacks.push(()=>bind(H,"value",de));let ge=ensure_array_like(t[1][t[0]].sourceData),ae=[];for(let j=0;j<ge.length;j+=1)ae[j]=create_each_block$5(get_each_context$5(t,ge,j));const be=j=>transition_out(ae[j],1,1,()=>{ae[j]=null});return{c(){e=element("div"),r=element("div"),create_component(a.$$.fragment),o=space(),u=element("div"),create_component(c.$$.fragment),f=space(),m=element("div"),h=element("label"),h.textContent="X-axis:",p=space(),_=element("input"),y=space(),S=element("div"),create_component(w.$$.fragment),g=space(),b=element("div"),create_component(T.$$.fragment),k=space(),$=element("div"),M=element("label"),M.textContent="Y-axis:",R=space(),A=element("input"),N=space(),L=element("div"),create_component(V.$$.fragment),F=space(),z=element("div"),create_component(H.$$.fragment),D=space(),I=element("div"),U=element("h1"),G=text(Z),X=text(" Data"),x=space(),le=element("span"),le.textContent="+",ie=space(),q=element("div");for(let j=0;j<ae.length;j+=1)ae[j].c();attr(r,"class","sliderContainer"),attr(u,"class","sliderContainer"),attr(h,"for","val"),attr(_,"type","text"),attr(_,"id","min"),attr(m,"class","sliderContainer"),attr(S,"class","sliderContainer"),attr(b,"class","sliderContainer"),attr(M,"for","val"),attr(A,"type","text"),attr(A,"id","min"),attr($,"class","sliderContainer"),attr(L,"class","sliderContainer"),attr(z,"class","sliderContainer"),attr(e,"class","chartControls"),set_style(U,"display","inline"),attr(le,"class","addbutton hoverbutton showContextMenu"),set_style(I,"margin","1em 1em 0 0"),attr(q,"class","graphDataTree")},m(j,P){insert(j,e,P),append(e,r),mount_component(a,r,null),append(e,o),append(e,u),mount_component(c,u,null),append(e,f),append(e,m),append(m,h),append(m,p),append(m,_),set_input_value(_,t[1][t[0]].params.xAxisLabel),append(e,y),append(e,S),mount_component(w,S,null),append(e,g),append(e,b),mount_component(T,b,null),append(e,k),append(e,$),append($,M),append($,R),append($,A),set_input_value(A,t[1][t[0]].params.yAxisLabel),append(e,N),append(e,L),mount_component(V,L,null),append(e,F),append(e,z),mount_component(H,z,null),insert(j,D,P),insert(j,I,P),append(I,U),append(U,G),append(U,X),append(I,x),append(I,le),insert(j,ie,P),insert(j,q,P);for(let B=0;B<ae.length;B+=1)ae[B]&&ae[B].m(q,null);_e=!0,Q||(ce=[listen(_,"input",t[8]),listen(A,"input",t[11]),listen(le,"click",t[14])],Q=!0)},p(j,P){const B={};!i&&P[0]&3&&(i=!0,B.value=j[1][j[0]].params.width,add_flush_callback(()=>i=!1)),a.$set(B);const ne={};!d&&P[0]&3&&(d=!0,ne.value=j[1][j[0]].params.height,add_flush_callback(()=>d=!1)),c.$set(ne),P[0]&3&&_.value!==j[1][j[0]].params.xAxisLabel&&set_input_value(_,j[1][j[0]].params.xAxisLabel);const J={};!v&&P[0]&3&&(v=!0,J.value=j[1][j[0]].params.xDomainMin,add_flush_callback(()=>v=!1)),w.$set(J);const fe={};!O&&P[0]&3&&(O=!0,fe.value=j[1][j[0]].params.xDomainMax,add_flush_callback(()=>O=!1)),T.$set(fe),P[0]&3&&A.value!==j[1][j[0]].params.yAxisLabel&&set_input_value(A,j[1][j[0]].params.yAxisLabel);const W={};!C&&P[0]&3&&(C=!0,W.value=j[1][j[0]].params.yDomainMin,add_flush_callback(()=>C=!1)),V.$set(W);const K={};if(!E&&P[0]&3&&(E=!0,K.value=j[1][j[0]].params.yDomainMax,add_flush_callback(()=>E=!1)),H.$set(K),(!_e||P[0]&5)&&Z!==(Z=j[2][j[0]].name+"")&&set_data(G,Z),P[0]&11){ge=ensure_array_like(j[1][j[0]].sourceData);let te;for(te=0;te<ge.length;te+=1){const pe=get_each_context$5(j,ge,te);ae[te]?(ae[te].p(pe,P),transition_in(ae[te],1)):(ae[te]=create_each_block$5(pe),ae[te].c(),transition_in(ae[te],1),ae[te].m(q,null))}for(group_outros(),te=ge.length;te<ae.length;te+=1)be(te);check_outros()}},i(j){if(!_e){transition_in(a.$$.fragment,j),transition_in(c.$$.fragment,j),transition_in(w.$$.fragment,j),transition_in(T.$$.fragment,j),transition_in(V.$$.fragment,j),transition_in(H.$$.fragment,j);for(let P=0;P<ge.length;P+=1)transition_in(ae[P]);_e=!0}},o(j){transition_out(a.$$.fragment,j),transition_out(c.$$.fragment,j),transition_out(w.$$.fragment,j),transition_out(T.$$.fragment,j),transition_out(V.$$.fragment,j),transition_out(H.$$.fragment,j),ae=ae.filter(Boolean);for(let P=0;P<ae.length;P+=1)transition_out(ae[P]);_e=!1},d(j){j&&(detach(e),detach(D),detach(I),detach(ie),detach(q)),destroy_component(a),destroy_component(c),destroy_component(w),destroy_component(T),destroy_component(V),destroy_component(H),destroy_each(ae,j),Q=!1,run_all(ce)}}}function create_each_block_3$1(t){let e,r=t[3][t[3].findIndex(o)].data[t[40]].name+"",a,i;function o(...u){return t[19](t[31],...u)}return{c(){e=element("option"),a=text(r),e.__value=i=t[40],set_input_value(e,e.__value)},m(u,c){insert(u,e,c),append(e,a)},p(u,c){t=u,c[0]&11&&r!==(r=t[3][t[3].findIndex(o)].data[t[40]].name+"")&&set_data(a,r),c[0]&3&&i!==(i=t[40])&&(e.__value=i,set_input_value(e,e.__value))},d(u){u&&detach(e)}}}function create_each_block_2$2(t){let e,r,a=t[37].process+"",i,o,u,c,d,f,m,h,p;function _(...g){return t[22](t[33],t[34],t[39],...g)}function y(...g){return t[23](t[31],...g)}function S(...g){return t[24](t[34],t[33],t[39],...g)}var w=componentMap[t[37].process].component;function v(g,b){return{props:{paramsStart:g[37].parameters,typeTime:{type:g[3][g[3].findIndex(y)].data[g[31].chartvalues[g[34]].field].type,tocheck:{tableID:g[31].tableID,key:g[34]}}}}}return w&&(f=construct_svelte_component(w,v(t)),f.$on("update",S)),{c(){e=element("details"),r=element("summary"),i=text(a),o=space(),u=element("div"),u.textContent="",c=space(),d=element("div"),f&&create_component(f.$$.fragment),attr(u,"class","deleteProcess hoverbutton"),attr(d,"class","processDetails"),e.open=!0,attr(e,"class","process")},m(g,b){insert(g,e,b),append(e,r),append(r,i),append(r,o),append(r,u),append(e,c),append(e,d),f&&mount_component(f,d,null),m=!0,h||(p=listen(u,"click",_),h=!0)},p(g,b){if(t=g,(!m||b[0]&3)&&a!==(a=t[37].process+"")&&set_data(i,a),b[0]&3&&w!==(w=componentMap[t[37].process].component)){if(f){group_outros();const T=f;transition_out(T.$$.fragment,1,0,()=>{destroy_component(T,1)}),check_outros()}w?(f=construct_svelte_component(w,v(t)),f.$on("update",S),create_component(f.$$.fragment),transition_in(f.$$.fragment,1),mount_component(f,d,null)):f=null}else if(w){const T={};b[0]&3&&(T.paramsStart=t[37].parameters),b[0]&11&&(T.typeTime={type:t[3][t[3].findIndex(y)].data[t[31].chartvalues[t[34]].field].type,tocheck:{tableID:t[31].tableID,key:t[34]}}),f.$set(T)}},i(g){m||(f&&transition_in(f.$$.fragment,g),m=!0)},o(g){f&&transition_out(f.$$.fragment,g),m=!1},d(g){g&&detach(e),f&&destroy_component(f),h=!1,p()}}}function create_each_block_1$2(t){let e,r,a=t[34]+"",i,o,u,c,d,f,m,h,p,_,y,S;function w(...M){return t[18](t[33],t[34],...M)}let v=ensure_array_like(getFieldNames(t[31])),g=[];for(let M=0;M<v.length;M+=1)g[M]=create_each_block_3$1(get_each_context_3$1(t,v,M));function b(){t[20].call(f,t[34],t[32],t[33])}function T(...M){return t[21](t[33],t[34],...M)}let O=ensure_array_like(t[31].chartvalues[t[34]].processSteps),k=[];for(let M=0;M<O.length;M+=1)k[M]=create_each_block_2$2(get_each_context_2$2(t,O,M));const $=M=>transition_out(k[M],1,1,()=>{k[M]=null});return{c(){e=element("details"),r=element("summary"),i=text(a),o=text(`:
              
              
              `),u=element("span"),u.textContent="+",c=space(),d=element("span"),f=element("select");for(let M=0;M<g.length;M+=1)g[M].c();m=space();for(let M=0;M<k.length;M+=1)k[M].c();h=space(),attr(u,"class","addbutton hoverbutton showContextMenu"),attr(f,"class","selectField"),t[31].chartvalues[t[34]].field===void 0&&add_render_callback(b),e.open=!0,attr(e,"class",p="field "+(t[31].chartvalues[t[34]].processSteps.length>0?"":"no-arrow"))},m(M,R){insert(M,e,R),append(e,r),append(r,i),append(r,o),append(r,u),append(r,c),append(r,d),append(d,f);for(let A=0;A<g.length;A+=1)g[A]&&g[A].m(f,null);select_option(f,t[31].chartvalues[t[34]].field,!0),append(e,m);for(let A=0;A<k.length;A+=1)k[A]&&k[A].m(e,null);append(e,h),_=!0,y||(S=[listen(u,"click",w),listen(f,"change",b),listen(f,"change",T)],y=!0)},p(M,R){if(t=M,(!_||R[0]&3)&&a!==(a=t[34]+"")&&set_data(i,a),R[0]&11){v=ensure_array_like(getFieldNames(t[31]));let A;for(A=0;A<v.length;A+=1){const N=get_each_context_3$1(t,v,A);g[A]?g[A].p(N,R):(g[A]=create_each_block_3$1(N),g[A].c(),g[A].m(f,null))}for(;A<g.length;A+=1)g[A].d(1);g.length=v.length}if(R[0]&3&&select_option(f,t[31].chartvalues[t[34]].field),R[0]&11){O=ensure_array_like(t[31].chartvalues[t[34]].processSteps);let A;for(A=0;A<O.length;A+=1){const N=get_each_context_2$2(t,O,A);k[A]?(k[A].p(N,R),transition_in(k[A],1)):(k[A]=create_each_block_2$2(N),k[A].c(),transition_in(k[A],1),k[A].m(e,h))}for(group_outros(),A=O.length;A<k.length;A+=1)$(A);check_outros()}(!_||R[0]&3&&p!==(p="field "+(t[31].chartvalues[t[34]].processSteps.length>0?"":"no-arrow")))&&attr(e,"class",p)},i(M){if(!_){for(let R=0;R<O.length;R+=1)transition_in(k[R]);_=!0}},o(M){k=k.filter(Boolean);for(let R=0;R<k.length;R+=1)transition_out(k[R]);_=!1},d(M){M&&detach(e),destroy_each(g,M),destroy_each(k,M),y=!1,run_all(S)}}}function create_each_block$5(t){let e,r,a,i,o,u,c,d,f,m=t[3].find(le).displayName+"",h,p,_,y,S,w,v,g,b,T,O,k,$,M,R,A,N,L,V,C,F,z,H,E,D,I,U,Z;function G(oe){t[15](oe,t[31])}let X={};t[31].name!==void 0&&(X.value=t[31].name),a=new InPlaceEdit({props:X}),binding_callbacks.push(()=>bind(a,"value",G));function x(...oe){return t[16](t[33],...oe)}function le(...oe){return t[17](t[31],...oe)}let ie=ensure_array_like(Object.keys(t[31].chartvalues)),q=[];for(let oe=0;oe<ie.length;oe+=1)q[oe]=create_each_block_1$2(get_each_context_1$2(t,ie,oe));const _e=oe=>transition_out(q[oe],1,1,()=>{q[oe]=null});function Q(){t[25].call(S,t[33])}function ce(oe){t[26](oe,t[33])}let me={min:"0",max:"1",step:"0.01",limits:[0,1],label:"Alpha: "};t[1][t[0]].sourceData[t[33]].col.alpha!==void 0&&(me.value=t[1][t[0]].sourceData[t[33]].col.alpha),g=new Slider({props:me}),binding_callbacks.push(()=>bind(g,"value",ce));function ue(oe){t[27](oe,t[33])}let ye={min:"0.5",max:"10",step:"0.5",label:"Size: "};t[1][t[0]].sourceData[t[33]].size!==void 0&&(ye.value=t[1][t[0]].sourceData[t[33]].size),k=new Slider({props:ye}),binding_callbacks.push(()=>bind(k,"value",ue));function se(oe){t[28](oe,t[33])}let ke={min:"0.5",max:"10",step:"0.5",label:"Stroke width: "};t[1][t[0]].sourceData[t[33]].strokeWidth!==void 0&&(ke.value=t[1][t[0]].sourceData[t[33]].strokeWidth),A=new Slider({props:ke}),binding_callbacks.push(()=>bind(A,"value",se));function Y(){t[29].call(C,t[33])}function he(oe){t[30](oe,t[33])}let Se={min:"0",max:"1",step:"0.01",limits:[0,1],label:"Stroke alpha: "};return t[1][t[0]].sourceData[t[33]].strokeCol.alpha!==void 0&&(Se.value=t[1][t[0]].sourceData[t[33]].strokeCol.alpha),H=new Slider({props:Se}),binding_callbacks.push(()=>bind(H,"value",he)),{c(){e=element("details"),r=element("summary"),create_component(a.$$.fragment),o=space(),u=element("div"),u.textContent="",c=space(),d=element("div"),f=text("Table: "),h=text(m),p=space();for(let oe=0;oe<q.length;oe+=1)q[oe].c();_=space(),y=element("div"),S=element("input"),w=space(),v=element("div"),create_component(g.$$.fragment),T=space(),O=element("div"),create_component(k.$$.fragment),M=space(),R=element("div"),create_component(A.$$.fragment),L=space(),V=element("div"),C=element("input"),F=space(),z=element("div"),create_component(H.$$.fragment),D=space(),attr(u,"class","deleteTable hoverbutton"),attr(d,"class","tableLabel"),attr(S,"class","colourPicker"),attr(S,"id",t[33]),attr(S,"type","color"),set_style(S,"background",t[1][t[0]].sourceData[t[33]].col.hex),attr(v,"class","sliderContainer"),attr(y,"class","colour"),attr(O,"class","itemsliderContainer"),attr(R,"class","itemsliderContainer"),attr(C,"class","colourPicker"),attr(C,"id",t[33]),attr(C,"type","color"),set_style(C,"background",t[1][t[0]].sourceData[t[33]].strokeCol.hex),attr(z,"class","sliderContainer"),attr(V,"class","colour"),e.open=!0,attr(e,"class","dataTable")},m(oe,ee){insert(oe,e,ee),append(e,r),mount_component(a,r,null),append(r,o),append(r,u),append(e,c),append(e,d),append(d,f),append(d,h),append(e,p);for(let de=0;de<q.length;de+=1)q[de]&&q[de].m(e,null);append(e,_),append(e,y),append(y,S),set_input_value(S,t[1][t[0]].sourceData[t[33]].col.hex),append(y,w),append(y,v),mount_component(g,v,null),append(e,T),append(e,O),mount_component(k,O,null),append(e,M),append(e,R),mount_component(A,R,null),append(e,L),append(e,V),append(V,C),set_input_value(C,t[1][t[0]].sourceData[t[33]].strokeCol.hex),append(V,F),append(V,z),mount_component(H,z,null),insert(oe,D,ee),I=!0,U||(Z=[listen(u,"click",x),listen(S,"input",Q),listen(C,"input",Y)],U=!0)},p(oe,ee){t=oe;const de={};if(!i&&ee[0]&3&&(i=!0,de.value=t[31].name,add_flush_callback(()=>i=!1)),a.$set(de),(!I||ee[0]&11)&&m!==(m=t[3].find(le).displayName+"")&&set_data(h,m),ee[0]&11){ie=ensure_array_like(Object.keys(t[31].chartvalues));let j;for(j=0;j<ie.length;j+=1){const P=get_each_context_1$2(t,ie,j);q[j]?(q[j].p(P,ee),transition_in(q[j],1)):(q[j]=create_each_block_1$2(P),q[j].c(),transition_in(q[j],1),q[j].m(e,_))}for(group_outros(),j=ie.length;j<q.length;j+=1)_e(j);check_outros()}(!I||ee[0]&3)&&set_style(S,"background",t[1][t[0]].sourceData[t[33]].col.hex),ee[0]&3&&set_input_value(S,t[1][t[0]].sourceData[t[33]].col.hex);const Te={};!b&&ee[0]&3&&(b=!0,Te.value=t[1][t[0]].sourceData[t[33]].col.alpha,add_flush_callback(()=>b=!1)),g.$set(Te);const ge={};!$&&ee[0]&3&&($=!0,ge.value=t[1][t[0]].sourceData[t[33]].size,add_flush_callback(()=>$=!1)),k.$set(ge);const ae={};!N&&ee[0]&3&&(N=!0,ae.value=t[1][t[0]].sourceData[t[33]].strokeWidth,add_flush_callback(()=>N=!1)),A.$set(ae),(!I||ee[0]&3)&&set_style(C,"background",t[1][t[0]].sourceData[t[33]].strokeCol.hex),ee[0]&3&&set_input_value(C,t[1][t[0]].sourceData[t[33]].strokeCol.hex);const be={};!E&&ee[0]&3&&(E=!0,be.value=t[1][t[0]].sourceData[t[33]].strokeCol.alpha,add_flush_callback(()=>E=!1)),H.$set(be)},i(oe){if(!I){transition_in(a.$$.fragment,oe);for(let ee=0;ee<ie.length;ee+=1)transition_in(q[ee]);transition_in(g.$$.fragment,oe),transition_in(k.$$.fragment,oe),transition_in(A.$$.fragment,oe),transition_in(H.$$.fragment,oe),I=!0}},o(oe){transition_out(a.$$.fragment,oe),q=q.filter(Boolean);for(let ee=0;ee<q.length;ee+=1)transition_out(q[ee]);transition_out(g.$$.fragment,oe),transition_out(k.$$.fragment,oe),transition_out(A.$$.fragment,oe),transition_out(H.$$.fragment,oe),I=!1},d(oe){oe&&(detach(e),detach(D)),destroy_component(a),destroy_each(q,oe),destroy_component(g),destroy_component(k),destroy_component(A),destroy_component(H),U=!1,run_all(Z)}}}function create_fragment$a(t){let e,r,a=t[0]>=0&&t[1][t[0]].graph==="raw"&&create_if_block$7(t);return{c(){a&&a.c(),e=empty$1()},m(i,o){a&&a.m(i,o),insert(i,e,o),r=!0},p(i,o){i[0]>=0&&i[1][i[0]].graph==="raw"?a?(a.p(i,o),o[0]&3&&transition_in(a,1)):(a=create_if_block$7(i),a.c(),transition_in(a,1),a.m(e.parentNode,e)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(i){r||(transition_in(a),r=!0)},o(i){transition_out(a),r=!1},d(i){i&&detach(e),a&&a.d(i)}}}function instance$a(t,e,r){let a,i,o,u;component_subscribe(t,activeGraphTab,E=>r(0,a=E)),component_subscribe(t,graphs,E=>r(1,i=E)),component_subscribe(t,graphTabs,E=>r(2,o=E)),component_subscribe(t,data,E=>r(3,u=E));const c={x:"time",y:"values"},d={col:{hex:"#78322e",alpha:.5},size:2,strokeWidth:1,strokeCol:{hex:"#000000",alpha:.9}};function f(E){t.$$.not_equal(i[a].params.width,E)&&(i[a].params.width=E,graphs.set(i))}function m(E){t.$$.not_equal(i[a].params.height,E)&&(i[a].params.height=E,graphs.set(i))}function h(){i[a].params.xAxisLabel=this.value,graphs.set(i)}function p(E){t.$$.not_equal(i[a].params.xDomainMin,E)&&(i[a].params.xDomainMin=E,graphs.set(i))}function _(E){t.$$.not_equal(i[a].params.xDomainMax,E)&&(i[a].params.xDomainMax=E,graphs.set(i))}function y(){i[a].params.yAxisLabel=this.value,graphs.set(i)}function S(E){t.$$.not_equal(i[a].params.yDomainMin,E)&&(i[a].params.yDomainMin=E,graphs.set(i))}function w(E){t.$$.not_equal(i[a].params.yDomainMax,E)&&(i[a].params.yDomainMax=E,graphs.set(i))}const v=E=>{E.preventDefault(),createnewDataForGraph(c,d)};function g(E,D){t.$$.not_equal(D.name,E)&&(D.name=E,graphs.set(i))}const b=(E,D)=>{D.preventDefault(),removeGraphData(E)},T=(E,D)=>D.id===E.tableID,O=(E,D,I)=>{I.preventDefault(),addProcessToGraphData("graph",E,D)},k=(E,D)=>D.id===E.tableID;function $(E,D,I){D[I].chartvalues[E].field=select_value(this),graphs.set(i)}const M=(E,D,I)=>{updateGraphProcess(a,E,D)},R=(E,D,I,U)=>{U.preventDefault(),removeProcess(E,D,I)},A=(E,D)=>D.id===E.tableID,N=(E,D,I,U)=>{updateProcess(E,D,I,U.detail.params)};function L(E){i[a].sourceData[E].col.hex=this.value,graphs.set(i)}function V(E,D){t.$$.not_equal(i[a].sourceData[D].col.alpha,E)&&(i[a].sourceData[D].col.alpha=E,graphs.set(i))}function C(E,D){t.$$.not_equal(i[a].sourceData[D].size,E)&&(i[a].sourceData[D].size=E,graphs.set(i))}function F(E,D){t.$$.not_equal(i[a].sourceData[D].strokeWidth,E)&&(i[a].sourceData[D].strokeWidth=E,graphs.set(i))}function z(E){i[a].sourceData[E].strokeCol.hex=this.value,graphs.set(i)}function H(E,D){t.$$.not_equal(i[a].sourceData[D].strokeCol.alpha,E)&&(i[a].sourceData[D].strokeCol.alpha=E,graphs.set(i))}return[a,i,o,u,c,d,f,m,h,p,_,y,S,w,v,g,b,T,O,k,$,M,R,A,N,L,V,C,F,z,H]}class Raw_controls extends SvelteComponent{constructor(e){super(),init(this,e,instance$a,create_fragment$a,safe_not_equal,{},null,[-1,-1])}}const graphMap={actigram:{graph:Actigram,controls:Actigram_controls,prototypechartvalues:{time:"time",values:"values"},prototypeother:{col:{hex:"#1B1D50",alpha:.5},showOnsets:!0},othertypes:["colour","checkbox"],params:{startTime:DateTime.now().set({hour:0,minute:0,second:0,millisecond:0}).toISO().slice(0,16),periodHrs:24,binSizeHrs:.25,width:800,dayHeight:10,betweenHeight:2,doublePlot:2,scaleAxes:"byPlot",showAxes:!1},chartData:{data:[{time:[],values:[],day:[],scaleLimits:[]}],startOffsets:[],onsets:[]}},periodogram:{graph:Periodogram,controls:Periodogram_controls,prototypechartvalues:{time:"any",values:"any"},prototypeother:{col:{hex:"#78322e",alpha:.5}},othertypes:["colour"],params:{width:600,height:200,minPeriod:4,maxPeriod:30,stepPeriod:.25,binSizeHrs:.25},chartData:{}},raw:{graph:Raw,controls:Raw_controls,prototypechartvalues:{x:"any",y:"any"},prototypeother:{col:{hex:"#78322e",alpha:.5},size:2,strokeWidth:1,strokeCol:{hex:"#000000",alpha:.9}},othertypes:["colour","slider","slider","colour"],params:{width:600,height:200,yDomainMin:0,yDomainMax:200,xDomainMin:0,xDomainMax:680,yAxisLabel:"y-axis",xAxisLabel:"x-axis title here"},chartData:{}}};function getRandomHexColour(){return"#"+Math.floor(Math.random()*16777215).toString(16)}function putChartValues(t,e){const r={};for(let a=0;a<t.length;a++)r[t[a]]={field:e[a],processSteps:[],processedData:[]};return r}function makeNewChart(t){let e={graph:t,id:getID(),zoom:1,sourceData:[{tableID:0,name:"Data 0",chartvalues:putChartValues(Object.keys(graphMap[t].prototypechartvalues),["time","value0"]),...deepCopy(graphMap[t].prototypeother)},{tableID:0,name:"Data 1",chartvalues:putChartValues(Object.keys(graphMap[t].prototypechartvalues),["time","value1"]),...deepCopy(graphMap[t].prototypeother)}],params:{...deepCopy(graphMap[t].params)},chartData:{...deepCopy(graphMap[t].chartData)}};for(let r=0;r<graphMap[t].othertypes.length;r++)if(graphMap[t].othertypes[r]==="colour")for(let a=0;a<e.sourceData.length;a++)e.sourceData[a][Object.keys(graphMap[t].prototypeother)[r]].hex=getRandomHexColour();get_store_value(graphs).push(e),get_store_value(graphTabs).push({name:"Chart "+getID()}),graphTabs.update(r=>[...r]),activeGraphTab.update(()=>get_store_value(graphTabs).length-1)}function getID(){if(get_store_value(graphs).length===0)return 0;let t=[];return get_store_value(graphs).forEach(e=>t.push(e.id)),Math.max(...t)+1}function deepCopy(t){return JSON.parse(JSON.stringify(t))}function create_else_block_1$1(t){let e=t[1][t[0]].graph+"",r;return{c(){r=text(e)},m(a,i){insert(a,r,i)},p(a,i){i&3&&e!==(e=a[1][a[0]].graph+"")&&set_data(r,e)},i:noop,o:noop,d(a){a&&detach(r)}}}function create_if_block_3$3(t){let e,r,a;var i=graphMap[t[1][t[0]].graph].graph;function o(u,c){return{}}return i&&(e=construct_svelte_component(i,o())),{c(){e&&create_component(e.$$.fragment),r=empty$1()},m(u,c){e&&mount_component(e,u,c),insert(u,r,c),a=!0},p(u,c){if(c&3&&i!==(i=graphMap[u[1][u[0]].graph].graph)){if(e){group_outros();const d=e;transition_out(d.$$.fragment,1,0,()=>{destroy_component(d,1)}),check_outros()}i?(e=construct_svelte_component(i,o()),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,r.parentNode,r)):e=null}},i(u){a||(e&&transition_in(e.$$.fragment,u),a=!0)},o(u){e&&transition_out(e.$$.fragment,u),a=!1},d(u){u&&detach(r),e&&destroy_component(e,u)}}}function create_if_block_2$3(t){return{c:noop,m:noop,p:noop,i:noop,o:noop,d:noop}}function create_default_slot_3$2(t){let e,r,a,i,o,u;e=new GraphTabs({});const c=[create_if_block_2$3,create_if_block_3$3,create_else_block_1$1],d=[];function f(m,h){return m[0]<0?0:m[1][m[0]].graph in graphMap?1:2}return i=f(t),o=d[i]=c[i](t),{c(){create_component(e.$$.fragment),r=space(),a=element("div"),o.c(),attr(a,"id","thePlot"),set_style(a,"height","calc(100% - 4em)"),set_style(a,"overflow","auto"),set_style(a,"width","auto")},m(m,h){mount_component(e,m,h),insert(m,r,h),insert(m,a,h),d[i].m(a,null),u=!0},p(m,h){let p=i;i=f(m),i===p?d[i].p(m,h):(group_outros(),transition_out(d[p],1,1,()=>{d[p]=null}),check_outros(),o=d[i],o?o.p(m,h):(o=d[i]=c[i](m),o.c()),transition_in(o,1),o.m(a,null))},i(m){u||(transition_in(e.$$.fragment,m),transition_in(o),u=!0)},o(m){transition_out(e.$$.fragment,m),transition_out(o),u=!1},d(m){m&&(detach(r),detach(a)),destroy_component(e,m),d[i].d()}}}function create_else_block$2(t){let e=JSON.stringify(t[1][t[0]].sourceData)+"",r;return{c(){r=text(e)},m(a,i){insert(a,r,i)},p(a,i){i&3&&e!==(e=JSON.stringify(a[1][a[0]].sourceData)+"")&&set_data(r,e)},i:noop,o:noop,d(a){a&&detach(r)}}}function create_if_block_1$4(t){let e,r,a,i,o,u,c;var d=graphMap[t[1][t[0]].graph].controls;function f(m,h){return{}}return d&&(i=construct_svelte_component(d,f())),u=new ChartMaster({}),{c(){e=element("div"),r=element("div"),r.innerHTML='<h1 style="padding: 6px 6px 0px 6px; font-weight: bold; font-size: 1.2em; text-decoration: underline;">Controls</h1>',a=space(),i&&create_component(i.$$.fragment),o=space(),create_component(u.$$.fragment),set_style(r,"display","flex"),set_style(r,"min-width","200px"),attr(e,"id","chartControlsTree"),set_style(e,"height","100%"),set_style(e,"width","auto"),set_style(e,"overflow","auto")},m(m,h){insert(m,e,h),append(e,r),append(e,a),i&&mount_component(i,e,null),append(e,o),mount_component(u,e,null),c=!0},p(m,h){if(h&3&&d!==(d=graphMap[m[1][m[0]].graph].controls)){if(i){group_outros();const p=i;transition_out(p.$$.fragment,1,0,()=>{destroy_component(p,1)}),check_outros()}d?(i=construct_svelte_component(d,f()),create_component(i.$$.fragment),transition_in(i.$$.fragment,1),mount_component(i,e,o)):i=null}},i(m){c||(i&&transition_in(i.$$.fragment,m),transition_in(u.$$.fragment,m),c=!0)},o(m){i&&transition_out(i.$$.fragment,m),transition_out(u.$$.fragment,m),c=!1},d(m){m&&detach(e),i&&destroy_component(i),destroy_component(u)}}}function create_if_block$6(t){return{c:noop,m:noop,p:noop,i:noop,o:noop,d:noop}}function create_default_slot_2$2(t){let e,r,a,i;const o=[create_if_block$6,create_if_block_1$4,create_else_block$2],u=[];function c(d,f){return d[0]<0?0:d[1][d[0]].graph in graphMap?1:2}return e=c(t),r=u[e]=o[e](t),{c(){r.c(),a=empty$1()},m(d,f){u[e].m(d,f),insert(d,a,f),i=!0},p(d,f){let m=e;e=c(d),e===m?u[e].p(d,f):(group_outros(),transition_out(u[m],1,1,()=>{u[m]=null}),check_outros(),r=u[e],r?r.p(d,f):(r=u[e]=o[e](d),r.c()),transition_in(r,1),r.m(a.parentNode,a))},i(d){i||(transition_in(r),i=!0)},o(d){transition_out(r),i=!1},d(d){d&&detach(a),u[e].d(d)}}}function create_default_slot_1$2(t){let e,r,a,i;return e=new Pane({props:{$$slots:{default:[create_default_slot_3$2]},$$scope:{ctx:t}}}),a=new Pane({props:{size:25,$$slots:{default:[create_default_slot_2$2]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment),r=space(),create_component(a.$$.fragment)},m(o,u){mount_component(e,o,u),insert(o,r,u),mount_component(a,o,u),i=!0},p(o,u){const c={};u&7&&(c.$$scope={dirty:u,ctx:o}),e.$set(c);const d={};u&7&&(d.$$scope={dirty:u,ctx:o}),a.$set(d)},i(o){i||(transition_in(e.$$.fragment,o),transition_in(a.$$.fragment,o),i=!0)},o(o){transition_out(e.$$.fragment,o),transition_out(a.$$.fragment,o),i=!1},d(o){o&&detach(r),destroy_component(e,o),destroy_component(a,o)}}}function create_default_slot$5(t){let e,r;return e=new Splitpanes({props:{theme:"modern-theme",style:"height: 100%;",pushOtherPanes:!1,dblClickSplitter:!1,$$slots:{default:[create_default_slot_1$2]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment)},m(a,i){mount_component(e,a,i),r=!0},p(a,i){const o={};i&7&&(o.$$scope={dirty:i,ctx:a}),e.$set(o)},i(a){r||(transition_in(e.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),r=!1},d(a){destroy_component(e,a)}}}function create_fragment$9(t){let e,r;return e=new Pane({props:{size:80,$$slots:{default:[create_default_slot$5]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment)},m(a,i){mount_component(e,a,i),r=!0},p(a,[i]){const o={};i&7&&(o.$$scope={dirty:i,ctx:a}),e.$set(o)},i(a){r||(transition_in(e.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),r=!1},d(a){destroy_component(e,a)}}}function instance$9(t,e,r){let a,i;return component_subscribe(t,activeGraphTab,o=>r(0,a=o)),component_subscribe(t,graphs,o=>r(1,i=o)),[a,i]}class GraphMaster extends SvelteComponent{constructor(e){super(),init(this,e,instance$9,create_fragment$9,safe_not_equal,{})}}function get_each_context_2$1(t,e,r){const a=t.slice();return a[16]=e[r],a[18]=r,a}function get_each_context_3(t,e,r){const a=t.slice();return a[22]=e[r],a[20]=r,a}function get_each_context$4(t,e,r){const a=t.slice();return a[16]=e[r],a[18]=r,a}function get_each_context_1$1(t,e,r){const a=t.slice();return a[16]=e[r],a[20]=r,a}function get_each_context_4(t,e,r){const a=t.slice();return a[24]=e[r],a[26]=r,a}function get_each_context_5(t,e,r){const a=t.slice();return a[27]=e[r],a[28]=e,a[29]=r,a}function create_else_block_4(t){let e,r,a,i=ensure_array_like(t[5]),o=[];for(let c=0;c<i.length;c+=1)o[c]=create_each_block_5(get_each_context_5(t,i,c));const u=c=>transition_out(o[c],1,1,()=>{o[c]=null});return{c(){e=element("nav"),r=element("ul");for(let c=0;c<o.length;c+=1)o[c].c();attr(r,"class","svelte-nulfcf"),attr(e,"class","svelte-nulfcf")},m(c,d){insert(c,e,d),append(e,r);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(r,null);a=!0},p(c,d){if(d&422){i=ensure_array_like(c[5]);let f;for(f=0;f<i.length;f+=1){const m=get_each_context_5(c,i,f);o[f]?(o[f].p(m,d),transition_in(o[f],1)):(o[f]=create_each_block_5(m),o[f].c(),transition_in(o[f],1),o[f].m(r,null))}for(group_outros(),f=i.length;f<o.length;f+=1)u(f);check_outros()}},i(c){if(!a){for(let d=0;d<i.length;d+=1)transition_in(o[d]);a=!0}},o(c){o=o.filter(Boolean);for(let d=0;d<o.length;d+=1)transition_out(o[d]);a=!1},d(c){c&&detach(e),destroy_each(o,c)}}}function create_if_block_6(t){let e;return{c(){e=element("h3"),e.textContent="Need to add a table"},m(r,a){insert(r,e,a)},p:noop,i:noop,o:noop,d(r){r&&detach(e)}}}function create_each_block_5(t){let e,r,a,i,o,u,c,d,f,m,h;function p(...v){return t[10](t[27],...v)}function _(v){t[9](v,t[27])}let y={};t[1][t[1].findIndex(p)].displayName!==void 0&&(y.value=t[1][t[1].findIndex(p)].displayName),a=new InPlaceEdit({props:y}),binding_callbacks.push(()=>bind(a,"value",_));function S(){return t[11](t[29])}function w(){return t[12](t[29])}return{c(){e=element("li"),r=element("span"),create_component(a.$$.fragment),o=space(),u=element("button"),u.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 svelte-nulfcf"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg>',c=space(),attr(r,"class","tabname svelte-nulfcf"),attr(u,"class","closeButton svelte-nulfcf"),attr(e,"class",d=null_to_empty(t[2]===t[29]?"active":"")+" svelte-nulfcf")},m(v,g){insert(v,e,g),append(e,r),mount_component(a,r,null),append(e,o),append(e,u),append(e,c),f=!0,m||(h=[listen(u,"click",S),listen(e,"click",w)],m=!0)},p(v,g){t=v;const b={};!i&&g&34&&(i=!0,b.value=t[1][t[1].findIndex(p)].displayName,add_flush_callback(()=>i=!1)),a.$set(b),(!f||g&4&&d!==(d=null_to_empty(t[2]===t[29]?"active":"")+" svelte-nulfcf"))&&attr(e,"class",d)},i(v){f||(transition_in(a.$$.fragment,v),f=!0)},o(v){transition_out(a.$$.fragment,v),f=!1},d(v){v&&detach(e),destroy_component(a),m=!1,run_all(h)}}}function create_if_block$5(t){let e,r,a,i,o,u,c,d,f,m=ensure_array_like(t[3].headings),h=[];for(let w=0;w<m.length;w+=1)h[w]=create_each_block_4(get_each_context_4(t,m,w));function p(w,v){return w[4][w[2]]?create_if_block_2$2:create_else_block_1}let _=p(t),y=_(t),S=!t[4][t[2]]&&create_if_block_1$3(t);return{c(){e=element("main"),r=element("table"),a=element("thead"),i=element("tr");for(let w=0;w<h.length;w+=1)h[w].c();o=space(),u=element("tbody"),y.c(),c=space(),S&&S.c(),d=empty$1(),attr(a,"class","svelte-nulfcf"),attr(r,"class","svelte-nulfcf")},m(w,v){insert(w,e,v),append(e,r),append(r,a),append(a,i);for(let g=0;g<h.length;g+=1)h[g]&&h[g].m(i,null);append(r,o),append(r,u),y.m(u,null),insert(w,c,v),S&&S.m(w,v),insert(w,d,v),f=!0},p(w,v){if(v&8){m=ensure_array_like(w[3].headings);let g;for(g=0;g<m.length;g+=1){const b=get_each_context_4(w,m,g);h[g]?h[g].p(b,v):(h[g]=create_each_block_4(b),h[g].c(),h[g].m(i,null))}for(;g<h.length;g+=1)h[g].d(1);h.length=m.length}_===(_=p(w))&&y?y.p(w,v):(y.d(1),y=_(w),y&&(y.c(),y.m(u,null))),w[4][w[2]]?S&&(group_outros(),transition_out(S,1,1,()=>{S=null}),check_outros()):S?(S.p(w,v),v&20&&transition_in(S,1)):(S=create_if_block_1$3(w),S.c(),transition_in(S,1),S.m(d.parentNode,d))},i(w){f||(transition_in(S),f=!0)},o(w){transition_out(S),f=!1},d(w){w&&(detach(e),detach(c),detach(d)),destroy_each(h,w),y.d(),S&&S.d(w)}}}function create_else_block_3(t){let e,r=t[24]+"",a;return{c(){e=element("th"),a=text(r),attr(e,"class","svelte-nulfcf")},m(i,o){insert(i,e,o),append(e,a)},p(i,o){o&8&&r!==(r=i[24]+"")&&set_data(a,r)},d(i){i&&detach(e)}}}function create_if_block_5(t){let e,r,a=t[24]+"",i,o;return{c(){e=element("th"),r=element("i"),i=text(a),o=text("*"),attr(e,"class","svelte-nulfcf")},m(u,c){insert(u,e,c),append(e,r),append(r,i),append(r,o)},p(u,c){c&8&&a!==(a=u[24]+"")&&set_data(i,a)},d(u){u&&detach(e)}}}function create_each_block_4(t){let e;function r(o,u){return o[3].processed[o[26]]?create_if_block_5:create_else_block_3}let a=r(t),i=a(t);return{c(){i.c(),e=empty$1()},m(o,u){i.m(o,u),insert(o,e,u)},p(o,u){a===(a=r(o))&&i?i.p(o,u):(i.d(1),i=a(o),i&&(i.c(),i.m(e.parentNode,e)))},d(o){o&&detach(e),i.d(o)}}}function create_else_block_1(t){let e,r=ensure_array_like({length:minrowstoshow}),a=[];for(let i=0;i<r.length;i+=1)a[i]=create_each_block_2$1(get_each_context_2$1(t,r,i));return{c(){for(let i=0;i<a.length;i+=1)a[i].c();e=empty$1()},m(i,o){for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(i,o);insert(i,e,o)},p(i,o){if(o&9){r=ensure_array_like({length:minrowstoshow});let u;for(u=0;u<r.length;u+=1){const c=get_each_context_2$1(i,r,u);a[u]?a[u].p(c,o):(a[u]=create_each_block_2$1(c),a[u].c(),a[u].m(e.parentNode,e))}for(;u<a.length;u+=1)a[u].d(1);a.length=r.length}},d(i){i&&detach(e),destroy_each(a,i)}}}function create_if_block_2$2(t){let e,r=ensure_array_like(t[0][0]),a=[];for(let i=0;i<r.length;i+=1)a[i]=create_each_block$4(get_each_context$4(t,r,i));return{c(){for(let i=0;i<a.length;i+=1)a[i].c();e=empty$1()},m(i,o){for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(i,o);insert(i,e,o)},p(i,o){if(o&9){r=ensure_array_like(i[0][0]);let u;for(u=0;u<r.length;u+=1){const c=get_each_context$4(i,r,u);a[u]?a[u].p(c,o):(a[u]=create_each_block$4(c),a[u].c(),a[u].m(e.parentNode,e))}for(;u<a.length;u+=1)a[u].d(1);a.length=r.length}},d(i){i&&detach(e),destroy_each(a,i)}}}function create_else_block_2(t){let e,r=t[0][t[20]][t[18]]+"",a;return{c(){e=element("td"),a=text(r),attr(e,"class","svelte-nulfcf")},m(i,o){insert(i,e,o),append(e,a)},p(i,o){o&1&&r!==(r=i[0][i[20]][i[18]]+"")&&set_data(a,r)},d(i){i&&detach(e)}}}function create_if_block_4$2(t){let e,r,a=t[0][t[20]][t[18]]+"",i;return{c(){e=element("td"),r=element("i"),i=text(a),attr(e,"class","svelte-nulfcf")},m(o,u){insert(o,e,u),append(e,r),append(r,i)},p(o,u){u&1&&a!==(a=o[0][o[20]][o[18]]+"")&&set_data(i,a)},d(o){o&&detach(e)}}}function create_each_block_3(t){let e;function r(o,u){return o[3].processed[o[20]]?create_if_block_4$2:create_else_block_2}let a=r(t),i=a(t);return{c(){i.c(),e=empty$1()},m(o,u){i.m(o,u),insert(o,e,u)},p(o,u){a===(a=r(o))&&i?i.p(o,u):(i.d(1),i=a(o),i&&(i.c(),i.m(e.parentNode,e)))},d(o){o&&detach(e),i.d(o)}}}function create_each_block_2$1(t){let e,r,a=ensure_array_like(t[0]),i=[];for(let o=0;o<a.length;o+=1)i[o]=create_each_block_3(get_each_context_3(t,a,o));return{c(){e=element("tr");for(let o=0;o<i.length;o+=1)i[o].c();r=space()},m(o,u){insert(o,e,u);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(e,null);append(e,r)},p(o,u){if(u&9){a=ensure_array_like(o[0]);let c;for(c=0;c<a.length;c+=1){const d=get_each_context_3(o,a,c);i[c]?i[c].p(d,u):(i[c]=create_each_block_3(d),i[c].c(),i[c].m(e,r))}for(;c<i.length;c+=1)i[c].d(1);i.length=a.length}},d(o){o&&detach(e),destroy_each(i,o)}}}function create_else_block$1(t){let e,r=t[0][t[20]][t[18]]+"",a;return{c(){e=element("td"),a=text(r),attr(e,"class","svelte-nulfcf")},m(i,o){insert(i,e,o),append(e,a)},p(i,o){o&1&&r!==(r=i[0][i[20]][i[18]]+"")&&set_data(a,r)},d(i){i&&detach(e)}}}function create_if_block_3$2(t){let e,r,a=t[0][t[20]][t[18]]+"",i;return{c(){e=element("td"),r=element("i"),i=text(a),attr(e,"class","svelte-nulfcf")},m(o,u){insert(o,e,u),append(e,r),append(r,i)},p(o,u){u&1&&a!==(a=o[0][o[20]][o[18]]+"")&&set_data(i,a)},d(o){o&&detach(e)}}}function create_each_block_1$1(t){let e;function r(o,u){return o[3].processed[o[20]]?create_if_block_3$2:create_else_block$1}let a=r(t),i=a(t);return{c(){i.c(),e=empty$1()},m(o,u){i.m(o,u),insert(o,e,u)},p(o,u){a===(a=r(o))&&i?i.p(o,u):(i.d(1),i=a(o),i&&(i.c(),i.m(e.parentNode,e)))},d(o){o&&detach(e),i.d(o)}}}function create_each_block$4(t){let e,r,a=ensure_array_like(t[0]),i=[];for(let o=0;o<a.length;o+=1)i[o]=create_each_block_1$1(get_each_context_1$1(t,a,o));return{c(){e=element("tr");for(let o=0;o<i.length;o+=1)i[o].c();r=space()},m(o,u){insert(o,e,u);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(e,null);append(e,r)},p(o,u){if(u&9){a=ensure_array_like(o[0]);let c;for(c=0;c<a.length;c+=1){const d=get_each_context_1$1(o,a,c);i[c]?i[c].p(d,u):(i[c]=create_each_block_1$1(d),i[c].c(),i[c].m(e,r))}for(;c<i.length;c+=1)i[c].d(1);i.length=a.length}},d(o){o&&detach(e),destroy_each(i,o)}}}function create_if_block_1$3(t){let e,r;return e=new Tooltip({props:{tipcontent:"Show more data",$$slots:{default:[create_default_slot$4]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment)},m(a,i){mount_component(e,a,i),r=!0},p(a,i){const o={};i&1073741844&&(o.$$scope={dirty:i,ctx:a}),e.$set(o)},i(a){r||(transition_in(e.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),r=!1},d(a){destroy_component(e,a)}}}function create_default_slot$4(t){let e,r,a,i;return{c(){e=element("button"),r=text("..."),attr(e,"class","showmorebutton svelte-nulfcf"),set_style(e,"display",t[4][t[2]]?"none":"block")},m(o,u){insert(o,e,u),append(e,r),a||(i=listen(e,"click",t[13]),a=!0)},p(o,u){u&20&&set_style(e,"display",o[4][o[2]]?"none":"block")},d(o){o&&detach(e),a=!1,i()}}}function create_fragment$8(t){let e,r,a,i,o,u;const c=[create_if_block_6,create_else_block_4],d=[];function f(h,p){return h[2]<0?0:1}r=f(t),a=d[r]=c[r](t);let m=t[2]>=0&&t[0].length>0&&create_if_block$5(t);return{c(){e=element("div"),a.c(),i=space(),m&&m.c(),o=empty$1(),attr(e,"id","tableTabs"),set_style(e,"margin","0 1em"),attr(e,"class","svelte-nulfcf")},m(h,p){insert(h,e,p),d[r].m(e,null),insert(h,i,p),m&&m.m(h,p),insert(h,o,p),u=!0},p(h,[p]){let _=r;r=f(h),r===_?d[r].p(h,p):(group_outros(),transition_out(d[_],1,1,()=>{d[_]=null}),check_outros(),a=d[r],a?a.p(h,p):(a=d[r]=c[r](h),a.c()),transition_in(a,1),a.m(e,null)),h[2]>=0&&h[0].length>0?m?(m.p(h,p),p&5&&transition_in(m,1)):(m=create_if_block$5(h),m.c(),transition_in(m,1),m.m(o.parentNode,o)):m&&(group_outros(),transition_out(m,1,1,()=>{m=null}),check_outros())},i(h){u||(transition_in(a),transition_in(m),u=!0)},o(h){transition_out(a),transition_out(m),u=!1},d(h){h&&(detach(e),detach(i),detach(o)),d[r].d(),m&&m.d(h)}}}let minrowstoshow=100;function makeTableData(t,e){let r=[];for(const a in t)r.push(t[a].data),t[a].type==="time"&&r.push(t[a].timeData),t[a].processSteps.length>0&&r.push(t[a].processedData);return r}function instance$8(t,e,r){let a,i,o,u,c;component_subscribe(t,data,b=>r(1,i=b)),component_subscribe(t,activeTableTab,b=>r(2,o=b)),component_subscribe(t,showalldata,b=>r(4,u=b)),component_subscribe(t,dataIDsforTables,b=>r(5,c=b));function d(){set_store_value(showalldata,u[o]=!0,u)}function f(b){set_store_value(activeTableTab,o=b,o)}function m(b){c.splice(b,1),dataIDsforTables.set(c),u.splice(b,1),showalldata.set(u),set_store_value(activeTableTab,o=c.length>0?0:-1,o)}function h(b){return c.length>0?i.find(T=>T.id===c[b]):{data:-1,displayName:-1}}function p(b,T){if(c.length>0){var O=[],k=[];for(const $ in b)O.push(b[$].name),k.push(!1),b[$].processSteps.length>0&&(O.push(b[$].name),k.push(!0)),b[$].type==="time"&&(O.push(b[$].name+" (hrs)"),k.push(!0));return{headings:O,processed:k}}else return{headings:[""],processed:[!1]}}let _;const y=(b,T)=>T.id===b;function S(b,T){t.$$.not_equal(i[i.findIndex(O=>O.id===T)].displayName,b)&&(i[i.findIndex(O=>O.id===T)].displayName=b,data.set(i))}const w=b=>m(b),v=b=>f(b),g=b=>d();return t.$$.update=()=>{t.$$.dirty&7&&(r(0,_=makeTableData(h(o).data)),_.length>0&&_[0].length<=minrowstoshow&&(console.log(_[0].length),console.log(_[0].length<=minrowstoshow),set_store_value(showalldata,u[o]=!0,u))),t.$$.dirty&6&&r(3,a=p(h(o).data))},[_,i,o,a,u,c,d,f,m,S,y,w,v,g]}class TableTabs extends SvelteComponent{constructor(e){super(),init(this,e,instance$8,create_fragment$8,safe_not_equal,{})}}function get_each_context$3(t,e,r){const a=t.slice();return a[10]=e[r],a[11]=e,a[12]=r,a}function create_default_slot_3$1(t){let e,r,a;return r=new TableTabs({}),{c(){e=element("div"),create_component(r.$$.fragment),attr(e,"id","TableMain"),set_style(e,"height","100%"),set_style(e,"width","auto"),set_style(e,"overflow","auto")},m(i,o){insert(i,e,o),mount_component(r,e,null),a=!0},p:noop,i(i){a||(transition_in(r.$$.fragment,i),a=!0)},o(i){transition_out(r.$$.fragment,i),a=!1},d(i){i&&detach(e),destroy_component(r)}}}function create_if_block$4(t){let e,r;return e=new Pane({props:{size:30,$$slots:{default:[create_default_slot_2$1]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment)},m(a,i){mount_component(e,a,i),r=!0},p(a,i){const o={};i&8193&&(o.$$scope={dirty:i,ctx:a}),e.$set(o)},i(a){r||(transition_in(e.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),r=!1},d(a){destroy_component(e,a)}}}function create_if_block_1$2(t){let e,r=t[0].data[t[10]].name+"",a,i,o,u,c,d,f,m,h=t[0].data[t[10]].recordPeriod.minDiff+"",p,_,y=t[0].data[t[10]].recordPeriod.constant?"equal":"unequal",S,w,v,g;function b(){t[7].call(o,t[10])}function T(...k){return t[8](t[10],...k)}function O(...k){return t[9](t[10],...k)}return{c(){e=element("div"),a=text(r),i=space(),o=element("input"),u=space(),c=element("button"),c.textContent="",d=space(),f=element("div"),m=text("Sampling freq: "),p=text(h),_=text(`
                  hrs,
                  `),S=text(y),w=space(),attr(o,"type","text"),attr(c,"class","guessFmtBtn svelte-1wt1n0s"),set_style(e,"display","flex"),set_style(e,"margin","5px"),set_style(f,"display","flex"),set_style(f,"margin","5px"),set_style(f,"margin-left","1em")},m(k,$){insert(k,e,$),append(e,a),append(e,i),append(e,o),set_input_value(o,t[0].data[t[10]].timeFormat),append(e,u),append(e,c),insert(k,d,$),insert(k,f,$),append(f,m),append(f,p),append(f,_),append(f,S),append(f,w),v||(g=[listen(o,"input",b),listen(o,"change",T),listen(c,"click",O)],v=!0)},p(k,$){t=k,$&1&&r!==(r=t[0].data[t[10]].name+"")&&set_data(a,r),$&1&&o.value!==t[0].data[t[10]].timeFormat&&set_input_value(o,t[0].data[t[10]].timeFormat),$&1&&h!==(h=t[0].data[t[10]].recordPeriod.minDiff+"")&&set_data(p,h),$&1&&y!==(y=t[0].data[t[10]].recordPeriod.constant?"equal":"unequal")&&set_data(S,y)},d(k){k&&(detach(e),detach(d),detach(f)),v=!1,run_all(g)}}}function create_each_block$3(t){let e,r=t[0].data[t[10]].type==="time"&&create_if_block_1$2(t);return{c(){r&&r.c(),e=empty$1()},m(a,i){r&&r.m(a,i),insert(a,e,i)},p(a,i){a[0].data[a[10]].type==="time"?r?r.p(a,i):(r=create_if_block_1$2(a),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},d(a){a&&detach(e),r&&r.d(a)}}}function create_default_slot_2$1(t){let e,r,a,i,o=t[0].displayName+"",u,c,d,f,m=t[0].importedFrom+"",h,p,_,y,S=t[0].data[Object.keys(t[0].data)[0]].data.length+"",w,v,g=ensure_array_like(Object.keys(t[0].data)),b=[];for(let T=0;T<g.length;T+=1)b[T]=create_each_block$3(get_each_context$3(t,g,T));return{c(){e=element("div"),r=element("div"),a=element("div"),i=text("Data: "),u=text(o),c=space(),d=element("div"),f=text("Imported: "),h=text(m),p=space(),_=element("div"),y=text("Data length: "),w=text(S),v=space();for(let T=0;T<b.length;T+=1)b[T].c();attr(r,"class","tableData"),attr(e,"id","TableMeta"),set_style(e,"height","100%"),set_style(e,"width","auto"),set_style(e,"overflow","auto")},m(T,O){insert(T,e,O),append(e,r),append(r,a),append(a,i),append(a,u),append(r,c),append(r,d),append(d,f),append(d,h),append(r,p),append(r,_),append(_,y),append(_,w),append(r,v);for(let k=0;k<b.length;k+=1)b[k]&&b[k].m(r,null)},p(T,O){if(O&1&&o!==(o=T[0].displayName+"")&&set_data(u,o),O&1&&m!==(m=T[0].importedFrom+"")&&set_data(h,m),O&1&&S!==(S=T[0].data[Object.keys(T[0].data)[0]].data.length+"")&&set_data(w,S),O&13){g=ensure_array_like(Object.keys(T[0].data));let k;for(k=0;k<g.length;k+=1){const $=get_each_context$3(T,g,k);b[k]?b[k].p($,O):(b[k]=create_each_block$3($),b[k].c(),b[k].m(r,null))}for(;k<b.length;k+=1)b[k].d(1);b.length=g.length}},d(T){T&&detach(e),destroy_each(b,T)}}}function create_default_slot_1$1(t){let e,r,a,i;e=new Pane({props:{$$slots:{default:[create_default_slot_3$1]},$$scope:{ctx:t}}});let o=t[1]&&create_if_block$4(t);return{c(){create_component(e.$$.fragment),r=space(),o&&o.c(),a=empty$1()},m(u,c){mount_component(e,u,c),insert(u,r,c),o&&o.m(u,c),insert(u,a,c),i=!0},p(u,c){const d={};c&8192&&(d.$$scope={dirty:c,ctx:u}),e.$set(d),u[1]?o?(o.p(u,c),c&2&&transition_in(o,1)):(o=create_if_block$4(u),o.c(),transition_in(o,1),o.m(a.parentNode,a)):o&&(group_outros(),transition_out(o,1,1,()=>{o=null}),check_outros())},i(u){i||(transition_in(e.$$.fragment,u),transition_in(o),i=!0)},o(u){transition_out(e.$$.fragment,u),transition_out(o),i=!1},d(u){u&&(detach(r),detach(a)),destroy_component(e,u),o&&o.d(u)}}}function create_default_slot$3(t){let e,r;return e=new Splitpanes({props:{theme:"modern-theme",style:"height: 100%",pushOtherPanes:!1,dblClickSplitter:!1,$$slots:{default:[create_default_slot_1$1]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment)},m(a,i){mount_component(e,a,i),r=!0},p(a,i){const o={};i&8195&&(o.$$scope={dirty:i,ctx:a}),e.$set(o)},i(a){r||(transition_in(e.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),r=!1},d(a){destroy_component(e,a)}}}function create_fragment$7(t){let e,r;return e=new Pane({props:{$$slots:{default:[create_default_slot$3]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment)},m(a,i){mount_component(e,a,i),r=!0},p(a,[i]){const o={};i&8195&&(o.$$scope={dirty:i,ctx:a}),e.$set(o)},i(a){r||(transition_in(e.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),r=!1},d(a){destroy_component(e,a)}}}function instance$7(t,e,r){let a,i,o,u,c;component_subscribe(t,activeTableTab,_=>r(4,o=_)),component_subscribe(t,dataIDsforTables,_=>r(5,u=_)),component_subscribe(t,data,_=>r(6,c=_));function d(_){console.log(i),set_store_value(data,c[c.findIndex(y=>y.id===u[o])].data[_].timeData=forceFormat(i.data[_].data,i.data[_].timeFormat),c),set_store_value(data,c[c.findIndex(y=>y.id===u[o])].data[_].recordPeriod=getPeriod(i.data[_].data,i.data[_].timeFormat),c),updateDataProcess(u[o],_)}function f(_){set_store_value(data,c[c.findIndex(y=>y.id===u[o])].data[_].timeFormat=getGuessedFormat(i.data[_].data),c),d(_)}function m(_){i.data[_].timeFormat=this.value,r(0,i),r(6,c),r(5,u),r(4,o)}const h=(_,y)=>{d(_)},p=(_,y)=>{f(_)};return t.$$.update=()=>{t.$$.dirty&16&&r(1,a=o>=0),t.$$.dirty&112&&r(0,i=c[c.findIndex(_=>_.id===u[o])])},[i,a,d,f,o,u,c,m,h,p]}class TableMaster extends SvelteComponent{constructor(e){super(),init(this,e,instance$7,create_fragment$7,safe_not_equal,{})}}function create_fragment$6(t){let e,r,a;return{c(){e=svg_element("svg"),r=svg_element("circle"),attr(r,"role","presentation"),attr(r,"cx","16"),attr(r,"cy","16"),attr(r,"r",t[4]),attr(r,"stroke",t[2]),attr(r,"fill","none"),attr(r,"stroke-width",t[3]),attr(r,"stroke-dasharray",a=t[5]+",100"),attr(r,"stroke-linecap","round"),attr(e,"height",t[0]),attr(e,"width",t[0]),set_style(e,"animation-duration",t[1]+"ms"),attr(e,"class","svelte-spinner svelte-ynopmf"),attr(e,"viewBox","0 0 32 32")},m(i,o){insert(i,e,o),append(e,r)},p(i,[o]){o&16&&attr(r,"r",i[4]),o&4&&attr(r,"stroke",i[2]),o&8&&attr(r,"stroke-width",i[3]),o&32&&a!==(a=i[5]+",100")&&attr(r,"stroke-dasharray",a),o&1&&attr(e,"height",i[0]),o&1&&attr(e,"width",i[0]),o&2&&set_style(e,"animation-duration",i[1]+"ms")},i:noop,o:noop,d(i){i&&detach(e)}}}function instance$6(t,e,r){let{size:a=25}=e,{speed:i=750}=e,{color:o="rgba(0,0,0,0.4)"}=e,{thickness:u=5}=e,{gap:c=30}=e,{radius:d=15}=e,f;return t.$$set=m=>{"size"in m&&r(0,a=m.size),"speed"in m&&r(1,i=m.speed),"color"in m&&r(2,o=m.color),"thickness"in m&&r(3,u=m.thickness),"gap"in m&&r(6,c=m.gap),"radius"in m&&r(4,d=m.radius)},t.$$.update=()=>{t.$$.dirty&80&&r(5,f=2*Math.PI*d*(100-c)/100)},[a,i,o,u,d,f,c]}class Spinner extends SvelteComponent{constructor(e){super(),init(this,e,instance$6,create_fragment$6,safe_not_equal,{size:0,speed:1,color:2,thickness:3,gap:6,radius:4})}}function get_each_context$2(t,e,r){const a=t.slice();return a[4]=e[r],a}function create_each_block$2(t){let e,r=t[4].display+"";return{c(){e=element("p")},m(a,i){insert(a,e,i),e.innerHTML=r},p(a,i){i&2&&r!==(r=a[4].display+"")&&(e.innerHTML=r)},d(a){a&&detach(e)}}}function create_fragment$5(t){let e,r,a,i,o,u;i=new Spinner({props:{size:"1em",color:"var(--primary-color)"}});let c=ensure_array_like(t[1]),d=[];for(let f=0;f<c.length;f+=1)d[f]=create_each_block$2(get_each_context$2(t,c,f));return{c(){e=element("div"),r=element("h3"),r.textContent="statusbar",a=space(),create_component(i.$$.fragment),o=space();for(let f=0;f<d.length;f+=1)d[f].c();set_style(e,"height","100%"),set_style(e,"overflow","auto")},m(f,m){insert(f,e,m),append(e,r),append(e,a),mount_component(i,e,null),append(e,o);for(let h=0;h<d.length;h+=1)d[h]&&d[h].m(e,null);t[2](e),u=!0},p(f,[m]){if(m&2){c=ensure_array_like(f[1]);let h;for(h=0;h<c.length;h+=1){const p=get_each_context$2(f,c,h);d[h]?d[h].p(p,m):(d[h]=create_each_block$2(p),d[h].c(),d[h].m(e,null))}for(;h<d.length;h+=1)d[h].d(1);d.length=c.length}},i(f){u||(transition_in(i.$$.fragment,f),u=!0)},o(f){transition_out(i.$$.fragment,f),u=!1},d(f){f&&detach(e),destroy_component(i),destroy_each(d,f),t[2](null)}}}function instance$5(t,e,r){let a;component_subscribe(t,statusData,c=>r(1,a=c));let i;afterUpdate(()=>{statusData&&o(i)});const o=async c=>{c.scroll({top:c.scrollHeight,behavior:"smooth"})};function u(c){binding_callbacks[c?"unshift":"push"](()=>{i=c,r(0,i)})}return[i,a,u]}class StatusMaster extends SvelteComponent{constructor(e){super(),init(this,e,instance$5,create_fragment$5,safe_not_equal,{})}}function saveStoreData(){const t=get_store_value(data),e=get_store_value(graphTabs),r=get_store_value(activeGraphTab),a=get_store_value(graphs),i=get_store_value(dataIDsforTables),o=get_store_value(showalldata),u=get_store_value(activeTableTab),c=get_store_value(selectedTheme),d=get_store_value(statusData),f={_data:t,_graphTabs:e,_activeGraphTab:r,_graphs:a,_dataIDsforTables:i,_showalldata:o,_activeTableTab:u,_selectedTheme:c,_statusData:d},m="testStore.ancir",h=JSON.stringify(f),p=new Blob([h],{type:"application/json"}),_=URL.createObjectURL(p),y=document.createElement("a");y.href=_,y.download=m,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(_)}function loadStoreData(){const t=document.createElement("input");t.type="file",t.id="fileInput",t.style.display="none",document.body.appendChild(t),t.addEventListener("change",handleFileSelect),t.click()}function loadTheData(jsonString){console.log("TODO: load script not working ");const loadedObject=JSON.parse(jsonString);for(const key in loadedObject)if(loadedObject.hasOwnProperty(key)){const modifiedKey=key.substring(1);loadedObject[key],eval(`${modifiedKey}.update((current) => {return loadedObject[key]});`)}}function handleFileSelect(t){const e=t.target.files[0];if(e){const r=new FileReader;r.onload=function(a){const i=a.target.result,o=loadTheData(i);console.log(o)},r.readAsText(e)}}function get_each_context$1(t,e,r){const a=t.slice();return a[19]=e[r],a[20]=e,a[21]=r,a}function get_each_context_1(t,e,r){const a=t.slice();return a[22]=e[r],a[23]=e,a[24]=r,a}function get_each_context_2(t,e,r){const a=t.slice();return a[25]=e[r],a}function create_if_block$3(t){let e,r=ensure_array_like(t[19].items),a=[];for(let i=0;i<r.length;i+=1)a[i]=create_each_block_1(get_each_context_1(t,r,i));return{c(){e=element("ul");for(let i=0;i<a.length;i+=1)a[i].c();attr(e,"class","secondmenu dontclose svelte-mptgu6")},m(i,o){insert(i,e,o);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(e,null)},p(i,o){if(o&11){r=ensure_array_like(i[19].items);let u;for(u=0;u<r.length;u+=1){const c=get_each_context_1(i,r,u);a[u]?a[u].p(c,o):(a[u]=create_each_block_1(c),a[u].c(),a[u].m(e,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=r.length}},d(i){i&&detach(e),destroy_each(a,i)}}}function create_else_block(t){let e,r,a=t[22].displayText+"",i,o;function u(...c){return t[13](t[22],...c)}return{c(){e=element("li"),r=element("button"),attr(r,"class","svelte-mptgu6"),attr(e,"class","svelte-mptgu6")},m(c,d){insert(c,e,d),append(e,r),r.innerHTML=a,i||(o=listen(r,"click",u),i=!0)},p(c,d){t=c,d&2&&a!==(a=t[22].displayText+"")&&(r.innerHTML=a)},d(c){c&&detach(e),i=!1,o()}}}function create_if_block_3$1(t){let e,r,a,i=t[22].displayText+"",o,u,c,d,f;function m(){return t[8](t[22],t[23],t[24])}function h(){return t[9](t[22],t[23],t[24])}let p=(t[22].visibleState||t[0])&&create_if_block_4$1(t);return{c(){e=element("li"),r=element("button"),a=new HtmlTag(!1),o=space(),u=element("span"),u.textContent="",c=space(),p&&p.c(),a.a=o,set_style(u,"float","right"),attr(r,"class","svelte-mptgu6"),attr(e,"class","svelte-mptgu6")},m(_,y){insert(_,e,y),append(e,r),a.m(i,r),append(r,o),append(r,u),append(e,c),p&&p.m(e,null),d||(f=[listen(r,"mouseover",m),listen(r,"mouseleave",h)],d=!0)},p(_,y){t=_,y&2&&i!==(i=t[22].displayText+"")&&a.p(i),t[22].visibleState||t[0]?p?p.p(t,y):(p=create_if_block_4$1(t),p.c(),p.m(e,null)):p&&(p.d(1),p=null)},d(_){_&&detach(e),p&&p.d(),d=!1,run_all(f)}}}function create_if_block_2$1(t){let e;return{c(){e=element("hr"),attr(e,"class","svelte-mptgu6")},m(r,a){insert(r,e,a)},p:noop,d(r){r&&detach(e)}}}function create_if_block_1$1(t){return{c:noop,m:noop,p:noop,d:noop}}function create_if_block_4$1(t){let e,r,a,i=ensure_array_like(t[22].items[0]),o=[];for(let u=0;u<i.length;u+=1)o[u]=create_each_block_2(get_each_context_2(t,i,u));return{c(){e=element("ul");for(let u=0;u<o.length;u+=1)o[u].c();attr(e,"class","thirdmenu dontclose svelte-mptgu6")},m(u,c){insert(u,e,c);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(e,null);r||(a=[listen(e,"mouseover",t[11]),listen(e,"mouseleave",t[12])],r=!0)},p(u,c){if(c&10){i=ensure_array_like(u[22].items[0]);let d;for(d=0;d<i.length;d+=1){const f=get_each_context_2(u,i,d);o[d]?o[d].p(f,c):(o[d]=create_each_block_2(f),o[d].c(),o[d].m(e,null))}for(;d<o.length;d+=1)o[d].d(1);o.length=i.length}},d(u){u&&detach(e),destroy_each(o,u),r=!1,run_all(a)}}}function create_each_block_2(t){let e,r,a=t[25].displayText+"",i,o,u,c;function d(...f){return t[10](t[25],...f)}return{c(){e=element("li"),r=element("button"),i=text(a),o=space(),attr(r,"class","svelte-mptgu6"),attr(e,"class","svelte-mptgu6")},m(f,m){insert(f,e,m),append(e,r),append(r,i),append(e,o),u||(c=listen(r,"click",d),u=!0)},p(f,m){t=f,m&2&&a!==(a=t[25].displayText+"")&&set_data(i,a)},d(f){f&&detach(e),u=!1,c()}}}function create_each_block_1(t){let e;function r(o,u){return o[22]===null?create_if_block_1$1:o[22].displayText==="--hr"?create_if_block_2$1:o[22].items?create_if_block_3$1:create_else_block}let a=r(t),i=a(t);return{c(){i.c(),e=space()},m(o,u){i.m(o,u),insert(o,e,u)},p(o,u){a===(a=r(o))&&i?i.p(o,u):(i.d(1),i=a(o),i&&(i.c(),i.m(e.parentNode,e)))},d(o){o&&detach(e),i.d(o)}}}function create_each_block$1(t){let e,r,a=t[19].displayText+"",i,o,u,c;function d(){return t[6](t[19],t[20],t[21])}function f(){return t[7](t[19])}let m=t[19].visibleState&&create_if_block$3(t);return{c(){e=element("li"),r=element("button"),i=space(),m&&m.c(),o=space(),attr(r,"class","dontclose svelte-mptgu6"),attr(e,"class","svelte-mptgu6")},m(h,p){insert(h,e,p),append(e,r),r.innerHTML=a,append(e,i),m&&m.m(e,null),append(e,o),u||(c=[listen(r,"click",d),listen(r,"mouseover",f)],u=!0)},p(h,p){t=h,p&2&&a!==(a=t[19].displayText+"")&&(r.innerHTML=a),t[19].visibleState?m?m.p(t,p):(m=create_if_block$3(t),m.c(),m.m(e,o)):m&&(m.d(1),m=null)},d(h){h&&detach(e),m&&m.d(),u=!1,run_all(c)}}}function create_fragment$4(t){let e,r,a,i,o,u,c,d=ensure_array_like(t[1]),f=[];for(let m=0;m<d.length;m+=1)f[m]=create_each_block$1(get_each_context$1(t,d,m));return{c(){e=element("nav"),r=element("div"),a=element("ul");for(let m=0;m<f.length;m+=1)f[m].c();i=space(),o=element("input"),attr(a,"class","topmenu svelte-mptgu6"),attr(o,"type","checkbox"),attr(o,"id","switchtheme"),attr(o,"class","svelte-mptgu6"),attr(r,"class","applicationmenu svelte-mptgu6"),attr(e,"class","svelte-mptgu6")},m(m,h){insert(m,e,h),append(e,r),append(r,a);for(let p=0;p<f.length;p+=1)f[p]&&f[p].m(a,null);append(r,i),append(r,o),u||(c=listen(o,"change",t[14]),u=!0)},p(m,[h]){if(h&31){d=ensure_array_like(m[1]);let p;for(p=0;p<d.length;p+=1){const _=get_each_context$1(m,d,p);f[p]?f[p].p(_,h):(f[p]=create_each_block$1(_),f[p].c(),f[p].m(a,null))}for(;p<f.length;p+=1)f[p].d(1);f.length=d.length}},i:noop,o:noop,d(m){m&&detach(e),destroy_each(f,m),u=!1,c()}}}function switchTheme(t){t.target.checked?document.documentElement.setAttribute("data-theme","dark"):document.documentElement.setAttribute("data-theme","light")}function createMenuItem(t,e,r=!1){return r?null:{displayText:t,onClick:e,visibleState:!1}}function instance$4(t,e,r){let a,i,o,u;component_subscribe(t,menuModalType,k=>r(15,i=k)),component_subscribe(t,graphTabs,k=>r(16,o=k)),component_subscribe(t,activeGraphTab,k=>r(5,u=k));let c=!1;function d(){return Object.keys(graphMap).map($=>createMenuItem($,()=>makeNewChart($.toString())))}function f(k){var $;return[{displayText:"Data",items:[createMenuItem("Import Data",()=>set_store_value(menuModalType,i="import",i)),createMenuItem("Simulate Data",()=>{set_store_value(menuModalType,i="generateSim",i)}),{displayText:"--hr"},createMenuItem("Save session",saveStoreData),createMenuItem("Load session",loadStoreData)]},{displayText:"Chart",items:[{displayText:"Insert Chart",items:[d()]},createMenuItem("Export <i>"+(($=o[k])==null?void 0:$.name)+"</i>",()=>exportSVG(),k<0)]},{displayText:"Help",items:[createMenuItem("About",()=>{set_store_value(menuModalType,i="about",i)})]}]}function m(k){a.forEach($=>{$!==k&&$.visibleState&&($.visibleState=!1)}),r(1,a),r(5,u)}function h(){a.forEach(k=>{k.visibleState=!1}),r(1,a),r(5,u)}function p(k){a.forEach($=>{$!==k&&$.visibleState?$.visibleState=!1:$===k&&($.visibleState=!0)}),r(1,a),r(5,u)}onMount(()=>{makeNewChart("actigram");const k=$=>{try{$.srcElement&&$.srcElement.className.includes("dontclose")||h()}catch{h()}};return document.addEventListener("click",k),()=>{document.removeEventListener("click",k)}});const _=(k,$,M)=>{r(1,$[M].visibleState=!k.visibleState,a),m(k)},y=k=>{a.some($=>$.visibleState)&&p(k)},S=(k,$,M)=>r(1,$[M].visibleState=!0,a),w=(k,$,M)=>setTimeout(()=>{r(1,$[M].visibleState=!1,a)},50),v=(k,$)=>{k.onClick(),h()},g=()=>{r(0,c=!0)},b=()=>{setTimeout(()=>r(0,c=!1),50)},T=(k,$)=>{k.onClick(),h()},O=k=>switchTheme(k);return t.$$.update=()=>{t.$$.dirty&32&&r(1,a=f(u))},[c,a,m,h,p,u,_,y,S,w,v,g,b,T,O]}class MenuMaster extends SvelteComponent{constructor(e){super(),init(this,e,instance$4,create_fragment$4,safe_not_equal,{})}}const{window:window_1}=globals;function get_each_context(t,e,r){const a=t.slice();return a[9]=e[r],a[11]=r,a}function create_if_block$2(t){let e,r,a,i,o,u=ensure_array_like(t[2].labels),c=[];for(let d=0;d<u.length;d+=1)c[d]=create_each_block(get_each_context(t,u,d));return{c(){e=element("nav"),r=element("div"),a=element("ul");for(let d=0;d<c.length;d+=1)c[d].c();attr(a,"class","svelte-ouzgb9"),attr(r,"class","navbar svelte-ouzgb9"),attr(r,"id","navbar"),set_style(e,"position","absolute"),set_style(e,"top",t[0].y+"px"),set_style(e,"left",t[0].x+"px"),set_style(e,"z-index","999")},m(d,f){insert(d,e,f),append(e,r),append(r,a);for(let m=0;m<c.length;m+=1)c[m]&&c[m].m(a,null);i||(o=action_destroyer(t[4].call(null,e)),i=!0)},p(d,f){if(f&6){u=ensure_array_like(d[2].labels);let m;for(m=0;m<u.length;m+=1){const h=get_each_context(d,u,m);c[m]?c[m].p(h,f):(c[m]=create_each_block(h),c[m].c(),c[m].m(a,null))}for(;m<c.length;m+=1)c[m].d(1);c.length=u.length}f&1&&set_style(e,"top",d[0].y+"px"),f&1&&set_style(e,"left",d[0].x+"px")},d(d){d&&detach(e),destroy_each(c,d),i=!1,o()}}}function create_each_block(t){let e,r,a=t[9]+"",i,o,u,c;function d(...f){return t[6](t[11],...f)}return{c(){e=element("li"),r=element("button"),i=text(a),o=space(),attr(r,"class","svelte-ouzgb9"),attr(e,"class","svelte-ouzgb9")},m(f,m){insert(f,e,m),append(e,r),append(r,i),append(e,o),u||(c=listen(r,"click",d),u=!0)},p(f,m){t=f,m&4&&a!==(a=t[9]+"")&&set_data(i,a)},d(f){f&&detach(e),u=!1,c()}}}function create_fragment$3(t){let e,r,a,i=t[1]&&create_if_block$2(t);return{c(){i&&i.c(),e=empty$1()},m(o,u){i&&i.m(o,u),insert(o,e,u),r||(a=listen(window_1,"click",t[3]),r=!0)},p(o,[u]){o[1]?i?i.p(o,u):(i=create_if_block$2(o),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},i:noop,o:noop,d(o){o&&detach(e),i&&i.d(o),r=!1,a()}}}function instance$3(t,e,r){let a;component_subscribe(t,contextMenu,p=>r(2,a=p));let i={x:0,y:0},o={h:100,w:76},u={h:0,w:0},c;function d(p){p.stopPropagation(),u={w:window.innerWidth,h:window.innerHeight},r(0,i={x:p.clientX,y:p.clientY}),u.h-i.y<o.h&&r(0,i.y=i.y-o.h,i),u.w-i.x<o.w&&r(0,i.x=i.x-o.w,i),r(1,c=!0)}function f(p){try{p.srcElement.className.includes("showContextMenu")?d(p):r(1,c=!1)}catch{r(1,c=!1)}}function m(p){let _=p.offsetHeight,y=p.offsetWidth;o={h:_,w:y}}return[i,c,a,f,m,d,(p,_)=>{a.funcs[p](),r(1,c=!1)}]}class ContextMenu extends SvelteComponent{constructor(e){super(),init(this,e,instance$3,create_fragment$3,safe_not_equal,{rightClickContextMenu:5})}get rightClickContextMenu(){return this.$$.ctx[5]}}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function getAugmentedNamespace(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function a(){return this instanceof a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(a){var i=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(r,a,i.get?i:{enumerable:!0,get:function(){return t[a]}})}),r}var papaparse={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){(function(r,a){t.exports=a()})(commonjsGlobal,function r(){var a=function(){return typeof self<"u"?self:typeof window<"u"?window:typeof a<"u"?a:{}}();function i(){var C=a.URL||a.webkitURL||null,F=r.toString();return f.BLOB_URL||(f.BLOB_URL=C.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",F,")();"],{type:"text/javascript"})))}var o=!a.document&&!!a.postMessage,u=a.IS_PAPA_WORKER||!1,c={},d=0,f={};if(f.parse=h,f.unparse=p,f.RECORD_SEP="",f.UNIT_SEP="",f.BYTE_ORDER_MARK="\uFEFF",f.BAD_DELIMITERS=["\r",`
`,'"',f.BYTE_ORDER_MARK],f.WORKERS_SUPPORTED=!o&&!!a.Worker,f.NODE_STREAM_INPUT=1,f.LocalChunkSize=1024*1024*10,f.RemoteChunkSize=1024*1024*5,f.DefaultDelimiter=",",f.Parser=O,f.ParserHandle=b,f.NetworkStreamer=y,f.FileStreamer=S,f.StringStreamer=w,f.ReadableStreamStreamer=v,typeof PAPA_BROWSER_CONTEXT>"u"&&(f.DuplexStreamStreamer=g),a.jQuery){var m=a.jQuery;m.fn.parse=function(C){var F=C.config||{},z=[];return this.each(function(I){var U=m(this).prop("tagName").toUpperCase()==="INPUT"&&m(this).attr("type").toLowerCase()==="file"&&a.FileReader;if(!U||!this.files||this.files.length===0)return!0;for(var Z=0;Z<this.files.length;Z++)z.push({file:this.files[Z],inputElem:this,instanceConfig:m.extend({},F)})}),H(),this;function H(){if(z.length===0){V(C.complete)&&C.complete();return}var I=z[0];if(V(C.before)){var U=C.before(I.file,I.inputElem);if(typeof U=="object")if(U.action==="abort"){E("AbortError",I.file,I.inputElem,U.reason);return}else if(U.action==="skip"){D();return}else typeof U.config=="object"&&(I.instanceConfig=m.extend(I.instanceConfig,U.config));else if(U==="skip"){D();return}}var Z=I.instanceConfig.complete;I.instanceConfig.complete=function(G){V(Z)&&Z(G,I.file,I.inputElem),D()},f.parse(I.file,I.instanceConfig)}function E(I,U,Z,G){V(C.error)&&C.error({name:I},U,Z,G)}function D(){z.splice(0,1),H()}}}u&&(a.onmessage=A);function h(C,F){F=F||{};var z=F.dynamicTyping||!1;if(V(z)&&(F.dynamicTypingFunction=z,z={}),F.dynamicTyping=z,F.transform=V(F.transform)?F.transform:!1,F.worker&&f.WORKERS_SUPPORTED){var H=k();H.userStep=F.step,H.userChunk=F.chunk,H.userComplete=F.complete,H.userError=F.error,F.step=V(F.step),F.chunk=V(F.chunk),F.complete=V(F.complete),F.error=V(F.error),delete F.worker,H.postMessage({input:C,config:F,workerId:H.id});return}var E=null;if(C===f.NODE_STREAM_INPUT&&typeof PAPA_BROWSER_CONTEXT>"u")return E=new g(F),E.getStream();return typeof C=="string"?(C=D(C),F.download?E=new y(F):E=new w(F)):C.readable===!0&&V(C.read)&&V(C.on)?E=new v(F):(a.File&&C instanceof File||C instanceof Object)&&(E=new S(F)),E.stream(C);function D(I){return I.charCodeAt(0)===65279?I.slice(1):I}}function p(C,F){var z=!1,H=!0,E=",",D=`\r
`,I='"',U=I+I,Z=!1,G=null,X=!1;le();var x=new RegExp(T(I),"g");if(typeof C=="string"&&(C=JSON.parse(C)),Array.isArray(C)){if(!C.length||Array.isArray(C[0]))return ie(null,C,Z);if(typeof C[0]=="object")return ie(G||Object.keys(C[0]),C,Z)}else if(typeof C=="object")return typeof C.data=="string"&&(C.data=JSON.parse(C.data)),Array.isArray(C.data)&&(C.fields||(C.fields=C.meta&&C.meta.fields||G),C.fields||(C.fields=Array.isArray(C.data[0])?C.fields:typeof C.data[0]=="object"?Object.keys(C.data[0]):[]),!Array.isArray(C.data[0])&&typeof C.data[0]!="object"&&(C.data=[C.data])),ie(C.fields||[],C.data||[],Z);throw new Error("Unable to serialize unrecognized input");function le(){if(typeof F=="object"){if(typeof F.delimiter=="string"&&!f.BAD_DELIMITERS.filter(function(Q){return F.delimiter.indexOf(Q)!==-1}).length&&(E=F.delimiter),(typeof F.quotes=="boolean"||typeof F.quotes=="function"||Array.isArray(F.quotes))&&(z=F.quotes),(typeof F.skipEmptyLines=="boolean"||typeof F.skipEmptyLines=="string")&&(Z=F.skipEmptyLines),typeof F.newline=="string"&&(D=F.newline),typeof F.quoteChar=="string"&&(I=F.quoteChar),typeof F.header=="boolean"&&(H=F.header),Array.isArray(F.columns)){if(F.columns.length===0)throw new Error("Option columns is empty");G=F.columns}F.escapeChar!==void 0&&(U=F.escapeChar+I),(typeof F.escapeFormulae=="boolean"||F.escapeFormulae instanceof RegExp)&&(X=F.escapeFormulae instanceof RegExp?F.escapeFormulae:/^[=+\-@\t\r].*$/)}}function ie(Q,ce,me){var ue="";typeof Q=="string"&&(Q=JSON.parse(Q)),typeof ce=="string"&&(ce=JSON.parse(ce));var ye=Array.isArray(Q)&&Q.length>0,se=!Array.isArray(ce[0]);if(ye&&H){for(var ke=0;ke<Q.length;ke++)ke>0&&(ue+=E),ue+=q(Q[ke],ke);ce.length>0&&(ue+=D)}for(var Y=0;Y<ce.length;Y++){var he=ye?Q.length:ce[Y].length,Se=!1,oe=ye?Object.keys(ce[Y]).length===0:ce[Y].length===0;if(me&&!ye&&(Se=me==="greedy"?ce[Y].join("").trim()==="":ce[Y].length===1&&ce[Y][0].length===0),me==="greedy"&&ye){for(var ee=[],de=0;de<he;de++){var Te=se?Q[de]:de;ee.push(ce[Y][Te])}Se=ee.join("").trim()===""}if(!Se){for(var ge=0;ge<he;ge++){ge>0&&!oe&&(ue+=E);var ae=ye&&se?Q[ge]:ge;ue+=q(ce[Y][ae],ge)}Y<ce.length-1&&(!me||he>0&&!oe)&&(ue+=D)}}return ue}function q(Q,ce){if(typeof Q>"u"||Q===null)return"";if(Q.constructor===Date)return JSON.stringify(Q).slice(1,25);var me=!1;X&&typeof Q=="string"&&X.test(Q)&&(Q="'"+Q,me=!0);var ue=Q.toString().replace(x,U);return me=me||z===!0||typeof z=="function"&&z(Q,ce)||Array.isArray(z)&&z[ce]||_e(ue,f.BAD_DELIMITERS)||ue.indexOf(E)>-1||ue.charAt(0)===" "||ue.charAt(ue.length-1)===" ",me?I+ue+I:ue}function _e(Q,ce){for(var me=0;me<ce.length;me++)if(Q.indexOf(ce[me])>-1)return!0;return!1}}function _(C){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},F.call(this,C),this.parseChunk=function(z,H){if(this.isFirstChunk&&V(this._config.beforeFirstChunk)){var E=this._config.beforeFirstChunk(z);E!==void 0&&(z=E)}this.isFirstChunk=!1,this._halted=!1;var D=this._partialLine+z;this._partialLine="";var I=this._handle.parse(D,this._baseIndex,!this._finished);if(this._handle.paused()||this._handle.aborted()){this._halted=!0;return}var U=I.meta.cursor;this._finished||(this._partialLine=D.substring(U-this._baseIndex),this._baseIndex=U),I&&I.data&&(this._rowCount+=I.data.length);var Z=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(u)a.postMessage({results:I,workerId:f.WORKER_ID,finished:Z});else if(V(this._config.chunk)&&!H){if(this._config.chunk(I,this._handle),this._handle.paused()||this._handle.aborted()){this._halted=!0;return}I=void 0,this._completeResults=void 0}return!this._config.step&&!this._config.chunk&&(this._completeResults.data=this._completeResults.data.concat(I.data),this._completeResults.errors=this._completeResults.errors.concat(I.errors),this._completeResults.meta=I.meta),!this._completed&&Z&&V(this._config.complete)&&(!I||!I.meta.aborted)&&(this._config.complete(this._completeResults,this._input),this._completed=!0),!Z&&(!I||!I.meta.paused)&&this._nextChunk(),I},this._sendError=function(z){V(this._config.error)?this._config.error(z):u&&this._config.error&&a.postMessage({workerId:f.WORKER_ID,error:z,finished:!1})};function F(z){var H=N(z);H.chunkSize=parseInt(H.chunkSize),!z.step&&!z.chunk&&(H.chunkSize=null),this._handle=new b(H),this._handle.streamer=this,this._config=H}}function y(C){C=C||{},C.chunkSize||(C.chunkSize=f.RemoteChunkSize),_.call(this,C);var F;o?this._nextChunk=function(){this._readChunk(),this._chunkLoaded()}:this._nextChunk=function(){this._readChunk()},this.stream=function(H){this._input=H,this._nextChunk()},this._readChunk=function(){if(this._finished){this._chunkLoaded();return}if(F=new XMLHttpRequest,this._config.withCredentials&&(F.withCredentials=this._config.withCredentials),o||(F.onload=L(this._chunkLoaded,this),F.onerror=L(this._chunkError,this)),F.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var H=this._config.downloadRequestHeaders;for(var E in H)F.setRequestHeader(E,H[E])}if(this._config.chunkSize){var D=this._start+this._config.chunkSize-1;F.setRequestHeader("Range","bytes="+this._start+"-"+D)}try{F.send(this._config.downloadRequestBody)}catch(I){this._chunkError(I.message)}o&&F.status===0&&this._chunkError()},this._chunkLoaded=function(){if(F.readyState===4){if(F.status<200||F.status>=400){this._chunkError();return}this._start+=this._config.chunkSize?this._config.chunkSize:F.responseText.length,this._finished=!this._config.chunkSize||this._start>=z(F),this.parseChunk(F.responseText)}},this._chunkError=function(H){var E=F.statusText||H;this._sendError(new Error(E))};function z(H){var E=H.getResponseHeader("Content-Range");return E===null?-1:parseInt(E.substring(E.lastIndexOf("/")+1))}}y.prototype=Object.create(_.prototype),y.prototype.constructor=y;function S(C){C=C||{},C.chunkSize||(C.chunkSize=f.LocalChunkSize),_.call(this,C);var F,z,H=typeof FileReader<"u";this.stream=function(E){this._input=E,z=E.slice||E.webkitSlice||E.mozSlice,H?(F=new FileReader,F.onload=L(this._chunkLoaded,this),F.onerror=L(this._chunkError,this)):F=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){!this._finished&&(!this._config.preview||this._rowCount<this._config.preview)&&this._readChunk()},this._readChunk=function(){var E=this._input;if(this._config.chunkSize){var D=Math.min(this._start+this._config.chunkSize,this._input.size);E=z.call(E,this._start,D)}var I=F.readAsText(E,this._config.encoding);H||this._chunkLoaded({target:{result:I}})},this._chunkLoaded=function(E){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(E.target.result)},this._chunkError=function(){this._sendError(F.error)}}S.prototype=Object.create(_.prototype),S.prototype.constructor=S;function w(C){C=C||{},_.call(this,C);var F;this.stream=function(z){return F=z,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var z=this._config.chunkSize,H;return z?(H=F.substring(0,z),F=F.substring(z)):(H=F,F=""),this._finished=!F,this.parseChunk(H)}}}w.prototype=Object.create(w.prototype),w.prototype.constructor=w;function v(C){C=C||{},_.call(this,C);var F=[],z=!0,H=!1;this.pause=function(){_.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){_.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(E){this._input=E,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){H&&F.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),F.length?this.parseChunk(F.shift()):z=!0},this._streamData=L(function(E){try{F.push(typeof E=="string"?E:E.toString(this._config.encoding)),z&&(z=!1,this._checkIsFinished(),this.parseChunk(F.shift()))}catch(D){this._streamError(D)}},this),this._streamError=L(function(E){this._streamCleanUp(),this._sendError(E)},this),this._streamEnd=L(function(){this._streamCleanUp(),H=!0,this._streamData("")},this),this._streamCleanUp=L(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}v.prototype=Object.create(_.prototype),v.prototype.constructor=v;function g(C){var F=require$$0.Duplex,z=N(C),H=!0,E=!1,D=[],I=null;this._onCsvData=function(U){var Z=U.data;!I.push(Z)&&!this._handle.paused()&&this._handle.pause()},this._onCsvComplete=function(){I.push(null)},z.step=L(this._onCsvData,this),z.complete=L(this._onCsvComplete,this),_.call(this,z),this._nextChunk=function(){E&&D.length===1&&(this._finished=!0),D.length?D.shift()():H=!0},this._addToParseQueue=function(U,Z){D.push(L(function(){if(this.parseChunk(typeof U=="string"?U:U.toString(z.encoding)),V(Z))return Z()},this)),H&&(H=!1,this._nextChunk())},this._onRead=function(){this._handle.paused()&&this._handle.resume()},this._onWrite=function(U,Z,G){this._addToParseQueue(U,G)},this._onWriteComplete=function(){E=!0,this._addToParseQueue("")},this.getStream=function(){return I},I=new F({readableObjectMode:!0,decodeStrings:!1,read:L(this._onRead,this),write:L(this._onWrite,this)}),I.once("finish",L(this._onWriteComplete,this))}typeof PAPA_BROWSER_CONTEXT>"u"&&(g.prototype=Object.create(_.prototype),g.prototype.constructor=g);function b(C){var F=Math.pow(2,53),z=-F,H=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,E=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,D=this,I=0,U=0,Z,G,X=!1,x=!1,le,ie=[],q={data:[],errors:[],meta:{}};if(V(C.step)){var _e=C.step;C.step=function(ee){if(q=ee,ue())me();else{if(me(),q.data.length===0)return;I+=ee.data.length,C.preview&&I>C.preview?G.abort():(q.data=q.data[0],_e(q,D))}}}this.parse=function(ee,de,Te){var ge=C.quoteChar||'"';if(C.newline||(C.newline=Se(ee,ge)),le=!1,C.delimiter)V(C.delimiter)&&(C.delimiter=C.delimiter(ee),q.meta.delimiter=C.delimiter);else{var ae=he(ee,C.newline,C.skipEmptyLines,C.comments,C.delimitersToGuess);ae.successful?C.delimiter=ae.bestDelimiter:(le=!0,C.delimiter=f.DefaultDelimiter),q.meta.delimiter=C.delimiter}var be=N(C);return C.preview&&C.header&&be.preview++,Z=ee,G=new O(be),q=G.parse(Z,de,Te),me(),X?{meta:{paused:!0}}:q||{meta:{paused:!1}}},this.paused=function(){return X},this.pause=function(){X=!0,G.abort(),Z=V(C.chunk)?"":Z.substring(G.getCharIndex())},this.resume=function(){D.streamer._halted?(X=!1,D.streamer.parseChunk(Z,!0)):setTimeout(D.resume,3)},this.aborted=function(){return x},this.abort=function(){x=!0,G.abort(),q.meta.aborted=!0,V(C.complete)&&C.complete(q),Z=""};function Q(ee){return C.skipEmptyLines==="greedy"?ee.join("").trim()==="":ee.length===1&&ee[0].length===0}function ce(ee){if(H.test(ee)){var de=parseFloat(ee);if(de>z&&de<F)return!0}return!1}function me(){return q&&le&&(oe("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+f.DefaultDelimiter+"'"),le=!1),C.skipEmptyLines&&(q.data=q.data.filter(function(ee){return!Q(ee)})),ue()&&ye(),Y()}function ue(){return C.header&&ie.length===0}function ye(){if(!q)return;function ee(Te,ge){V(C.transformHeader)&&(Te=C.transformHeader(Te,ge)),ie.push(Te)}if(Array.isArray(q.data[0])){for(var de=0;ue()&&de<q.data.length;de++)q.data[de].forEach(ee);q.data.splice(0,1)}else q.data.forEach(ee)}function se(ee){return C.dynamicTypingFunction&&C.dynamicTyping[ee]===void 0&&(C.dynamicTyping[ee]=C.dynamicTypingFunction(ee)),(C.dynamicTyping[ee]||C.dynamicTyping)===!0}function ke(ee,de){return se(ee)?de==="true"||de==="TRUE"?!0:de==="false"||de==="FALSE"?!1:ce(de)?parseFloat(de):E.test(de)?new Date(de):de===""?null:de:de}function Y(){if(!q||!C.header&&!C.dynamicTyping&&!C.transform)return q;function ee(Te,ge){var ae=C.header?{}:[],be;for(be=0;be<Te.length;be++){var j=be,P=Te[be];C.header&&(j=be>=ie.length?"__parsed_extra":ie[be]),C.transform&&(P=C.transform(P,j)),P=ke(j,P),j==="__parsed_extra"?(ae[j]=ae[j]||[],ae[j].push(P)):ae[j]=P}return C.header&&(be>ie.length?oe("FieldMismatch","TooManyFields","Too many fields: expected "+ie.length+" fields but parsed "+be,U+ge):be<ie.length&&oe("FieldMismatch","TooFewFields","Too few fields: expected "+ie.length+" fields but parsed "+be,U+ge)),ae}var de=1;return!q.data.length||Array.isArray(q.data[0])?(q.data=q.data.map(ee),de=q.data.length):q.data=ee(q.data,0),C.header&&q.meta&&(q.meta.fields=ie),U+=de,q}function he(ee,de,Te,ge,ae){var be,j,P,B;ae=ae||[",","	","|",";",f.RECORD_SEP,f.UNIT_SEP];for(var ne=0;ne<ae.length;ne++){var J=ae[ne],fe=0,W=0,K=0;P=void 0;for(var te=new O({comments:ge,delimiter:J,newline:de,preview:10}).parse(ee),pe=0;pe<te.data.length;pe++){if(Te&&Q(te.data[pe])){K++;continue}var ve=te.data[pe].length;if(W+=ve,typeof P>"u"){P=ve;continue}else ve>0&&(fe+=Math.abs(ve-P),P=ve)}te.data.length>0&&(W/=te.data.length-K),(typeof j>"u"||fe<=j)&&(typeof B>"u"||W>B)&&W>1.99&&(j=fe,be=J,B=W)}return C.delimiter=be,{successful:!!be,bestDelimiter:be}}function Se(ee,de){ee=ee.substring(0,1024*1024);var Te=new RegExp(T(de)+"([^]*?)"+T(de),"gm");ee=ee.replace(Te,"");var ge=ee.split("\r"),ae=ee.split(`
`),be=ae.length>1&&ae[0].length<ge[0].length;if(ge.length===1||be)return`
`;for(var j=0,P=0;P<ge.length;P++)ge[P][0]===`
`&&j++;return j>=ge.length/2?`\r
`:"\r"}function oe(ee,de,Te,ge){var ae={type:ee,code:de,message:Te};ge!==void 0&&(ae.row=ge),q.errors.push(ae)}}function T(C){return C.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function O(C){C=C||{};var F=C.delimiter,z=C.newline,H=C.comments,E=C.step,D=C.preview,I=C.fastMode,U;C.quoteChar===void 0||C.quoteChar===null?U='"':U=C.quoteChar;var Z=U;if(C.escapeChar!==void 0&&(Z=C.escapeChar),(typeof F!="string"||f.BAD_DELIMITERS.indexOf(F)>-1)&&(F=","),H===F)throw new Error("Comment character same as delimiter");H===!0?H="#":(typeof H!="string"||f.BAD_DELIMITERS.indexOf(H)>-1)&&(H=!1),z!==`
`&&z!=="\r"&&z!==`\r
`&&(z=`
`);var G=0,X=!1;this.parse=function(x,le,ie){if(typeof x!="string")throw new Error("Input must be a string");var q=x.length,_e=F.length,Q=z.length,ce=H.length,me=V(E);G=0;var ue=[],ye=[],se=[],ke=0;if(!x)return we();if(C.header&&!le){var Y=x.split(z)[0],he=Y.split(F),Se="_",oe=[],ee={},de=!1;for(var Te in he){var ge=he[Te];V(C.transformHeader)&&(ge=C.transformHeader(ge,Te));var ae=ge,be=ee[ge]||0;for(be>0&&(de=!0,ae=ge+Se+be),ee[ge]=be+1;oe.includes(ae);)ae=ae+Se+be;oe.push(ae)}if(de){var j=x.split(z);j[0]=oe.join(F),x=j.join(z)}}if(I||I!==!1&&x.indexOf(U)===-1){for(var P=x.split(z),B=0;B<P.length;B++){if(se=P[B],G+=se.length,B!==P.length-1)G+=z.length;else if(ie)return we();if(!(H&&se.substring(0,ce)===H)){if(me){if(ue=[],$e(se.split(F)),Ee(),X)return we()}else $e(se.split(F));if(D&&B>=D)return ue=ue.slice(0,D),we(!0)}}return we()}for(var ne=x.indexOf(F,G),J=x.indexOf(z,G),fe=new RegExp(T(Z)+T(U),"g"),W=x.indexOf(U,G);;){if(x[G]===U){for(W=G,G++;;){if(W=x.indexOf(U,W+1),W===-1)return ie||ye.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ue.length,index:G}),De();if(W===q-1){var K=x.substring(G,W).replace(fe,U);return De(K)}if(U===Z&&x[W+1]===Z){W++;continue}if(!(U!==Z&&W!==0&&x[W-1]===Z)){ne!==-1&&ne<W+1&&(ne=x.indexOf(F,W+1)),J!==-1&&J<W+1&&(J=x.indexOf(z,W+1));var te=J===-1?ne:Math.min(ne,J),pe=Me(te);if(x.substr(W+1+pe,_e)===F){se.push(x.substring(G,W).replace(fe,U)),G=W+1+pe+_e,x[W+1+pe+_e]!==U&&(W=x.indexOf(U,G)),ne=x.indexOf(F,G),J=x.indexOf(z,G);break}var ve=Me(J);if(x.substring(W+1+ve,W+1+ve+Q)===z){if(se.push(x.substring(G,W).replace(fe,U)),Oe(W+1+ve+Q),ne=x.indexOf(F,G),W=x.indexOf(U,G),me&&(Ee(),X))return we();if(D&&ue.length>=D)return we(!0);break}ye.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ue.length,index:G}),W++}}continue}if(H&&se.length===0&&x.substring(G,G+ce)===H){if(J===-1)return we();G=J+Q,J=x.indexOf(z,G),ne=x.indexOf(F,G);continue}if(ne!==-1&&(ne<J||J===-1)){se.push(x.substring(G,ne)),G=ne+_e,ne=x.indexOf(F,G);continue}if(J!==-1){if(se.push(x.substring(G,J)),Oe(J+Q),me&&(Ee(),X))return we();if(D&&ue.length>=D)return we(!0);continue}break}return De();function $e(Ae){ue.push(Ae),ke=G}function Me(Ae){var Ie=0;if(Ae!==-1){var Fe=x.substring(W+1,Ae);Fe&&Fe.trim()===""&&(Ie=Fe.length)}return Ie}function De(Ae){return ie||(typeof Ae>"u"&&(Ae=x.substring(G)),se.push(Ae),G=q,$e(se),me&&Ee()),we()}function Oe(Ae){G=Ae,$e(se),se=[],J=x.indexOf(z,G)}function we(Ae){return{data:ue,errors:ye,meta:{delimiter:F,linebreak:z,aborted:X,truncated:!!Ae,cursor:ke+(le||0)}}}function Ee(){E(we()),ue=[],ye=[]}},this.abort=function(){X=!0},this.getCharIndex=function(){return G}}function k(){if(!f.WORKERS_SUPPORTED)return!1;var C=i(),F=new a.Worker(C);return F.onmessage=$,F.id=d++,c[F.id]=F,F}function $(C){var F=C.data,z=c[F.workerId],H=!1;if(F.error)z.userError(F.error,F.file);else if(F.results&&F.results.data){var E=function(){H=!0,M(F.workerId,{data:[],errors:[],meta:{aborted:!0}})},D={abort:E,pause:R,resume:R};if(V(z.userStep)){for(var I=0;I<F.results.data.length&&(z.userStep({data:F.results.data[I],errors:F.results.errors,meta:F.results.meta},D),!H);I++);delete F.results}else V(z.userChunk)&&(z.userChunk(F.results,D,F.file),delete F.results)}F.finished&&!H&&M(F.workerId,F.results)}function M(C,F){var z=c[C];V(z.userComplete)&&z.userComplete(F),z.terminate(),delete c[C]}function R(){throw new Error("Not implemented.")}function A(C){var F=C.data;if(typeof f.WORKER_ID>"u"&&F&&(f.WORKER_ID=F.workerId),typeof F.input=="string")a.postMessage({workerId:f.WORKER_ID,results:f.parse(F.input,F.config),finished:!0});else if(a.File&&F.input instanceof File||F.input instanceof Object){var z=f.parse(F.input,F.config);z&&a.postMessage({workerId:f.WORKER_ID,results:z,finished:!0})}}function N(C){if(typeof C!="object"||C===null)return C;var F=Array.isArray(C)?[]:{};for(var z in C)F[z]=N(C[z]);return F}function L(C,F){return function(){C.apply(F,arguments)}}function V(C){return typeof C=="function"}return f})})(papaparse);var papaparseExports=papaparse.exports;const Papa=getDefaultExportFromCjs(papaparseExports);function create_if_block$1(t){let e,r;return e=new Dialog({props:{title:"IMPORT",$$slots:{default:[create_default_slot$2]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment)},m(a,i){mount_component(e,a,i),r=!0},p(a,i){const o={};i[0]&119|i[1]&1&&(o.$$scope={dirty:i,ctx:a}),e.$set(o)},i(a){r||(transition_in(e.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),r=!1},d(a){destroy_component(e,a)}}}function create_if_block_4(t){let e,r,a,i,o,u,c;return{c(){e=element("button"),e.textContent="Choose file",r=space(),a=element("input"),i=space(),o=element("input"),attr(a,"type","number"),attr(o,"type","checkbox"),attr(o,"label","headers")},m(d,f){insert(d,e,f),insert(d,r,f),insert(d,a,f),set_input_value(a,t[1]),insert(d,i,f),insert(d,o,f),o.checked=t[2],u||(c=[listen(e,"click",t[7]),listen(a,"input",t[12]),listen(o,"change",t[13])],u=!0)},p(d,f){f[0]&2&&to_number(a.value)!==d[1]&&set_input_value(a,d[1]),f[0]&4&&(o.checked=d[2])},d(d){d&&(detach(e),detach(r),detach(a),detach(i),detach(o)),u=!1,run_all(c)}}}function create_if_block_3(t){let e,r=JSON.stringify(t[5])+"",a;return{c(){e=element("div"),a=text(r),attr(e,"class","error")},m(i,o){insert(i,e,o),append(e,a)},p(i,o){o[0]&32&&r!==(r=JSON.stringify(i[5])+"")&&set_data(a,r)},d(i){i&&detach(e)}}}function create_if_block_2(t){let e,r=t[0][0].name+"",a,i,o,u,c,d,f,m,h,p,_,y,S,w=t[10](t[4])+"",v,g,b,T,O,k;return{c(){e=element("p"),a=text(r),i=space(),o=element("button"),o.textContent="Change file",u=space(),c=element("input"),d=space(),f=element("input"),m=space(),h=element("p"),h.textContent="Preview of the data:",p=space(),_=element("hr"),y=space(),S=element("p"),v=space(),g=element("hr"),b=space(),T=element("button"),T.textContent="Import",attr(c,"type","checkbox"),attr(c,"label","headers"),attr(f,"type","number")},m($,M){insert($,e,M),append(e,a),insert($,i,M),insert($,o,M),insert($,u,M),insert($,c,M),c.checked=t[2],insert($,d,M),insert($,f,M),set_input_value(f,t[1]),insert($,m,M),insert($,h,M),insert($,p,M),insert($,_,M),insert($,y,M),insert($,S,M),S.innerHTML=w,insert($,v,M),insert($,g,M),insert($,b,M),insert($,T,M),O||(k=[listen(o,"click",t[7]),listen(c,"change",t[18]),listen(c,"change",t[19]),listen(f,"input",t[20]),listen(f,"input",t[21]),listen(T,"click",t[9])],O=!0)},p($,M){M[0]&1&&r!==(r=$[0][0].name+"")&&set_data(a,r),M[0]&4&&(c.checked=$[2]),M[0]&2&&to_number(f.value)!==$[1]&&set_input_value(f,$[1]),M[0]&16&&w!==(w=$[10]($[4])+"")&&(S.innerHTML=w)},d($){$&&(detach(e),detach(i),detach(o),detach(u),detach(c),detach(d),detach(f),detach(m),detach(h),detach(p),detach(_),detach(y),detach(S),detach(v),detach(g),detach(b),detach(T)),O=!1,run_all(k)}}}function create_if_block_1(t){let e,r=t[0][0].name+"",a,i,o,u,c,d,f,m,h,p,_,y,S,w,v;return{c(){e=element("p"),a=text(r),i=space(),o=element("button"),o.textContent="Change file",u=space(),c=element("input"),d=space(),f=element("input"),m=space(),h=element("hr"),p=space(),_=element("p"),_.textContent="There was an error reading the file.",y=space(),S=element("hr"),attr(c,"type","checkbox"),attr(c,"label","headers"),attr(f,"type","number")},m(g,b){insert(g,e,b),append(e,a),insert(g,i,b),insert(g,o,b),insert(g,u,b),insert(g,c,b),c.checked=t[2],insert(g,d,b),insert(g,f,b),set_input_value(f,t[1]),insert(g,m,b),insert(g,h,b),insert(g,p,b),insert(g,_,b),insert(g,y,b),insert(g,S,b),w||(v=[listen(o,"click",t[7]),listen(c,"change",t[14]),listen(c,"change",t[15]),listen(f,"input",t[16]),listen(f,"input",t[17])],w=!0)},p(g,b){b[0]&1&&r!==(r=g[0][0].name+"")&&set_data(a,r),b[0]&4&&(c.checked=g[2]),b[0]&2&&to_number(f.value)!==g[1]&&set_input_value(f,g[1])},d(g){g&&(detach(e),detach(i),detach(o),detach(u),detach(c),detach(d),detach(f),detach(m),detach(h),detach(p),detach(_),detach(y),detach(S)),w=!1,run_all(v)}}}function create_default_slot$2(t){let e,r,a=Object.keys(t[4]).length===0,i,o=Object.keys(t[5]).length,u,c,d,f,m,h=a&&create_if_block_4(t),p=o&&create_if_block_3(t);function _(w,v){if(v[0]&16&&(c=null),w[6])return create_if_block_1;if(c==null&&(c=!!Object.keys(w[4]).length),c)return create_if_block_2}let y=_(t,[-1,-1]),S=y&&y(t);return{c(){e=element("input"),r=space(),h&&h.c(),i=space(),p&&p.c(),u=space(),S&&S.c(),d=empty$1(),attr(e,"type","file"),attr(e,"id","fileInput"),attr(e,"accept",".csv, .txt, .TXT"),set_style(e,"display","none")},m(w,v){insert(w,e,v),insert(w,r,v),h&&h.m(w,v),insert(w,i,v),p&&p.m(w,v),insert(w,u,v),S&&S.m(w,v),insert(w,d,v),f||(m=listen(e,"change",t[11]),f=!0)},p(w,v){v[0]&16&&(a=Object.keys(w[4]).length===0),a?h?h.p(w,v):(h=create_if_block_4(w),h.c(),h.m(i.parentNode,i)):h&&(h.d(1),h=null),v[0]&32&&(o=Object.keys(w[5]).length),o?p?p.p(w,v):(p=create_if_block_3(w),p.c(),p.m(u.parentNode,u)):p&&(p.d(1),p=null),y===(y=_(w,v))&&S?S.p(w,v):(S&&S.d(1),S=y&&y(w),S&&(S.c(),S.m(d.parentNode,d)))},d(w){w&&(detach(e),detach(r),detach(i),detach(u),detach(d)),h&&h.d(w),p&&p.d(w),S&&S.d(w),f=!1,m()}}}function create_fragment$2(t){let e,r,a=t[3]==="import"&&create_if_block$1(t);return{c(){a&&a.c(),e=empty$1()},m(i,o){a&&a.m(i,o),insert(i,e,o),r=!0},p(i,o){i[3]==="import"?a?(a.p(i,o),o[0]&8&&transition_in(a,1)):(a=create_if_block$1(i),a.c(),transition_in(a,1),a.m(e.parentNode,e)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(i){r||(transition_in(a),r=!0)},o(i){transition_out(a),r=!1},d(i){i&&detach(e),a&&a.d(i)}}}const previewTableNrows=6;function changeObjectKeys(t,e){console.log(t);const r={};return Object.keys(t).forEach((a,i)=>{const o=e[i]||a;t[a].splice(0,1),r[o]=t[a]}),r}function instance$2(t,e,r){let a,i;component_subscribe(t,data,E=>r(24,a=E)),component_subscribe(t,menuModalType,E=>r(3,i=E));const o=["NaN","NA","null"];let u,c={},d={},f=0,m=!0,h=!1,p=!1,_=!1;async function y(){r(4,c={}),r(5,d={}),r(2,m=!0),h=!1,r(6,p=!1),_=!1,await tick(),document.getElementById("fileInput").click()}function S(E=0){return r(6,p=!1),new Promise(D=>{console.log("doing papa previewIN= "+E+", useHeaders= "+m),Papa.parse(u[0],{preview:E,header:m,dynamicTyping:!0,skipEmptyLines:"greedy",error(I,U,Z,G){console.log("Error: "+I+" | "+G),r(4,c={}),r(5,d={err:I,reason:G}),D()},beforeFirstChunk:I=>{const U=I.split(/\r\n|\r|\n/);return console.log(U),(f?U.splice(0,f):U[0].split(/[,;\t]/))[0].includes("Actiware Export File")&&!_&&(console.log("ACTIWARE"),_="actiware",r(1,f=148),S(f+E+1)),U.join(`
`)},complete(I,U){console.log("Parsing complete:",I,U),console.log(I),I.errors.length>0&&r(6,p=!0),w(I.data),D()}})})}function w(E){if(console.log("DEALING WITH DATA..."),console.log(E),r(4,c=v(E)),_==="actiware"){r(4,c.DateTime=[],c);for(let D=0;D<c.Date.length;D++)c.DateTime.push(c.Date[D]+" "+c.Time[D].replace(/\b([ap])\.m\./gi,(I,U)=>U.toUpperCase()+"M"))}console.log(c)}function v(E){try{let D={};return E.forEach(I=>{Object.keys(I).forEach(U=>{D[U]||(D[U]=[]),D[U].push(I[U])})}),h&&m&&(D=changeObjectKeys(D,E[0])),D}catch(D){return console.error("Error converting array to object:",D),{}}}async function g(){console.log("loading..."),await S(0),console.log(c),b(c,u[0].name),set_store_value(menuModalType,i="",i)}function b(E,D){console.log(E),console.log(D);let I={id:T(),importedFrom:D,displayName:"data_"+T(),datalength:NaN,data:{}};I.datalength=E[Object.keys(E)[0]].length,Object.keys(E).forEach(U=>{const Z=O(E[U]);if(console.log(Z+" : "+guessDateofArray([Z])),guessDateofArray([Z])!=-1){const G=guessDateofArray([Z]);console.log("guessedformat = "+G),I.data[U]={name:U,type:"time",data:E[U],timeFormat:G,timeData:forceFormat(E[U],G),recordPeriod:getPeriod(Z,G),processSteps:[],processedData:[]}}else isNaN(Z)?I.data[U]={name:U,type:"category",data:E[U],processSteps:[],processedData:[]}:I.data[U]={name:U,type:"value",data:E[U],processSteps:[],processedData:[]}}),console.log(I),a.push(I),data.set(a)}function T(){if(a.length===0)return 0;let E=[];return a.forEach(D=>E.push(D.id)),Math.max(...E)+1}function O(E){for(const D of E)if(D!==null&&D!==""&&!o.includes(D))return D;return null}function k(E){if(Object.keys(E).length===0)return"There was an error reading the file "+u[0].name;let D="<table><thead><tr>";Object.keys(E).forEach(I=>D+=`<th>${I}</th>`),D+="</tr></thead><tbody>";for(let I=0;I<previewTableNrows;I++){D+="<tr>";for(let U=0;U<Object.keys(E).length;U++)D+=`<td>${E[Object.keys(E)[U]][I]}</td>`;D+="</tr>"}return D+="</tbody></table>",D}function $(){u=this.files,r(0,u)}function M(){f=to_number(this.value),r(1,f)}function R(){m=this.checked,r(2,m)}function A(){m=this.checked,r(2,m)}const N=()=>S(f+previewTableNrows+m);function L(){f=to_number(this.value),r(1,f)}const V=()=>S(f+previewTableNrows+m);function C(){m=this.checked,r(2,m)}const F=()=>S(f+previewTableNrows+m);function z(){f=to_number(this.value),r(1,f)}const H=()=>S(f+previewTableNrows+m);return t.$$.update=()=>{t.$$.dirty[0]&8&&i==="import"&&y(),t.$$.dirty[0]&7&&u&&S(f+previewTableNrows+m)},[u,f,m,i,c,d,p,y,S,g,k,$,M,R,A,N,L,V,C,F,z,H]}class ImportData extends SvelteComponent{constructor(e){super(),init(this,e,instance$2,create_fragment$2,safe_not_equal,{},null,[-1,-1])}}const version="2.24";function create_if_block(t){let e,r;return e=new Dialog({props:{title:"ABOUT",$$slots:{default:[create_default_slot$1]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment)},m(a,i){mount_component(e,a,i),r=!0},i(a){r||(transition_in(e.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),r=!1},d(a){destroy_component(e,a)}}}function create_default_slot$1(t){let e,r,a,i,o,u,c,d,f,m,h,p,_,y,S,w,v,g,b,T,O,k,$,M,R;return{c(){e=element("h3"),e.textContent="Analysis of Circadian Rhythms (AnCir)",r=space(),a=element("p"),a.textContent=`This is our 'AnCir' to the need for a simple-to-use (GUI; no coding) tool
      for analysis of circadian rhythms. Currently, the tool only allows for
      import of csv data and plotting of actigrams.`,i=space(),o=element("p"),o.textContent=`This is written in Svelte, using D3, with help from @korur and @khromov -
      thank you!`,u=space(),c=element("h4"),c.textContent="For users",d=space(),f=element("p"),f.innerHTML=`AnCiR should start with some sample data already in the <strong>Data</strong> section on the left hand side. If you want to generate more sample data,
      just click on _Data_&gt;_Create_ and a new Sample set should appear. Similarly,
      if you have your own .csv file, then you can import it and it should show up
      in the list.`,m=space(),h=element("p"),h.textContent=`Clicking on the name of the data table should display the contents in the
      bottom viewer, so you can see what the data look like.`,p=space(),_=element("p"),_.textContent=`To create an actigram, click on _Plot_>_Actigram_. You can change the data
      that is used by using the dropdown lists under _Data for this plot_ on the
      right hand panel. You can add multiple data sources and change their
      colours. To see the post-processed data useed in the plot, click on the
      hyperlinked data for each source and see it appear in the data tabs below.`,y=space(),S=element("p"),S.textContent="The other controls for the actigram should be self-explanatory.",w=space(),v=element("p"),v.textContent=`The Periodogram plot is what it says it is, and raw is just a plot of the
      data - with similar controls to the actigram.`,g=space(),b=element("p"),b.textContent="Have fun.",T=space(),O=element("h4"),O.textContent="For developers",k=space(),$=element("p"),$.innerHTML='Any advice or offers of support will be welcommed - email <a href="mailto:d.cumin@auckland.ac.nz?subject=AnCiR">d.cumin@auckland.ac.nz</a>',M=text(`

    The following packages code was used in this project:
    `),R=element("ul"),R.innerHTML=`<li><a href="https://svelte.dev/">Svelte</a> is used as the framework/library/compiler
        of the code.</li> <li><a href="https://d3js.org/">D3</a> is used for plotting.</li> <li><a href="https://www.papaparse.com/">Papaparse</a> is used for importing
        the data.</li> <li><a href="https://svelte.dev/repl/79d35c3691cf4ed0924e7e98dc9af55e?version=4.2.8">In-place editing</a> for updating items.</li> <li><a href="https://www.npmjs.com/package/moment-guess">Moment-guess</a>
        was adapted to guess the time format of data.</li> <li><a href="https://svelte.dev/repl/dd6754a2ad0547c5b1c1ea37c0293fef?version=4.2.10">Tooltip</a> was adapted for this project.</li> <li><a href="https://github.com/EmilTholin/svelte-spinner/">Spinner</a> was taken
        to use for the spinner.</li> <li><a href="https://www.npmjs.com/package/luxon">Luxon</a> is used for date
        manipulation and caluclations.</li>`},m(A,N){insert(A,e,N),insert(A,r,N),insert(A,a,N),insert(A,i,N),insert(A,o,N),insert(A,u,N),insert(A,c,N),insert(A,d,N),insert(A,f,N),insert(A,m,N),insert(A,h,N),insert(A,p,N),insert(A,_,N),insert(A,y,N),insert(A,S,N),insert(A,w,N),insert(A,v,N),insert(A,g,N),insert(A,b,N),insert(A,T,N),insert(A,O,N),insert(A,k,N),insert(A,$,N),insert(A,M,N),insert(A,R,N)},p:noop,d(A){A&&(detach(e),detach(r),detach(a),detach(i),detach(o),detach(u),detach(c),detach(d),detach(f),detach(m),detach(h),detach(p),detach(_),detach(y),detach(S),detach(w),detach(v),detach(g),detach(b),detach(T),detach(O),detach(k),detach($),detach(M),detach(R))}}}function create_fragment$1(t){let e,r,a=t[0]==="about"&&create_if_block(t);return{c(){a&&a.c(),e=empty$1()},m(i,o){a&&a.m(i,o),insert(i,e,o),r=!0},p(i,[o]){i[0]==="about"?a?o&1&&transition_in(a,1):(a=create_if_block(i),a.c(),transition_in(a,1),a.m(e.parentNode,e)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(i){r||(transition_in(a),r=!0)},o(i){transition_out(a),r=!1},d(i){i&&detach(e),a&&a.d(i)}}}function instance$1(t,e,r){let a;return component_subscribe(t,menuModalType,i=>r(0,a=i)),[a]}class About extends SvelteComponent{constructor(e){super(),init(this,e,instance$1,create_fragment$1,safe_not_equal,{})}}function create_default_slot_6(t){let e,r;return e=new DataTree({}),{c(){create_component(e.$$.fragment)},m(a,i){mount_component(e,a,i),r=!0},i(a){r||(transition_in(e.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),r=!1},d(a){destroy_component(e,a)}}}function create_default_slot_5(t){let e,r,a,i;return e=new GraphMaster({}),a=new TableMaster({}),{c(){create_component(e.$$.fragment),r=space(),create_component(a.$$.fragment)},m(o,u){mount_component(e,o,u),insert(o,r,u),mount_component(a,o,u),i=!0},i(o){i||(transition_in(e.$$.fragment,o),transition_in(a.$$.fragment,o),i=!0)},o(o){transition_out(e.$$.fragment,o),transition_out(a.$$.fragment,o),i=!1},d(o){o&&detach(r),destroy_component(e,o),destroy_component(a,o)}}}function create_default_slot_4(t){let e,r;return e=new Splitpanes({props:{theme:"modern-theme",horizontal:!0,style:"height: 100%;",pushOtherPanes:!1,dblClickSplitter:!1,$$slots:{default:[create_default_slot_5]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment)},m(a,i){mount_component(e,a,i),r=!0},p(a,i){const o={};i&2&&(o.$$scope={dirty:i,ctx:a}),e.$set(o)},i(a){r||(transition_in(e.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),r=!1},d(a){destroy_component(e,a)}}}function create_default_slot_3(t){let e,r,a,i;return e=new Pane({props:{size:18,$$slots:{default:[create_default_slot_6]},$$scope:{ctx:t}}}),a=new Pane({props:{$$slots:{default:[create_default_slot_4]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment),r=space(),create_component(a.$$.fragment)},m(o,u){mount_component(e,o,u),insert(o,r,u),mount_component(a,o,u),i=!0},p(o,u){const c={};u&2&&(c.$$scope={dirty:u,ctx:o}),e.$set(c);const d={};u&2&&(d.$$scope={dirty:u,ctx:o}),a.$set(d)},i(o){i||(transition_in(e.$$.fragment,o),transition_in(a.$$.fragment,o),i=!0)},o(o){transition_out(e.$$.fragment,o),transition_out(a.$$.fragment,o),i=!1},d(o){o&&detach(r),destroy_component(e,o),destroy_component(a,o)}}}function create_default_slot_2(t){let e,r;return e=new Splitpanes({props:{theme:"modern-theme",style:"height: 100%;",pushOtherPanes:!1,dblClickSplitter:!0,$$slots:{default:[create_default_slot_3]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment)},m(a,i){mount_component(e,a,i),r=!0},p(a,i){const o={};i&2&&(o.$$scope={dirty:i,ctx:a}),e.$set(o)},i(a){r||(transition_in(e.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),r=!1},d(a){destroy_component(e,a)}}}function create_default_slot_1(t){let e,r;return e=new StatusMaster({}),{c(){create_component(e.$$.fragment)},m(a,i){mount_component(e,a,i),r=!0},i(a){r||(transition_in(e.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),r=!1},d(a){destroy_component(e,a)}}}function create_default_slot(t){let e,r,a,i;return e=new Pane({props:{minSize:30,$$slots:{default:[create_default_slot_2]},$$scope:{ctx:t}}}),a=new Pane({props:{size:10,$$slots:{default:[create_default_slot_1]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment),r=space(),create_component(a.$$.fragment)},m(o,u){mount_component(e,o,u),insert(o,r,u),mount_component(a,o,u),i=!0},p(o,u){const c={};u&2&&(c.$$scope={dirty:u,ctx:o}),e.$set(c);const d={};u&2&&(d.$$scope={dirty:u,ctx:o}),a.$set(d)},i(o){i||(transition_in(e.$$.fragment,o),transition_in(a.$$.fragment,o),i=!0)},o(o){transition_out(e.$$.fragment,o),transition_out(a.$$.fragment,o),i=!1},d(o){o&&detach(r),destroy_component(e,o),destroy_component(a,o)}}}function create_fragment(t){let e,r,a,i,o,u,c,d,f,m,h,p,_,y,S,w,v;return document.title="AnCiR v ."+version,r=new ContextMenu({}),i=new GenerateSimulated({}),u=new About({}),d=new ImportData({}),p=new MenuMaster({}),y=new Splitpanes({props:{theme:"modern-theme",horizontal:!0,style:"height: calc(100vh - 3.4em); width: calc(100vw - 1em);",pushOtherPanes:!1,$$slots:{default:[create_default_slot]},$$scope:{ctx:t}}}),w=new ProcessStep({}),{c(){e=space(),create_component(r.$$.fragment),a=space(),create_component(i.$$.fragment),o=space(),create_component(u.$$.fragment),c=space(),create_component(d.$$.fragment),f=space(),m=element("div"),h=element("div"),create_component(p.$$.fragment),_=space(),create_component(y.$$.fragment),S=space(),create_component(w.$$.fragment),set_style(h,"max-width","100vw"),attr(m,"data-theme",t[0])},m(g,b){insert(g,e,b),mount_component(r,g,b),insert(g,a,b),mount_component(i,g,b),insert(g,o,b),mount_component(u,g,b),insert(g,c,b),mount_component(d,g,b),insert(g,f,b),insert(g,m,b),append(m,h),mount_component(p,h,null),append(m,_),mount_component(y,m,null),append(m,S),mount_component(w,m,null),v=!0},p(g,[b]){const T={};b&2&&(T.$$scope={dirty:b,ctx:g}),y.$set(T),(!v||b&1)&&attr(m,"data-theme",g[0])},i(g){v||(transition_in(r.$$.fragment,g),transition_in(i.$$.fragment,g),transition_in(u.$$.fragment,g),transition_in(d.$$.fragment,g),transition_in(p.$$.fragment,g),transition_in(y.$$.fragment,g),transition_in(w.$$.fragment,g),v=!0)},o(g){transition_out(r.$$.fragment,g),transition_out(i.$$.fragment,g),transition_out(u.$$.fragment,g),transition_out(d.$$.fragment,g),transition_out(p.$$.fragment,g),transition_out(y.$$.fragment,g),transition_out(w.$$.fragment,g),v=!1},d(g){g&&(detach(e),detach(a),detach(o),detach(c),detach(f),detach(m)),destroy_component(r,g),destroy_component(i,g),destroy_component(u,g),destroy_component(d,g),destroy_component(p),destroy_component(y),destroy_component(w)}}}function instance(t,e,r){let a;return component_subscribe(t,selectedTheme,i=>r(0,a=i)),console.log(version),[a]}class App extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{})}}new App({target:document.getElementById("app")});

</script>
    <style>
:root{--bg-color: #fff;--font-color: #424242;--hover-color: #eee;--primary-color: lightblue;--secondary-color: #888888}[data-theme=dark]{--bg-color: #161625;--font-color: #e1e1ff;--hover-color: #888888;--primary-color: #9A97F3;--secondary-color: #888888}*{font-size:10pt;color:var(--font-color)}body{-webkit-tap-highlight-color:transparent;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;background:var(--bg-color)}h1{padding:6px 6px 0;font-weight:700;font-size:1.2em;text-decoration:underline}button{cursor:pointer}::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.3);background-color:#f5f5f5}::-webkit-scrollbar{width:6px;height:6px;background-color:var(--bg-color)}::-webkit-scrollbar-thumb{background-color:var(--secondary-color)}.splitpanes.modern-theme .splitpanes__pane{background-color:hsl(var(--b1))}.splitpanes__splitter{position:relative;cursor:grab;padding:.2em;opacity:.6}.splitpanes--vertical>.splitpanes__splitter{cursor:col-resize}.splitpanes--horizontal>.splitpanes__splitter{cursor:row-resize}.splitpanes.modern-theme .splitpanes__splitter{background-color:var(--hover-color);position:relative}.splitpanes__splitter:before{content:"";position:absolute;left:0;top:0;transition:opacity .4s;background-color:var(--bg-color);opacity:0;z-index:1}.splitpanes__splitter:hover{opacity:.6}.splitpanes__splitter:hover:before{opacity:.6}.splitpanes--vertical>.splitpanes__splitter:before{left:-3px;right:-3px;height:100%}.splitpanes--horizontal>.splitpanes__splitter:before{top:-3px;bottom:-3px;width:100%}.chartControls{width:calc(100% - 28px);border-radius:0;min-width:184px;box-shadow:1px 1px 5px #888;padding:10px 8px;margin:10px 0 10px 6px}.sliderContainer{width:calc(100% - .5em);display:flex}.sliderContainer>label{line-height:1rem;align-self:center;display:flex;padding:15px 0}input[type=text],input[type=datetime-local]{height:1.4em;border-radius:.5rem;align-self:center;padding-left:4px;border-width:1px;display:flex;margin-left:auto;width:60%;background:var(--bg-color)}select{height:1.5rem;align-self:center;border-radius:.5rem;width:50%;float:right;margin-right:calc(.5em + 2px);margin-top:-2px;background-color:var(--bg-color)}.processItem{flex-basis:100%;flex-grow:0;flex-shrink:0}g.axis>path{font-size:10pt;stroke:var(--font-color)!important}#thePlot svg{border:1px solid var(--hover-color)}.graphDataTree{width:calc(100% - 12px);border-radius:0;margin-left:6px;min-width:200px}details{padding:0 10px}summary{padding:0 10px;cursor:pointer}.dataTable{box-shadow:1px 1px 5px #888;padding:10px 0;margin:8px 0 10px}.dataTable>summary{font-size:1.1em;font-weight:700}.tableLabel{margin:1em 1em .5em}.field{margin-left:1.5em;padding:5px 0}.process[open]{margin-bottom:15px;margin-top:5px;margin-right:10px;box-shadow:1px 1px 5px #888}.process{margin-left:1.5em;padding:5px 0}.processDetails{padding:.5em}.no-arrow summary{list-style:none;cursor:default}.no-arrow summary:before{content:"";margin-left:-2px}.addbutton{float:right;cursor:pointer;margin-right:0}.addbutton:hover{background:var(--hover-color);padding:.2em .5em;margin-right:-.5em;margin-top:-.2em;border-radius:20%}.deleteTable{float:right;cursor:pointer;margin-right:0;z-index:2}.hoverbutton:hover{background:var(--hover-color);padding:.2em .5em;margin:-.2em -.5em;border-radius:20%;cursor:pointer}.deleteProcess{float:right;cursor:pointer;margin-right:0}.colour{display:flex;align-items:center;margin-left:1em;margin-right:1em}.colourPicker{border-radius:25px;height:2.5em;padding:0;width:2.5em;margin-right:1em}.colourPicker::-webkit-color-swatch{display:none}.colourPicker::-moz-color-swatch{display:none}.sliderContainer{width:calc(100% - 3.5em)}.itemsliderContainer{width:calc(100% - 2em);margin-left:1em}div.splitpanes--horizontal.splitpanes--dragging{cursor:row-resize}div.splitpanes--vertical.splitpanes--dragging{cursor:col-resize}.splitpanes{display:flex;width:100%;height:100%}.splitpanes--vertical{flex-direction:row}.splitpanes--horizontal{flex-direction:column}.splitpanes--dragging *{-webkit-user-select:none;-moz-user-select:none;user-select:none}.splitpanes__pane{width:100%;height:100%;overflow:hidden}.splitpanes--vertical .splitpanes__pane{transition:width .2s ease-out}.splitpanes--horizontal .splitpanes__pane{transition:height .2s ease-out}.splitpanes--vertical>.splitpanes__pane{transition:width .2s ease-out}.splitpanes--horizontal>.splitpanes__pane{transition:height .2s ease-out}.splitpanes--dragging .splitpanes__pane{transition:none;pointer-events:none}.splitpanes--freeze .splitpanes__pane{transition:none}.splitpanes__splitter{touch-action:none}.splitpanes--vertical>.splitpanes__splitter{min-width:1px}.splitpanes--horizontal>.splitpanes__splitter{min-height:1px}.splitpanes.default-theme .splitpanes__pane{background-color:#f2f2f2}.splitpanes.default-theme .splitpanes__splitter{background-color:#fff;box-sizing:border-box;position:relative;flex-shrink:0}.splitpanes.default-theme .splitpanes__splitter:before,.splitpanes.default-theme .splitpanes__splitter:after{content:"";position:absolute;top:50%;left:50%;background-color:#00000026;transition:background-color .3s}.splitpanes.default-theme .splitpanes__splitter:hover:before,.splitpanes.default-theme .splitpanes__splitter:hover:after{background-color:#00000040}.splitpanes.default-theme .splitpanes__splitter:first-child{cursor:auto}.default-theme.splitpanes .splitpanes .splitpanes__splitter{z-index:1}.default-theme.splitpanes--vertical>.splitpanes__splitter,.default-theme .splitpanes--vertical>.splitpanes__splitter{width:7px;border-left:1px solid #eee;cursor:col-resize}.default-theme.splitpanes--vertical>.splitpanes__splitter:before,.default-theme.splitpanes--vertical>.splitpanes__splitter:after,.default-theme .splitpanes--vertical>.splitpanes__splitter:before,.default-theme .splitpanes--vertical>.splitpanes__splitter:after{transform:translateY(-50%);width:1px;height:30px}.default-theme.splitpanes--vertical>.splitpanes__splitter:before,.default-theme .splitpanes--vertical>.splitpanes__splitter:before{margin-left:-2px}.default-theme.splitpanes--vertical>.splitpanes__splitter:after,.default-theme .splitpanes--vertical>.splitpanes__splitter:after{margin-left:1px}.default-theme.splitpanes--horizontal>.splitpanes__splitter,.default-theme .splitpanes--horizontal>.splitpanes__splitter{height:7px;border-top:1px solid #eee;cursor:row-resize}.default-theme.splitpanes--horizontal>.splitpanes__splitter:before,.default-theme.splitpanes--horizontal>.splitpanes__splitter:after,.default-theme .splitpanes--horizontal>.splitpanes__splitter:before,.default-theme .splitpanes--horizontal>.splitpanes__splitter:after{transform:translate(-50%);width:30px;height:1px}.default-theme.splitpanes--horizontal>.splitpanes__splitter:before,.default-theme .splitpanes--horizontal>.splitpanes__splitter:before{margin-top:-2px}.default-theme.splitpanes--horizontal>.splitpanes__splitter:after,.default-theme .splitpanes--horizontal>.splitpanes__splitter:after{margin-top:1px}.backdrop.svelte-r5e5cj{position:absolute;top:0;left:0;height:100vh;width:100vw;background:#fffc;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);z-index:9998}dialog.svelte-r5e5cj{display:block;position:absolute;top:10vh;max-height:80vh;max-width:80vw;min-width:270px;overflow:auto;background:var(--bg-color);z-index:9999;box-shadow:5px 5px 15px var(--secondary-color);border:none;border-radius:5px}.closeDialogButton.svelte-r5e5cj{width:15px;cursor:pointer;padding:0;float:right;margin-right:5px;margin-top:-10px;border:none;background-color:var(--bg-color)}svg.svelte-r5e5cj:hover{stroke:red}.numberInput.svelte-1o4zp2p.svelte-1o4zp2p{width:40%;max-width:6em;float:right;height:1.1rem;border-radius:.5rem;margin-left:auto;align-self:center;padding-left:4px;border-width:1px;text-align:end;background:var(--bg-color)}.sliderInput.svelte-1o4zp2p.svelte-1o4zp2p{width:100%;accent-color:var(--primary-color);cursor:pointer;box-sizing:border-box;border-width:0;border-style:solid}.sliderLabel.svelte-1o4zp2p.svelte-1o4zp2p{line-height:1rem;display:flex}.sliderLabel.svelte-1o4zp2p>span.svelte-1o4zp2p{align-self:center}.processItem.svelte-1o4zp2p.svelte-1o4zp2p{padding:5px 0}.min.svelte-1o4zp2p.svelte-1o4zp2p{font-size:.7em;display:block;margin-top:-.7em;margin-left:.2em}.max.svelte-1o4zp2p.svelte-1o4zp2p{font-size:.7em;display:block;margin-top:-1.3em;margin-left:.2em;float:right}.stop.svelte-1o4zp2p.svelte-1o4zp2p{font-style:italic;text-decoration:underline}.addSimDataButton.svelte-13hhe3j{float:right;margin-top:-2.2em}.addSimDataButton.svelte-13hhe3j:hover{background:var(--hover-color);padding:.2em .5em;margin:-2.4em -.5em;border-radius:20%;cursor:pointer}.dataTitle.svelte-13hhe3j{margin-top:10px}.datum.svelte-13hhe3j{box-shadow:1px 1px 5px var(--secondary-color);padding:2px 10px;margin:0 0 10px}.removeData.svelte-13hhe3j{display:inline-block;float:right;cursor:pointer;margin-top:-1.3em}.hoverbutton.svelte-13hhe3j:hover{background:var(--hover-color);padding:.2em .5em;margin:-1.5em -.5em;border-radius:20%;cursor:pointer}span.svelte-1tdrfqa{cursor:context-menu}form.svelte-1tdrfqa{display:inline}input.svelte-1tdrfqa{display:inherit;border:none;background:inherit;background-color:inherit;font-size:inherit;color:inherit;font-weight:inherit;text-align:inherit;box-shadow:none}.editing.svelte-1tdrfqa{font-style:italic}.dataTree.svelte-uakoe0.svelte-uakoe0{width:calc(100% - 6px);border-radius:0;margin-left:1px;min-width:200px}details.svelte-uakoe0.svelte-uakoe0{padding:0 10px}summary.svelte-uakoe0.svelte-uakoe0{padding:0 10px;cursor:pointer}.dataTable.svelte-uakoe0.svelte-uakoe0{box-shadow:1px 1px 5px #888;padding:10px 0;margin:8px 0 10px}.dataTable.svelte-uakoe0>summary.svelte-uakoe0{font-size:1.1em;font-weight:700}.field.svelte-uakoe0.svelte-uakoe0{margin-left:1.5em;padding:5px 0}.process[open].svelte-uakoe0.svelte-uakoe0{margin-bottom:15px;margin-top:5px;margin-right:10px;box-shadow:1px 1px 5px #888}.process.svelte-uakoe0.svelte-uakoe0{margin-left:1.5em;padding:5px 0}.processDetails.svelte-uakoe0.svelte-uakoe0{padding:.5em}.no-arrow.svelte-uakoe0 summary.svelte-uakoe0{list-style:none;cursor:default}.no-arrow.svelte-uakoe0 summary.svelte-uakoe0:before{content:"";margin-left:-2px}.addbutton.svelte-uakoe0.svelte-uakoe0{float:right;cursor:pointer;margin-right:0}.addbutton.svelte-uakoe0.svelte-uakoe0:hover{background:var(--hover-color);padding:.2em .5em;margin-right:-.5em;margin-top:-.2em;border-radius:20%}.deleteTable.svelte-uakoe0.svelte-uakoe0{float:right;cursor:pointer;margin-right:0;z-index:2}.hoverbutton.svelte-uakoe0.svelte-uakoe0:hover{background:var(--hover-color);padding:.2em .5em;margin:-.2em -.5em;border-radius:20%;cursor:pointer}.viewTable.svelte-uakoe0.svelte-uakoe0{float:right;cursor:pointer;margin-right:.5em}.viewTable.svelte-uakoe0.svelte-uakoe0:hover{margin-right:0;cursor:pointer}.deleteProcess.svelte-uakoe0.svelte-uakoe0{float:right;cursor:pointer;margin-right:0}.tooltip.svelte-1926ilb{border:1px solid #ddd;box-shadow:1px 1px 1px #ddd;background:#fff;border-radius:4px;padding:4px;position:absolute;margin:0;z-index:9999}#chartTools.svelte-1289zmx{margin-top:-10px;background-color:var(--hover-color);-webkit-backdrop-filter:blur(1px);backdrop-filter:blur(1px);opacity:.4;position:absolute;margin-left:calc(100% - 10em);border-radius:5px;display:flex}.button.svelte-1289zmx{margin:5px;border:none;border-radius:20%;padding:.2em .5em;opacity:1;cursor:pointer;width:20px;height:20px}.button.svelte-1289zmx:hover{background:var(--hover-color)}#chartTools.svelte-1289zmx:hover{opacity:1;background:var(--bg-color)}#graphTabs.svelte-1gfrvzx.svelte-1gfrvzx{position:sticky;top:0;left:0;z-index:999;background:var(--bg-color);padding:0;margin:0!important;display:flow-root}nav.svelte-1gfrvzx.svelte-1gfrvzx{margin:0;background-color:var(--bg-color);z-index:9;width:100%}ul.svelte-1gfrvzx.svelte-1gfrvzx{display:flex;flex-wrap:wrap;list-style:none;border-bottom:3px solid var(--hover-color);margin-left:-2em;margin-top:2px}li.svelte-1gfrvzx.svelte-1gfrvzx{margin-bottom:-3px;margin-right:2px;border-top-left-radius:.25rem;border-top-right-radius:.25rem;background:var(--hover-color)}span.svelte-1gfrvzx.svelte-1gfrvzx{border:3px solid transparent;border-top-left-radius:.25rem;border-top-right-radius:.25rem;display:block;padding:.5rem 1rem;cursor:pointer}li.active.svelte-1gfrvzx>span.svelte-1gfrvzx,li.active.svelte-1gfrvzx>.closeButton.svelte-1gfrvzx,li.active.svelte-1gfrvzx:hover>span.svelte-1gfrvzx{border-color:var(--hover-color) var(--hover-color) var(--bg-color);background:var(--bg-color)}li.svelte-1gfrvzx.svelte-1gfrvzx:hover,li.svelte-1gfrvzx:hover>span.svelte-1gfrvzx,li.svelte-1gfrvzx:hover>.closeButton.svelte-1gfrvzx{border-color:var(--hover-color) var(--hover-color) var(--hover-color);background:var(--bg-color)}li.active.svelte-1gfrvzx:hover>span.svelte-1gfrvzx,li.active.svelte-1gfrvzx:hover>.closeButton.svelte-1gfrvzx{cursor:default;background:var(--bg-color)}.closeButton.svelte-1gfrvzx.svelte-1gfrvzx{width:15px;cursor:pointer;padding:0;float:right;margin-right:3px;margin-top:-32px;border:none;background-color:var(--hover-color)}svg.svelte-1gfrvzx.svelte-1gfrvzx:hover{stroke:red}.overlay.svelte-1hj8mph{position:absolute;cursor:pointer;z-index:10001;background:var(--hover-color);padding:5px;border-radius:10px;box-shadow:0 0 15px -5px var(--font-color)}.dateInput.svelte-jzkczy{margin-right:2px;width:18px;padding-right:4px;margin-bottom:5px;margin-top:-3px;padding-top:2px;background:var(--primary-color);cursor:pointer}.datepicklabelshow.svelte-jzkczy{display:inline-block}.datepicklabel.svelte-jzkczy{display:none}.dateInput.svelte-jzkczy:hover{background:#eee}.svelte-jzkczy::-webkit-calendar-picker-indicator:hover{cursor:pointer}div.svelte-1wb4l5o{border:1px solid #ddd;box-shadow:1px 1px 1px #ddd;background:#fff;border-radius:4px;padding:4px;position:absolute}#tableTabs.svelte-nulfcf.svelte-nulfcf{position:sticky;top:0;left:0;z-index:999;padding:0;margin:0 2.2em 0 0!important}nav.svelte-nulfcf.svelte-nulfcf{margin:0;z-index:9;width:calc(100% + 2.2em);background-color:var(--bg-color)}ul.svelte-nulfcf.svelte-nulfcf{display:flex;flex-wrap:wrap;list-style:none;border-bottom:3px solid var(--hover-color);margin-top:2px}li.svelte-nulfcf.svelte-nulfcf{margin-bottom:-3px;margin-right:2px;border-top-left-radius:.25rem;border-top-right-radius:.25rem;background:var(--hover-color)}span.svelte-nulfcf.svelte-nulfcf{border:3px solid transparent;border-top-left-radius:.25rem;border-top-right-radius:.25rem;display:block;padding:.5rem 1rem;cursor:pointer}li.active.svelte-nulfcf>span.svelte-nulfcf,li.active.svelte-nulfcf>.closeButton.svelte-nulfcf,li.active.svelte-nulfcf:hover>span.svelte-nulfcf{border-color:var(--hover-color) var(--hover-color) var(--bg-color);background:var(--bg-color)}li.svelte-nulfcf.svelte-nulfcf:hover,li.svelte-nulfcf:hover>span.svelte-nulfcf,li.svelte-nulfcf:hover>.closeButton.svelte-nulfcf{border-color:var(--hover-color) var(--hover-color) var(--hover-color);background:var(--bg-color)}li.active.svelte-nulfcf:hover>span.svelte-nulfcf,li.active.svelte-nulfcf:hover>.closeButton.svelte-nulfcf{cursor:default;background:var(--bg-color)}.closeButton.svelte-nulfcf.svelte-nulfcf{width:15px;cursor:pointer;padding:0;float:right;margin-right:3px;margin-top:-32px;border:none;background-color:var(--hover-color)}svg.svelte-nulfcf.svelte-nulfcf:hover{stroke:red}table.svelte-nulfcf.svelte-nulfcf{border-collapse:collapse;width:-moz-max-content;width:max-content;margin-left:5px}th.svelte-nulfcf.svelte-nulfcf,td.svelte-nulfcf.svelte-nulfcf{border:1px solid var(--hover-color);text-align:left;padding:8px}thead.svelte-nulfcf th.svelte-nulfcf{background-color:var(--hover-color)}.showmorebutton.svelte-nulfcf.svelte-nulfcf{display:flex;padding:0 10px 5px;margin:10px auto;background-color:var(--bg-color)}.guessFmtBtn.svelte-1wt1n0s{margin-right:10px}.svelte-spinner.svelte-ynopmf{transition-property:transform;animation-name:svelte-ynopmf-svelte-spinner_infinite-spin;animation-iteration-count:infinite;animation-timing-function:linear}@keyframes svelte-ynopmf-svelte-spinner_infinite-spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}nav.svelte-mptgu6.svelte-mptgu6{position:sticky;height:2em;background-color:var(--bg-color);z-index:1001}.applicationmenu.svelte-mptgu6.svelte-mptgu6{border-bottom:1px var(--hover-color) solid;height:2em;z-index:3;padding:3px;position:fixed;width:100%;margin:-8px}ul.svelte-mptgu6.svelte-mptgu6{padding:0}ul.topmenu.svelte-mptgu6.svelte-mptgu6{display:flex;flex-direction:row;margin-top:0}ul.topmenu.svelte-mptgu6 li.svelte-mptgu6{list-style-type:none}button.svelte-mptgu6.svelte-mptgu6{border:0px #000 solid;color:var(--font-color);height:30px;padding:0 10px;background:var(--bg-color)}ul.svelte-mptgu6 li button.svelte-mptgu6:hover{background-color:var(--hover-color);cursor:pointer}ul.svelte-mptgu6 li ul.secondmenu.svelte-mptgu6{display:flex;align-items:stretch;flex-direction:column;position:absolute;box-shadow:1px 1px 5px #888}ul.svelte-mptgu6 li ul.secondmenu li button.svelte-mptgu6{width:100%;min-width:150px;text-align:left}ul.svelte-mptgu6 li ul.thirdmenu.svelte-mptgu6{display:flex;align-items:stretch;flex-direction:column;position:absolute;box-shadow:1px 1px 5px #888;margin-left:calc(100% + 1px);margin-top:-30px}hr.svelte-mptgu6.svelte-mptgu6{border:none;border-bottom:1px solid var(--hover-color);margin:0}#switchtheme.svelte-mptgu6.svelte-mptgu6{float:right;margin-right:10px;margin-top:-3em}:root{--theme-toggle-width:3rem;--theme-toggle-height:1.5rem;--theme-toggle-circle-width:0;--theme-toggle-circle-dimensions:calc(var(--theme-toggle-height) - .5rem)}#switchtheme.svelte-mptgu6.svelte-mptgu6{-webkit-appearance:none;-moz-appearance:none;appearance:none;outline:none;cursor:pointer;height:var(--theme-toggle-height);width:var(--theme-toggle-width);box-shadow:#63636333 0 2px 8px;border:1px solid var(--hover-color);position:relative;border-radius:var(--theme-toggle-circle-dimensions);padding:.2rem;background-color:var(--bg-color);transition:background-color .5s}#switchtheme.svelte-mptgu6.svelte-mptgu6:before{content:"";width:var(--theme-toggle-circle-dimensions);height:var(--theme-toggle-circle-dimensions);background-color:var(--primary-color);position:absolute;border-radius:50%;top:50%;transform:translateY(-50%) translate(0);transition:transform .5s}#switchtheme.svelte-mptgu6.svelte-mptgu6:after{content:"Light mode";white-space:nowrap;color:var(--bg-color);position:absolute;left:calc(100% + 1.5rem);font-size:1.3rem;top:50%;transform:translateY(-50%);pointer-events:none}#switchtheme.svelte-mptgu6.svelte-mptgu6:checked{background-color:var(--primary-color);border:none}#switchtheme.svelte-mptgu6.svelte-mptgu6:checked:before{background-color:#fff;transform:translateY(-50%) translate(calc(var(--theme-toggle-width) - var(--theme-toggle-height)))}#switchtheme.svelte-mptgu6.svelte-mptgu6:checked:after{content:"Dark mode";color:var(--bg-color)}.navbar.svelte-ouzgb9.svelte-ouzgb9{display:inline-flex;border:1px #999 solid;width:-moz-fit-content;width:fit-content;background-color:var(--bg-color);border-radius:5px;overflow:hidden;flex-direction:column}.navbar.svelte-ouzgb9 ul.svelte-ouzgb9{margin:6px}ul.svelte-ouzgb9.svelte-ouzgb9{padding:0}ul.svelte-ouzgb9 li.svelte-ouzgb9{display:block;list-style-type:none;width:1fr}ul.svelte-ouzgb9 li button.svelte-ouzgb9{font-size:.75rem;width:100%;height:30px;text-align:left;border:0px;background-color:var(--bg-color)}ul.svelte-ouzgb9 li button.svelte-ouzgb9:hover{color:var(--bg-color);text-align:left;border-radius:5px;background-color:#eee}

</style>
  </head>
  <body>
    <div id="app"></div>
  </body>
</html>
