<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link
      rel="icon"
      type="image/svg+xml"
      href="data:image/svg+xml, %3Csvg data-v-6805eed4='' version='1.0' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='100%25' height='100%25' viewBox='0 0 70.000000 70.000000' preserveAspectRatio='xMidYMid meet' color-interpolation-filters='sRGB' style='margin: auto;'%3E%3Cg data-v-6805eed4='' fill='%23333' class='icon-text-wrapper icon-svg-group iconsvg' transform='translate(71.40499877929688,97.81155776977539)'%3E%3Cg class='iconsvg-imagesvg' transform='matrix(1,0,0,1,0,0)' opacity='1'%3E%3Cg%3E%3Crect fill='%23333' fill-opacity='0' stroke-width='2' x='0' y='0' width='60' height='54.37688619824' class='image-rect'%3E%3C/rect%3E%3Csvg x='-120' y='-95' width='160' height='54.37688619824' filtersec='colorsb2791788449' class='image-svg-svg primary' style='overflow: visible;'%3E%3Csvg xmlns='http://www.w3.org/2000/svg' xlink='http://www.w3.org/1999/xlink' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='ae8194c03-b976-4110-a715-bc6a7dcd8efe' x1='127.09' y1='100.34' x2='11.24' y2='19.22' gradientUnits='userSpaceOnUse'%3E%3Cstop offset='0' stop-color='%23fad5a5'%3E%3C/stop%3E%3Cstop offset='1' stop-color='%23f06c68'%3E%3C/stop%3E%3C/linearGradient%3E%3ClinearGradient id='b74247629-084e-4695-a572-5323a7fe49da' x1='12.79' y1='-21.54' x2='83.81' y2='101.47' href='%23ae8194c03-b976-4110-a715-bc6a7dcd8efe'%3E%3C/linearGradient%3E%3C/defs%3E%3Cpath d='M108.13 58.27L88.82 91.72A16.56 16.56 0 0 1 74.49 100H35.86a16.54 16.54 0 0 1-8.72-2.49C86.56 97.51 82.65 50 82.65 50a8.59 8.59 0 0 0-2.52-6.09L61.26 25a8.62 8.62 0 0 0-12.18 0L30.22 43.91a8.51 8.51 0 0 0-2.41 4.69c-.06-8.11 2.5-46 55.56-46a16.43 16.43 0 0 1 5.43 5.68l19.31 33.45a16.51 16.51 0 0 1 .02 16.54z' fill='url(%23ae8194c03-b976-4110-a715-bc6a7dcd8efe)'%3E%3C/path%3E%3Cpath d='M27.81 48.6a8.61 8.61 0 0 0 2.41 7.49L49.08 75a8.62 8.62 0 0 0 12.18 0l18.87-18.91A8.59 8.59 0 0 0 82.65 50s3.91 47.51-55.51 47.51a16.48 16.48 0 0 1-5.61-5.79L2.22 58.27a16.51 16.51 0 0 1 0-16.54L21.53 8.28A16.56 16.56 0 0 1 35.86 0h38.63a16.54 16.54 0 0 1 8.9 2.6c-53.08 0-55.64 37.89-55.58 46z' fill='url(%23b74247629-084e-4695-a572-5323a7fe49da)'%3E%3C/path%3E%3C/svg%3E%3C/svg%3E%3C!----%3E%3C/g%3E%3C/g%3E%3C/g%3E%3Cdefs v-gra='od'%3E%3C/defs%3E%3C/svg%3E"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script type="module" crossorigin>
var Ne=Object.defineProperty;var Pe=(e,t,r)=>t in e?Ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Ce=(e,t,r)=>(Pe(e,typeof t!="symbol"?t+"":t,r),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();function noop(){}const identity$3=e=>e;function assign(e,t){for(const r in t)e[r]=t[r];return e}function run(e){return e()}function blank_object(){return Object.create(null)}function run_all(e){e.forEach(run)}function is_function(e){return typeof e=="function"}function safe_not_equal(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function is_empty(e){return Object.keys(e).length===0}function subscribe(e,...t){if(e==null){for(const a of t)a(void 0);return noop}const r=e.subscribe(...t);return r.unsubscribe?()=>r.unsubscribe():r}function get_store_value(e){let t;return subscribe(e,r=>t=r)(),t}function component_subscribe(e,t,r){e.$$.on_destroy.push(subscribe(t,r))}function create_slot(e,t,r,a){if(e){const i=get_slot_context(e,t,r,a);return e[0](i)}}function get_slot_context(e,t,r,a){return e[1]&&a?assign(r.ctx.slice(),e[1](a(t))):r.ctx}function get_slot_changes(e,t,r,a){if(e[2]&&a){const i=e[2](a(r));if(t.dirty===void 0)return i;if(typeof i=="object"){const o=[],u=Math.max(t.dirty.length,i.length);for(let c=0;c<u;c+=1)o[c]=t.dirty[c]|i[c];return o}return t.dirty|i}return t.dirty}function update_slot_base(e,t,r,a,i,o){if(i){const u=get_slot_context(t,r,a,o);e.p(u,i)}}function get_all_dirty_from_scope(e){if(e.ctx.length>32){const t=[],r=e.ctx.length/32;for(let a=0;a<r;a++)t[a]=-1;return t}return-1}function null_to_empty(e){return e??""}function set_store_value(e,t,r){return e.set(r),t}function action_destroyer(e){return e&&is_function(e.destroy)?e.destroy:noop}const is_client=typeof window<"u";let now$1=is_client?()=>window.performance.now():()=>Date.now(),raf=is_client?e=>requestAnimationFrame(e):noop;const tasks=new Set;function run_tasks(e){tasks.forEach(t=>{t.c(e)||(tasks.delete(t),t.f())}),tasks.size!==0&&raf(run_tasks)}function loop(e){let t;return tasks.size===0&&raf(run_tasks),{promise:new Promise(r=>{tasks.add(t={c:e,f:r})}),abort(){tasks.delete(t)}}}const globals=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function append(e,t){e.appendChild(t)}function get_root_for_style(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function append_empty_stylesheet(e){const t=element("style");return t.textContent="/* empty */",append_stylesheet(get_root_for_style(e),t),t.sheet}function append_stylesheet(e,t){return append(e.head||e,t),t.sheet}function insert(e,t,r){e.insertBefore(t,r||null)}function detach(e){e.parentNode&&e.parentNode.removeChild(e)}function destroy_each(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function element(e){return document.createElement(e)}function svg_element(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function text(e){return document.createTextNode(e)}function space(){return text(" ")}function empty$1(){return text("")}function listen(e,t,r,a){return e.addEventListener(t,r,a),()=>e.removeEventListener(t,r,a)}function prevent_default(e){return function(t){return t.preventDefault(),e.call(this,t)}}function attr(e,t,r){r==null?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function to_number(e){return e===""?null:+e}function children$1(e){return Array.from(e.childNodes)}function set_data(e,t){t=""+t,e.data!==t&&(e.data=t)}function set_input_value(e,t){e.value=t??""}function set_style(e,t,r,a){r==null?e.style.removeProperty(t):e.style.setProperty(t,r,a?"important":"")}function select_option(e,t,r){for(let a=0;a<e.options.length;a+=1){const i=e.options[a];if(i.__value===t){i.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function select_value(e){const t=e.querySelector(":checked");return t&&t.__value}function toggle_class(e,t,r){e.classList.toggle(t,!!r)}function custom_event(e,t,{bubbles:r=!1,cancelable:a=!1}={}){return new CustomEvent(e,{detail:t,bubbles:r,cancelable:a})}class HtmlTag{constructor(t=!1){Ce(this,"is_svg",!1);Ce(this,"e");Ce(this,"n");Ce(this,"t");Ce(this,"a");this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,r,a=null){this.e||(this.is_svg?this.e=svg_element(r.nodeName):this.e=element(r.nodeType===11?"TEMPLATE":r.nodeName),this.t=r.tagName!=="TEMPLATE"?r:r.content,this.c(t)),this.i(a)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(t){for(let r=0;r<this.n.length;r+=1)insert(this.t,this.n[r],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(detach)}}function construct_svelte_component(e,t){return new e(t)}const managed_styles=new Map;let active=0;function hash(e){let t=5381,r=e.length;for(;r--;)t=(t<<5)-t^e.charCodeAt(r);return t>>>0}function create_style_information(e,t){const r={stylesheet:append_empty_stylesheet(t),rules:{}};return managed_styles.set(e,r),r}function create_rule(e,t,r,a,i,o,u,c=0){const d=16.666/a;let f=`{
`;for(let $=0;$<=1;$+=d){const b=t+(r-t)*o($);f+=$*100+`%{${u(b,1-b)}}
`}const m=f+`100% {${u(r,1-r)}}
}`,p=`__svelte_${hash(m)}_${c}`,h=get_root_for_style(e),{stylesheet:_,rules:y}=managed_styles.get(h)||create_style_information(h,e);y[p]||(y[p]=!0,_.insertRule(`@keyframes ${p} ${m}`,_.cssRules.length));const D=e.style.animation||"";return e.style.animation=`${D?`${D}, `:""}${p} ${a}ms linear ${i}ms 1 both`,active+=1,p}function delete_rule(e,t){const r=(e.style.animation||"").split(", "),a=r.filter(t?o=>o.indexOf(t)<0:o=>o.indexOf("__svelte")===-1),i=r.length-a.length;i&&(e.style.animation=a.join(", "),active-=i,active||clear_rules())}function clear_rules(){raf(()=>{active||(managed_styles.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&detach(t)}),managed_styles.clear())})}let current_component;function set_current_component(e){current_component=e}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function onMount(e){get_current_component().$$.on_mount.push(e)}function afterUpdate(e){get_current_component().$$.after_update.push(e)}function onDestroy(e){get_current_component().$$.on_destroy.push(e)}function createEventDispatcher(){const e=get_current_component();return(t,r,{cancelable:a=!1}={})=>{const i=e.$$.callbacks[t];if(i){const o=custom_event(t,r,{cancelable:a});return i.slice().forEach(u=>{u.call(e,o)}),!o.defaultPrevented}return!0}}function setContext(e,t){return get_current_component().$$.context.set(e,t),t}function getContext(e){return get_current_component().$$.context.get(e)}const dirty_components=[],binding_callbacks=[];let render_callbacks=[];const flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function tick(){return schedule_update(),resolved_promise}function add_render_callback(e){render_callbacks.push(e)}function add_flush_callback(e){flush_callbacks.push(e)}const seen_callbacks=new Set;let flushidx=0;function flush(){if(flushidx!==0)return;const e=current_component;do{try{for(;flushidx<dirty_components.length;){const t=dirty_components[flushidx];flushidx++,set_current_component(t),update(t.$$)}}catch(t){throw dirty_components.length=0,flushidx=0,t}for(set_current_component(null),dirty_components.length=0,flushidx=0;binding_callbacks.length;)binding_callbacks.pop()();for(let t=0;t<render_callbacks.length;t+=1){const r=render_callbacks[t];seen_callbacks.has(r)||(seen_callbacks.add(r),r())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,seen_callbacks.clear(),set_current_component(e)}function update(e){if(e.fragment!==null){e.update(),run_all(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(add_render_callback)}}function flush_render_callbacks(e){const t=[],r=[];render_callbacks.forEach(a=>e.indexOf(a)===-1?t.push(a):r.push(a)),r.forEach(a=>a()),render_callbacks=t}let promise;function wait(){return promise||(promise=Promise.resolve(),promise.then(()=>{promise=null})),promise}function dispatch(e,t,r){e.dispatchEvent(custom_event(`${t?"intro":"outro"}${r}`))}const outroing=new Set;let outros;function group_outros(){outros={r:0,c:[],p:outros}}function check_outros(){outros.r||run_all(outros.c),outros=outros.p}function transition_in(e,t){e&&e.i&&(outroing.delete(e),e.i(t))}function transition_out(e,t,r,a){if(e&&e.o){if(outroing.has(e))return;outroing.add(e),outros.c.push(()=>{outroing.delete(e),a&&(r&&e.d(1),a())}),e.o(t)}else a&&a()}const null_transition={duration:0};function create_bidirectional_transition(e,t,r,a){let o=t(e,r,{direction:"both"}),u=a?0:1,c=null,d=null,f=null,m;function p(){f&&delete_rule(e,f)}function h(y,D){const $=y.b-u;return D*=Math.abs($),{a:u,b:y.b,d:$,duration:D,start:y.start,end:y.start+D,group:y.group}}function _(y){const{delay:D=0,duration:$=300,easing:b=identity$3,tick:g=noop,css:v}=o||null_transition,k={start:now$1()+D,b:y};y||(k.group=outros,outros.r+=1),"inert"in e&&(y?m!==void 0&&(e.inert=m):(m=e.inert,e.inert=!0)),c||d?d=k:(v&&(p(),f=create_rule(e,u,y,$,D,b,v)),y&&g(0,1),c=h(k,$),add_render_callback(()=>dispatch(e,y,"start")),loop(T=>{if(d&&T>d.start&&(c=h(d,$),d=null,dispatch(e,c.b,"start"),v&&(p(),f=create_rule(e,u,c.b,c.duration,0,b,o.css))),c){if(T>=c.end)g(u=c.b,1-u),dispatch(e,c.b,"end"),d||(c.b?p():--c.group.r||run_all(c.group.c)),c=null;else if(T>=c.start){const S=T-c.start;u=c.a+c.d*b(S/c.duration),g(u,1-u)}}return!!(c||d)}))}return{run(y){is_function(o)?wait().then(()=>{o=o({direction:y?"in":"out"}),_(y)}):_(y)},end(){p(),c=d=null}}}function ensure_array_like(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function outro_and_destroy_block(e,t){transition_out(e,1,1,()=>{t.delete(e.key)})}function update_keyed_each(e,t,r,a,i,o,u,c,d,f,m,p){let h=e.length,_=o.length,y=h;const D={};for(;y--;)D[e[y].key]=y;const $=[],b=new Map,g=new Map,v=[];for(y=_;y--;){const O=p(i,o,y),M=r(O);let N=u.get(M);N?a&&v.push(()=>N.p(O,t)):(N=f(M,O),N.c()),b.set(M,$[y]=N),M in D&&g.set(M,Math.abs(y-D[M]))}const k=new Set,T=new Set;function S(O){transition_in(O,1),O.m(c,m),u.set(O.key,O),m=O.first,_--}for(;h&&_;){const O=$[_-1],M=e[h-1],N=O.key,w=M.key;O===M?(m=O.first,h--,_--):b.has(w)?!u.has(N)||k.has(N)?S(O):T.has(w)?h--:g.get(N)>g.get(w)?(T.add(N),S(O)):(k.add(w),h--):(d(M,u),h--)}for(;h--;){const O=e[h];b.has(O.key)||d(O,u)}for(;_;)S($[_-1]);return run_all(v),$}function bind(e,t,r){const a=e.$$.props[t];a!==void 0&&(e.$$.bound[a]=r,r(e.$$.ctx[a]))}function create_component(e){e&&e.c()}function mount_component(e,t,r){const{fragment:a,after_update:i}=e.$$;a&&a.m(t,r),add_render_callback(()=>{const o=e.$$.on_mount.map(run).filter(is_function);e.$$.on_destroy?e.$$.on_destroy.push(...o):run_all(o),e.$$.on_mount=[]}),i.forEach(add_render_callback)}function destroy_component(e,t){const r=e.$$;r.fragment!==null&&(flush_render_callbacks(r.after_update),run_all(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function make_dirty(e,t){e.$$.dirty[0]===-1&&(dirty_components.push(e),schedule_update(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function init(e,t,r,a,i,o,u=null,c=[-1]){const d=current_component;set_current_component(e);const f=e.$$={fragment:null,ctx:[],props:o,update:noop,not_equal:i,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(d?d.$$.context:[])),callbacks:blank_object(),dirty:c,skip_bound:!1,root:t.target||d.$$.root};u&&u(f.root);let m=!1;if(f.ctx=r?r(e,t.props||{},(p,h,..._)=>{const y=_.length?_[0]:h;return f.ctx&&i(f.ctx[p],f.ctx[p]=y)&&(!f.skip_bound&&f.bound[p]&&f.bound[p](y),m&&make_dirty(e,p)),h}):[],f.update(),m=!0,run_all(f.before_update),f.fragment=a?a(f.ctx):!1,t.target){if(t.hydrate){const p=children$1(t.target);f.fragment&&f.fragment.l(p),p.forEach(detach)}else f.fragment&&f.fragment.c();t.intro&&transition_in(e.$$.fragment),mount_component(e,t.target,t.anchor),flush()}set_current_component(d)}class SvelteComponent{constructor(){Ce(this,"$$");Ce(this,"$$set")}$destroy(){destroy_component(this,1),this.$destroy=noop}$on(t,r){if(!is_function(r))return noop;const a=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return a.push(r),()=>{const i=a.indexOf(r);i!==-1&&a.splice(i,1)}}$set(t){this.$$set&&!is_empty(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const PUBLIC_VERSION="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(PUBLIC_VERSION);const subscriber_queue=[];function writable(e,t=noop){let r;const a=new Set;function i(c){if(safe_not_equal(e,c)&&(e=c,r)){const d=!subscriber_queue.length;for(const f of a)f[1](),subscriber_queue.push(f,e);if(d){for(let f=0;f<subscriber_queue.length;f+=2)subscriber_queue[f][0](subscriber_queue[f+1]);subscriber_queue.length=0}}}function o(c){i(c(e))}function u(c,d=noop){const f=[c,d];return a.add(f),a.size===1&&(r=t(i,o)||noop),c(e),()=>{a.delete(f),a.size===0&&r&&(r(),r=null)}}return{set:i,update:o,subscribe:u}}var data=writable([]),graphTabs=writable([]),activeGraphTab=writable(-1),graphs=writable([]),addedNewChartData=writable(!1),dataIDsforTables=writable([]),showalldata=writable([]),activeTableTab=writable(-1),menuModalType=writable(null),contextMenu=writable({labels:[],funcs:[]}),selectedTheme=writable("light"),statusData=writable([]);const BROWSER=!0;function pxToNumber(e){if(!e.endsWith("px"))return;const t=parseFloat(e.slice(0,e.length-2));return isNaN(t)?void 0:t}const getDimensionName=e=>e?"height":"width",calcComputedStyle=e=>window.getComputedStyle(e),getElementRect=e=>e.getBoundingClientRect(),getBordersSizeOffsets=(e,t=!0)=>{if(e.getPropertyValue("box-sizing")==="border-box")return;const r=pxToNumber(e.getPropertyValue("border-left-width"));if(r===void 0){console.error("Splitpanes Error: Fail to parse container `border-left-width`.");return}const a=pxToNumber(e.getPropertyValue("border-top-width"));if(a===void 0){console.error("Splitpanes Error: Fail to parse container `border-top-width`.");return}const i={left:r,top:a};if(t){const o=pxToNumber(e.getPropertyValue("border-right-width"));if(o===void 0){console.error("Splitpanes Error: Fail to parse container `border-right-width`.");return}const u=pxToNumber(e.getPropertyValue("border-bottom-width"));if(u===void 0){console.error("Splitpanes Error: Fail to parse container `border-bottom-width`.");return}const c=i;c.right=o,c.bottom=u}return i};function elementRectWithoutBorder(e,t){t||(t=calcComputedStyle(e));const r=getElementRect(e),a=getBordersSizeOffsets(t,!0)||{left:0,top:0,right:0,bottom:0};return{width:r.width-a.left-a.right,height:r.height-a.top-a.bottom,left:r.left+a.left,top:r.top+a.top}}const positionDiff=(e,t)=>({left:e.left-t.left,top:e.top-t.top});function getGlobalMousePosition(e){const t=e,r=e,{clientX:a,clientY:i}="ontouchstart"in window&&r.touches?r.touches[0]:t;return{left:a,top:i}}function sumPartial(e,t,r,a){let i=0;for(let o=t;o<r;o++)i+=a(e[o],o);return i}function forEachPartial(e,t,r,a){for(let i=t;i<r;i++)a(e[i],i)}function create_fragment$v(e){let t,r,a,i,o=!BROWSER;const u=e[16].default,c=create_slot(u,e,e[18],null);return{c(){t=element("div"),r=space(),c&&c.c(),attr(t,"id",e[0]),attr(t,"class",a=`splitpanes ${e[3]||""} ${e[4]||""}`),attr(t,"style",e[2]),toggle_class(t,"splitpanes--horizontal",e[1]),toggle_class(t,"splitpanes--vertical",!e[1]),toggle_class(t,"splitpanes--dragging",e[7]||e[8]),toggle_class(t,"splitpanes--freeze",!e[6])},m(d,f){insert(d,t,f),append(t,r),c&&c.m(t,null),e[17](t),i=!0},p(d,f){c&&c.p&&(!i||f[0]&262144)&&update_slot_base(c,u,d,d[18],i?get_slot_changes(u,d[18],f,null):get_all_dirty_from_scope(d[18]),null),(!i||f[0]&1)&&attr(t,"id",d[0]),(!i||f[0]&24&&a!==(a=`splitpanes ${d[3]||""} ${d[4]||""}`))&&attr(t,"class",a),(!i||f[0]&4)&&attr(t,"style",d[2]),(!i||f[0]&26)&&toggle_class(t,"splitpanes--horizontal",d[1]),(!i||f[0]&26)&&toggle_class(t,"splitpanes--vertical",!d[1]),(!i||f[0]&408)&&toggle_class(t,"splitpanes--dragging",d[7]||d[8]),(!i||f[0]&88)&&toggle_class(t,"splitpanes--freeze",!d[6])},i(d){i||(transition_in(o),transition_in(c,d),i=!0)},o(d){transition_out(o),transition_out(c,d),i=!1},d(d){d&&detach(t),c&&c.d(d),e[17](null)}}}const KEY={};function instance$v(e,t,r){let a,i,o,{$$slots:u={},$$scope:c}=t,{id:d=void 0}=t,{horizontal:f=!1}=t,{pushOtherPanes:m=!0}=t,{dblClickSplitter:p=!0}=t,{rtl:h="auto"}=t,{firstSplitter:_=!1}=t,{style:y=null}=t,{theme:D="default-theme"}=t,{class:$=""}=t;const b=createEventDispatcher();let g,v=!1,k=!1,T=!1,S=!1,O=!1,M=-1,N=-1,w,I=new Array,H=writable(f);component_subscribe(e,H,R=>r(31,o=R));const q=writable(_);component_subscribe(e,q,R=>r(30,i=R));const A=writable(void 0);component_subscribe(e,A,R=>r(29,a=R));let E=null,L=null;setContext(KEY,{showFirstSplitter:q,veryFirstPaneKey:A,isHorizontal:H,ssrRegisterPaneSize:void 0,onPaneInit:R=>(a===void 0&&set_store_value(A,a=R,a),{undefinedPaneInitSize:0}),clientOnly:{onPaneAdd:C,onPaneRemove:F}});function C(R){let V=-1;Array.from(R.element.parentNode.children).some(x=>(x.className.includes("splitpanes__pane")&&V++,x===R.element)),V===0&&set_store_value(A,a=R.key,a),I.splice(V,0,R);for(let x=0;x<I.length;x++)I[x].index=x;v&&me().then(()=>{R.isReady=!0,b("pane-add",{index:V,panes:ce()})});const J=(x,de=!0)=>W=>{(de||R.index>0)&&x(W,R)};return{onSplitterDown:J(j,!1),onSplitterClick:J(fe,!1),onSplitterDblClick:J(pe),onPaneClick:J(P),reportGivenSizeChange:J(Y)}}async function F(R){const V=I.findIndex(J=>J.key===R);if(V>=0){const J=I.splice(V,1)[0];for(let x=0;x<I.length;x++)I[x].index=x;V===0&&set_store_value(A,a=I.length>0?I[0].key:void 0,a),v&&(await me(),b("pane-remove",{removed:J,panes:ce()}))}}function P(R,V){b("pane-click",V)}function Y(R,V){V.setSz(R),me()}onMount(()=>{ve(),Te();for(let R=0;R<I.length;R++)I[R].isReady=!0;v=!0,b("ready"),setTimeout(()=>{r(6,T=!0)},0)}),onDestroy(()=>{v&&ie(),v=!1}),afterUpdate(()=>{ve()});function z(R){if(h==="auto")try{return(R??calcComputedStyle(g)).direction==="rtl"}catch{}return h===!0}function U(){document.body.style.cursor=H?"col-resize":"row-resize",document.addEventListener("mousemove",_e,{passive:!1}),document.addEventListener("mouseup",Q),"ontouchstart"in window&&(document.addEventListener("touchmove",_e,{passive:!1}),document.addEventListener("touchend",Q))}function ie(){document.body.style.cursor="",document.removeEventListener("mousemove",_e),document.removeEventListener("mouseup",Q),"ontouchstart"in window&&(document.removeEventListener("touchmove",_e),document.removeEventListener("touchend",Q))}const X=R=>R.nodeType===Node.ELEMENT_NODE&&R.classList.contains("splitpanes__splitter");function ue(R,V,J){let x=R[f?"top":"left"];return J&&!f&&(x=V-x),x}const oe=()=>getDimensionName(f);function j(R,V){r(7,S=!0),M=V.index,V.setSplitterActive(!0);let x=V.element;for(;x!=null&&(x=x.previousSibling,!X(x)););if(x==null){console.error("Splitpane Error: Active splitter wasn't found!");return}E=x;const de=getGlobalMousePosition(R),W=getElementRect(E);L=ue(positionDiff(de,W),W[oe()],z()),U()}function _e(R){if(S){R.preventDefault(),r(8,O=!0);const V=getGlobalMousePosition(R),J=calcComputedStyle(g),x=elementRectWithoutBorder(g,J),de=x[oe()],W=z(J),K=positionDiff(V,x),te=ue(K,de,W);ae(te,de),b("resize",ce())}}function Q(){O&&b("resized",ce()),r(7,S=!1),I[M].setSplitterActive(!1),setTimeout(()=>{r(8,O=!1),ie()},100)}function fe(R,V){if("ontouchstart"in window){R.preventDefault();const J=V.index;p&&(N===J?(w&&clearTimeout(w),w=null,pe(R,V),N=-1):(N=J,w=setTimeout(()=>{N=-1},500)))}O||b("splitter-click",V)}function pe(R,V){if(p){const J=V.index;let x=0;for(let K=0;K<I.length;K++){const te=I[K];K!==J&&(x+=te.min())}const de=Math.min(Math.max(0,100-x),V.max()),W=x+de;if(W>=100)for(let K=0;K<I.length;K++){const te=I[K];te!==V?te.setSz(te.min()):te.setSz(100-x)}else{let K=100-W;V.setSz(de);const te=le=>{const ke=le.min(),$e=le.max(),Me=Math.min(Math.max(0,K),$e-ke);le.setSz(ke+Me),K-=Me};for(let le=J-1;le>=0;le--)te(I[le]);for(let le=J+1;le<I.length;le++)te(I[le]);K!=0&&console.warn("Splitpanes: there is a left spare size after computation of splitter double click, which means there are issues on the size constains of the panes.")}b("pane-maximize",V),b("resized",ce())}r(7,S=!1)}const ce=()=>I.map(R=>({min:R.min(),max:R.max(),size:R.sz(),snap:R.snap()}));function ye(R,V){const J=$e=>getElementRect($e)[oe()],x=J(E);let de=0,W=E.previousSibling;for(;W!=null;)X(W)&&(de+=J(W)),W=W.previousSibling;let K=0,te=E.nextSibling;for(;te!=null;)X(te)&&(K+=J(te)),te=te.nextSibling;const le=de+L,ke=de+x+K;return(R-le)/(V-ke)*100}function ae(R,V){let J=M-1,x=I[J],de=M,W=I[de],K={prevPanesSize:he(J),nextPanesSize:we(de),prevReachedMinPanes:0,nextReachedMinPanes:0};const te=0+(m?0:K.prevPanesSize),le=100-(m?0:K.nextPanesSize),ke=Math.max(Math.min(ye(R,V),le),te),$e=K.prevPanesSize+x.min()+x.snap(),Me=100-(K.nextPanesSize+W.min()+W.snap());let De=ke,Oe=!1;ke<=$e?ke>K.prevPanesSize+x.min()&&(De=Math.max(x.min()+K.prevPanesSize,100-(W.max()+K.nextPanesSize)),Oe=!0):ke>=Me&&ke<100-K.nextPanesSize-W.min()&&(De=Math.min(100-(W.min()+K.nextPanesSize),x.max()+K.prevPanesSize),Oe=!0);const Se=x.max()<100&&De>=x.max()+K.prevPanesSize,Ee=W.max()<100&&De<=100-(W.max()+K.nextPanesSize);if(Se||Ee)Se?(x.setSz(x.max()),W.setSz(Math.max(100-x.max()-K.prevPanesSize-K.nextPanesSize,0))):(x.setSz(Math.max(100-W.max()-K.prevPanesSize-K.nextPanesSize,0)),W.setSz(W.max()));else{if(m&&!Oe){const Ae=be(K,De);if(!Ae)return;({sums:K,paneBeforeIndex:J,paneAfterIndex:de}=Ae),x=I[J],W=I[de]}J!=null&&x.setSz(Math.min(Math.max(De-K.prevPanesSize-K.prevReachedMinPanes,x.min()),x.max())),de!=null&&W.setSz(Math.min(Math.max(100-De-K.nextPanesSize-K.nextReachedMinPanes,W.min()),W.max()))}}function be(R,V){var W,K;const J=M-1;let x=J,de=J+1;if(V<R.prevPanesSize+I[x].min()&&(x=(W=se(J))==null?void 0:W.index,R.prevReachedMinPanes=0,x<J&&forEachPartial(I,x+1,J+1,te=>{te.setSz(te.min()),R.prevReachedMinPanes+=te.min()}),R.prevPanesSize=he(x),x==null))return R.prevReachedMinPanes=0,I[0].setSz(I[0].min()),forEachPartial(I,1,J+1,te=>{te.setSz(te.min()),R.prevReachedMinPanes+=te.min()}),I[de].setSz(100-R.prevReachedMinPanes-I[0].min()-R.prevPanesSize-R.nextPanesSize),null;if(V>100-R.nextPanesSize-I[de].min()){de=(K=ee(J))==null?void 0:K.index,R.nextReachedMinPanes=0,de>J+1&&forEachPartial(I,J+1,de,le=>{le.setSz(le.min()),R.nextReachedMinPanes+=le.min()}),R.nextPanesSize=we(de);const te=I.length;if(de==null)return R.nextReachedMinPanes=0,I[te-1].setSz(I[te-1].min()),forEachPartial(I,J+1,te-1,le=>{le.setSz(le.min()),R.nextReachedMinPanes+=le.min()}),I[x].setSz(100-R.prevPanesSize-R.nextReachedMinPanes-I[te-1].min()-R.nextPanesSize),null}return{sums:R,paneBeforeIndex:x,paneAfterIndex:de}}const G=R=>R.sz(),he=R=>sumPartial(I,0,R,G),we=R=>sumPartial(I,R+1,I.length,G),se=R=>[...I].reverse().find(V=>V.index<R&&V.sz()>V.min()),ee=R=>I.find(V=>V.index>R+1&&V.sz()>V.min());async function me(){k=!0,await tick(),k&&(Te(),k=!1)}function Te(){ge(),v&&b("resized",ce())}function ge(){if(I.length===0)return;const R=I.length;let V=100,J=0,x=0,de=0,W=[],K=[];for(let Me=0;Me<R;Me++){const De=I[Me],Oe=De.sz();De.givenSize==null?De.isReady?(de+=Oe,Oe>=De.max()&&W.push(De),Oe<=De.min()&&K.push(De)):x+=1:(V-=Oe,J++,W.push(De),K.push(De))}const te=R-J,le=te-x;let ke,$e;if(le>0?(ke=de/le,ke>.1&&V>.1?(de+=x*ke,$e=V/de):(ke=0,$e=1)):(ke=V/te,$e=1),V+de>.1){V=100;for(let Me=0;Me<R;Me++){const De=I[Me];if(De.givenSize==null){const Oe=De.isReady?De.sz():ke,Se=Math.max(Math.min(Oe*$e,De.max()),De.min());De.setSz(Se)}V-=De.sz()}Math.abs(V)>.1&&(V=ne(V,W,K))}isFinite(V)?Math.abs(V)>.1&&console.warn("Splitpanes: Could not resize panes correctly due to their constraints."):console.warn("Splitpanes: Internal error, sizes might be NaN as a result.")}function ne(R,V,J){const de=I.length-(R>0?V.length:J.length);if(de<=0)return R;const W=R/de;if(I.length===1)I[0].setSz(100),R=0;else for(let K=0;K<I.length;K++){const te=I[K],le=te.sz();if(R>0&&!V.includes(te)){const ke=Math.max(Math.min(le+W,te.max()),te.min()),$e=ke-le;R-=$e,te.setSz(ke)}else if(!J.includes(te)){const ke=Math.max(Math.min(le+W,te.max()),te.min()),$e=ke-le;R-=$e,te.setSz(ke)}}return R}function ve(){var x;const{children:R}=g;let V=0,J=!1;for(let de=0;de<R.length;de++){const W=R.item(de),K=W.classList.contains("splitpanes__pane"),te=W.classList.contains("splitpanes__splitter");if(!K&&!te){(x=W.parentNode)==null||x.removeChild(W),console.warn("Splitpanes: Only <Pane> elements are allowed at the root of <Splitpanes>. One of your DOM nodes was removed.");return}else K&&(!J&&I[V].element!==W&&(J=!0),V++)}if(J){const de=[];for(let W=0;W<R.length;W++){const K=R.item(W);if(K.classList.contains("splitpanes__pane")){const le=I.find(ke=>ke.element===K);le!=null?(le.index=de.length,de.push(le)):console.warn("Splitpanes: Internal error - found a <Pane> elements which isn't tracked.")}}I=de,set_store_value(A,a=I.length>0?I[0].key:void 0,a)}}function B(R){binding_callbacks[R?"unshift":"push"](()=>{g=R,r(5,g)})}return e.$$set=R=>{"id"in R&&r(0,d=R.id),"horizontal"in R&&r(1,f=R.horizontal),"pushOtherPanes"in R&&r(12,m=R.pushOtherPanes),"dblClickSplitter"in R&&r(13,p=R.dblClickSplitter),"rtl"in R&&r(14,h=R.rtl),"firstSplitter"in R&&r(15,_=R.firstSplitter),"style"in R&&r(2,y=R.style),"theme"in R&&r(3,D=R.theme),"class"in R&&r(4,$=R.class),"$$scope"in R&&r(18,c=R.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&2&&set_store_value(H,o=f,o),e.$$.dirty[0]&32768&&set_store_value(q,i=_,i)},[d,f,y,D,$,g,T,S,O,H,q,A,m,p,h,_,u,B,c]}class Splitpanes extends SvelteComponent{constructor(t){super(),init(this,t,instance$v,create_fragment$v,safe_not_equal,{id:0,horizontal:1,pushOtherPanes:12,dblClickSplitter:13,rtl:14,firstSplitter:15,style:2,theme:3,class:4},null,[-1,-1,-1])}}const carefullCallbackGenerator=(e,t)=>r=>{const a=e();a!=null&&a[t](r)},carefullCallbackSource=e=>carefullCallbackGenerator.bind(null,e);function create_if_block$k(e){let t,r,a,i,o,u,c=(e[4]!==e[9]||e[5])&&create_if_block_1$a(e);const d=e[20].default,f=create_slot(d,e,e[19],null);return{c(){c&&c.c(),t=space(),r=element("div"),f&&f.c(),attr(r,"class",a=`splitpanes__pane ${e[0]||""}`),attr(r,"style",e[3])},m(m,p){c&&c.m(m,p),insert(m,t,p),insert(m,r,p),f&&f.m(r,null),e[21](r),i=!0,o||(u=listen(r,"click",e[11]("onPaneClick")),o=!0)},p(m,p){m[4]!==m[9]||m[5]?c?c.p(m,p):(c=create_if_block_1$a(m),c.c(),c.m(t.parentNode,t)):c&&(c.d(1),c=null),f&&f.p&&(!i||p&524288)&&update_slot_base(f,d,m,m[19],i?get_slot_changes(d,m[19],p,null):get_all_dirty_from_scope(m[19]),null),(!i||p&1&&a!==(a=`splitpanes__pane ${m[0]||""}`))&&attr(r,"class",a),(!i||p&8)&&attr(r,"style",m[3])},i(m){i||(transition_in(f,m),i=!0)},o(m){transition_out(f,m),i=!1},d(m){m&&(detach(t),detach(r)),c&&c.d(m),f&&f.d(m),e[21](null),o=!1,u()}}}function create_if_block_1$a(e){let t,r,a,i;return{c(){t=element("div"),attr(t,"class",r="splitpanes__splitter "+(e[2]?"splitpanes__splitter__active":""))},m(o,u){insert(o,t,u),a||(i=[listen(t,"mousedown",e[11]("onSplitterDown")),listen(t,"touchstart",e[11]("onSplitterDown")),listen(t,"click",e[11]("onSplitterClick")),listen(t,"dblclick",e[11]("onSplitterDblClick"))],a=!0)},p(o,u){u&4&&r!==(r="splitpanes__splitter "+(o[2]?"splitpanes__splitter__active":""))&&attr(t,"class",r)},d(o){o&&detach(t),a=!1,run_all(i)}}}function create_fragment$u(e){let t,r,a=!e[10]&&create_if_block$k(e);return{c(){a&&a.c(),t=empty$1()},m(i,o){a&&a.m(i,o),insert(i,t,o),r=!0},p(i,[o]){i[10]||a.p(i,o)},i(i){r||(transition_in(a),r=!0)},o(i){transition_out(a),r=!1},d(i){i&&detach(t),a&&a.d(i)}}}function instance$u(e,t,r){let a,i,o,u,c,{$$slots:d={},$$scope:f}=t;const{ssrRegisterPaneSize:m,onPaneInit:p,clientOnly:h,isHorizontal:_,showFirstSplitter:y,veryFirstPaneKey:D}=getContext(KEY);component_subscribe(e,_,E=>r(18,o=E)),component_subscribe(e,y,E=>r(5,c=E)),component_subscribe(e,D,E=>r(4,u=E));let{size:$=null}=t,{minSize:b=0}=t,{maxSize:g=100}=t,{snapSize:v=0}=t,{class:k=""}=t;const T={},S=!BROWSER,{undefinedPaneInitSize:O}=p(T);let M,N=$??O,w=!1,I;const H=carefullCallbackSource(()=>I),q=E=>{E!=N&&H("reportGivenSizeChange")(E)};onMount(()=>{const E={key:T,element:M,givenSize:$,sz:()=>N,setSz:L=>{r(16,N=L),$!=null&&$!=N&&r(12,$=N)},min:()=>b,max:()=>g,snap:()=>v,setSplitterActive:L=>{r(2,w=L)},isReady:!1};I=h.onPaneAdd(E)}),onDestroy(()=>{h.onPaneRemove(T)});function A(E){binding_callbacks[E?"unshift":"push"](()=>{M=E,r(1,M)})}return e.$$set=E=>{"size"in E&&r(12,$=E.size),"minSize"in E&&r(13,b=E.minSize),"maxSize"in E&&r(14,g=E.maxSize),"snapSize"in E&&r(15,v=E.snapSize),"class"in E&&r(0,k=E.class),"$$scope"in E&&r(19,f=E.$$scope)},e.$$.update=()=>{e.$$.dirty&4096&&$!=null&&q($),e.$$.dirty&262144&&r(17,a=getDimensionName(o)),e.$$.dirty&196608&&r(3,i=`${a}: ${N}%;`)},[k,M,w,i,u,c,_,y,D,T,S,H,$,b,g,v,N,a,o,f,d,A]}class Pane extends SvelteComponent{constructor(t){super(),init(this,t,instance$u,create_fragment$u,safe_not_equal,{size:12,minSize:13,maxSize:14,snapSize:15,class:0})}}function fade(e,{delay:t=0,duration:r=400,easing:a=identity$3}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:r,easing:a,css:o=>`opacity: ${o*i}`}}function create_fragment$t(e){let t,r,a,i,o,u,c,d,f,m,p,h,_,y,D;const $=e[4].default,b=create_slot($,e,e[3],null);return{c(){t=element("div"),a=space(),i=element("dialog"),o=element("div"),u=element("button"),u.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="svelte-r5e5cj"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg>',c=space(),d=element("h1"),f=text(e[0]),m=space(),p=element("div"),b&&b.c(),attr(t,"class","backdrop svelte-r5e5cj"),attr(u,"class","closeDialogButton svelte-r5e5cj"),set_style(p,"margin-left","1em"),attr(o,"class","modal-box"),attr(i,"id","modal_data"),attr(i,"class","dialog svelte-r5e5cj")},m(g,v){insert(g,t,v),insert(g,a,v),insert(g,i,v),append(i,o),append(o,u),append(o,c),append(o,d),append(d,f),append(o,m),append(o,p),b&&b.m(p,null),_=!0,y||(D=[listen(window,"keydown",e[2]),listen(t,"click",e[1]),listen(u,"click",e[1])],y=!0)},p(g,[v]){e=g,(!_||v&1)&&set_data(f,e[0]),b&&b.p&&(!_||v&8)&&update_slot_base(b,$,e,e[3],_?get_slot_changes($,e[3],v,null):get_all_dirty_from_scope(e[3]),null)},i(g){_||(g&&add_render_callback(()=>{_&&(r||(r=create_bidirectional_transition(t,fade,{duration:fadeTime_ms},!0)),r.run(1))}),transition_in(b,g),g&&add_render_callback(()=>{_&&(h||(h=create_bidirectional_transition(i,fade,{duration:fadeTime_ms},!0)),h.run(1))}),_=!0)},o(g){g&&(r||(r=create_bidirectional_transition(t,fade,{duration:fadeTime_ms},!1)),r.run(0)),transition_out(b,g),g&&(h||(h=create_bidirectional_transition(i,fade,{duration:fadeTime_ms},!1)),h.run(0)),_=!1},d(g){g&&(detach(t),detach(a),detach(i)),g&&r&&r.end(),b&&b.d(g),g&&h&&h.end(),y=!1,run_all(D)}}}let fadeTime_ms=250;function instance$t(e,t,r){let a;component_subscribe(e,menuModalType,f=>r(5,a=f));let{$$slots:i={},$$scope:o}=t,{title:u=""}=t;function c(){set_store_value(menuModalType,a=null,a)}function d(f){f.key,f.keyCode===27&&c()}return e.$$set=f=>{"title"in f&&r(0,u=f.title),"$$scope"in f&&r(3,o=f.$$scope)},[u,c,d,o,i]}class Dialog extends SvelteComponent{constructor(t){super(),init(this,t,instance$t,create_fragment$t,safe_not_equal,{title:0})}}function create_fragment$s(e){let t,r,a,i,o,u,c,d,f,m,p=truncateDecimalPlaces(e[1])+"",h,_,y,D,$=truncateDecimalPlaces(e[2])+"",b,g,v;return{c(){t=element("div"),r=element("label"),a=element("span"),i=text(e[5]),o=space(),u=element("input"),c=space(),d=element("input"),f=space(),m=element("span"),h=text(p),y=space(),D=element("span"),b=text($),attr(a,"class","svelte-1o4zp2p"),attr(u,"class","numberInput svelte-1o4zp2p"),attr(u,"type","number"),attr(u,"id","val"),attr(u,"min",e[1]),attr(u,"max",e[2]),attr(u,"step",e[3]),attr(r,"for","val"),attr(r,"class","sliderLabel svelte-1o4zp2p"),attr(d,"class","sliderInput svelte-1o4zp2p"),attr(d,"type","range"),attr(d,"min",e[1]),attr(d,"max",e[2]),attr(d,"step",e[3]),attr(m,"class",_="min "+(e[1]===e[4][0]?"stop":"")+" svelte-1o4zp2p"),attr(D,"class","max svelte-1o4zp2p"),attr(t,"class","processItem svelte-1o4zp2p")},m(k,T){insert(k,t,T),append(t,r),append(r,a),append(a,i),append(r,o),append(r,u),set_input_value(u,e[0]),append(t,c),append(t,d),set_input_value(d,e[0]),append(t,f),append(t,m),append(m,h),append(t,y),append(t,D),append(D,b),g||(v=[listen(u,"change",e[8]),listen(u,"input",e[9]),listen(u,"input",e[10]),listen(d,"change",e[11]),listen(d,"input",e[12]),listen(d,"change",e[13]),listen(d,"input",e[13])],g=!0)},p(k,[T]){T&32&&set_data(i,k[5]),T&2&&attr(u,"min",k[1]),T&4&&attr(u,"max",k[2]),T&8&&attr(u,"step",k[3]),T&1&&to_number(u.value)!==k[0]&&set_input_value(u,k[0]),T&2&&attr(d,"min",k[1]),T&4&&attr(d,"max",k[2]),T&8&&attr(d,"step",k[3]),T&1&&set_input_value(d,k[0]),T&2&&p!==(p=truncateDecimalPlaces(k[1])+"")&&set_data(h,p),T&18&&_!==(_="min "+(k[1]===k[4][0]?"stop":"")+" svelte-1o4zp2p")&&attr(m,"class",_),T&4&&$!==($=truncateDecimalPlaces(k[2])+"")&&set_data(b,$)},i:noop,o:noop,d(k){k&&detach(t),g=!1,run_all(v)}}}function truncateDecimalPlaces(e,t=2){const r=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);if(!r||!r[1])return e;const a=r[1].slice(0,t);return parseFloat(r[0].replace(r[1],a))}function instance$s(e,t,r){let{min:a=-100}=t,{max:i=100}=t,{step:o=1}=t,{limits:u=[-1/0,1/0]}=t,{value:c}=t,{label:d="Label:"}=t;function f(){a<u[0]&&r(1,a=u[0]),i>u[1]&&r(2,i=u[1]),c<u[0]&&(r(0,c=u[0]),r(1,a=c)),c>u[1]&&(r(0,c=u[1]),r(2,i=c))}function m(){const b=Math.abs(i-a),g=Math.max(u[0],a+b*.2),v=Math.min(u[1],i-b*.2);Number.isInteger(o)?(c>v||c<g)&&(r(2,i=Math.ceil(c+b/2)),r(1,a=Math.floor(c-b/2))):(c>v||c<g)&&(r(2,i=c+b/2),r(1,a=c-b/2)),f()}const p=()=>m(),h=()=>{f()};function _(){c=to_number(this.value),r(0,c)}const y=()=>m(),D=()=>{f()};function $(){c=to_number(this.value),r(0,c)}return e.$$set=b=>{"min"in b&&r(1,a=b.min),"max"in b&&r(2,i=b.max),"step"in b&&r(3,o=b.step),"limits"in b&&r(4,u=b.limits),"value"in b&&r(0,c=b.value),"label"in b&&r(5,d=b.label)},e.$$.update=()=>{e.$$.dirty&1&&(m(),r(0,c))},[c,a,i,o,u,d,f,m,p,h,_,y,D,$]}class Slider extends SvelteComponent{constructor(t){super(),init(this,t,instance$s,create_fragment$s,safe_not_equal,{min:1,max:2,step:3,limits:4,value:0,label:5})}}class LuxonError extends Error{}class InvalidDateTimeError extends LuxonError{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class InvalidIntervalError extends LuxonError{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class InvalidDurationError extends LuxonError{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class ConflictingSpecificationError extends LuxonError{}class InvalidUnitError extends LuxonError{constructor(t){super(`Invalid unit ${t}`)}}class InvalidArgumentError extends LuxonError{}class ZoneIsAbstractError extends LuxonError{constructor(){super("Zone is an abstract class")}}const n="numeric",s="short",l="long",DATE_SHORT={year:n,month:n,day:n},DATE_MED={year:n,month:s,day:n},DATE_MED_WITH_WEEKDAY={year:n,month:s,day:n,weekday:s},DATE_FULL={year:n,month:l,day:n},DATE_HUGE={year:n,month:l,day:n,weekday:l},TIME_SIMPLE={hour:n,minute:n},TIME_WITH_SECONDS={hour:n,minute:n,second:n},TIME_WITH_SHORT_OFFSET={hour:n,minute:n,second:n,timeZoneName:s},TIME_WITH_LONG_OFFSET={hour:n,minute:n,second:n,timeZoneName:l},TIME_24_SIMPLE={hour:n,minute:n,hourCycle:"h23"},TIME_24_WITH_SECONDS={hour:n,minute:n,second:n,hourCycle:"h23"},TIME_24_WITH_SHORT_OFFSET={hour:n,minute:n,second:n,hourCycle:"h23",timeZoneName:s},TIME_24_WITH_LONG_OFFSET={hour:n,minute:n,second:n,hourCycle:"h23",timeZoneName:l},DATETIME_SHORT={year:n,month:n,day:n,hour:n,minute:n},DATETIME_SHORT_WITH_SECONDS={year:n,month:n,day:n,hour:n,minute:n,second:n},DATETIME_MED={year:n,month:s,day:n,hour:n,minute:n},DATETIME_MED_WITH_SECONDS={year:n,month:s,day:n,hour:n,minute:n,second:n},DATETIME_MED_WITH_WEEKDAY={year:n,month:s,day:n,weekday:s,hour:n,minute:n},DATETIME_FULL={year:n,month:l,day:n,hour:n,minute:n,timeZoneName:s},DATETIME_FULL_WITH_SECONDS={year:n,month:l,day:n,hour:n,minute:n,second:n,timeZoneName:s},DATETIME_HUGE={year:n,month:l,day:n,weekday:l,hour:n,minute:n,timeZoneName:l},DATETIME_HUGE_WITH_SECONDS={year:n,month:l,day:n,weekday:l,hour:n,minute:n,second:n,timeZoneName:l};class Zone{get type(){throw new ZoneIsAbstractError}get name(){throw new ZoneIsAbstractError}get ianaName(){return this.name}get isUniversal(){throw new ZoneIsAbstractError}offsetName(t,r){throw new ZoneIsAbstractError}formatOffset(t,r){throw new ZoneIsAbstractError}offset(t){throw new ZoneIsAbstractError}equals(t){throw new ZoneIsAbstractError}get isValid(){throw new ZoneIsAbstractError}}let singleton$1=null;class SystemZone extends Zone{static get instance(){return singleton$1===null&&(singleton$1=new SystemZone),singleton$1}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:r,locale:a}){return parseZoneInfo(t,r,a)}formatOffset(t,r){return formatOffset(this.offset(t),r)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let dtfCache={};function makeDTF(e){return dtfCache[e]||(dtfCache[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),dtfCache[e]}const typeToPos={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function hackyOffset(e,t){const r=e.format(t).replace(/\u200E/g,""),a=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,i,o,u,c,d,f,m]=a;return[u,i,o,c,d,f,m]}function partsOffset(e,t){const r=e.formatToParts(t),a=[];for(let i=0;i<r.length;i++){const{type:o,value:u}=r[i],c=typeToPos[o];o==="era"?a[c]=u:isUndefined(c)||(a[c]=parseInt(u,10))}return a}let ianaZoneCache={};class IANAZone extends Zone{static create(t){return ianaZoneCache[t]||(ianaZoneCache[t]=new IANAZone(t)),ianaZoneCache[t]}static resetCache(){ianaZoneCache={},dtfCache={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=IANAZone.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:r,locale:a}){return parseZoneInfo(t,r,a,this.name)}formatOffset(t,r){return formatOffset(this.offset(t),r)}offset(t){const r=new Date(t);if(isNaN(r))return NaN;const a=makeDTF(this.name);let[i,o,u,c,d,f,m]=a.formatToParts?partsOffset(a,r):hackyOffset(a,r);c==="BC"&&(i=-Math.abs(i)+1);const h=objToLocalTS({year:i,month:o,day:u,hour:d===24?0:d,minute:f,second:m,millisecond:0});let _=+r;const y=_%1e3;return _-=y>=0?y:1e3+y,(h-_)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let intlLFCache={};function getCachedLF(e,t={}){const r=JSON.stringify([e,t]);let a=intlLFCache[r];return a||(a=new Intl.ListFormat(e,t),intlLFCache[r]=a),a}let intlDTCache={};function getCachedDTF(e,t={}){const r=JSON.stringify([e,t]);let a=intlDTCache[r];return a||(a=new Intl.DateTimeFormat(e,t),intlDTCache[r]=a),a}let intlNumCache={};function getCachedINF(e,t={}){const r=JSON.stringify([e,t]);let a=intlNumCache[r];return a||(a=new Intl.NumberFormat(e,t),intlNumCache[r]=a),a}let intlRelCache={};function getCachedRTF(e,t={}){const{base:r,...a}=t,i=JSON.stringify([e,a]);let o=intlRelCache[i];return o||(o=new Intl.RelativeTimeFormat(e,t),intlRelCache[i]=o),o}let sysLocaleCache=null;function systemLocale(){return sysLocaleCache||(sysLocaleCache=new Intl.DateTimeFormat().resolvedOptions().locale,sysLocaleCache)}let weekInfoCache={};function getCachedWeekInfo(e){let t=weekInfoCache[e];if(!t){const r=new Intl.Locale(e);t="getWeekInfo"in r?r.getWeekInfo():r.weekInfo,weekInfoCache[e]=t}return t}function parseLocaleString(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const r=e.indexOf("-u-");if(r===-1)return[e];{let a,i;try{a=getCachedDTF(e).resolvedOptions(),i=e}catch{const d=e.substring(0,r);a=getCachedDTF(d).resolvedOptions(),i=d}const{numberingSystem:o,calendar:u}=a;return[i,o,u]}}function intlConfigString(e,t,r){return(r||t)&&(e.includes("-u-")||(e+="-u"),r&&(e+=`-ca-${r}`),t&&(e+=`-nu-${t}`)),e}function mapMonths(e){const t=[];for(let r=1;r<=12;r++){const a=DateTime.utc(2009,r,1);t.push(e(a))}return t}function mapWeekdays(e){const t=[];for(let r=1;r<=7;r++){const a=DateTime.utc(2016,11,13+r);t.push(e(a))}return t}function listStuff(e,t,r,a){const i=e.listingMode();return i==="error"?null:i==="en"?r(t):a(t)}function supportsFastNumbers(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class PolyNumberFormatter{constructor(t,r,a){this.padTo=a.padTo||0,this.floor=a.floor||!1;const{padTo:i,floor:o,...u}=a;if(!r||Object.keys(u).length>0){const c={useGrouping:!1,...a};a.padTo>0&&(c.minimumIntegerDigits=a.padTo),this.inf=getCachedINF(t,c)}}format(t){if(this.inf){const r=this.floor?Math.floor(t):t;return this.inf.format(r)}else{const r=this.floor?Math.floor(t):roundTo(t,3);return padStart(r,this.padTo)}}}class PolyDateFormatter{constructor(t,r,a){this.opts=a,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const u=-1*(t.offset/60),c=u>=0?`Etc/GMT+${u}`:`Etc/GMT${u}`;t.offset!==0&&IANAZone.create(c).valid?(i=c,this.dt=t):(i="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,i=t.zone.name):(i="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const o={...this.opts};o.timeZone=o.timeZone||i,this.dtf=getCachedDTF(r,o)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(r=>{if(r.type==="timeZoneName"){const a=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...r,value:a}}else return r}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class PolyRelFormatter{constructor(t,r,a){this.opts={style:"long",...a},!r&&hasRelative()&&(this.rtf=getCachedRTF(t,a))}format(t,r){return this.rtf?this.rtf.format(t,r):formatRelativeTime(r,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,r){return this.rtf?this.rtf.formatToParts(t,r):[]}}const fallbackWeekSettings={firstDay:1,minimalDays:4,weekend:[6,7]};class Locale{static fromOpts(t){return Locale.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,r,a,i,o=!1){const u=t||Settings.defaultLocale,c=u||(o?"en-US":systemLocale()),d=r||Settings.defaultNumberingSystem,f=a||Settings.defaultOutputCalendar,m=validateWeekSettings(i)||Settings.defaultWeekSettings;return new Locale(c,d,f,m,u)}static resetCache(){sysLocaleCache=null,intlDTCache={},intlNumCache={},intlRelCache={}}static fromObject({locale:t,numberingSystem:r,outputCalendar:a,weekSettings:i}={}){return Locale.create(t,r,a,i)}constructor(t,r,a,i,o){const[u,c,d]=parseLocaleString(t);this.locale=u,this.numberingSystem=r||c||null,this.outputCalendar=a||d||null,this.weekSettings=i,this.intl=intlConfigString(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=o,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=supportsFastNumbers(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&r?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:Locale.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,validateWeekSettings(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,r=!1){return listStuff(this,t,months,()=>{const a=r?{month:t,day:"numeric"}:{month:t},i=r?"format":"standalone";return this.monthsCache[i][t]||(this.monthsCache[i][t]=mapMonths(o=>this.extract(o,a,"month"))),this.monthsCache[i][t]})}weekdays(t,r=!1){return listStuff(this,t,weekdays,()=>{const a=r?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},i=r?"format":"standalone";return this.weekdaysCache[i][t]||(this.weekdaysCache[i][t]=mapWeekdays(o=>this.extract(o,a,"weekday"))),this.weekdaysCache[i][t]})}meridiems(){return listStuff(this,void 0,()=>meridiems,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[DateTime.utc(2016,11,13,9),DateTime.utc(2016,11,13,19)].map(r=>this.extract(r,t,"dayperiod"))}return this.meridiemCache})}eras(t){return listStuff(this,t,eras,()=>{const r={era:t};return this.eraCache[t]||(this.eraCache[t]=[DateTime.utc(-40,1,1),DateTime.utc(2017,1,1)].map(a=>this.extract(a,r,"era"))),this.eraCache[t]})}extract(t,r,a){const i=this.dtFormatter(t,r),o=i.formatToParts(),u=o.find(c=>c.type.toLowerCase()===a);return u?u.value:null}numberFormatter(t={}){return new PolyNumberFormatter(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,r={}){return new PolyDateFormatter(t,this.intl,r)}relFormatter(t={}){return new PolyRelFormatter(this.intl,this.isEnglish(),t)}listFormatter(t={}){return getCachedLF(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:hasLocaleWeekInfo()?getCachedWeekInfo(this.locale):fallbackWeekSettings}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}}let singleton=null;class FixedOffsetZone extends Zone{static get utcInstance(){return singleton===null&&(singleton=new FixedOffsetZone(0)),singleton}static instance(t){return t===0?FixedOffsetZone.utcInstance:new FixedOffsetZone(t)}static parseSpecifier(t){if(t){const r=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new FixedOffsetZone(signedOffset(r[1],r[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${formatOffset(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${formatOffset(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,r){return formatOffset(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class InvalidZone extends Zone{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function normalizeZone(e,t){if(isUndefined(e)||e===null)return t;if(e instanceof Zone)return e;if(isString(e)){const r=e.toLowerCase();return r==="default"?t:r==="local"||r==="system"?SystemZone.instance:r==="utc"||r==="gmt"?FixedOffsetZone.utcInstance:FixedOffsetZone.parseSpecifier(r)||IANAZone.create(e)}else return isNumber(e)?FixedOffsetZone.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new InvalidZone(e)}let now=()=>Date.now(),defaultZone="system",defaultLocale$1=null,defaultNumberingSystem=null,defaultOutputCalendar=null,twoDigitCutoffYear=60,throwOnInvalid,defaultWeekSettings=null;class Settings{static get now(){return now}static set now(t){now=t}static set defaultZone(t){defaultZone=t}static get defaultZone(){return normalizeZone(defaultZone,SystemZone.instance)}static get defaultLocale(){return defaultLocale$1}static set defaultLocale(t){defaultLocale$1=t}static get defaultNumberingSystem(){return defaultNumberingSystem}static set defaultNumberingSystem(t){defaultNumberingSystem=t}static get defaultOutputCalendar(){return defaultOutputCalendar}static set defaultOutputCalendar(t){defaultOutputCalendar=t}static get defaultWeekSettings(){return defaultWeekSettings}static set defaultWeekSettings(t){defaultWeekSettings=validateWeekSettings(t)}static get twoDigitCutoffYear(){return twoDigitCutoffYear}static set twoDigitCutoffYear(t){twoDigitCutoffYear=t%100}static get throwOnInvalid(){return throwOnInvalid}static set throwOnInvalid(t){throwOnInvalid=t}static resetCaches(){Locale.resetCache(),IANAZone.resetCache()}}class Invalid{constructor(t,r){this.reason=t,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const nonLeapLadder=[0,31,59,90,120,151,181,212,243,273,304,334],leapLadder=[0,31,60,91,121,152,182,213,244,274,305,335];function unitOutOfRange(e,t){return new Invalid("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function dayOfWeek(e,t,r){const a=new Date(Date.UTC(e,t-1,r));e<100&&e>=0&&a.setUTCFullYear(a.getUTCFullYear()-1900);const i=a.getUTCDay();return i===0?7:i}function computeOrdinal(e,t,r){return r+(isLeapYear(e)?leapLadder:nonLeapLadder)[t-1]}function uncomputeOrdinal(e,t){const r=isLeapYear(e)?leapLadder:nonLeapLadder,a=r.findIndex(o=>o<t),i=t-r[a];return{month:a+1,day:i}}function isoWeekdayToLocal(e,t){return(e-t+7)%7+1}function gregorianToWeek(e,t=4,r=1){const{year:a,month:i,day:o}=e,u=computeOrdinal(a,i,o),c=isoWeekdayToLocal(dayOfWeek(a,i,o),r);let d=Math.floor((u-c+14-t)/7),f;return d<1?(f=a-1,d=weeksInWeekYear(f,t,r)):d>weeksInWeekYear(a,t,r)?(f=a+1,d=1):f=a,{weekYear:f,weekNumber:d,weekday:c,...timeObject(e)}}function weekToGregorian(e,t=4,r=1){const{weekYear:a,weekNumber:i,weekday:o}=e,u=isoWeekdayToLocal(dayOfWeek(a,1,t),r),c=daysInYear(a);let d=i*7+o-u-7+t,f;d<1?(f=a-1,d+=daysInYear(f)):d>c?(f=a+1,d-=daysInYear(a)):f=a;const{month:m,day:p}=uncomputeOrdinal(f,d);return{year:f,month:m,day:p,...timeObject(e)}}function gregorianToOrdinal(e){const{year:t,month:r,day:a}=e,i=computeOrdinal(t,r,a);return{year:t,ordinal:i,...timeObject(e)}}function ordinalToGregorian(e){const{year:t,ordinal:r}=e,{month:a,day:i}=uncomputeOrdinal(t,r);return{year:t,month:a,day:i,...timeObject(e)}}function usesLocalWeekValues(e,t){if(!isUndefined(e.localWeekday)||!isUndefined(e.localWeekNumber)||!isUndefined(e.localWeekYear)){if(!isUndefined(e.weekday)||!isUndefined(e.weekNumber)||!isUndefined(e.weekYear))throw new ConflictingSpecificationError("Cannot mix locale-based week fields with ISO-based week fields");return isUndefined(e.localWeekday)||(e.weekday=e.localWeekday),isUndefined(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),isUndefined(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function hasInvalidWeekData(e,t=4,r=1){const a=isInteger(e.weekYear),i=integerBetween(e.weekNumber,1,weeksInWeekYear(e.weekYear,t,r)),o=integerBetween(e.weekday,1,7);return a?i?o?!1:unitOutOfRange("weekday",e.weekday):unitOutOfRange("week",e.weekNumber):unitOutOfRange("weekYear",e.weekYear)}function hasInvalidOrdinalData(e){const t=isInteger(e.year),r=integerBetween(e.ordinal,1,daysInYear(e.year));return t?r?!1:unitOutOfRange("ordinal",e.ordinal):unitOutOfRange("year",e.year)}function hasInvalidGregorianData(e){const t=isInteger(e.year),r=integerBetween(e.month,1,12),a=integerBetween(e.day,1,daysInMonth(e.year,e.month));return t?r?a?!1:unitOutOfRange("day",e.day):unitOutOfRange("month",e.month):unitOutOfRange("year",e.year)}function hasInvalidTimeData(e){const{hour:t,minute:r,second:a,millisecond:i}=e,o=integerBetween(t,0,23)||t===24&&r===0&&a===0&&i===0,u=integerBetween(r,0,59),c=integerBetween(a,0,59),d=integerBetween(i,0,999);return o?u?c?d?!1:unitOutOfRange("millisecond",i):unitOutOfRange("second",a):unitOutOfRange("minute",r):unitOutOfRange("hour",t)}function isUndefined(e){return typeof e>"u"}function isNumber(e){return typeof e=="number"}function isInteger(e){return typeof e=="number"&&e%1===0}function isString(e){return typeof e=="string"}function isDate(e){return Object.prototype.toString.call(e)==="[object Date]"}function hasRelative(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function hasLocaleWeekInfo(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function maybeArray(e){return Array.isArray(e)?e:[e]}function bestBy(e,t,r){if(e.length!==0)return e.reduce((a,i)=>{const o=[t(i),i];return a&&r(a[0],o[0])===a[0]?a:o},null)[1]}function pick(e,t){return t.reduce((r,a)=>(r[a]=e[a],r),{})}function hasOwnProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function validateWeekSettings(e){if(e==null)return null;if(typeof e!="object")throw new InvalidArgumentError("Week settings must be an object");if(!integerBetween(e.firstDay,1,7)||!integerBetween(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(t=>!integerBetween(t,1,7)))throw new InvalidArgumentError("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function integerBetween(e,t,r){return isInteger(e)&&e>=t&&e<=r}function floorMod(e,t){return e-t*Math.floor(e/t)}function padStart(e,t=2){const r=e<0;let a;return r?a="-"+(""+-e).padStart(t,"0"):a=(""+e).padStart(t,"0"),a}function parseInteger(e){if(!(isUndefined(e)||e===null||e===""))return parseInt(e,10)}function parseFloating(e){if(!(isUndefined(e)||e===null||e===""))return parseFloat(e)}function parseMillis(e){if(!(isUndefined(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function roundTo(e,t,r=!1){const a=10**t;return(r?Math.trunc:Math.round)(e*a)/a}function isLeapYear(e){return e%4===0&&(e%100!==0||e%400===0)}function daysInYear(e){return isLeapYear(e)?366:365}function daysInMonth(e,t){const r=floorMod(t-1,12)+1,a=e+(t-r)/12;return r===2?isLeapYear(a)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function objToLocalTS(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function firstWeekOffset(e,t,r){return-isoWeekdayToLocal(dayOfWeek(e,1,t),r)+t-1}function weeksInWeekYear(e,t=4,r=1){const a=firstWeekOffset(e,t,r),i=firstWeekOffset(e+1,t,r);return(daysInYear(e)-a+i)/7}function untruncateYear(e){return e>99?e:e>Settings.twoDigitCutoffYear?1900+e:2e3+e}function parseZoneInfo(e,t,r,a=null){const i=new Date(e),o={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};a&&(o.timeZone=a);const u={timeZoneName:t,...o},c=new Intl.DateTimeFormat(r,u).formatToParts(i).find(d=>d.type.toLowerCase()==="timezonename");return c?c.value:null}function signedOffset(e,t){let r=parseInt(e,10);Number.isNaN(r)&&(r=0);const a=parseInt(t,10)||0,i=r<0||Object.is(r,-0)?-a:a;return r*60+i}function asNumber(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new InvalidArgumentError(`Invalid unit value ${e}`);return t}function normalizeObject(e,t){const r={};for(const a in e)if(hasOwnProperty(e,a)){const i=e[a];if(i==null)continue;r[t(a)]=asNumber(i)}return r}function formatOffset(e,t){const r=Math.trunc(Math.abs(e/60)),a=Math.trunc(Math.abs(e%60)),i=e>=0?"+":"-";switch(t){case"short":return`${i}${padStart(r,2)}:${padStart(a,2)}`;case"narrow":return`${i}${r}${a>0?`:${a}`:""}`;case"techie":return`${i}${padStart(r,2)}${padStart(a,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function timeObject(e){return pick(e,["hour","minute","second","millisecond"])}const monthsLong=["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthsNarrow=["J","F","M","A","M","J","J","A","S","O","N","D"];function months(e){switch(e){case"narrow":return[...monthsNarrow];case"short":return[...monthsShort];case"long":return[...monthsLong];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const weekdaysLong=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],weekdaysShort=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],weekdaysNarrow=["M","T","W","T","F","S","S"];function weekdays(e){switch(e){case"narrow":return[...weekdaysNarrow];case"short":return[...weekdaysShort];case"long":return[...weekdaysLong];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const meridiems=["AM","PM"],erasLong=["Before Christ","Anno Domini"],erasShort=["BC","AD"],erasNarrow=["B","A"];function eras(e){switch(e){case"narrow":return[...erasNarrow];case"short":return[...erasShort];case"long":return[...erasLong];default:return null}}function meridiemForDateTime(e){return meridiems[e.hour<12?0:1]}function weekdayForDateTime(e,t){return weekdays(t)[e.weekday-1]}function monthForDateTime(e,t){return months(t)[e.month-1]}function eraForDateTime(e,t){return eras(t)[e.year<0?0:1]}function formatRelativeTime(e,t,r="always",a=!1){const i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},o=["hours","minutes","seconds"].indexOf(e)===-1;if(r==="auto"&&o){const p=e==="days";switch(t){case 1:return p?"tomorrow":`next ${i[e][0]}`;case-1:return p?"yesterday":`last ${i[e][0]}`;case 0:return p?"today":`this ${i[e][0]}`}}const u=Object.is(t,-0)||t<0,c=Math.abs(t),d=c===1,f=i[e],m=a?d?f[1]:f[2]||f[1]:d?i[e][0]:e;return u?`${c} ${m} ago`:`in ${c} ${m}`}function stringifyTokens(e,t){let r="";for(const a of e)a.literal?r+=a.val:r+=t(a.val);return r}const macroTokenToFormatOpts={D:DATE_SHORT,DD:DATE_MED,DDD:DATE_FULL,DDDD:DATE_HUGE,t:TIME_SIMPLE,tt:TIME_WITH_SECONDS,ttt:TIME_WITH_SHORT_OFFSET,tttt:TIME_WITH_LONG_OFFSET,T:TIME_24_SIMPLE,TT:TIME_24_WITH_SECONDS,TTT:TIME_24_WITH_SHORT_OFFSET,TTTT:TIME_24_WITH_LONG_OFFSET,f:DATETIME_SHORT,ff:DATETIME_MED,fff:DATETIME_FULL,ffff:DATETIME_HUGE,F:DATETIME_SHORT_WITH_SECONDS,FF:DATETIME_MED_WITH_SECONDS,FFF:DATETIME_FULL_WITH_SECONDS,FFFF:DATETIME_HUGE_WITH_SECONDS};class Formatter{static create(t,r={}){return new Formatter(t,r)}static parseFormat(t){let r=null,a="",i=!1;const o=[];for(let u=0;u<t.length;u++){const c=t.charAt(u);c==="'"?(a.length>0&&o.push({literal:i||/^\s+$/.test(a),val:a}),r=null,a="",i=!i):i||c===r?a+=c:(a.length>0&&o.push({literal:/^\s+$/.test(a),val:a}),a=c,r=c)}return a.length>0&&o.push({literal:i||/^\s+$/.test(a),val:a}),o}static macroTokenToFormatOpts(t){return macroTokenToFormatOpts[t]}constructor(t,r){this.opts=r,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...r}).format()}dtFormatter(t,r={}){return this.loc.dtFormatter(t,{...this.opts,...r})}formatDateTime(t,r){return this.dtFormatter(t,r).format()}formatDateTimeParts(t,r){return this.dtFormatter(t,r).formatToParts()}formatInterval(t,r){return this.dtFormatter(t.start,r).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,r){return this.dtFormatter(t,r).resolvedOptions()}num(t,r=0){if(this.opts.forceSimple)return padStart(t,r);const a={...this.opts};return r>0&&(a.padTo=r),this.loc.numberFormatter(a).format(t)}formatDateTimeFromString(t,r){const a=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",o=(_,y)=>this.loc.extract(t,_,y),u=_=>t.isOffsetFixed&&t.offset===0&&_.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,_.format):"",c=()=>a?meridiemForDateTime(t):o({hour:"numeric",hourCycle:"h12"},"dayperiod"),d=(_,y)=>a?monthForDateTime(t,_):o(y?{month:_}:{month:_,day:"numeric"},"month"),f=(_,y)=>a?weekdayForDateTime(t,_):o(y?{weekday:_}:{weekday:_,month:"long",day:"numeric"},"weekday"),m=_=>{const y=Formatter.macroTokenToFormatOpts(_);return y?this.formatWithSystemDefault(t,y):_},p=_=>a?eraForDateTime(t,_):o({era:_},"era"),h=_=>{switch(_){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return u({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return u({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return u({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return c();case"d":return i?o({day:"numeric"},"day"):this.num(t.day);case"dd":return i?o({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return f("short",!0);case"cccc":return f("long",!0);case"ccccc":return f("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return f("short",!1);case"EEEE":return f("long",!1);case"EEEEE":return f("narrow",!1);case"L":return i?o({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return i?o({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return d("short",!0);case"LLLL":return d("long",!0);case"LLLLL":return d("narrow",!0);case"M":return i?o({month:"numeric"},"month"):this.num(t.month);case"MM":return i?o({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return d("short",!1);case"MMMM":return d("long",!1);case"MMMMM":return d("narrow",!1);case"y":return i?o({year:"numeric"},"year"):this.num(t.year);case"yy":return i?o({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return i?o({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return i?o({year:"numeric"},"year"):this.num(t.year,6);case"G":return p("short");case"GG":return p("long");case"GGGGG":return p("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return m(_)}};return stringifyTokens(Formatter.parseFormat(r),h)}formatDurationFromString(t,r){const a=d=>{switch(d[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},i=d=>f=>{const m=a(f);return m?this.num(d.get(m),f.length):f},o=Formatter.parseFormat(r),u=o.reduce((d,{literal:f,val:m})=>f?d:d.concat(m),[]),c=t.shiftTo(...u.map(a).filter(d=>d));return stringifyTokens(o,i(c))}}const ianaRegex=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function combineRegexes(...e){const t=e.reduce((r,a)=>r+a.source,"");return RegExp(`^${t}$`)}function combineExtractors(...e){return t=>e.reduce(([r,a,i],o)=>{const[u,c,d]=o(t,i);return[{...r,...u},c||a,d]},[{},null,1]).slice(0,2)}function parse(e,...t){if(e==null)return[null,null];for(const[r,a]of t){const i=r.exec(e);if(i)return a(i)}return[null,null]}function simpleParse(...e){return(t,r)=>{const a={};let i;for(i=0;i<e.length;i++)a[e[i]]=parseInteger(t[r+i]);return[a,null,r+i]}}const offsetRegex=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,isoExtendedZone=`(?:${offsetRegex.source}?(?:\\[(${ianaRegex.source})\\])?)?`,isoTimeBaseRegex=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,isoTimeRegex=RegExp(`${isoTimeBaseRegex.source}${isoExtendedZone}`),isoTimeExtensionRegex=RegExp(`(?:T${isoTimeRegex.source})?`),isoYmdRegex=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,isoWeekRegex=/(\d{4})-?W(\d\d)(?:-?(\d))?/,isoOrdinalRegex=/(\d{4})-?(\d{3})/,extractISOWeekData=simpleParse("weekYear","weekNumber","weekDay"),extractISOOrdinalData=simpleParse("year","ordinal"),sqlYmdRegex=/(\d{4})-(\d\d)-(\d\d)/,sqlTimeRegex=RegExp(`${isoTimeBaseRegex.source} ?(?:${offsetRegex.source}|(${ianaRegex.source}))?`),sqlTimeExtensionRegex=RegExp(`(?: ${sqlTimeRegex.source})?`);function int(e,t,r){const a=e[t];return isUndefined(a)?r:parseInteger(a)}function extractISOYmd(e,t){return[{year:int(e,t),month:int(e,t+1,1),day:int(e,t+2,1)},null,t+3]}function extractISOTime(e,t){return[{hours:int(e,t,0),minutes:int(e,t+1,0),seconds:int(e,t+2,0),milliseconds:parseMillis(e[t+3])},null,t+4]}function extractISOOffset(e,t){const r=!e[t]&&!e[t+1],a=signedOffset(e[t+1],e[t+2]),i=r?null:FixedOffsetZone.instance(a);return[{},i,t+3]}function extractIANAZone(e,t){const r=e[t]?IANAZone.create(e[t]):null;return[{},r,t+1]}const isoTimeOnly=RegExp(`^T?${isoTimeBaseRegex.source}$`),isoDuration=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function extractISODuration(e){const[t,r,a,i,o,u,c,d,f]=e,m=t[0]==="-",p=d&&d[0]==="-",h=(_,y=!1)=>_!==void 0&&(y||_&&m)?-_:_;return[{years:h(parseFloating(r)),months:h(parseFloating(a)),weeks:h(parseFloating(i)),days:h(parseFloating(o)),hours:h(parseFloating(u)),minutes:h(parseFloating(c)),seconds:h(parseFloating(d),d==="-0"),milliseconds:h(parseMillis(f),p)}]}const obsOffsets={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function fromStrings(e,t,r,a,i,o,u){const c={year:t.length===2?untruncateYear(parseInteger(t)):parseInteger(t),month:monthsShort.indexOf(r)+1,day:parseInteger(a),hour:parseInteger(i),minute:parseInteger(o)};return u&&(c.second=parseInteger(u)),e&&(c.weekday=e.length>3?weekdaysLong.indexOf(e)+1:weekdaysShort.indexOf(e)+1),c}const rfc2822=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function extractRFC2822(e){const[,t,r,a,i,o,u,c,d,f,m,p]=e,h=fromStrings(t,i,a,r,o,u,c);let _;return d?_=obsOffsets[d]:f?_=0:_=signedOffset(m,p),[h,new FixedOffsetZone(_)]}function preprocessRFC2822(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const rfc1123=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,rfc850=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,ascii=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function extractRFC1123Or850(e){const[,t,r,a,i,o,u,c]=e;return[fromStrings(t,i,a,r,o,u,c),FixedOffsetZone.utcInstance]}function extractASCII(e){const[,t,r,a,i,o,u,c]=e;return[fromStrings(t,c,r,a,i,o,u),FixedOffsetZone.utcInstance]}const isoYmdWithTimeExtensionRegex=combineRegexes(isoYmdRegex,isoTimeExtensionRegex),isoWeekWithTimeExtensionRegex=combineRegexes(isoWeekRegex,isoTimeExtensionRegex),isoOrdinalWithTimeExtensionRegex=combineRegexes(isoOrdinalRegex,isoTimeExtensionRegex),isoTimeCombinedRegex=combineRegexes(isoTimeRegex),extractISOYmdTimeAndOffset=combineExtractors(extractISOYmd,extractISOTime,extractISOOffset,extractIANAZone),extractISOWeekTimeAndOffset=combineExtractors(extractISOWeekData,extractISOTime,extractISOOffset,extractIANAZone),extractISOOrdinalDateAndTime=combineExtractors(extractISOOrdinalData,extractISOTime,extractISOOffset,extractIANAZone),extractISOTimeAndOffset=combineExtractors(extractISOTime,extractISOOffset,extractIANAZone);function parseISODate(e){return parse(e,[isoYmdWithTimeExtensionRegex,extractISOYmdTimeAndOffset],[isoWeekWithTimeExtensionRegex,extractISOWeekTimeAndOffset],[isoOrdinalWithTimeExtensionRegex,extractISOOrdinalDateAndTime],[isoTimeCombinedRegex,extractISOTimeAndOffset])}function parseRFC2822Date(e){return parse(preprocessRFC2822(e),[rfc2822,extractRFC2822])}function parseHTTPDate(e){return parse(e,[rfc1123,extractRFC1123Or850],[rfc850,extractRFC1123Or850],[ascii,extractASCII])}function parseISODuration(e){return parse(e,[isoDuration,extractISODuration])}const extractISOTimeOnly=combineExtractors(extractISOTime);function parseISOTimeOnly(e){return parse(e,[isoTimeOnly,extractISOTimeOnly])}const sqlYmdWithTimeExtensionRegex=combineRegexes(sqlYmdRegex,sqlTimeExtensionRegex),sqlTimeCombinedRegex=combineRegexes(sqlTimeRegex),extractISOTimeOffsetAndIANAZone=combineExtractors(extractISOTime,extractISOOffset,extractIANAZone);function parseSQL(e){return parse(e,[sqlYmdWithTimeExtensionRegex,extractISOYmdTimeAndOffset],[sqlTimeCombinedRegex,extractISOTimeOffsetAndIANAZone])}const INVALID$2="Invalid Duration",lowOrderMatrix={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},casualMatrix={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...lowOrderMatrix},daysInYearAccurate=146097/400,daysInMonthAccurate=146097/4800,accurateMatrix={years:{quarters:4,months:12,weeks:daysInYearAccurate/7,days:daysInYearAccurate,hours:daysInYearAccurate*24,minutes:daysInYearAccurate*24*60,seconds:daysInYearAccurate*24*60*60,milliseconds:daysInYearAccurate*24*60*60*1e3},quarters:{months:3,weeks:daysInYearAccurate/28,days:daysInYearAccurate/4,hours:daysInYearAccurate*24/4,minutes:daysInYearAccurate*24*60/4,seconds:daysInYearAccurate*24*60*60/4,milliseconds:daysInYearAccurate*24*60*60*1e3/4},months:{weeks:daysInMonthAccurate/7,days:daysInMonthAccurate,hours:daysInMonthAccurate*24,minutes:daysInMonthAccurate*24*60,seconds:daysInMonthAccurate*24*60*60,milliseconds:daysInMonthAccurate*24*60*60*1e3},...lowOrderMatrix},orderedUnits$1=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],reverseUnits=orderedUnits$1.slice(0).reverse();function clone$1(e,t,r=!1){const a={values:r?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new Duration(a)}function durationToMillis(e,t){let r=t.milliseconds??0;for(const a of reverseUnits.slice(1))t[a]&&(r+=t[a]*e[a].milliseconds);return r}function normalizeValues(e,t){const r=durationToMillis(e,t)<0?-1:1;orderedUnits$1.reduceRight((a,i)=>{if(isUndefined(t[i]))return a;if(a){const o=t[a]*r,u=e[i][a],c=Math.floor(o/u);t[i]+=c*r,t[a]-=c*u*r}return i},null),orderedUnits$1.reduce((a,i)=>{if(isUndefined(t[i]))return a;if(a){const o=t[a]%1;t[a]-=o,t[i]+=o*e[a][i]}return i},null)}function removeZeroes(e){const t={};for(const[r,a]of Object.entries(e))a!==0&&(t[r]=a);return t}class Duration{constructor(t){const r=t.conversionAccuracy==="longterm"||!1;let a=r?accurateMatrix:casualMatrix;t.matrix&&(a=t.matrix),this.values=t.values,this.loc=t.loc||Locale.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=a,this.isLuxonDuration=!0}static fromMillis(t,r){return Duration.fromObject({milliseconds:t},r)}static fromObject(t,r={}){if(t==null||typeof t!="object")throw new InvalidArgumentError(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new Duration({values:normalizeObject(t,Duration.normalizeUnit),loc:Locale.fromObject(r),conversionAccuracy:r.conversionAccuracy,matrix:r.matrix})}static fromDurationLike(t){if(isNumber(t))return Duration.fromMillis(t);if(Duration.isDuration(t))return t;if(typeof t=="object")return Duration.fromObject(t);throw new InvalidArgumentError(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,r){const[a]=parseISODuration(t);return a?Duration.fromObject(a,r):Duration.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,r){const[a]=parseISOTimeOnly(t);return a?Duration.fromObject(a,r):Duration.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,r=null){if(!t)throw new InvalidArgumentError("need to specify a reason the Duration is invalid");const a=t instanceof Invalid?t:new Invalid(t,r);if(Settings.throwOnInvalid)throw new InvalidDurationError(a);return new Duration({invalid:a})}static normalizeUnit(t){const r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!r)throw new InvalidUnitError(t);return r}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,r={}){const a={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?Formatter.create(this.loc,a).formatDurationFromString(this,t):INVALID$2}toHuman(t={}){if(!this.isValid)return INVALID$2;const r=orderedUnits$1.map(a=>{const i=this.values[a];return isUndefined(i)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:a.slice(0,-1)}).format(i)}).filter(a=>a);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=roundTo(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const r=this.toMillis();return r<0||r>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},DateTime.fromMillis(r,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?durationToMillis(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const r=Duration.fromDurationLike(t),a={};for(const i of orderedUnits$1)(hasOwnProperty(r.values,i)||hasOwnProperty(this.values,i))&&(a[i]=r.get(i)+this.get(i));return clone$1(this,{values:a},!0)}minus(t){if(!this.isValid)return this;const r=Duration.fromDurationLike(t);return this.plus(r.negate())}mapUnits(t){if(!this.isValid)return this;const r={};for(const a of Object.keys(this.values))r[a]=asNumber(t(this.values[a],a));return clone$1(this,{values:r},!0)}get(t){return this[Duration.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const r={...this.values,...normalizeObject(t,Duration.normalizeUnit)};return clone$1(this,{values:r})}reconfigure({locale:t,numberingSystem:r,conversionAccuracy:a,matrix:i}={}){const u={loc:this.loc.clone({locale:t,numberingSystem:r}),matrix:i,conversionAccuracy:a};return clone$1(this,u)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return normalizeValues(this.matrix,t),clone$1(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=removeZeroes(this.normalize().shiftToAll().toObject());return clone$1(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(u=>Duration.normalizeUnit(u));const r={},a={},i=this.toObject();let o;for(const u of orderedUnits$1)if(t.indexOf(u)>=0){o=u;let c=0;for(const f in a)c+=this.matrix[f][u]*a[f],a[f]=0;isNumber(i[u])&&(c+=i[u]);const d=Math.trunc(c);r[u]=d,a[u]=(c*1e3-d*1e3)/1e3}else isNumber(i[u])&&(a[u]=i[u]);for(const u in a)a[u]!==0&&(r[o]+=u===o?a[u]:a[u]/this.matrix[o][u]);return normalizeValues(this.matrix,r),clone$1(this,{values:r},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const r of Object.keys(this.values))t[r]=this.values[r]===0?0:-this.values[r];return clone$1(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function r(a,i){return a===void 0||a===0?i===void 0||i===0:a===i}for(const a of orderedUnits$1)if(!r(this.values[a],t.values[a]))return!1;return!0}}const INVALID$1="Invalid Interval";function validateStartEnd(e,t){return!e||!e.isValid?Interval.invalid("missing or invalid start"):!t||!t.isValid?Interval.invalid("missing or invalid end"):t<e?Interval.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class Interval{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,r=null){if(!t)throw new InvalidArgumentError("need to specify a reason the Interval is invalid");const a=t instanceof Invalid?t:new Invalid(t,r);if(Settings.throwOnInvalid)throw new InvalidIntervalError(a);return new Interval({invalid:a})}static fromDateTimes(t,r){const a=friendlyDateTime(t),i=friendlyDateTime(r),o=validateStartEnd(a,i);return o??new Interval({start:a,end:i})}static after(t,r){const a=Duration.fromDurationLike(r),i=friendlyDateTime(t);return Interval.fromDateTimes(i,i.plus(a))}static before(t,r){const a=Duration.fromDurationLike(r),i=friendlyDateTime(t);return Interval.fromDateTimes(i.minus(a),i)}static fromISO(t,r){const[a,i]=(t||"").split("/",2);if(a&&i){let o,u;try{o=DateTime.fromISO(a,r),u=o.isValid}catch{u=!1}let c,d;try{c=DateTime.fromISO(i,r),d=c.isValid}catch{d=!1}if(u&&d)return Interval.fromDateTimes(o,c);if(u){const f=Duration.fromISO(i,r);if(f.isValid)return Interval.after(o,f)}else if(d){const f=Duration.fromISO(a,r);if(f.isValid)return Interval.before(c,f)}}return Interval.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",r){if(!this.isValid)return NaN;const a=this.start.startOf(t,r);let i;return r!=null&&r.useLocaleWeeks?i=this.end.reconfigure({locale:a.locale}):i=this.end,i=i.startOf(t,r),Math.floor(i.diff(a,t).get(t))+(i.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:r}={}){return this.isValid?Interval.fromDateTimes(t||this.s,r||this.e):this}splitAt(...t){if(!this.isValid)return[];const r=t.map(friendlyDateTime).filter(u=>this.contains(u)).sort((u,c)=>u.toMillis()-c.toMillis()),a=[];let{s:i}=this,o=0;for(;i<this.e;){const u=r[o]||this.e,c=+u>+this.e?this.e:u;a.push(Interval.fromDateTimes(i,c)),i=c,o+=1}return a}splitBy(t){const r=Duration.fromDurationLike(t);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s:a}=this,i=1,o;const u=[];for(;a<this.e;){const c=this.start.plus(r.mapUnits(d=>d*i));o=+c>+this.e?this.e:c,u.push(Interval.fromDateTimes(a,o)),a=o,i+=1}return u}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const r=this.s>t.s?this.s:t.s,a=this.e<t.e?this.e:t.e;return r>=a?null:Interval.fromDateTimes(r,a)}union(t){if(!this.isValid)return this;const r=this.s<t.s?this.s:t.s,a=this.e>t.e?this.e:t.e;return Interval.fromDateTimes(r,a)}static merge(t){const[r,a]=t.sort((i,o)=>i.s-o.s).reduce(([i,o],u)=>o?o.overlaps(u)||o.abutsStart(u)?[i,o.union(u)]:[i.concat([o]),u]:[i,u],[[],null]);return a&&r.push(a),r}static xor(t){let r=null,a=0;const i=[],o=t.map(d=>[{time:d.s,type:"s"},{time:d.e,type:"e"}]),u=Array.prototype.concat(...o),c=u.sort((d,f)=>d.time-f.time);for(const d of c)a+=d.type==="s"?1:-1,a===1?r=d.time:(r&&+r!=+d.time&&i.push(Interval.fromDateTimes(r,d.time)),r=null);return Interval.merge(i)}difference(...t){return Interval.xor([this].concat(t)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:INVALID$1}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=DATE_SHORT,r={}){return this.isValid?Formatter.create(this.s.loc.clone(r),t).formatInterval(this):INVALID$1}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:INVALID$1}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:INVALID$1}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:INVALID$1}toFormat(t,{separator:r="  "}={}){return this.isValid?`${this.s.toFormat(t)}${r}${this.e.toFormat(t)}`:INVALID$1}toDuration(t,r){return this.isValid?this.e.diff(this.s,t,r):Duration.invalid(this.invalidReason)}mapEndpoints(t){return Interval.fromDateTimes(t(this.s),t(this.e))}}class Info{static hasDST(t=Settings.defaultZone){const r=DateTime.now().setZone(t).set({month:12});return!t.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(t){return IANAZone.isValidZone(t)}static normalizeZone(t){return normalizeZone(t,Settings.defaultZone)}static getStartOfWeek({locale:t=null,locObj:r=null}={}){return(r||Locale.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:r=null}={}){return(r||Locale.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:r=null}={}){return(r||Locale.create(t)).getWeekendDays().slice()}static months(t="long",{locale:r=null,numberingSystem:a=null,locObj:i=null,outputCalendar:o="gregory"}={}){return(i||Locale.create(r,a,o)).months(t)}static monthsFormat(t="long",{locale:r=null,numberingSystem:a=null,locObj:i=null,outputCalendar:o="gregory"}={}){return(i||Locale.create(r,a,o)).months(t,!0)}static weekdays(t="long",{locale:r=null,numberingSystem:a=null,locObj:i=null}={}){return(i||Locale.create(r,a,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:r=null,numberingSystem:a=null,locObj:i=null}={}){return(i||Locale.create(r,a,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return Locale.create(t).meridiems()}static eras(t="short",{locale:r=null}={}){return Locale.create(r,null,"gregory").eras(t)}static features(){return{relative:hasRelative(),localeWeek:hasLocaleWeekInfo()}}}function dayDiff(e,t){const r=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),a=r(t)-r(e);return Math.floor(Duration.fromMillis(a).as("days"))}function highOrderDiffs(e,t,r){const a=[["years",(d,f)=>f.year-d.year],["quarters",(d,f)=>f.quarter-d.quarter+(f.year-d.year)*4],["months",(d,f)=>f.month-d.month+(f.year-d.year)*12],["weeks",(d,f)=>{const m=dayDiff(d,f);return(m-m%7)/7}],["days",dayDiff]],i={},o=e;let u,c;for(const[d,f]of a)r.indexOf(d)>=0&&(u=d,i[d]=f(e,t),c=o.plus(i),c>t?(i[d]--,e=o.plus(i),e>t&&(c=e,i[d]--,e=o.plus(i))):e=c);return[e,i,c,u]}function diff(e,t,r,a){let[i,o,u,c]=highOrderDiffs(e,t,r);const d=t-i,f=r.filter(p=>["hours","minutes","seconds","milliseconds"].indexOf(p)>=0);f.length===0&&(u<t&&(u=i.plus({[c]:1})),u!==i&&(o[c]=(o[c]||0)+d/(u-i)));const m=Duration.fromObject(o,a);return f.length>0?Duration.fromMillis(d,a).shiftTo(...f).plus(m):m}const numberingSystems={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},numberingSystemsUTF16={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},hanidecChars=numberingSystems.hanidec.replace(/[\[|\]]/g,"").split("");function parseDigits(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let r=0;r<e.length;r++){const a=e.charCodeAt(r);if(e[r].search(numberingSystems.hanidec)!==-1)t+=hanidecChars.indexOf(e[r]);else for(const i in numberingSystemsUTF16){const[o,u]=numberingSystemsUTF16[i];a>=o&&a<=u&&(t+=a-o)}}return parseInt(t,10)}else return t}function digitRegex({numberingSystem:e},t=""){return new RegExp(`${numberingSystems[e||"latn"]}${t}`)}const MISSING_FTP="missing Intl.DateTimeFormat.formatToParts support";function intUnit(e,t=r=>r){return{regex:e,deser:([r])=>t(parseDigits(r))}}const NBSP="",spaceOrNBSP=`[ ${NBSP}]`,spaceOrNBSPRegExp=new RegExp(spaceOrNBSP,"g");function fixListRegex(e){return e.replace(/\./g,"\\.?").replace(spaceOrNBSPRegExp,spaceOrNBSP)}function stripInsensitivities(e){return e.replace(/\./g,"").replace(spaceOrNBSPRegExp," ").toLowerCase()}function oneOf(e,t){return e===null?null:{regex:RegExp(e.map(fixListRegex).join("|")),deser:([r])=>e.findIndex(a=>stripInsensitivities(r)===stripInsensitivities(a))+t}}function offset(e,t){return{regex:e,deser:([,r,a])=>signedOffset(r,a),groups:t}}function simple(e){return{regex:e,deser:([t])=>t}}function escapeToken(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function unitForToken(e,t){const r=digitRegex(t),a=digitRegex(t,"{2}"),i=digitRegex(t,"{3}"),o=digitRegex(t,"{4}"),u=digitRegex(t,"{6}"),c=digitRegex(t,"{1,2}"),d=digitRegex(t,"{1,3}"),f=digitRegex(t,"{1,6}"),m=digitRegex(t,"{1,9}"),p=digitRegex(t,"{2,4}"),h=digitRegex(t,"{4,6}"),_=$=>({regex:RegExp(escapeToken($.val)),deser:([b])=>b,literal:!0}),D=($=>{if(e.literal)return _($);switch($.val){case"G":return oneOf(t.eras("short"),0);case"GG":return oneOf(t.eras("long"),0);case"y":return intUnit(f);case"yy":return intUnit(p,untruncateYear);case"yyyy":return intUnit(o);case"yyyyy":return intUnit(h);case"yyyyyy":return intUnit(u);case"M":return intUnit(c);case"MM":return intUnit(a);case"MMM":return oneOf(t.months("short",!0),1);case"MMMM":return oneOf(t.months("long",!0),1);case"L":return intUnit(c);case"LL":return intUnit(a);case"LLL":return oneOf(t.months("short",!1),1);case"LLLL":return oneOf(t.months("long",!1),1);case"d":return intUnit(c);case"dd":return intUnit(a);case"o":return intUnit(d);case"ooo":return intUnit(i);case"HH":return intUnit(a);case"H":return intUnit(c);case"hh":return intUnit(a);case"h":return intUnit(c);case"mm":return intUnit(a);case"m":return intUnit(c);case"q":return intUnit(c);case"qq":return intUnit(a);case"s":return intUnit(c);case"ss":return intUnit(a);case"S":return intUnit(d);case"SSS":return intUnit(i);case"u":return simple(m);case"uu":return simple(c);case"uuu":return intUnit(r);case"a":return oneOf(t.meridiems(),0);case"kkkk":return intUnit(o);case"kk":return intUnit(p,untruncateYear);case"W":return intUnit(c);case"WW":return intUnit(a);case"E":case"c":return intUnit(r);case"EEE":return oneOf(t.weekdays("short",!1),1);case"EEEE":return oneOf(t.weekdays("long",!1),1);case"ccc":return oneOf(t.weekdays("short",!0),1);case"cccc":return oneOf(t.weekdays("long",!0),1);case"Z":case"ZZ":return offset(new RegExp(`([+-]${c.source})(?::(${a.source}))?`),2);case"ZZZ":return offset(new RegExp(`([+-]${c.source})(${a.source})?`),2);case"z":return simple(/[a-z_+-/]{1,256}?/i);case" ":return simple(/[^\S\n\r]/);default:return _($)}})(e)||{invalidReason:MISSING_FTP};return D.token=e,D}const partTypeStyleToTokenVal={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function tokenForPart(e,t,r){const{type:a,value:i}=e;if(a==="literal"){const d=/^\s+$/.test(i);return{literal:!d,val:d?" ":i}}const o=t[a];let u=a;a==="hour"&&(t.hour12!=null?u=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?u="hour12":u="hour24":u=r.hour12?"hour12":"hour24");let c=partTypeStyleToTokenVal[u];if(typeof c=="object"&&(c=c[o]),c)return{literal:!1,val:c}}function buildRegex(e){return[`^${e.map(r=>r.regex).reduce((r,a)=>`${r}(${a.source})`,"")}$`,e]}function match(e,t,r){const a=e.match(t);if(a){const i={};let o=1;for(const u in r)if(hasOwnProperty(r,u)){const c=r[u],d=c.groups?c.groups+1:1;!c.literal&&c.token&&(i[c.token.val[0]]=c.deser(a.slice(o,o+d))),o+=d}return[a,i]}else return[a,{}]}function dateTimeFromMatches(e){const t=o=>{switch(o){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let r=null,a;return isUndefined(e.z)||(r=IANAZone.create(e.z)),isUndefined(e.Z)||(r||(r=new FixedOffsetZone(e.Z)),a=e.Z),isUndefined(e.q)||(e.M=(e.q-1)*3+1),isUndefined(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),isUndefined(e.u)||(e.S=parseMillis(e.u)),[Object.keys(e).reduce((o,u)=>{const c=t(u);return c&&(o[c]=e[u]),o},{}),r,a]}let dummyDateTimeCache=null;function getDummyDateTime(){return dummyDateTimeCache||(dummyDateTimeCache=DateTime.fromMillis(1555555555555)),dummyDateTimeCache}function maybeExpandMacroToken(e,t){if(e.literal)return e;const r=Formatter.macroTokenToFormatOpts(e.val),a=formatOptsToTokens(r,t);return a==null||a.includes(void 0)?e:a}function expandMacroTokens(e,t){return Array.prototype.concat(...e.map(r=>maybeExpandMacroToken(r,t)))}function explainFromTokens(e,t,r){const a=expandMacroTokens(Formatter.parseFormat(r),e),i=a.map(u=>unitForToken(u,e)),o=i.find(u=>u.invalidReason);if(o)return{input:t,tokens:a,invalidReason:o.invalidReason};{const[u,c]=buildRegex(i),d=RegExp(u,"i"),[f,m]=match(t,d,c),[p,h,_]=m?dateTimeFromMatches(m):[null,null,void 0];if(hasOwnProperty(m,"a")&&hasOwnProperty(m,"H"))throw new ConflictingSpecificationError("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:a,regex:d,rawMatches:f,matches:m,result:p,zone:h,specificOffset:_}}}function parseFromTokens(e,t,r){const{result:a,zone:i,specificOffset:o,invalidReason:u}=explainFromTokens(e,t,r);return[a,i,o,u]}function formatOptsToTokens(e,t){if(!e)return null;const a=Formatter.create(t,e).dtFormatter(getDummyDateTime()),i=a.formatToParts(),o=a.resolvedOptions();return i.map(u=>tokenForPart(u,e,o))}const INVALID="Invalid DateTime",MAX_DATE=864e13;function unsupportedZone(e){return new Invalid("unsupported zone",`the zone "${e.name}" is not supported`)}function possiblyCachedWeekData(e){return e.weekData===null&&(e.weekData=gregorianToWeek(e.c)),e.weekData}function possiblyCachedLocalWeekData(e){return e.localWeekData===null&&(e.localWeekData=gregorianToWeek(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function clone(e,t){const r={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new DateTime({...r,...t,old:r})}function fixOffset(e,t,r){let a=e-t*60*1e3;const i=r.offset(a);if(t===i)return[a,t];a-=(i-t)*60*1e3;const o=r.offset(a);return i===o?[a,i]:[e-Math.min(i,o)*60*1e3,Math.max(i,o)]}function tsToObj(e,t){e+=t*60*1e3;const r=new Date(e);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function objToTS(e,t,r){return fixOffset(objToLocalTS(e),t,r)}function adjustTime(e,t){const r=e.o,a=e.c.year+Math.trunc(t.years),i=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,o={...e.c,year:a,month:i,day:Math.min(e.c.day,daysInMonth(a,i))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},u=Duration.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),c=objToLocalTS(o);let[d,f]=fixOffset(c,r,e.zone);return u!==0&&(d+=u,f=e.zone.offset(d)),{ts:d,o:f}}function parseDataToDateTime(e,t,r,a,i,o){const{setZone:u,zone:c}=r;if(e&&Object.keys(e).length!==0||t){const d=t||c,f=DateTime.fromObject(e,{...r,zone:d,specificOffset:o});return u?f:f.setZone(c)}else return DateTime.invalid(new Invalid("unparsable",`the input "${i}" can't be parsed as ${a}`))}function toTechFormat(e,t,r=!0){return e.isValid?Formatter.create(Locale.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(e,t):null}function toISODate(e,t){const r=e.c.year>9999||e.c.year<0;let a="";return r&&e.c.year>=0&&(a+="+"),a+=padStart(e.c.year,r?6:4),t?(a+="-",a+=padStart(e.c.month),a+="-",a+=padStart(e.c.day)):(a+=padStart(e.c.month),a+=padStart(e.c.day)),a}function toISOTime(e,t,r,a,i,o){let u=padStart(e.c.hour);return t?(u+=":",u+=padStart(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!r)&&(u+=":")):u+=padStart(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!r)&&(u+=padStart(e.c.second),(e.c.millisecond!==0||!a)&&(u+=".",u+=padStart(e.c.millisecond,3))),i&&(e.isOffsetFixed&&e.offset===0&&!o?u+="Z":e.o<0?(u+="-",u+=padStart(Math.trunc(-e.o/60)),u+=":",u+=padStart(Math.trunc(-e.o%60))):(u+="+",u+=padStart(Math.trunc(e.o/60)),u+=":",u+=padStart(Math.trunc(e.o%60)))),o&&(u+="["+e.zone.ianaName+"]"),u}const defaultUnitValues={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},defaultWeekUnitValues={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},defaultOrdinalUnitValues={ordinal:1,hour:0,minute:0,second:0,millisecond:0},orderedUnits=["year","month","day","hour","minute","second","millisecond"],orderedWeekUnits=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],orderedOrdinalUnits=["year","ordinal","hour","minute","second","millisecond"];function normalizeUnit(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new InvalidUnitError(e);return t}function normalizeUnitWithLocalWeeks(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return normalizeUnit(e)}}function quickDT(e,t){const r=normalizeZone(t.zone,Settings.defaultZone),a=Locale.fromObject(t),i=Settings.now();let o,u;if(isUndefined(e.year))o=i;else{for(const f of orderedUnits)isUndefined(e[f])&&(e[f]=defaultUnitValues[f]);const c=hasInvalidGregorianData(e)||hasInvalidTimeData(e);if(c)return DateTime.invalid(c);const d=r.offset(i);[o,u]=objToTS(e,d,r)}return new DateTime({ts:o,zone:r,loc:a,o:u})}function diffRelative(e,t,r){const a=isUndefined(r.round)?!0:r.round,i=(u,c)=>(u=roundTo(u,a||r.calendary?0:2,!0),t.loc.clone(r).relFormatter(r).format(u,c)),o=u=>r.calendary?t.hasSame(e,u)?0:t.startOf(u).diff(e.startOf(u),u).get(u):t.diff(e,u).get(u);if(r.unit)return i(o(r.unit),r.unit);for(const u of r.units){const c=o(u);if(Math.abs(c)>=1)return i(c,u)}return i(e>t?-0:0,r.units[r.units.length-1])}function lastOpts(e){let t={},r;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],r=Array.from(e).slice(0,e.length-1)):r=Array.from(e),[t,r]}class DateTime{constructor(t){const r=t.zone||Settings.defaultZone;let a=t.invalid||(Number.isNaN(t.ts)?new Invalid("invalid input"):null)||(r.isValid?null:unsupportedZone(r));this.ts=isUndefined(t.ts)?Settings.now():t.ts;let i=null,o=null;if(!a)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(r))[i,o]=[t.old.c,t.old.o];else{const c=r.offset(this.ts);i=tsToObj(this.ts,c),a=Number.isNaN(i.year)?new Invalid("invalid input"):null,i=a?null:i,o=a?null:c}this._zone=r,this.loc=t.loc||Locale.create(),this.invalid=a,this.weekData=null,this.localWeekData=null,this.c=i,this.o=o,this.isLuxonDateTime=!0}static now(){return new DateTime({})}static local(){const[t,r]=lastOpts(arguments),[a,i,o,u,c,d,f]=r;return quickDT({year:a,month:i,day:o,hour:u,minute:c,second:d,millisecond:f},t)}static utc(){const[t,r]=lastOpts(arguments),[a,i,o,u,c,d,f]=r;return t.zone=FixedOffsetZone.utcInstance,quickDT({year:a,month:i,day:o,hour:u,minute:c,second:d,millisecond:f},t)}static fromJSDate(t,r={}){const a=isDate(t)?t.valueOf():NaN;if(Number.isNaN(a))return DateTime.invalid("invalid input");const i=normalizeZone(r.zone,Settings.defaultZone);return i.isValid?new DateTime({ts:a,zone:i,loc:Locale.fromObject(r)}):DateTime.invalid(unsupportedZone(i))}static fromMillis(t,r={}){if(isNumber(t))return t<-MAX_DATE||t>MAX_DATE?DateTime.invalid("Timestamp out of range"):new DateTime({ts:t,zone:normalizeZone(r.zone,Settings.defaultZone),loc:Locale.fromObject(r)});throw new InvalidArgumentError(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,r={}){if(isNumber(t))return new DateTime({ts:t*1e3,zone:normalizeZone(r.zone,Settings.defaultZone),loc:Locale.fromObject(r)});throw new InvalidArgumentError("fromSeconds requires a numerical input")}static fromObject(t,r={}){t=t||{};const a=normalizeZone(r.zone,Settings.defaultZone);if(!a.isValid)return DateTime.invalid(unsupportedZone(a));const i=Locale.fromObject(r),o=normalizeObject(t,normalizeUnitWithLocalWeeks),{minDaysInFirstWeek:u,startOfWeek:c}=usesLocalWeekValues(o,i),d=Settings.now(),f=isUndefined(r.specificOffset)?a.offset(d):r.specificOffset,m=!isUndefined(o.ordinal),p=!isUndefined(o.year),h=!isUndefined(o.month)||!isUndefined(o.day),_=p||h,y=o.weekYear||o.weekNumber;if((_||m)&&y)throw new ConflictingSpecificationError("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(h&&m)throw new ConflictingSpecificationError("Can't mix ordinal dates with month/day");const D=y||o.weekday&&!_;let $,b,g=tsToObj(d,f);D?($=orderedWeekUnits,b=defaultWeekUnitValues,g=gregorianToWeek(g,u,c)):m?($=orderedOrdinalUnits,b=defaultOrdinalUnitValues,g=gregorianToOrdinal(g)):($=orderedUnits,b=defaultUnitValues);let v=!1;for(const w of $){const I=o[w];isUndefined(I)?v?o[w]=b[w]:o[w]=g[w]:v=!0}const k=D?hasInvalidWeekData(o,u,c):m?hasInvalidOrdinalData(o):hasInvalidGregorianData(o),T=k||hasInvalidTimeData(o);if(T)return DateTime.invalid(T);const S=D?weekToGregorian(o,u,c):m?ordinalToGregorian(o):o,[O,M]=objToTS(S,f,a),N=new DateTime({ts:O,zone:a,o:M,loc:i});return o.weekday&&_&&t.weekday!==N.weekday?DateTime.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${N.toISO()}`):N}static fromISO(t,r={}){const[a,i]=parseISODate(t);return parseDataToDateTime(a,i,r,"ISO 8601",t)}static fromRFC2822(t,r={}){const[a,i]=parseRFC2822Date(t);return parseDataToDateTime(a,i,r,"RFC 2822",t)}static fromHTTP(t,r={}){const[a,i]=parseHTTPDate(t);return parseDataToDateTime(a,i,r,"HTTP",r)}static fromFormat(t,r,a={}){if(isUndefined(t)||isUndefined(r))throw new InvalidArgumentError("fromFormat requires an input string and a format");const{locale:i=null,numberingSystem:o=null}=a,u=Locale.fromOpts({locale:i,numberingSystem:o,defaultToEN:!0}),[c,d,f,m]=parseFromTokens(u,t,r);return m?DateTime.invalid(m):parseDataToDateTime(c,d,a,`format ${r}`,t,f)}static fromString(t,r,a={}){return DateTime.fromFormat(t,r,a)}static fromSQL(t,r={}){const[a,i]=parseSQL(t);return parseDataToDateTime(a,i,r,"SQL",t)}static invalid(t,r=null){if(!t)throw new InvalidArgumentError("need to specify a reason the DateTime is invalid");const a=t instanceof Invalid?t:new Invalid(t,r);if(Settings.throwOnInvalid)throw new InvalidDateTimeError(a);return new DateTime({invalid:a})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,r={}){const a=formatOptsToTokens(t,Locale.fromObject(r));return a?a.map(i=>i?i.val:null).join(""):null}static expandFormat(t,r={}){return expandMacroTokens(Formatter.parseFormat(t),Locale.fromObject(r)).map(i=>i.val).join("")}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?possiblyCachedWeekData(this).weekYear:NaN}get weekNumber(){return this.isValid?possiblyCachedWeekData(this).weekNumber:NaN}get weekday(){return this.isValid?possiblyCachedWeekData(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?possiblyCachedLocalWeekData(this).weekday:NaN}get localWeekNumber(){return this.isValid?possiblyCachedLocalWeekData(this).weekNumber:NaN}get localWeekYear(){return this.isValid?possiblyCachedLocalWeekData(this).weekYear:NaN}get ordinal(){return this.isValid?gregorianToOrdinal(this.c).ordinal:NaN}get monthShort(){return this.isValid?Info.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Info.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Info.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Info.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,r=6e4,a=objToLocalTS(this.c),i=this.zone.offset(a-t),o=this.zone.offset(a+t),u=this.zone.offset(a-i*r),c=this.zone.offset(a-o*r);if(u===c)return[this];const d=a-u*r,f=a-c*r,m=tsToObj(d,u),p=tsToObj(f,c);return m.hour===p.hour&&m.minute===p.minute&&m.second===p.second&&m.millisecond===p.millisecond?[clone(this,{ts:d}),clone(this,{ts:f})]:[this]}get isInLeapYear(){return isLeapYear(this.year)}get daysInMonth(){return daysInMonth(this.year,this.month)}get daysInYear(){return this.isValid?daysInYear(this.year):NaN}get weeksInWeekYear(){return this.isValid?weeksInWeekYear(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?weeksInWeekYear(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:r,numberingSystem:a,calendar:i}=Formatter.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:r,numberingSystem:a,outputCalendar:i}}toUTC(t=0,r={}){return this.setZone(FixedOffsetZone.instance(t),r)}toLocal(){return this.setZone(Settings.defaultZone)}setZone(t,{keepLocalTime:r=!1,keepCalendarTime:a=!1}={}){if(t=normalizeZone(t,Settings.defaultZone),t.equals(this.zone))return this;if(t.isValid){let i=this.ts;if(r||a){const o=t.offset(this.ts),u=this.toObject();[i]=objToTS(u,o,t)}return clone(this,{ts:i,zone:t})}else return DateTime.invalid(unsupportedZone(t))}reconfigure({locale:t,numberingSystem:r,outputCalendar:a}={}){const i=this.loc.clone({locale:t,numberingSystem:r,outputCalendar:a});return clone(this,{loc:i})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const r=normalizeObject(t,normalizeUnitWithLocalWeeks),{minDaysInFirstWeek:a,startOfWeek:i}=usesLocalWeekValues(r,this.loc),o=!isUndefined(r.weekYear)||!isUndefined(r.weekNumber)||!isUndefined(r.weekday),u=!isUndefined(r.ordinal),c=!isUndefined(r.year),d=!isUndefined(r.month)||!isUndefined(r.day),f=c||d,m=r.weekYear||r.weekNumber;if((f||u)&&m)throw new ConflictingSpecificationError("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(d&&u)throw new ConflictingSpecificationError("Can't mix ordinal dates with month/day");let p;o?p=weekToGregorian({...gregorianToWeek(this.c,a,i),...r},a,i):isUndefined(r.ordinal)?(p={...this.toObject(),...r},isUndefined(r.day)&&(p.day=Math.min(daysInMonth(p.year,p.month),p.day))):p=ordinalToGregorian({...gregorianToOrdinal(this.c),...r});const[h,_]=objToTS(p,this.o,this.zone);return clone(this,{ts:h,o:_})}plus(t){if(!this.isValid)return this;const r=Duration.fromDurationLike(t);return clone(this,adjustTime(this,r))}minus(t){if(!this.isValid)return this;const r=Duration.fromDurationLike(t).negate();return clone(this,adjustTime(this,r))}startOf(t,{useLocaleWeeks:r=!1}={}){if(!this.isValid)return this;const a={},i=Duration.normalizeUnit(t);switch(i){case"years":a.month=1;case"quarters":case"months":a.day=1;case"weeks":case"days":a.hour=0;case"hours":a.minute=0;case"minutes":a.second=0;case"seconds":a.millisecond=0;break}if(i==="weeks")if(r){const o=this.loc.getStartOfWeek(),{weekday:u}=this;u<o&&(a.weekNumber=this.weekNumber-1),a.weekday=o}else a.weekday=1;if(i==="quarters"){const o=Math.ceil(this.month/3);a.month=(o-1)*3+1}return this.set(a)}endOf(t,r){return this.isValid?this.plus({[t]:1}).startOf(t,r).minus(1):this}toFormat(t,r={}){return this.isValid?Formatter.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,t):INVALID}toLocaleString(t=DATE_SHORT,r={}){return this.isValid?Formatter.create(this.loc.clone(r),t).formatDateTime(this):INVALID}toLocaleParts(t={}){return this.isValid?Formatter.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:r=!1,suppressMilliseconds:a=!1,includeOffset:i=!0,extendedZone:o=!1}={}){if(!this.isValid)return null;const u=t==="extended";let c=toISODate(this,u);return c+="T",c+=toISOTime(this,u,r,a,i,o),c}toISODate({format:t="extended"}={}){return this.isValid?toISODate(this,t==="extended"):null}toISOWeekDate(){return toTechFormat(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:r=!1,includeOffset:a=!0,includePrefix:i=!1,extendedZone:o=!1,format:u="extended"}={}){return this.isValid?(i?"T":"")+toISOTime(this,u==="extended",r,t,a,o):null}toRFC2822(){return toTechFormat(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return toTechFormat(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?toISODate(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:r=!1,includeOffsetSpace:a=!0}={}){let i="HH:mm:ss.SSS";return(r||t)&&(a&&(i+=" "),r?i+="z":t&&(i+="ZZ")),toTechFormat(this,i,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():INVALID}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const r={...this.c};return t.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,r="milliseconds",a={}){if(!this.isValid||!t.isValid)return Duration.invalid("created by diffing an invalid DateTime");const i={locale:this.locale,numberingSystem:this.numberingSystem,...a},o=maybeArray(r).map(Duration.normalizeUnit),u=t.valueOf()>this.valueOf(),c=u?this:t,d=u?t:this,f=diff(c,d,o,i);return u?f.negate():f}diffNow(t="milliseconds",r={}){return this.diff(DateTime.now(),t,r)}until(t){return this.isValid?Interval.fromDateTimes(this,t):this}hasSame(t,r,a){if(!this.isValid)return!1;const i=t.valueOf(),o=this.setZone(t.zone,{keepLocalTime:!0});return o.startOf(r,a)<=i&&i<=o.endOf(r,a)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const r=t.base||DateTime.fromObject({},{zone:this.zone}),a=t.padding?this<r?-t.padding:t.padding:0;let i=["years","months","days","hours","minutes","seconds"],o=t.unit;return Array.isArray(t.unit)&&(i=t.unit,o=void 0),diffRelative(r,this.plus(a),{...t,numeric:"always",units:i,unit:o})}toRelativeCalendar(t={}){return this.isValid?diffRelative(t.base||DateTime.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(DateTime.isDateTime))throw new InvalidArgumentError("min requires all arguments be DateTimes");return bestBy(t,r=>r.valueOf(),Math.min)}static max(...t){if(!t.every(DateTime.isDateTime))throw new InvalidArgumentError("max requires all arguments be DateTimes");return bestBy(t,r=>r.valueOf(),Math.max)}static fromFormatExplain(t,r,a={}){const{locale:i=null,numberingSystem:o=null}=a,u=Locale.fromOpts({locale:i,numberingSystem:o,defaultToEN:!0});return explainFromTokens(u,t,r)}static fromStringExplain(t,r,a={}){return DateTime.fromFormatExplain(t,r,a)}static get DATE_SHORT(){return DATE_SHORT}static get DATE_MED(){return DATE_MED}static get DATE_MED_WITH_WEEKDAY(){return DATE_MED_WITH_WEEKDAY}static get DATE_FULL(){return DATE_FULL}static get DATE_HUGE(){return DATE_HUGE}static get TIME_SIMPLE(){return TIME_SIMPLE}static get TIME_WITH_SECONDS(){return TIME_WITH_SECONDS}static get TIME_WITH_SHORT_OFFSET(){return TIME_WITH_SHORT_OFFSET}static get TIME_WITH_LONG_OFFSET(){return TIME_WITH_LONG_OFFSET}static get TIME_24_SIMPLE(){return TIME_24_SIMPLE}static get TIME_24_WITH_SECONDS(){return TIME_24_WITH_SECONDS}static get TIME_24_WITH_SHORT_OFFSET(){return TIME_24_WITH_SHORT_OFFSET}static get TIME_24_WITH_LONG_OFFSET(){return TIME_24_WITH_LONG_OFFSET}static get DATETIME_SHORT(){return DATETIME_SHORT}static get DATETIME_SHORT_WITH_SECONDS(){return DATETIME_SHORT_WITH_SECONDS}static get DATETIME_MED(){return DATETIME_MED}static get DATETIME_MED_WITH_SECONDS(){return DATETIME_MED_WITH_SECONDS}static get DATETIME_MED_WITH_WEEKDAY(){return DATETIME_MED_WITH_WEEKDAY}static get DATETIME_FULL(){return DATETIME_FULL}static get DATETIME_FULL_WITH_SECONDS(){return DATETIME_FULL_WITH_SECONDS}static get DATETIME_HUGE(){return DATETIME_HUGE}static get DATETIME_HUGE_WITH_SECONDS(){return DATETIME_HUGE_WITH_SECONDS}}function friendlyDateTime(e){if(DateTime.isDateTime(e))return e;if(e&&e.valueOf&&isNumber(e.valueOf()))return DateTime.fromJSDate(e);if(e&&typeof e=="object")return DateTime.fromObject(e);throw new InvalidArgumentError(`Unknown datetime argument: ${e}, of type ${typeof e}`)}class Token{constructor(t,r){this._value=t,this._type=r,this._format=""}get value(){return this._value}set value(t){this._value=t}get type(){return this._type}set type(t){this._type=t}get format(){return this._format}set format(t){this._format=t}}class Parser{constructor(t,r){this.name=t,this.pattern=r}parse(t){const r=this.pattern.exec(t);if(!r||!r.groups)return;let a=[];for(const[i,o]of Object.entries(r.groups))o&&a.push(new Token(o,/delim\d+/.test(i)?"delimiter":i));return{tokens:a,index:r.index,parser:this.name}}}const abbreviatedTimezones="UT|CAT|CET|CVT|EAT|EET|GMT|MUT|RET|SAST|SCT|WAST|WAT|WEST|WET|WST|WT|ADT|AFT|ALMT|AMST|AMT|ANAST|ANAT|AQTT|AST|AZST|AZT|BNT|BST|BTT|CHOST|CHOT|CST|EEST|EET|GET|GST|HKT|HOVST|HOVT|ICT|IDT|IRDT|IRKST|IRKT|IST|JST|KGT|KRAST|KRAT|KST|MAGST|MAGT|MMT|MSK|MVT|NOVST|NOVT|NPT|OMSST|OMST|ORAT|PETST|PETT|PHT|PKT|PYT|QYZT|SAKT|SGT|SRET|TJT|TLT|TMT|TRT|ULAST|ULAT|UZT|VLAST|VLAT|WIB|WIT|YAKST|YAKT|YEKST|YEKT|ART|CAST|CEST|CLST|CLT|DAVT|DDUT|GMT|MAWT|NZDT|NZST|ROTT|SYOT|VOST|ADT|AST|AT|AZOST|AZOT|ACDT|ACST|ACT|ACWST|AEDT|AEST|AET|AWDT|AWST|CXT|LHDT|LHST|NFDT|NFT|AST|AT|CDT|CIDST|CIST|CST|EDT|EST|ET|CST|CT|EST|ET|BST|CEST|CET|EEST|EET|FET|GET|GMT|IST|KUYT|MSD|MSK|SAMT|TRT|WEST|WET|CCT|EAT|IOT|TFT|ADT|AKDT|AKST|AST|AT|CDT|CST|CT|EDT|EGST|EGT|ET|GMT|HDT|HST|MDT|MST|MT|NDT|NST|PDT|PMDT|PMST|PST|PT|WGST|WGT|AoE|BST|CHADT|CHAST|CHUT|CKT|ChST|EASST|EAST|FJST|FJT|GALT|GAMT|GILT|HST|KOST|LINT|MART|MHT|NCT|NRT|NUT|NZDT|NZST|PGT|PHOT|PONT|PST|PWT|SBT|SST|TAHT|TKT|TOST|TOT|TVT|VUT|WAKT|WFT|WST|YAPT|ACT|AMST|AMT|ART|BOT|BRST|BRT|CLST|CLT|COT|ECT|FKST|FKT|FNT|GFT|GST|GYT|PET|PYST|PYT|SRT|UYST|UYT|VET|WARST",dayOfMonthAndMonthNameDateFormatParser=new Parser("DayOfMonthAndMonthNameDateFormatParser",new RegExp(`^(?<dayOfWeek>(?:Sun?|Mon?|Tu(?:es)?|We(?:dnes)?|Th(?:urs)?|Fri?|Sa(?:tur)?)(?:day)?)?(?<delim1>,)?(?<delim2>\\s)?(?<dayOfMonth>(?:3[0-1]|[1-2]\\d|0?[1-9])(?:st|nd|rd|th)?)(?<delim3>\\s)(?<month>Jan(?:uary)?|Feb(?:ruary)?|Mar(?:ch)?|Apr(?:il)?|May|June?|July?|Aug(?:ust)?|Sep(?:tember)?|Oct(?:ober)?|Nov(?:ember)?|Dec(?:ember)?)(?<delim4>,)?(?<delim5>\\s)?(?<year>\\d{4}|\\d{2})?(?:(?<delim6>,)?(?<delim7>\\s)(?:(?<twentyFourHour>2[0-3]|0?\\d|1\\d)|(?<twelveHour>0?[1-9]|1[0-2]))(?:(?<delim8>[:.])(?<minute>[0-5]\\d))?(?:(?<delim9>[:.])(?<second>[0-5]\\d))?(?:(?<delim10>.)(?<millisecond>\\d{3}))?(?<delim11>\\s)?(?<meridiem>am|pm|AM|PM)?(?:(?<delim12>\\s)(?<timezone>[+-]\\d{2}(?::?\\d{2})?|Z|${abbreviatedTimezones}))?)?$`)),iSO8601BasicDateTimeFormatParser=new Parser("ISO8601BasicDateTimeFormatParser",new RegExp("^(?<year>[+-]\\d{6}|\\d{4})(?:(?<month>\\d{2})(?:(?<dayOfMonth>\\d{2}))?|(?<escapeText>W)(?<isoWeekOfYear>\\d{2})(?:(?<isoDayOfWeek>\\d))?|(?<dayOfYear>\\d{3}))?(?:(?<delim1>T| )(?:(?<twentyFourHour>\\d{2})(?:(?<minute>\\d{2})(?:(?<second>\\d{2})(?:(?<delim2>[.,])(?<millisecond>\\d{1,9}))?)?)?)(?<timezone>[+-]\\d{2}(?::?\\d{2})?|Z)?)?$")),iSO8601ExtendedDateTimeFormatParser=new Parser("ISO8601ExtendedDateTimeFormatParser",new RegExp("^(?<year>[+-]\\d{6}|\\d{4})(?<delim1>\\-)(?:(?<month>\\d{2})(?:(?<delim2>\\-)(?<dayOfMonth>\\d{2}))?|(?<escapeText>W)(?<isoWeekOfYear>\\d{2})(?:(?<delim3>\\-)(?<isoDayOfWeek>\\d))?|(?<dayOfYear>\\d{3}))(?:(?<delim4>T| )(?:(?<twentyFourHour>\\d{2})(?:(?<delim5>:)(?<minute>\\d{2})(?:(?<delim6>:)(?<second>\\d{2})(?:(?<delim7>[.,])(?<millisecond>\\d{1,9}))?)?)?)(?<timezone>[+-]\\d{2}(?::?\\d{2})?|Z)?)?$")),monthNameAndDayOfMonthDateFormatParser=new Parser("MonthNameAndDayOfMonthDateFormatParser",new RegExp(`^(?<dayOfWeek>(?:Sun?|Mon?|Tu(?:es)?|We(?:dnes)?|Th(?:urs)?|Fri?|Sa(?:tur)?)(?:day)?)?(?<delim1>,)?(?<delim2>\\s)?(?<month>Jan(?:uary)?|Feb(?:ruary)?|Mar(?:ch)?|Apr(?:il)?|May|June?|July?|Aug(?:ust)?|Sep(?:tember)?|Oct(?:ober)?|Nov(?:ember)?|Dec(?:ember)?)(?<delim3>\\s)(?<dayOfMonth>(?:3[0-1]|[1-2]\\d|0?[1-9])(?:st|nd|rd|th)?)(?<delim4>,)?(?<delim5>\\s)?(?<year>\\d{4}|\\d{2})?(?:(?:(?<delim6>,)?(?<delim7>\\s)(?:(?<twentyFourHour>2[0-3]|0?\\d|1\\d)|(?<twelveHour>0?[1-9]|1[0-2]))(?:(?<delim8>[:.])(?<minute>[0-5]\\d))?(?:(?<delim9>[:.])(?<second>[0-5]\\d))?(?:(?<delim10>.)(?<millisecond>\\d{3}))?(?<delim11>\\s)?(?<meridiem>am|pm|AM|PM)?(?:(?<delim12>\\s)(?<timezone>[+-]\\d{2}(?::?\\d{2})?|Z|${abbreviatedTimezones}))?)?)?$`)),rFC2822DateTimeFormatParser=new Parser("RFC2822DateTimeFormatParser",new RegExp("^(?:(?<dayOfWeek>Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?<delim1>,)?(?<delim2>\\s))?(?<dayOfMonth>\\d{1,2})(?<delim3>\\s)(?<month>Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)(?<delim4>\\s)(?<year>\\d{2,4})(?<delim5>\\s)(?<twentyFourHour>\\d{2})(?<delim6>:)(?<minute>\\d{2})(?:(?<delim7>:)(?<second>\\d{2}))?(?<delim8>\\s)(?<timezone>(?:(?:UT|GMT|[ECMP][SD]T)|[Zz]|[+-]\\d{4}))$")),slashDelimitedDateTimeFormatParser=new Parser("SlashDelimitedDateFormatParser",new RegExp(`^(?<year>\\d{4}|\\d{2})(?<delim1>[/.-])(?<month>0?[1-9]|1[0-2])(?:(?<delim2>[/.-])(?<dayOfMonth>0?[1-9]|[1-2]\\d|3[0-1]))?(?:(?:(?<delim3>,)?(?<delim4>\\s)(?:(?<twentyFourHour>2[0-3]|0?\\d|1\\d)|(?<twelveHour>0?[1-9]|1[0-2]))(?:(?<delim5>[:.])(?<minute>[0-5]\\d))?(?:(?<delim6>[:.])(?<second>[0-5]\\d))?(?:(?<delim7>.)(?<millisecond>\\d{3}))?(?<delim8>\\s)?(?<meridiem>am|pm|AM|PM)?(?:(?<delim9>\\s)(?<timezone>[+-]\\d{2}(?::?\\d{2})?|Z|${abbreviatedTimezones}))?)?)?$`)),twelveHourTimeFormatParser=new Parser("TwelveHourTimeFormatParser",new RegExp(`^(?<twelveHour>0?[1-9]|1[0-2])(?:(?<delim1>[:.])(?<minute>[0-5]\\d))?(?:(?<delim2>[:.])(?<second>[0-5]\\d))?(?:(?<delim3>.)(?<millisecond>\\d{3}))?(?<delim4>\\s)?(?<meridiem>am|pm|AM|PM)(?:(?<delim5>\\s)(?<timezone>[+-]\\d{2}(?::?\\d{2})?|Z|${abbreviatedTimezones}))?$`)),twentyFourHourTimeFormatParser=new Parser("TwentyFourHourTimeFormatParser",new RegExp(`^(?<twentyFourHour>2[0-3]|0?\\d|1\\d)(?<delim1>[:.])(?<minute>[0-5]\\d)(?:(?<delim2>[:.])(?<second>[0-5]\\d))?(?:(?<delim3>.)(?<millisecond>\\d{3}))?(?:(?<delim4>\\s)(?<timezone>[+-]\\d{2}(?::?\\d{2})?|Z|${abbreviatedTimezones}))?$`)),uKStyleSlashDelimitedDateTimeFormatParser=new Parser("UKStyleSlashDelimitedDateFormatParser",new RegExp(`^(?<dayOfMonth>0?[1-9]|[1-2]\\d|3[0-1])(?<delim1>[/.-])(?<month>0?[1-9]|1[0-2])(?:(?<delim2>[/.-])(?<year>\\d{4}|\\d{2}))?(?:(?:(?<delim3>,)?(?<delim4>\\s)(?:(?<twentyFourHour>2[0-3]|0?\\d|1\\d)|(?<twelveHour>0?[1-9]|1[0-2]))(?:(?<delim5>[:.])(?<minute>[0-5]\\d))?(?:(?<delim6>[:.])(?<second>[0-5]\\d))?(?:(?<delim7>.)(?<millisecond>\\d{3}))?(?<delim8>\\s)?(?<meridiem>am|pm|AM|PM)?(?:(?<delim9>\\s)(?<timezone>[+-]\\d{2}(?::?\\d{2})?|Z|${abbreviatedTimezones}))?)?)?$`)),uSStyleSlashDelimitedDateTimeFormatParser=new Parser("USStyleSlashDelimitedDateFormatParser",new RegExp(`^(?<month>0?[1-9]|1[0-2])(?<delim1>[/.-])(?<dayOfMonth>0?[1-9]|[1-2]\\d|3[0-1])(?:(?<delim2>[/.-])(?<year>\\d{4}|\\d{2}))?(?:(?:(?<delim3>,)?(?<delim4>\\s)(?:(?<twentyFourHour>2[0-3]|0?\\d|1\\d)|(?<twelveHour>0?[1-9]|1[0-2]))(?:(?<delim5>[:.])(?<minute>[0-5]\\d))?(?:(?<delim6>[:.])(?<second>[0-5]\\d))?(?:(?<delim7>.)(?<millisecond>\\d{3}))?(?<delim8>\\s)?(?<meridiem>am|pm|AM|PM)?(?:(?<delim9>\\s)(?<timezone>[+-]\\d{2}(?::?\\d{2})?|Z|${abbreviatedTimezones}))?)?)?$`)),dashDelimitedWithMonthNameDateTimeFormatParser=new Parser("DashDelimitedWithMonthNameDateTimeFormatParser",new RegExp(`^(?<dayOfMonth>0?[1-9]|[1-2]\\d|3[0-1])(?<delim1>-)(?<month>Jan(?:uary)?|Feb(?:ruary)?|Mar(?:ch)?|Apr(?:il)?|May|June?|July?|Aug(?:ust)?|Sep(?:tember)?|Oct(?:ober)?|Nov(?:ember)?|Dec(?:ember)?)(?<delim2>-)?(?<year>\\d{4}|\\d{2})?(?:(?:(?<delim3>,)?(?<delim4>\\s)(?:(?<twentyFourHour>2[0-3]|0?\\d|1\\d)|(?<twelveHour>0?[1-9]|1[0-2]))(?:(?<delim5>[:.])(?<minute>[0-5]\\d))?(?:(?<delim6>[:.])(?<second>[0-5]\\d))?(?:(?<delim7>.)(?<millisecond>\\d{3}))?(?<delim8>\\s)?(?<meridiem>am|pm|AM|PM)?(?:(?<delim9>\\s)(?<timezone>[+-]\\d{2}(?::?\\d{2})?|Z|${abbreviatedTimezones}))?)?)?$`)),parsers=[iSO8601ExtendedDateTimeFormatParser,iSO8601BasicDateTimeFormatParser,rFC2822DateTimeFormatParser,slashDelimitedDateTimeFormatParser,uKStyleSlashDelimitedDateTimeFormatParser,uSStyleSlashDelimitedDateTimeFormatParser,monthNameAndDayOfMonthDateFormatParser,dayOfMonthAndMonthNameDateFormatParser,twentyFourHourTimeFormatParser,twelveHourTimeFormatParser,dashDelimitedWithMonthNameDateTimeFormatParser];class StandardFormatParsersRefiner{constructor(t){this.name=t}refine(t){const r=t.filter(a=>a.parser==="ISO8601ExtendedDateTimeFormatParser"||a.parser==="ISO8601BasicDateTimeFormatParser"||a.parser==="RFC2822DateTimeFormatParser");return r.length===0?t:r}}class TimeFormatRefiner{constructor(t){this.name=t}refine(t){return t.forEach(r=>{let a=!1;r.tokens.forEach(i=>{i.type==="meridiem"&&(a=!0)}),a&&r.tokens.forEach(i=>{i.type==="twentyFourHour"&&(i.type="twelveHour")})}),t}}const timeFormatRefiner=new TimeFormatRefiner("TimeFormatRefiner"),standardFormatParsersRefiner=new StandardFormatParsersRefiner("StandardFormatParsersRefiner"),refiners=[standardFormatParsersRefiner,timeFormatRefiner];class YearFormatTokenAssigner{constructor(t,r,a){this.name=t,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?(this._map.set(/\d{2}/,"YY"),this._map.set(/\d{4}/,"YYYY"),this._map.set(/[+-]\d{6}/,"YYYYYY")):(this._map.set(/\d{2}/,"%y"),this._map.set(/\d{4}/,"%Y"),this._map.set(/[+-]\d{6}/,"NA"))}_testTokenType(t){return t.type===this.type}assign(t){this._map.forEach((r,a)=>{this._testTokenType(t)&&a.test(t.value)&&(t.format=r)})}}class MonthFormatTokenAssigner{constructor(t,r,a){this.name=t,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?(this._map.set(/\d{1,2}/,"M"),this._map.set(/\d{2}/,"MM"),this._map.set(/\d{1,2}(?:st|nd|rd|th)/,"Mo"),this._map.set(/^(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)$/,"MMM"),this._map.set(/^(January|February|March|April|May|June|July|August|September|October|November|December)$/,"MMMM")):(this._map.set(/\d{1,2}/,"NA"),this._map.set(/\d{2}/,"%m"),this._map.set(/\d{1,2}(?:st|nd|rd|th)/,"NA"),this._map.set(/^(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)$/,"%b"),this._map.set(/^(January|February|March|April|May|June|July|August|September|October|November|December)$/,"%B"))}_testTokenType(t){return t.type===this.type}assign(t){this._map.forEach((r,a)=>{this._testTokenType(t)&&a.test(t.value)&&(t.format=r)})}}class DayOfMonthFormatTokenAssigner{constructor(t,r,a){this.name=t,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?(this._map.set(/\d{1,2}/,"D"),this._map.set(/\d{2}/,"DD"),this._map.set(/\d{1,2}(?:st|nd|rd|th)/,"Do")):(this._map.set(/\d{1,2}/,"%-e"),this._map.set(/\d{2}/,"%d"),this._map.set(/\d{1,2}(?:st|nd|rd|th)/,"%o"))}_testTokenType(t){return t.type===this.type}assign(t){this._map.forEach((r,a)=>{this._testTokenType(t)&&a.test(t.value)&&(t.format=r)})}}class DelimiterFormatTokenAssigner{constructor(t,r,a){this.name=t,this.format=a,this.type=r}assign(t){}}class MinuteFormatTokenAssigner{constructor(t,r,a){this.name=t,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?(this._map.set(/\d{1,2}/,"m"),this._map.set(/\d{2}/,"mm")):(this._map.set(/\d{1,2}/,"NA"),this._map.set(/\d{2}/,"%M"))}_testTokenType(t){return t.type===this.type}assign(t){this._map.forEach((r,a)=>{this._testTokenType(t)&&a.test(t.value)&&(t.format=r)})}}class SecondFormatTokenAssigner{constructor(t,r,a){this.name=t,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?(this._map.set(/\d{2}/,"ss"),this._map.set(/\d{1,2}/,"s")):(this._map.set(/\d{1,2}/,"NA"),this._map.set(/\d{2}/,"%S"))}_testTokenType(t){return t.type===this.type}assign(t){this._map.forEach((r,a)=>{this._testTokenType(t)&&a.test(t.value)&&(t.format=r)})}}class MillisecondFormatTokenAssigner{constructor(t,r,a){this.name=t,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?(this._map.set(/\d/,"S"),this._map.set(/\d{2}/,"SS"),this._map.set(/\d{3}/,"SSS")):(this._map.set(/\d/,"NA"),this._map.set(/\d{2}/,"NA"),this._map.set(/\d{3}/,"%L"))}_testTokenType(t){return t.type===this.type}assign(t){this._map.forEach((r,a)=>{this._testTokenType(t)&&a.test(t.value)&&(t.format=r)})}}class TimezoneFormatTokenAssigner{constructor(t,r,a){this.name=t,this.type=r,this.format=a,this._map=new Map;const i=new RegExp("UT|CAT|CET|CVT|EAT|EET|GMT|MUT|RET|SAST|SCT|WAST|WAT|WEST|WET|WST|WT|ADT|AFT|ALMT|AMST|AMT|ANAST|ANAT|AQTT|AST|AZST|AZT|BNT|BST|BTT|CHOST|CHOT|CST|EEST|EET|GET|GST|HKT|HOVST|HOVT|ICT|IDT|IRDT|IRKST|IRKT|IST|JST|KGT|KRAST|KRAT|KST|MAGST|MAGT|MMT|MSK|MVT|NOVST|NOVT|NPT|OMSST|OMST|ORAT|PETST|PETT|PHT|PKT|PYT|QYZT|SAKT|SGT|SRET|TJT|TLT|TMT|TRT|ULAST|ULAT|UZT|VLAST|VLAT|WIB|WIT|YAKST|YAKT|YEKST|YEKT|ART|CAST|CEST|CLST|CLT|DAVT|DDUT|GMT|MAWT|NZDT|NZST|ROTT|SYOT|VOST|ADT|AST|AT|AZOST|AZOT|ACDT|ACST|ACT|ACWST|AEDT|AEST|AET|AWDT|AWST|CXT|LHDT|LHST|NFDT|NFT|AST|AT|CDT|CIDST|CIST|CST|EDT|EST|ET|CST|CT|EST|ET|BST|CEST|CET|EEST|EET|FET|GET|GMT|IST|KUYT|MSD|MSK|SAMT|TRT|WEST|WET|CCT|EAT|IOT|TFT|ADT|AKDT|AKST|AST|AT|CDT|CST|CT|EDT|EGST|EGT|ET|GMT|HDT|HST|MDT|MST|MT|NDT|NST|PDT|PMDT|PMST|PST|PT|WGST|WGT|AoE|BST|CHADT|CHAST|CHUT|CKT|ChST|EASST|EAST|FJST|FJT|GALT|GAMT|GILT|HST|KOST|LINT|MART|MHT|NCT|NRT|NUT|NZDT|NZST|PGT|PHOT|PONT|PST|PWT|SBT|SST|TAHT|TKT|TOST|TOT|TVT|VUT|WAKT|WFT|WST|YAPT|ACT|AMST|AMT|ART|BOT|BRST|BRT|CLST|CLT|COT|ECT|FKST|FKT|FNT|GFT|GST|GYT|PET|PYST|PYT|SRT|UYST|UYT|VET|WARST");!a||a==="default"?(this._map.set(/[+-]\d{2}(?::\d{2})?/,"Z"),this._map.set(/[+-]\d{4}/,"ZZ"),this._map.set(/Z/,"[Z]"),this._map.set(/z/,"[z]"),this._map.set(i,"z")):(this._map.set(/[+-]\d{2}(?::\d{2})?/,"%:z"),this._map.set(/[+-]\d{4}/,"%z"),this._map.set(/Z/,"Z"),this._map.set(/z/,"z"),this._map.set(i,"%Z"))}_testTokenType(t){return t.type===this.type}assign(t){this._map.forEach((r,a)=>{this._testTokenType(t)&&a.test(t.value)&&(t.format=r)})}}class DayOfYearFormatTokenAssigner{constructor(t,r,a){this.name=t,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?(this._map.set(/\d{1,3}/,"DDD"),this._map.set(/\d{3}/,"DDDD"),this._map.set(/\d{1,3}(?:st|nd|rd|th)/,"DDDo")):(this._map.set(/\d{1,3}/,"NA"),this._map.set(/\d{3}/,"%j"),this._map.set(/\d{1,3}(?:st|nd|rd|th)/,"NA"))}_testTokenType(t){return t.type===this.type}assign(t){this._map.forEach((r,a)=>{this._testTokenType(t)&&a.test(t.value)&&(t.format=r)})}}class EscapeTextFormatTokenAssigner{constructor(t,r,a){this.name=t,this.type=r,this.format=a}_testTokenType(t){return t.type===this.type}assign(t){this._testTokenType(t)&&(t.format=!this.format||this.format==="default"?`[${t.value}]`:t.value)}}class ISODayOfWeekFormatTokenAssigner{constructor(t,r,a){this.name=t,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?this._map.set(/[1-7]/,"E"):this._map.set(/[1-7]/,"%u")}_testTokenType(t){return t.type===this.type}assign(t){this._map.forEach((r,a)=>{this._testTokenType(t)&&a.test(t.value)&&(t.format=r)})}}class ISOWeekOfYearFormatTokenAssigner{constructor(t,r,a){this.name=t,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?(this._map.set(/\d{1,2}/,"W"),this._map.set(/\d{2}/,"WW"),this._map.set(/\d{1,2}(?:st|nd|rd|th)/,"Wo")):(this._map.set(/\d{1,2}/,"NA"),this._map.set(/\d{2}/,"%U"),this._map.set(/\d{1,2}(?:st|nd|rd|th)/,"NA"))}_testTokenType(t){return t.type===this.type}assign(t){this._map.forEach((r,a)=>{this._testTokenType(t)&&a.test(t.value)&&(t.format=r)})}}class TwentyFourHourFormatTokenAssigner{constructor(t,r,a){this.name=t,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?(this._map.set(/^([0-1]\d|2[0-3])$/,"HH"),this._map.set(/^(\d|1\d|2[0-3])$/,"H")):(this._map.set(/^(\d|1\d|2[0-3])$/,"%-k"),this._map.set(/^([0-1]\d|2[0-3])$/,"%H"))}_testTokenType(t){return t.type===this.type}assign(t){this._map.forEach((r,a)=>{this._testTokenType(t)&&a.test(t.value)&&(t.format=r)})}}class TwelveHourFormatTokenAssigner{constructor(t,r,a){this.name=t,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?(this._map.set(/^(0\d|1[0-2])$/,"hh"),this._map.set(/^([1-9]|1[0-9])$/,"h")):(this._map.set(/^([1-9]|1[0-2])$/,"%-l"),this._map.set(/^(0\d|1[0-2])$/,"%I"))}_testTokenType(t){return t.type===this.type}assign(t){this._map.forEach((r,a)=>{this._testTokenType(t)&&a.test(t.value)&&(t.format=r)})}}class DayOfWeekFormatTokenAssigner{constructor(t,r,a){this.name=t,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?(this._map.set(/[0-6](?:st|nd|rd|th)/,"do"),this._map.set(/(?:Su|Mo|Tu|We|Th|Fr|Sa)/,"dd"),this._map.set(/(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)/,"ddd"),this._map.set(/(?:Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday)/,"dddd")):(this._map.set(/[0-6]/,"%w"),this._map.set(/[0-6](?:st|nd|rd|th)/,"NA"),this._map.set(/(?:Su|Mo|Tu|We|Th|Fr|Sa)/,"NA"),this._map.set(/(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)/,"%a"),this._map.set(/(?:Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday)/,"%A"))}_testTokenType(t){return t.type===this.type}assign(t){this._map.forEach((r,a)=>{this._testTokenType(t)&&a.test(t.value)&&(t.format=r)})}}class MeridiemFormatTokenAssigner{constructor(t,r,a){this.name=t,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?(this._map.set(/am|pm/,"a"),this._map.set(/AM|PM/,"A")):(this._map.set(/am|pm/,"%P"),this._map.set(/AM|PM/,"%p"))}_testTokenType(t){return t.type===this.type}assign(t){this._map.forEach((r,a)=>{this._testTokenType(t)&&a.test(t.value)&&(t.format=r)})}}const dayOfMonthFormatTokenAssigner=new DayOfMonthFormatTokenAssigner("DelimiterFormatTokenAssigner","dayOfMonth"),dayOfWeekFormatTokenAssigner=new DayOfWeekFormatTokenAssigner("DayOfWeekFormatTokenAssigner","dayOfWeek"),dayOfYearFormatTokenAssigner=new DayOfYearFormatTokenAssigner("DayOfYearFormatTokenAssigner","dayOfYear"),delimiterFormatTokenAssigner=new DelimiterFormatTokenAssigner("DelimiterFormatTokenAssigner","delimiter"),escapeTextFormatTokenAssigner=new EscapeTextFormatTokenAssigner("EscapeTextFormatTokenAssigner","escapeText"),iSODayOfWeekFormatTokenAssigner=new ISODayOfWeekFormatTokenAssigner("ISODayOfWeekFormatTokenAssigner","isoDayOfWeek"),iSOWeekOfYearFormatTokenAssigner=new ISOWeekOfYearFormatTokenAssigner("ISOWeekOfYearFormatTokenAssigner","isoWeekOfYear"),meridiemFormatTokenAssigner=new MeridiemFormatTokenAssigner("MeridiemFormatTokenAssigner","meridiem"),millisecondFormatTokenAssigner=new MillisecondFormatTokenAssigner("MillisecondFormatTokenAssigner","millisecond"),minuteFormatTokenAssigner=new MinuteFormatTokenAssigner("MinuteFormatTokenAssigner","minute"),monthFormatTokenAssigner=new MonthFormatTokenAssigner("MonthFormatTokenAssigner","month"),secondFormatTokenAssigner=new SecondFormatTokenAssigner("SecondFormatTokenAssigner","second"),timezoneFormatTokenAssigner=new TimezoneFormatTokenAssigner("TimezoneFormatTokenAssigner","timezone"),twelveHourFormatTokenAssigner=new TwelveHourFormatTokenAssigner("TwelveHourFormatTokenAssigner","twelveHour"),twentyFourHourFormatTokenAssigner=new TwentyFourHourFormatTokenAssigner("TwentyFourHourFormatTokenAssigner","twentyFourHour"),yearFormatTokenAssigner=new YearFormatTokenAssigner("YearFormatTokenAssigner","year"),strftimeDayOfMonthFormatTokenAssigner=new DayOfMonthFormatTokenAssigner("DelimiterFormatTokenAssigner","dayOfMonth","strftime"),strftimeDayOfWeekFormatTokenAssigner=new DayOfWeekFormatTokenAssigner("DayOfWeekFormatTokenAssigner","dayOfWeek","strftime"),strftimeDayOfYearFormatTokenAssigner=new DayOfYearFormatTokenAssigner("DayOfYearFormatTokenAssigner","dayOfYear","strftime"),strftimeDelimiterFormatTokenAssigner=new DelimiterFormatTokenAssigner("DelimiterFormatTokenAssigner","delimiter","strftime"),strftimeEscapeTextFormatTokenAssigner=new EscapeTextFormatTokenAssigner("EscapeTextFormatTokenAssigner","escapeText","strftime"),strftimeISODayOfWeekFormatTokenAssigner=new ISODayOfWeekFormatTokenAssigner("ISODayOfWeekFormatTokenAssigner","isoDayOfWeek","strftime"),strftimeISOWeekOfYearFormatTokenAssigner=new ISOWeekOfYearFormatTokenAssigner("ISOWeekOfYearFormatTokenAssigner","isoWeekOfYear","strftime"),strftimeMeridiemFormatTokenAssigner=new MeridiemFormatTokenAssigner("MeridiemFormatTokenAssigner","meridiem","strftime"),strftimeMillisecondFormatTokenAssigner=new MillisecondFormatTokenAssigner("MillisecondFormatTokenAssigner","millisecond","strftime"),strftimeMinuteFormatTokenAssigner=new MinuteFormatTokenAssigner("MinuteFormatTokenAssigner","minute","strftime"),strftimeMonthFormatTokenAssigner=new MonthFormatTokenAssigner("MonthFormatTokenAssigner","month","strftime"),strftimeSecondFormatTokenAssigner=new SecondFormatTokenAssigner("SecondFormatTokenAssigner","second","strftime"),strftimeTimezoneFormatTokenAssigner=new TimezoneFormatTokenAssigner("TimezoneFormatTokenAssigner","timezone","strftime"),strftimeTwelveHourFormatTokenAssigner=new TwelveHourFormatTokenAssigner("TwelveHourFormatTokenAssigner","twelveHour","strftime"),strftimeTwentyFourHourFormatTokenAssigner=new TwentyFourHourFormatTokenAssigner("TwentyFourHourFormatTokenAssigner","twentyFourHour","strftime"),strftimeYearFormatTokenAssigner=new YearFormatTokenAssigner("YearFormatTokenAssigner","year","strftime"),defaultAssigners=[yearFormatTokenAssigner,monthFormatTokenAssigner,dayOfMonthFormatTokenAssigner,delimiterFormatTokenAssigner,minuteFormatTokenAssigner,secondFormatTokenAssigner,millisecondFormatTokenAssigner,timezoneFormatTokenAssigner,dayOfYearFormatTokenAssigner,escapeTextFormatTokenAssigner,iSODayOfWeekFormatTokenAssigner,iSOWeekOfYearFormatTokenAssigner,twentyFourHourFormatTokenAssigner,twelveHourFormatTokenAssigner,dayOfWeekFormatTokenAssigner,meridiemFormatTokenAssigner],strftimeAssigners=[strftimeDayOfMonthFormatTokenAssigner,strftimeDayOfWeekFormatTokenAssigner,strftimeDayOfYearFormatTokenAssigner,strftimeDelimiterFormatTokenAssigner,strftimeEscapeTextFormatTokenAssigner,strftimeISODayOfWeekFormatTokenAssigner,strftimeISOWeekOfYearFormatTokenAssigner,strftimeMeridiemFormatTokenAssigner,strftimeMillisecondFormatTokenAssigner,strftimeMinuteFormatTokenAssigner,strftimeMonthFormatTokenAssigner,strftimeSecondFormatTokenAssigner,strftimeTimezoneFormatTokenAssigner,strftimeTwelveHourFormatTokenAssigner,strftimeTwentyFourHourFormatTokenAssigner,strftimeYearFormatTokenAssigner];class Guesser{constructor(){}static parse(t){const r=[];return parsers.forEach(a=>{const i=a.parse(t);i&&r.push(Object.assign({},i))}),r}static refine(t){let r=[...t];return refiners.forEach(a=>{r=[...a.refine(r)]}),r}static assign(t,r){(!r||r==="default"?defaultAssigners:strftimeAssigners).forEach(i=>{t.forEach(o=>{i.assign(o)})})}static getFormatString(t){let r="";return t.forEach(a=>{if(a.format==="NA")throw Error(`Couldn't find strftime modifier for "${a.value}"`);r+=a.format?a.format:a.value}),r}}function guessFormat(e,t){const r=Guesser.parse(e),a=Guesser.refine(r);if(a.length===0)throw Error("Couldn't parse date");a.forEach(o=>Guesser.assign(o.tokens,t));let i=[];return a.forEach(o=>i.push(Guesser.getFormatString(o.tokens))),i.length===1?i[0]:i}function createSequenceArray(e,t,r=1){const a=[];for(let i=e;i<=t;i+=r)a.push(i);return a}function mean(e){return e.reduce((t,r)=>t+r,0)/e.length}function max(e){let t=Number.NEGATIVE_INFINITY;for(let r=0;r<e.length;r++){let a=parseFloat(e[r])||0;a>t&&(t=a)}return t}function min(e){let t=Number.POSITIVE_INFINITY;for(let r=0;r<e.length;r++){let a=parseFloat(e[r])||0;a<t&&(t=a)}return t}const decimalPlaces=4;function convertFormat(e){const t={from:["A","D","DD","M","MM","YY","YYYY"],to:["a","d","dd","L","LL","yy","yyyy"]};let r=e;return t.from.forEach((a,i)=>{const o=t.to[i],u=new RegExp(`\\b${a}\\b`,"g");r=r.replace(u,o)}),r}function guessDateFormat(e){const t=guessFormat(e);return typeof t=="string"?[t]:t}function guessDateofArray(e){try{let t=guessDateFormat(e[0]);for(let a=1;a<e.length;a++)t=[...new Set([...t,...guessDateFormat(e[a])])];const r=t.filter(a=>e.every(i=>DateTime.fromFormat(i,convertFormat(a)).invalid===null));return r.length==1?r[0]:t[0]}catch{return-1}}function calculateTimeDifference(e,t,r){if(e===null||t===null||e===void 0||t===void 0)return null;e=DateTime.fromFormat(e,r),t=DateTime.fromFormat(t,r);var a=t.diff(e,"hours");return a.hours.toFixed(decimalPlaces)}function getPeriod(e,t){let r=new Array(e.length-1);for(let a=1;a<e.length;a++)r[a-1]=calculateTimeDifference(e[a-1],e[a],convertFormat(t));return console.log(min(r)+", "+max(r)),console.log(r),{minDiff:min(r),constant:min(r)===max(r)}}function getstartTimeOffset(e,t,r){let a=DateTime.fromISO(e);return DateTime.fromFormat(t,convertFormat(r)).diff(a,"hours").hours.toFixed(decimalPlaces)}function getGuessedFormat(e){return guessDateofArray(e)}function forceFormat(e,t){return e.map(a=>calculateTimeDifference(e[0],a,convertFormat(t)))}function formatTimeFromISO(e){if(e){const[t,r]=e.split("T"),[a,i,o]=t.split("-"),[u,c]=r.split(":"),f=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][+i-1];return`${o} ${f} ${a} ${u}:${c}`}else return""}function getISODate(e,t){return DateTime.fromFormat(e,convertFormat(t)).toISO()}function addTime(e,t){return formatTimeFromISO(DateTime.fromISO(e).plus({hours:t}).toISO())}function get_each_context$d(e,t,r){const a=e.slice();return a[20]=t[r],a[21]=t,a[22]=r,a}function create_if_block$j(e){let t,r;return t=new Dialog({props:{title:"GENERATE SIMULATED DATA",$$slots:{default:[create_default_slot$7]},$$scope:{ctx:e}}}),{c(){create_component(t.$$.fragment)},m(a,i){mount_component(t,a,i),r=!0},p(a,i){const o={};i&8388671&&(o.$$scope={dirty:i,ctx:a}),t.$set(o)},i(a){r||(transition_in(t.$$.fragment,a),r=!0)},o(a){transition_out(t.$$.fragment,a),r=!1},d(a){destroy_component(t,a)}}}function create_each_block$d(e){let t,r,a,i,o,u,c,d,f,m,p,h,_,y,D,$,b;function g(){return e[15](e[22])}function v(O){e[16](O,e[22])}let k={min:21,max:26,limits:[6,72],step:"0.1",label:"Rhythm period (hours):"};e[4][e[22]]!==void 0&&(k.value=e[4][e[22]]),f=new Slider({props:k}),binding_callbacks.push(()=>bind(f,"value",v));function T(O){e[17](O,e[22])}let S={min:1,max:100,limits:[10,1e4],label:"Max values:"};return e[5][e[22]]!==void 0&&(S.value=e[5][e[22]]),_=new Slider({props:S}),binding_callbacks.push(()=>bind(_,"value",T)),{c(){t=element("div"),r=element("div"),a=element("div"),a.textContent=`value${e[22]}:`,i=space(),o=element("div"),o.textContent="",u=space(),c=element("div"),d=element("div"),create_component(f.$$.fragment),p=space(),h=element("div"),create_component(_.$$.fragment),attr(o,"class","removeData hoverbutton svelte-13hhe3j"),attr(r,"class","dataTitle svelte-13hhe3j"),attr(t,"class","datum svelte-13hhe3j")},m(O,M){insert(O,t,M),append(t,r),append(r,a),append(r,i),append(r,o),append(r,u),append(r,c),append(c,d),mount_component(f,d,null),append(c,p),append(c,h),mount_component(_,h,null),D=!0,$||(b=listen(o,"click",g),$=!0)},p(O,M){e=O;const N={};!m&&M&16&&(m=!0,N.value=e[4][e[22]],add_flush_callback(()=>m=!1)),f.$set(N);const w={};!y&&M&32&&(y=!0,w.value=e[5][e[22]],add_flush_callback(()=>y=!1)),_.$set(w)},i(O){D||(transition_in(f.$$.fragment,O),transition_in(_.$$.fragment,O),D=!0)},o(O){transition_out(f.$$.fragment,O),transition_out(_.$$.fragment,O),D=!1},d(O){O&&detach(t),destroy_component(f),destroy_component(_),$=!1,b()}}}function create_default_slot$7(e){let t,r,a,i,o,u,c,d,f,m,p,h,_,y,D,$,b,g,v,k,T,S,O,M;function N(L){e[10](L)}let w={min:5,max:30,limits:[1,1/0],label:"Days:"};e[0]!==void 0&&(w.value=e[0]),r=new Slider({props:w}),binding_callbacks.push(()=>bind(r,"value",N));function I(L){e[11](L)}let H={min:1,max:240,step:1,limits:[1,240],label:"Sampling period (minutes):"};e[1]!==void 0&&(H.value=e[1]),u=new Slider({props:H}),binding_callbacks.push(()=>bind(u,"value",I));let q=ensure_array_like(Array.from({length:e[3]})),A=[];for(let L=0;L<q.length;L+=1)A[L]=create_each_block$d(get_each_context$d(e,q,L));const E=L=>transition_out(A[L],1,1,()=>{A[L]=null});return{c(){t=element("div"),create_component(r.$$.fragment),i=space(),o=element("div"),create_component(u.$$.fragment),d=space(),f=element("div"),m=element("label"),m.textContent="Start time:",p=space(),h=element("input"),_=space(),y=element("hr"),D=space(),$=element("h2"),$.textContent="Data:",b=space(),g=element("span"),g.textContent="",v=space();for(let L=0;L<A.length;L+=1)A[L].c();k=space(),T=element("button"),T.textContent="Generate",attr(m,"for","val"),attr(h,"type","datetime-local"),attr(h,"name","start"),attr(g,"class","addSimDataButton svelte-13hhe3j")},m(L,Z){insert(L,t,Z),mount_component(r,t,null),insert(L,i,Z),insert(L,o,Z),mount_component(u,o,null),insert(L,d,Z),insert(L,f,Z),append(f,m),append(f,p),append(f,h),set_input_value(h,e[2]),insert(L,_,Z),insert(L,y,Z),insert(L,D,Z),insert(L,$,Z),insert(L,b,Z),insert(L,g,Z),insert(L,v,Z);for(let C=0;C<A.length;C+=1)A[C]&&A[C].m(L,Z);insert(L,k,Z),insert(L,T,Z),S=!0,O||(M=[listen(h,"input",e[12]),listen(h,"change",e[13]),listen(g,"click",e[14]),listen(T,"click",e[18])],O=!0)},p(L,Z){const C={};!a&&Z&1&&(a=!0,C.value=L[0],add_flush_callback(()=>a=!1)),r.$set(C);const F={};if(!c&&Z&2&&(c=!0,F.value=L[1],add_flush_callback(()=>c=!1)),u.$set(F),Z&4&&set_input_value(h,L[2]),Z&312){q=ensure_array_like(Array.from({length:L[3]}));let P;for(P=0;P<q.length;P+=1){const Y=get_each_context$d(L,q,P);A[P]?(A[P].p(Y,Z),transition_in(A[P],1)):(A[P]=create_each_block$d(Y),A[P].c(),transition_in(A[P],1),A[P].m(k.parentNode,k))}for(group_outros(),P=q.length;P<A.length;P+=1)E(P);check_outros()}},i(L){if(!S){transition_in(r.$$.fragment,L),transition_in(u.$$.fragment,L);for(let Z=0;Z<q.length;Z+=1)transition_in(A[Z]);S=!0}},o(L){transition_out(r.$$.fragment,L),transition_out(u.$$.fragment,L),A=A.filter(Boolean);for(let Z=0;Z<A.length;Z+=1)transition_out(A[Z]);S=!1},d(L){L&&(detach(t),detach(i),detach(o),detach(d),detach(f),detach(_),detach(y),detach(D),detach($),detach(b),detach(g),detach(v),detach(k),detach(T)),destroy_component(r),destroy_component(u),destroy_each(A,L),O=!1,run_all(M)}}}function create_fragment$r(e){let t,r,a=e[6]==="generateSim"&&create_if_block$j(e);return{c(){a&&a.c(),t=empty$1()},m(i,o){a&&a.m(i,o),insert(i,t,o),r=!0},p(i,[o]){i[6]==="generateSim"?a?(a.p(i,o),o&64&&transition_in(a,1)):(a=create_if_block$j(i),a.c(),transition_in(a,1),a.m(t.parentNode,t)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(i){r||(transition_in(a),r=!0)},o(i){transition_out(a),r=!1},d(i){i&&detach(t),a&&a.d(i)}}}function instance$r(e,t,r){let a,i;component_subscribe(e,menuModalType,O=>r(6,a=O)),component_subscribe(e,data,O=>r(19,i=O)),onMount(()=>{o(28,15,DateTime.now().set({hour:0,minute:0,second:0,millisecond:0}).toJSDate(),[24,28],[100,150])});function o(O,M,N,w,I){const H={id:i.length,importedFrom:`simulated(${O},${I[0]})`,displayName:`Simulated_${i.length+1}`,datalength:O*24*(60/M),data:{}},q=[];for(let Z=0;Z<H.datalength;Z++){const C=new Date(N.getTime()+Z*M*60*1e3).toLocaleString("en-US");q.push(C)}const A=guessDateofArray(q),E=forceFormat(q,A),L=getPeriod(q,A);H.data.time={name:"time",type:"time",data:q,timeData:E,processSteps:[],processedData:[],timeFormat:A,recordPeriod:L};for(let Z=0;Z<w.length;Z++){const C=`value${Z}`,F=[],P=I[Z],z=w[Z]*(60/M);for(let U=0;U<H.datalength;U++){const X=U%z<z/2?P*.05:P,ue=Math.random()*X;F.push(Math.round(ue))}H.data[C]={name:C,type:"value",data:F,processSteps:[],processedData:[]}}data.update(Z=>[...Z,H]),set_store_value(menuModalType,a=null,a)}let u=28,c=15,d=DateTime.now().set({hour:0,minute:0,second:0,millisecond:0}).toJSDate(),f=2,m=[24,25],p=[200,400];function h(O){r(3,f-=1),m.slice(O,1),p.slice(O,1)}function _(){r(3,f+=1),m.push(24),p.push(100)}function y(O){u=O,r(0,u)}function D(O){c=O,r(1,c)}function $(){d=this.value,r(2,d)}const b=O=>console.log(O),g=()=>_(),v=O=>h(O);function k(O,M){e.$$.not_equal(m[M],O)&&(m[M]=O,r(4,m))}function T(O,M){e.$$.not_equal(p[M],O)&&(p[M]=O,r(5,p))}return[u,c,d,f,m,p,a,o,h,_,y,D,$,b,g,v,k,T,()=>o(u,c,d,m,p)]}class GenerateSimulated extends SvelteComponent{constructor(t){super(),init(this,t,instance$r,create_fragment$r,safe_not_equal,{})}}function create_fragment$q(e){let t,r,a,i,o,u,c;return{c(){t=element("label"),t.textContent="From:",r=element("input"),a=space(),i=element("label"),i.textContent="To:",o=element("input")},m(d,f){insert(d,t,f),insert(d,r,f),set_input_value(r,e[0].from),insert(d,a,f),insert(d,i,f),insert(d,o,f),set_input_value(o,e[0].to),u||(c=[listen(r,"input",e[3]),listen(o,"input",e[4])],u=!0)},p(d,[f]){f&1&&r.value!==d[0].from&&set_input_value(r,d[0].from),f&1&&o.value!==d[0].to&&set_input_value(o,d[0].to)},i:noop,o:noop,d(d){d&&(detach(t),detach(r),detach(a),detach(i),detach(o)),u=!1,run_all(c)}}}function replace(e=[1,2,3],t={from:0,to:100}){var r=[...e];for(let a=0;a<r.length;a++)r[a]==t.from&&(r[a]=t.to);return r}function instance$q(e,t,r){const a=createEventDispatcher();let{paramsStart:i}=t,{typeTime:o}=t,{params:u={from:0,to:100}}=t;Object.keys(i).length>0&&(u=Object.assign({},i));function c(){u.from=this.value,r(0,u)}function d(){u.to=this.value,r(0,u)}return e.$$set=f=>{"paramsStart"in f&&r(1,i=f.paramsStart),"typeTime"in f&&r(2,o=f.typeTime),"params"in f&&r(0,u=f.params)},e.$$.update=()=>{e.$$.dirty&1&&a("update",{params:u})},[u,i,o,c,d]}class Replace extends SvelteComponent{constructor(t){super(),init(this,t,instance$q,create_fragment$q,safe_not_equal,{paramsStart:1,typeTime:2,params:0})}}function create_if_block_1$9(e){let t,r,a,i,o,u;function c(p){e[5](p)}let d={min:dataMin-1,max:dataMax+1,label:"Min (hrs):"};e[0].min!==void 0&&(d.value=e[0].min),t=new Slider({props:d}),binding_callbacks.push(()=>bind(t,"value",c));function f(p){e[6](p)}let m={min:dataMin-1,max:dataMax+1,label:"Max (hrs):"};return e[0].max!==void 0&&(m.value=e[0].max),i=new Slider({props:m}),binding_callbacks.push(()=>bind(i,"value",f)),{c(){create_component(t.$$.fragment),a=space(),create_component(i.$$.fragment)},m(p,h){mount_component(t,p,h),insert(p,a,h),mount_component(i,p,h),u=!0},p(p,h){const _={};!r&&h&1&&(r=!0,_.value=p[0].min,add_flush_callback(()=>r=!1)),t.$set(_);const y={};!o&&h&1&&(o=!0,y.value=p[0].max,add_flush_callback(()=>o=!1)),i.$set(y)},i(p){u||(transition_in(t.$$.fragment,p),transition_in(i.$$.fragment,p),u=!0)},o(p){transition_out(t.$$.fragment,p),transition_out(i.$$.fragment,p),u=!1},d(p){p&&detach(a),destroy_component(t,p),destroy_component(i,p)}}}function create_if_block$i(e){let t,r,a,i,o,u;function c(p){e[3](p)}let d={min:dataMin-1,max:dataMax+1,label:"Min:"};e[0].min!==void 0&&(d.value=e[0].min),t=new Slider({props:d}),binding_callbacks.push(()=>bind(t,"value",c));function f(p){e[4](p)}let m={min:dataMin-1,max:dataMax+1,label:"Max:"};return e[0].max!==void 0&&(m.value=e[0].max),i=new Slider({props:m}),binding_callbacks.push(()=>bind(i,"value",f)),{c(){create_component(t.$$.fragment),a=space(),create_component(i.$$.fragment)},m(p,h){mount_component(t,p,h),insert(p,a,h),mount_component(i,p,h),u=!0},p(p,h){const _={};!r&&h&1&&(r=!0,_.value=p[0].min,add_flush_callback(()=>r=!1)),t.$set(_);const y={};!o&&h&1&&(o=!0,y.value=p[0].max,add_flush_callback(()=>o=!1)),i.$set(y)},i(p){u||(transition_in(t.$$.fragment,p),transition_in(i.$$.fragment,p),u=!0)},o(p){transition_out(t.$$.fragment,p),transition_out(i.$$.fragment,p),u=!1},d(p){p&&detach(a),destroy_component(t,p),destroy_component(i,p)}}}function create_fragment$p(e){let t,r,a,i;const o=[create_if_block$i,create_if_block_1$9],u=[];function c(d,f){return d[1].type==="value"?0:d[1].type==="time"?1:-1}return~(t=c(e))&&(r=u[t]=o[t](e)),{c(){r&&r.c(),a=empty$1()},m(d,f){~t&&u[t].m(d,f),insert(d,a,f),i=!0},p(d,[f]){let m=t;t=c(d),t===m?~t&&u[t].p(d,f):(r&&(group_outros(),transition_out(u[m],1,1,()=>{u[m]=null}),check_outros()),~t?(r=u[t],r?r.p(d,f):(r=u[t]=o[t](d),r.c()),transition_in(r,1),r.m(a.parentNode,a)):r=null)},i(d){i||(transition_in(r),i=!0)},o(d){transition_out(r),i=!1},d(d){d&&detach(a),~t&&u[t].d(d)}}}function filter$1(e=[1,2,3],t={min:0,max:12}){Math.min(...e),Math.max(...e);var r=[...e];for(let a=0;a<r.length;a++)r[a]<t.min?r[a]=NaN:r[a]>t.max&&(r[a]=NaN);return r}const dataMin=0,dataMax=1e4;function instance$p(e,t,r){const a=createEventDispatcher();let{paramsStart:i}=t,{typeTime:o}=t,{params:u={min:dataMin,max:dataMax}}=t;Object.keys(i).length>0&&(u=Object.assign({},i));function c(p){e.$$.not_equal(u.min,p)&&(u.min=p,r(0,u))}function d(p){e.$$.not_equal(u.max,p)&&(u.max=p,r(0,u))}function f(p){e.$$.not_equal(u.min,p)&&(u.min=p,r(0,u))}function m(p){e.$$.not_equal(u.max,p)&&(u.max=p,r(0,u))}return e.$$set=p=>{"paramsStart"in p&&r(2,i=p.paramsStart),"typeTime"in p&&r(1,o=p.typeTime),"params"in p&&r(0,u=p.params)},e.$$.update=()=>{e.$$.dirty&1&&u.max<u.min&&r(0,u.max=u.min,u),e.$$.dirty&1&&a("update",{params:u})},[u,o,i,c,d,f,m]}class Filter extends SvelteComponent{constructor(t){super(),init(this,t,instance$p,create_fragment$p,safe_not_equal,{paramsStart:2,typeTime:1,params:0})}}function create_if_block_1$8(e){let t,r,a;function i(u){e[4](u)}let o={min:-20,max:20,step:.5,label:"Add (hrs):"};return e[0].val!==void 0&&(o.value=e[0].val),t=new Slider({props:o}),binding_callbacks.push(()=>bind(t,"value",i)),{c(){create_component(t.$$.fragment)},m(u,c){mount_component(t,u,c),a=!0},p(u,c){const d={};!r&&c&1&&(r=!0,d.value=u[0].val,add_flush_callback(()=>r=!1)),t.$set(d)},i(u){a||(transition_in(t.$$.fragment,u),a=!0)},o(u){transition_out(t.$$.fragment,u),a=!1},d(u){destroy_component(t,u)}}}function create_if_block$h(e){let t,r,a;function i(u){e[3](u)}let o={min:-20,max:20,label:"Add:"};return e[0].val!==void 0&&(o.value=e[0].val),t=new Slider({props:o}),binding_callbacks.push(()=>bind(t,"value",i)),{c(){create_component(t.$$.fragment)},m(u,c){mount_component(t,u,c),a=!0},p(u,c){const d={};!r&&c&1&&(r=!0,d.value=u[0].val,add_flush_callback(()=>r=!1)),t.$set(d)},i(u){a||(transition_in(t.$$.fragment,u),a=!0)},o(u){transition_out(t.$$.fragment,u),a=!1},d(u){destroy_component(t,u)}}}function create_fragment$o(e){let t,r,a,i;const o=[create_if_block$h,create_if_block_1$8],u=[];function c(d,f){return d[1].type==="value"?0:d[1].type==="time"?1:-1}return~(t=c(e))&&(r=u[t]=o[t](e)),{c(){r&&r.c(),a=empty$1()},m(d,f){~t&&u[t].m(d,f),insert(d,a,f),i=!0},p(d,[f]){let m=t;t=c(d),t===m?~t&&u[t].p(d,f):(r&&(group_outros(),transition_out(u[m],1,1,()=>{u[m]=null}),check_outros()),~t?(r=u[t],r?r.p(d,f):(r=u[t]=o[t](d),r.c()),transition_in(r,1),r.m(a.parentNode,a)):r=null)},i(d){i||(transition_in(r),i=!0)},o(d){transition_out(r),i=!1},d(d){d&&detach(a),~t&&u[t].d(d)}}}function add(e=[1,2,3],t={val:0}){var r=[...e];for(let a=0;a<r.length;a++)r[a]=r[a]+t.val;return r}function instance$o(e,t,r){const a=createEventDispatcher();let{paramsStart:i}=t,{typeTime:o}=t,{params:u={val:0}}=t;Object.keys(i).length>0&&(u=Object.assign({},i));function c(f){e.$$.not_equal(u.val,f)&&(u.val=f,r(0,u))}function d(f){e.$$.not_equal(u.val,f)&&(u.val=f,r(0,u))}return e.$$set=f=>{"paramsStart"in f&&r(2,i=f.paramsStart),"typeTime"in f&&r(1,o=f.typeTime),"params"in f&&r(0,u=f.params)},e.$$.update=()=>{e.$$.dirty&1&&a("update",{params:u})},[u,o,i,c,d]}class Add extends SvelteComponent{constructor(t){super(),init(this,t,instance$o,create_fragment$o,safe_not_equal,{paramsStart:2,typeTime:1,params:0})}}function ascending$1(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function descending(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function bisector(e){let t,r,a;e.length!==2?(t=ascending$1,r=(c,d)=>ascending$1(e(c),d),a=(c,d)=>e(c)-d):(t=e===ascending$1||e===descending?e:zero$1,r=e,a=e);function i(c,d,f=0,m=c.length){if(f<m){if(t(d,d)!==0)return m;do{const p=f+m>>>1;r(c[p],d)<0?f=p+1:m=p}while(f<m)}return f}function o(c,d,f=0,m=c.length){if(f<m){if(t(d,d)!==0)return m;do{const p=f+m>>>1;r(c[p],d)<=0?f=p+1:m=p}while(f<m)}return f}function u(c,d,f=0,m=c.length){const p=i(c,d,f,m-1);return p>f&&a(c[p-1],d)>-a(c[p],d)?p-1:p}return{left:i,center:u,right:o}}function zero$1(){return 0}function number$2(e){return e===null?NaN:+e}const ascendingBisect=bisector(ascending$1),bisectRight=ascendingBisect.right;bisector(number$2).center;const e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(e,t,r){const a=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(a)),o=a/Math.pow(10,i),u=o>=e10?10:o>=e5?5:o>=e2?2:1;let c,d,f;return i<0?(f=Math.pow(10,-i)/u,c=Math.round(e*f),d=Math.round(t*f),c/f<e&&++c,d/f>t&&--d,f=-f):(f=Math.pow(10,i)*u,c=Math.round(e/f),d=Math.round(t/f),c*f<e&&++c,d*f>t&&--d),d<c&&.5<=r&&r<2?tickSpec(e,t,r*2):[c,d,f]}function ticks(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const a=t<e,[i,o,u]=a?tickSpec(t,e,r):tickSpec(e,t,r);if(!(o>=i))return[];const c=o-i+1,d=new Array(c);if(a)if(u<0)for(let f=0;f<c;++f)d[f]=(o-f)/-u;else for(let f=0;f<c;++f)d[f]=(o-f)*u;else if(u<0)for(let f=0;f<c;++f)d[f]=(i+f)/-u;else for(let f=0;f<c;++f)d[f]=(i+f)*u;return d}function tickIncrement(e,t,r){return t=+t,e=+e,r=+r,tickSpec(e,t,r)[2]}function tickStep(e,t,r){t=+t,e=+e,r=+r;const a=t<e,i=a?tickIncrement(t,e,r):tickIncrement(e,t,r);return(a?-1:1)*(i<0?1/-i:i)}function initRange(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function define(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function extend(e,t){var r=Object.create(e.prototype);for(var a in t)r[a]=t[a];return r}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=reHex.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?rgbn(t):r===3?new Rgb(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?rgba(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?rgba(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=reRgbInteger.exec(e))?new Rgb(t[1],t[2],t[3],1):(t=reRgbPercent.exec(e))?new Rgb(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=reRgbaInteger.exec(e))?rgba(t[1],t[2],t[3],t[4]):(t=reRgbaPercent.exec(e))?rgba(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=reHslPercent.exec(e))?hsla(t[1],t[2]/100,t[3]/100,1):(t=reHslaPercent.exec(e))?hsla(t[1],t[2]/100,t[3]/100,t[4]):named.hasOwnProperty(e)?rgbn(named[e]):e==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(e){return new Rgb(e>>16&255,e>>8&255,e&255,1)}function rgba(e,t,r,a){return a<=0&&(e=t=r=NaN),new Rgb(e,t,r,a)}function rgbConvert(e){return e instanceof Color||(e=color(e)),e?(e=e.rgb(),new Rgb(e.r,e.g,e.b,e.opacity)):new Rgb}function rgb$1(e,t,r,a){return arguments.length===1?rgbConvert(e):new Rgb(e,t,r,a??1)}function Rgb(e,t,r,a){this.r=+e,this.g=+t,this.b=+r,this.opacity=+a}define(Rgb,rgb$1,extend(Color,{brighter(e){return e=e==null?brighter:Math.pow(brighter,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?darker:Math.pow(darker,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const e=clampa(this.opacity);return`${e===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${e===1?")":`, ${e})`}`}function clampa(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function clampi(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function hex(e){return e=clampi(e),(e<16?"0":"")+e.toString(16)}function hsla(e,t,r,a){return a<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Hsl(e,t,r,a)}function hslConvert(e){if(e instanceof Hsl)return new Hsl(e.h,e.s,e.l,e.opacity);if(e instanceof Color||(e=color(e)),!e)return new Hsl;if(e instanceof Hsl)return e;e=e.rgb();var t=e.r/255,r=e.g/255,a=e.b/255,i=Math.min(t,r,a),o=Math.max(t,r,a),u=NaN,c=o-i,d=(o+i)/2;return c?(t===o?u=(r-a)/c+(r<a)*6:r===o?u=(a-t)/c+2:u=(t-r)/c+4,c/=d<.5?o+i:2-o-i,u*=60):c=d>0&&d<1?0:u,new Hsl(u,c,d,e.opacity)}function hsl(e,t,r,a){return arguments.length===1?hslConvert(e):new Hsl(e,t,r,a??1)}function Hsl(e,t,r,a){this.h=+e,this.s=+t,this.l=+r,this.opacity=+a}define(Hsl,hsl,extend(Color,{brighter(e){return e=e==null?brighter:Math.pow(brighter,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?darker:Math.pow(darker,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,a=r+(r<.5?r:1-r)*t,i=2*r-a;return new Rgb(hsl2rgb(e>=240?e-240:e+120,i,a),hsl2rgb(e,i,a),hsl2rgb(e<120?e+240:e-120,i,a),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=clampa(this.opacity);return`${e===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function clamph(e){return e=(e||0)%360,e<0?e+360:e}function clampt(e){return Math.max(0,Math.min(1,e||0))}function hsl2rgb(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const constant$1=e=>()=>e;function linear$1(e,t){return function(r){return e+r*t}}function exponential(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(a){return Math.pow(e+a*t,r)}}function gamma(e){return(e=+e)==1?nogamma:function(t,r){return r-t?exponential(t,r,e):constant$1(isNaN(t)?r:t)}}function nogamma(e,t){var r=t-e;return r?linear$1(e,r):constant$1(isNaN(e)?t:e)}const rgb=function e(t){var r=gamma(t);function a(i,o){var u=r((i=rgb$1(i)).r,(o=rgb$1(o)).r),c=r(i.g,o.g),d=r(i.b,o.b),f=nogamma(i.opacity,o.opacity);return function(m){return i.r=u(m),i.g=c(m),i.b=d(m),i.opacity=f(m),i+""}}return a.gamma=e,a}(1);function numberArray(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,a=t.slice(),i;return function(o){for(i=0;i<r;++i)a[i]=e[i]*(1-o)+t[i]*o;return a}}function isNumberArray(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function genericArray(e,t){var r=t?t.length:0,a=e?Math.min(r,e.length):0,i=new Array(a),o=new Array(r),u;for(u=0;u<a;++u)i[u]=interpolate(e[u],t[u]);for(;u<r;++u)o[u]=t[u];return function(c){for(u=0;u<a;++u)o[u]=i[u](c);return o}}function date(e,t){var r=new Date;return e=+e,t=+t,function(a){return r.setTime(e*(1-a)+t*a),r}}function interpolateNumber(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function object(e,t){var r={},a={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=interpolate(e[i],t[i]):a[i]=t[i];return function(o){for(i in r)a[i]=r[i](o);return a}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(e){return function(){return e}}function one(e){return function(t){return e(t)+""}}function string(e,t){var r=reA.lastIndex=reB.lastIndex=0,a,i,o,u=-1,c=[],d=[];for(e=e+"",t=t+"";(a=reA.exec(e))&&(i=reB.exec(t));)(o=i.index)>r&&(o=t.slice(r,o),c[u]?c[u]+=o:c[++u]=o),(a=a[0])===(i=i[0])?c[u]?c[u]+=i:c[++u]=i:(c[++u]=null,d.push({i:u,x:interpolateNumber(a,i)})),r=reB.lastIndex;return r<t.length&&(o=t.slice(r),c[u]?c[u]+=o:c[++u]=o),c.length<2?d[0]?one(d[0].x):zero(t):(t=d.length,function(f){for(var m=0,p;m<t;++m)c[(p=d[m]).i]=p.x(f);return c.join("")})}function interpolate(e,t){var r=typeof t,a;return t==null||r==="boolean"?constant$1(t):(r==="number"?interpolateNumber:r==="string"?(a=color(t))?(t=a,rgb):string:t instanceof color?rgb:t instanceof Date?date:isNumberArray(t)?numberArray:Array.isArray(t)?genericArray:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?object:interpolateNumber)(e,t)}function interpolateRound(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function constants(e){return function(){return e}}function number$1(e){return+e}var unit=[0,1];function identity$2(e){return e}function normalize(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:constants(isNaN(t)?NaN:.5)}function clamper(e,t){var r;return e>t&&(r=e,e=t,t=r),function(a){return Math.max(e,Math.min(t,a))}}function bimap(e,t,r){var a=e[0],i=e[1],o=t[0],u=t[1];return i<a?(a=normalize(i,a),o=r(u,o)):(a=normalize(a,i),o=r(o,u)),function(c){return o(a(c))}}function polymap(e,t,r){var a=Math.min(e.length,t.length)-1,i=new Array(a),o=new Array(a),u=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++u<a;)i[u]=normalize(e[u],e[u+1]),o[u]=r(t[u],t[u+1]);return function(c){var d=bisectRight(e,c,1,a)-1;return o[d](i[d](c))}}function copy(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function transformer(){var e=unit,t=unit,r=interpolate,a,i,o,u=identity$2,c,d,f;function m(){var h=Math.min(e.length,t.length);return u!==identity$2&&(u=clamper(e[0],e[h-1])),c=h>2?polymap:bimap,d=f=null,p}function p(h){return h==null||isNaN(h=+h)?o:(d||(d=c(e.map(a),t,r)))(a(u(h)))}return p.invert=function(h){return u(i((f||(f=c(t,e.map(a),interpolateNumber)))(h)))},p.domain=function(h){return arguments.length?(e=Array.from(h,number$1),m()):e.slice()},p.range=function(h){return arguments.length?(t=Array.from(h),m()):t.slice()},p.rangeRound=function(h){return t=Array.from(h),r=interpolateRound,m()},p.clamp=function(h){return arguments.length?(u=h?!0:identity$2,m()):u!==identity$2},p.interpolate=function(h){return arguments.length?(r=h,m()):r},p.unknown=function(h){return arguments.length?(o=h,p):o},function(h,_){return a=h,i=_,m()}}function continuous(){return transformer()(identity$2,identity$2)}function formatDecimal(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function formatDecimalParts(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,a=e.slice(0,r);return[a.length>1?a[0]+a.slice(2):a,+e.slice(r+1)]}function exponent(e){return e=formatDecimalParts(Math.abs(e)),e?e[1]:NaN}function formatGroup(e,t){return function(r,a){for(var i=r.length,o=[],u=0,c=e[0],d=0;i>0&&c>0&&(d+c+1>a&&(c=Math.max(1,a-d)),o.push(r.substring(i-=c,i+c)),!((d+=c+1)>a));)c=e[u=(u+1)%e.length];return o.reverse().join(t)}}function formatNumerals(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(e){if(!(t=re.exec(e)))throw new Error("invalid format: "+e);var t;return new FormatSpecifier({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(e){e:for(var t=e.length,r=1,a=-1,i;r<t;++r)switch(e[r]){case".":a=i=r;break;case"0":a===0&&(a=r),i=r;break;default:if(!+e[r])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(i+1):e}var prefixExponent;function formatPrefixAuto(e,t){var r=formatDecimalParts(e,t);if(!r)return e+"";var a=r[0],i=r[1],o=i-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,u=a.length;return o===u?a:o>u?a+new Array(o-u+1).join("0"):o>0?a.slice(0,o)+"."+a.slice(o):"0."+new Array(1-o).join("0")+formatDecimalParts(e,Math.max(0,t+o-1))[0]}function formatRounded(e,t){var r=formatDecimalParts(e,t);if(!r)return e+"";var a=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+a:a.length>i+1?a.slice(0,i+1)+"."+a.slice(i+1):a+new Array(i-a.length+2).join("0")}const formatTypes={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:formatDecimal,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>formatRounded(e*100,t),r:formatRounded,s:formatPrefixAuto,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function identity$1(e){return e}var map=Array.prototype.map,prefixes=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function formatLocale(e){var t=e.grouping===void 0||e.thousands===void 0?identity$1:formatGroup(map.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?identity$1:formatNumerals(map.call(e.numerals,String)),u=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function f(p){p=formatSpecifier(p);var h=p.fill,_=p.align,y=p.sign,D=p.symbol,$=p.zero,b=p.width,g=p.comma,v=p.precision,k=p.trim,T=p.type;T==="n"?(g=!0,T="g"):formatTypes[T]||(v===void 0&&(v=12),k=!0,T="g"),($||h==="0"&&_==="=")&&($=!0,h="0",_="=");var S=D==="$"?r:D==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",O=D==="$"?a:/[%p]/.test(T)?u:"",M=formatTypes[T],N=/[defgprs%]/.test(T);v=v===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function w(I){var H=S,q=O,A,E,L;if(T==="c")q=M(I)+q,I="";else{I=+I;var Z=I<0||1/I<0;if(I=isNaN(I)?d:M(Math.abs(I),v),k&&(I=formatTrim(I)),Z&&+I==0&&y!=="+"&&(Z=!1),H=(Z?y==="("?y:c:y==="-"||y==="("?"":y)+H,q=(T==="s"?prefixes[8+prefixExponent/3]:"")+q+(Z&&y==="("?")":""),N){for(A=-1,E=I.length;++A<E;)if(L=I.charCodeAt(A),48>L||L>57){q=(L===46?i+I.slice(A+1):I.slice(A))+q,I=I.slice(0,A);break}}}g&&!$&&(I=t(I,1/0));var C=H.length+I.length+q.length,F=C<b?new Array(b-C+1).join(h):"";switch(g&&$&&(I=t(F+I,F.length?b-q.length:1/0),F=""),_){case"<":I=H+I+q+F;break;case"=":I=H+F+I+q;break;case"^":I=F.slice(0,C=F.length>>1)+H+I+q+F.slice(C);break;default:I=F+H+I+q;break}return o(I)}return w.toString=function(){return p+""},w}function m(p,h){var _=f((p=formatSpecifier(p),p.type="f",p)),y=Math.max(-8,Math.min(8,Math.floor(exponent(h)/3)))*3,D=Math.pow(10,-y),$=prefixes[8+y/3];return function(b){return _(D*b)+$}}return{format:f,formatPrefix:m}}var locale,format,formatPrefix;defaultLocale({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale(e){return locale=formatLocale(e),format=locale.format,formatPrefix=locale.formatPrefix,locale}function precisionFixed(e){return Math.max(0,-exponent(Math.abs(e)))}function precisionPrefix(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(t)/3)))*3-exponent(Math.abs(e)))}function precisionRound(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,exponent(t)-exponent(e))+1}function tickFormat(e,t,r,a){var i=tickStep(e,t,r),o;switch(a=formatSpecifier(a??",f"),a.type){case"s":{var u=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(o=precisionPrefix(i,u))&&(a.precision=o),formatPrefix(a,u)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(o=precisionRound(i,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=o-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(o=precisionFixed(i))&&(a.precision=o-(a.type==="%")*2);break}}return format(a)}function linearish(e){var t=e.domain;return e.ticks=function(r){var a=t();return ticks(a[0],a[a.length-1],r??10)},e.tickFormat=function(r,a){var i=t();return tickFormat(i[0],i[i.length-1],r??10,a)},e.nice=function(r){r==null&&(r=10);var a=t(),i=0,o=a.length-1,u=a[i],c=a[o],d,f,m=10;for(c<u&&(f=u,u=c,c=f,f=i,i=o,o=f);m-- >0;){if(f=tickIncrement(u,c,r),f===d)return a[i]=u,a[o]=c,t(a);if(f>0)u=Math.floor(u/f)*f,c=Math.ceil(c/f)*f;else if(f<0)u=Math.ceil(u*f)/f,c=Math.floor(c*f)/f;else break;d=f}return e},e}function linear(){var e=continuous();return e.copy=function(){return copy(e,linear())},initRange.apply(e,arguments),linearish(e)}var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),namespaces.hasOwnProperty(t)?{space:namespaces[t],local:e}:e}function creatorInherit(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===xhtml&&t.documentElement.namespaceURI===xhtml?t.createElement(e):t.createElementNS(r,e)}}function creatorFixed(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function creator(e){var t=namespace(e);return(t.local?creatorFixed:creatorInherit)(t)}function none(){}function selector(e){return e==null?none:function(){return this.querySelector(e)}}function selection_select(e){typeof e!="function"&&(e=selector(e));for(var t=this._groups,r=t.length,a=new Array(r),i=0;i<r;++i)for(var o=t[i],u=o.length,c=a[i]=new Array(u),d,f,m=0;m<u;++m)(d=o[m])&&(f=e.call(d,d.__data__,m,o))&&("__data__"in d&&(f.__data__=d.__data__),c[m]=f);return new Selection(a,this._parents)}function array(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function empty(){return[]}function selectorAll(e){return e==null?empty:function(){return this.querySelectorAll(e)}}function arrayAll(e){return function(){return array(e.apply(this,arguments))}}function selection_selectAll(e){typeof e=="function"?e=arrayAll(e):e=selectorAll(e);for(var t=this._groups,r=t.length,a=[],i=[],o=0;o<r;++o)for(var u=t[o],c=u.length,d,f=0;f<c;++f)(d=u[f])&&(a.push(e.call(d,d.__data__,f,u)),i.push(d));return new Selection(a,i)}function matcher(e){return function(){return this.matches(e)}}function childMatcher(e){return function(t){return t.matches(e)}}var find=Array.prototype.find;function childFind(e){return function(){return find.call(this.children,e)}}function childFirst(){return this.firstElementChild}function selection_selectChild(e){return this.select(e==null?childFirst:childFind(typeof e=="function"?e:childMatcher(e)))}var filter=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(e){return function(){return filter.call(this.children,e)}}function selection_selectChildren(e){return this.selectAll(e==null?children:childrenFilter(typeof e=="function"?e:childMatcher(e)))}function selection_filter(e){typeof e!="function"&&(e=matcher(e));for(var t=this._groups,r=t.length,a=new Array(r),i=0;i<r;++i)for(var o=t[i],u=o.length,c=a[i]=[],d,f=0;f<u;++f)(d=o[f])&&e.call(d,d.__data__,f,o)&&c.push(d);return new Selection(a,this._parents)}function sparse(e){return new Array(e.length)}function selection_enter(){return new Selection(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}EnterNode.prototype={constructor:EnterNode,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function constant(e){return function(){return e}}function bindIndex(e,t,r,a,i,o){for(var u=0,c,d=t.length,f=o.length;u<f;++u)(c=t[u])?(c.__data__=o[u],a[u]=c):r[u]=new EnterNode(e,o[u]);for(;u<d;++u)(c=t[u])&&(i[u]=c)}function bindKey(e,t,r,a,i,o,u){var c,d,f=new Map,m=t.length,p=o.length,h=new Array(m),_;for(c=0;c<m;++c)(d=t[c])&&(h[c]=_=u.call(d,d.__data__,c,t)+"",f.has(_)?i[c]=d:f.set(_,d));for(c=0;c<p;++c)_=u.call(e,o[c],c,o)+"",(d=f.get(_))?(a[c]=d,d.__data__=o[c],f.delete(_)):r[c]=new EnterNode(e,o[c]);for(c=0;c<m;++c)(d=t[c])&&f.get(h[c])===d&&(i[c]=d)}function datum(e){return e.__data__}function selection_data(e,t){if(!arguments.length)return Array.from(this,datum);var r=t?bindKey:bindIndex,a=this._parents,i=this._groups;typeof e!="function"&&(e=constant(e));for(var o=i.length,u=new Array(o),c=new Array(o),d=new Array(o),f=0;f<o;++f){var m=a[f],p=i[f],h=p.length,_=arraylike(e.call(m,m&&m.__data__,f,a)),y=_.length,D=c[f]=new Array(y),$=u[f]=new Array(y),b=d[f]=new Array(h);r(m,p,D,$,b,_,t);for(var g=0,v=0,k,T;g<y;++g)if(k=D[g]){for(g>=v&&(v=g+1);!(T=$[v])&&++v<y;);k._next=T||null}}return u=new Selection(u,a),u._enter=c,u._exit=d,u}function arraylike(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function selection_exit(){return new Selection(this._exit||this._groups.map(sparse),this._parents)}function selection_join(e,t,r){var a=this.enter(),i=this,o=this.exit();return typeof e=="function"?(a=e(a),a&&(a=a.selection())):a=a.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),r==null?o.remove():r(o),a&&i?a.merge(i).order():i}function selection_merge(e){for(var t=e.selection?e.selection():e,r=this._groups,a=t._groups,i=r.length,o=a.length,u=Math.min(i,o),c=new Array(i),d=0;d<u;++d)for(var f=r[d],m=a[d],p=f.length,h=c[d]=new Array(p),_,y=0;y<p;++y)(_=f[y]||m[y])&&(h[y]=_);for(;d<i;++d)c[d]=r[d];return new Selection(c,this._parents)}function selection_order(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var a=e[t],i=a.length-1,o=a[i],u;--i>=0;)(u=a[i])&&(o&&u.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(u,o),o=u);return this}function selection_sort(e){e||(e=ascending);function t(p,h){return p&&h?e(p.__data__,h.__data__):!p-!h}for(var r=this._groups,a=r.length,i=new Array(a),o=0;o<a;++o){for(var u=r[o],c=u.length,d=i[o]=new Array(c),f,m=0;m<c;++m)(f=u[m])&&(d[m]=f);d.sort(t)}return new Selection(i,this._parents).order()}function ascending(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function selection_call(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var a=e[t],i=0,o=a.length;i<o;++i){var u=a[i];if(u)return u}return null}function selection_size(){let e=0;for(const t of this)++e;return e}function selection_empty(){return!this.node()}function selection_each(e){for(var t=this._groups,r=0,a=t.length;r<a;++r)for(var i=t[r],o=0,u=i.length,c;o<u;++o)(c=i[o])&&e.call(c,c.__data__,o,i);return this}function attrRemove(e){return function(){this.removeAttribute(e)}}function attrRemoveNS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function attrConstant(e,t){return function(){this.setAttribute(e,t)}}function attrConstantNS(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function attrFunction(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function attrFunctionNS(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function selection_attr(e,t){var r=namespace(e);if(arguments.length<2){var a=this.node();return r.local?a.getAttributeNS(r.space,r.local):a.getAttribute(r)}return this.each((t==null?r.local?attrRemoveNS:attrRemove:typeof t=="function"?r.local?attrFunctionNS:attrFunction:r.local?attrConstantNS:attrConstant)(r,t))}function defaultView(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function styleRemove(e){return function(){this.style.removeProperty(e)}}function styleConstant(e,t,r){return function(){this.style.setProperty(e,t,r)}}function styleFunction(e,t,r){return function(){var a=t.apply(this,arguments);a==null?this.style.removeProperty(e):this.style.setProperty(e,a,r)}}function selection_style(e,t,r){return arguments.length>1?this.each((t==null?styleRemove:typeof t=="function"?styleFunction:styleConstant)(e,t,r??"")):styleValue(this.node(),e)}function styleValue(e,t){return e.style.getPropertyValue(t)||defaultView(e).getComputedStyle(e,null).getPropertyValue(t)}function propertyRemove(e){return function(){delete this[e]}}function propertyConstant(e,t){return function(){this[e]=t}}function propertyFunction(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function selection_property(e,t){return arguments.length>1?this.each((t==null?propertyRemove:typeof t=="function"?propertyFunction:propertyConstant)(e,t)):this.node()[e]}function classArray(e){return e.trim().split(/^|\s+/)}function classList(e){return e.classList||new ClassList(e)}function ClassList(e){this._node=e,this._names=classArray(e.getAttribute("class")||"")}ClassList.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function classedAdd(e,t){for(var r=classList(e),a=-1,i=t.length;++a<i;)r.add(t[a])}function classedRemove(e,t){for(var r=classList(e),a=-1,i=t.length;++a<i;)r.remove(t[a])}function classedTrue(e){return function(){classedAdd(this,e)}}function classedFalse(e){return function(){classedRemove(this,e)}}function classedFunction(e,t){return function(){(t.apply(this,arguments)?classedAdd:classedRemove)(this,e)}}function selection_classed(e,t){var r=classArray(e+"");if(arguments.length<2){for(var a=classList(this.node()),i=-1,o=r.length;++i<o;)if(!a.contains(r[i]))return!1;return!0}return this.each((typeof t=="function"?classedFunction:t?classedTrue:classedFalse)(r,t))}function textRemove(){this.textContent=""}function textConstant(e){return function(){this.textContent=e}}function textFunction(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function selection_text(e){return arguments.length?this.each(e==null?textRemove:(typeof e=="function"?textFunction:textConstant)(e)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(e){return function(){this.innerHTML=e}}function htmlFunction(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function selection_html(e){return arguments.length?this.each(e==null?htmlRemove:(typeof e=="function"?htmlFunction:htmlConstant)(e)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(e){var t=typeof e=="function"?e:creator(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function constantNull(){return null}function selection_insert(e,t){var r=typeof e=="function"?e:creator(e),a=t==null?constantNull:typeof t=="function"?t:selector(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),a.apply(this,arguments)||null)})}function remove(){var e=this.parentNode;e&&e.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function selection_cloneDeep(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function selection_clone(e){return this.select(e?selection_cloneDeep:selection_cloneShallow)}function selection_datum(e){return arguments.length?this.property("__data__",e):this.node().__data__}function contextListener(e){return function(t){e.call(this,t,this.__data__)}}function parseTypenames(e){return e.trim().split(/^|\s+/).map(function(t){var r="",a=t.indexOf(".");return a>=0&&(r=t.slice(a+1),t=t.slice(0,a)),{type:t,name:r}})}function onRemove(e){return function(){var t=this.__on;if(t){for(var r=0,a=-1,i=t.length,o;r<i;++r)o=t[r],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++a]=o;++a?t.length=a:delete this.__on}}}function onAdd(e,t,r){return function(){var a=this.__on,i,o=contextListener(t);if(a){for(var u=0,c=a.length;u<c;++u)if((i=a[u]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=r),i.value=t;return}}this.addEventListener(e.type,o,r),i={type:e.type,name:e.name,value:t,listener:o,options:r},a?a.push(i):this.__on=[i]}}function selection_on(e,t,r){var a=parseTypenames(e+""),i,o=a.length,u;if(arguments.length<2){var c=this.node().__on;if(c){for(var d=0,f=c.length,m;d<f;++d)for(i=0,m=c[d];i<o;++i)if((u=a[i]).type===m.type&&u.name===m.name)return m.value}return}for(c=t?onAdd:onRemove,i=0;i<o;++i)this.each(c(a[i],t,r));return this}function dispatchEvent(e,t,r){var a=defaultView(e),i=a.CustomEvent;typeof i=="function"?i=new i(t,r):(i=a.document.createEvent("Event"),r?(i.initEvent(t,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function dispatchConstant(e,t){return function(){return dispatchEvent(this,e,t)}}function dispatchFunction(e,t){return function(){return dispatchEvent(this,e,t.apply(this,arguments))}}function selection_dispatch(e,t){return this.each((typeof t=="function"?dispatchFunction:dispatchConstant)(e,t))}function*selection_iterator(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var a=e[t],i=0,o=a.length,u;i<o;++i)(u=a[i])&&(yield u)}var root=[null];function Selection(e,t){this._groups=e,this._parents=t}function selection_selection(){return this}Selection.prototype={constructor:Selection,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};function select(e){return typeof e=="string"?new Selection([[document.querySelector(e)]],[document.documentElement]):new Selection([[e]],root)}function identity(e){return e}var top=1,right=2,bottom=3,left=4,epsilon=1e-6;function translateX(e){return"translate("+e+",0)"}function translateY(e){return"translate(0,"+e+")"}function number(e){return t=>+e(t)}function center(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),r=>+e(r)+t}function entering(){return!this.__axis}function axis(e,t){var r=[],a=null,i=null,o=6,u=6,c=3,d=typeof window<"u"&&window.devicePixelRatio>1?0:.5,f=e===top||e===left?-1:1,m=e===left||e===right?"x":"y",p=e===top||e===bottom?translateX:translateY;function h(_){var y=a??(t.ticks?t.ticks.apply(t,r):t.domain()),D=i??(t.tickFormat?t.tickFormat.apply(t,r):identity),$=Math.max(o,0)+c,b=t.range(),g=+b[0]+d,v=+b[b.length-1]+d,k=(t.bandwidth?center:number)(t.copy(),d),T=_.selection?_.selection():_,S=T.selectAll(".domain").data([null]),O=T.selectAll(".tick").data(y,t).order(),M=O.exit(),N=O.enter().append("g").attr("class","tick"),w=O.select("line"),I=O.select("text");S=S.merge(S.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),O=O.merge(N),w=w.merge(N.append("line").attr("stroke","currentColor").attr(m+"2",f*o)),I=I.merge(N.append("text").attr("fill","currentColor").attr(m,f*$).attr("dy",e===top?"0em":e===bottom?"0.71em":"0.32em")),_!==T&&(S=S.transition(_),O=O.transition(_),w=w.transition(_),I=I.transition(_),M=M.transition(_).attr("opacity",epsilon).attr("transform",function(H){return isFinite(H=k(H))?p(H+d):this.getAttribute("transform")}),N.attr("opacity",epsilon).attr("transform",function(H){var q=this.parentNode.__axis;return p((q&&isFinite(q=q(H))?q:k(H))+d)})),M.remove(),S.attr("d",e===left||e===right?u?"M"+f*u+","+g+"H"+d+"V"+v+"H"+f*u:"M"+d+","+g+"V"+v:u?"M"+g+","+f*u+"V"+d+"H"+v+"V"+f*u:"M"+g+","+d+"H"+v),O.attr("opacity",1).attr("transform",function(H){return p(k(H)+d)}),w.attr(m+"2",f*o),I.attr(m,f*$).text(D),T.filter(entering).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===right?"start":e===left?"end":"middle"),T.each(function(){this.__axis=k})}return h.scale=function(_){return arguments.length?(t=_,h):t},h.ticks=function(){return r=Array.from(arguments),h},h.tickArguments=function(_){return arguments.length?(r=_==null?[]:Array.from(_),h):r.slice()},h.tickValues=function(_){return arguments.length?(a=_==null?null:Array.from(_),h):a&&a.slice()},h.tickFormat=function(_){return arguments.length?(i=_,h):i},h.tickSize=function(_){return arguments.length?(o=u=+_,h):o},h.tickSizeInner=function(_){return arguments.length?(o=+_,h):o},h.tickSizeOuter=function(_){return arguments.length?(u=+_,h):u},h.tickPadding=function(_){return arguments.length?(c=+_,h):c},h.offset=function(_){return arguments.length?(d=+_,h):d},h}function axisTop(e){return axis(top,e)}function axisRight(e){return axis(right,e)}function axisBottom(e){return axis(bottom,e)}function axisLeft(e){return axis(left,e)}function create_fragment$n(e){let t;return{c(){t=svg_element("g"),attr(t,"class","axis"),attr(t,"transform",e[1])},m(r,a){insert(r,t,a),e[10](t)},p(r,[a]){a&2&&attr(t,"transform",r[1])},i:noop,o:noop,d(r){r&&detach(t),e[10](null)}}}function instance$n(e,t,r){let{innerHeight:a=0}=t,{width:i=0}=t,{yoffset:o=0}=t,{xoffset:u=0}=t,{position:c="left"}=t,{scale:d}=t,{nticks:f=5}=t,{colour:m=""}=t,p,h;function _(y){binding_callbacks[y?"unshift":"push"](()=>{h=y,r(0,h)})}return e.$$set=y=>{"innerHeight"in y&&r(3,a=y.innerHeight),"width"in y&&r(4,i=y.width),"yoffset"in y&&r(5,o=y.yoffset),"xoffset"in y&&r(6,u=y.xoffset),"position"in y&&r(7,c=y.position),"scale"in y&&r(8,d=y.scale),"nticks"in y&&r(9,f=y.nticks),"colour"in y&&r(2,m=y.colour)},e.$$.update=()=>{if(e.$$.dirty&1021){select(h).selectAll("*").remove(),m===""&&r(2,m=getComputedStyle(document.documentElement).getPropertyValue("--font-color"));let y;switch(c){case"bottom":y=axisBottom(d).tickSizeOuter(0).ticks(f),r(1,p=`translate(0, ${a})`);break;case"top":y=axisTop(d).tickSizeOuter(0).ticks(f),r(1,p="translate(0, 0)");break;case"left":y=axisLeft(d).tickSizeOuter(0).ticks(f),r(1,p=`translate(${u}, ${o})`);break;case"right":y=axisRight(d).tickSizeOuter(0).ticks(f),r(1,p=`translate(${u+i}, ${o})`);break}select(h).call(y).selectAll("path").style("stroke",m),select(h).call(y).selectAll("text").style("fill",m)}},[h,p,m,a,i,o,u,c,d,f,_]}class Axis extends SvelteComponent{constructor(t){super(),init(this,t,instance$n,create_fragment$n,safe_not_equal,{innerHeight:3,width:4,yoffset:5,xoffset:6,position:7,scale:8,nticks:9,colour:2})}}function get_each_context$c(e,t,r){const a=e.slice();return a[32]=t[r],a[34]=r,a}function get_each_context_1$8(e,t,r){const a=e.slice();return a[35]=t[r],a[37]=r,a}function get_each_context_2$6(e,t,r){const a=e.slice();return a[38]=t[r],a[34]=r,a}function get_each_context_3$4(e,t,r){const a=e.slice();return a[37]=t[r],a}function create_if_block$g(e){let t,r,a,i,o,u,c,d,f,m,p,h,_,y,D;const $=[create_if_block_2$4,create_else_block$6],b=[];function g(T,S){return T[9].length>0?0:1}u=g(e),c=b[u]=$[u](e),f=new Axis({props:{innerHeight:e[12],yoffset:"0",scale:e[11],position:"top",nticks:e[6][e[5]].params.periodHrs}});let v=ensure_array_like(e[6][e[5]].chartData.onsets),k=[];for(let T=0;T<v.length;T+=1)k[T]=create_each_block$c(get_each_context$c(e,v,T));return{c(){t=element("div"),a=space(),i=svg_element("svg"),o=svg_element("g"),c.c(),d=empty$1(),create_component(f.$$.fragment);for(let T=0;T<k.length;T+=1)k[T].c();attr(t,"class","overlay svelte-1hj8mph"),attr(t,"style",r=e[7]?"display:block; left:"+e[8].x+"px; top:"+e[8].y+"px;":"display:none;"),attr(o,"transform",m=`translate(${e[0].left},${e[0].top})`),attr(i,"id","svgContainer"),attr(i,"margin-lr",p=e[0].left+e[0].right),attr(i,"style",h="transform-origin: top left; transform:scale("+e[6][e[5]].zoom+");"),attr(i,"width",e[3]),attr(i,"height",e[4])},m(T,S){insert(T,t,S),insert(T,a,S),insert(T,i,S),append(i,o),b[u].m(o,null),append(o,d),mount_component(f,o,null);for(let O=0;O<k.length;O+=1)k[O]&&k[O].m(o,null);_=!0,y||(D=[listen(i,"mousedown",e[16]),listen(i,"mousemove",e[17]),listen(i,"mouseup",e[18]),listen(i,"click",click_handler$1),listen(i,"dblclick",e[19])],y=!0)},p(T,S){(!_||S[0]&384&&r!==(r=T[7]?"display:block; left:"+T[8].x+"px; top:"+T[8].y+"px;":"display:none;"))&&attr(t,"style",r);let O=u;u=g(T),u===O?b[u].p(T,S):(group_outros(),transition_out(b[O],1,1,()=>{b[O]=null}),check_outros(),c=b[u],c?c.p(T,S):(c=b[u]=$[u](T),c.c()),transition_in(c,1),c.m(o,d));const M={};if(S[0]&4096&&(M.innerHeight=T[12]),S[0]&2048&&(M.scale=T[11]),S[0]&96&&(M.nticks=T[6][T[5]].params.periodHrs),f.$set(M),S[0]&2150){v=ensure_array_like(T[6][T[5]].chartData.onsets);let N;for(N=0;N<v.length;N+=1){const w=get_each_context$c(T,v,N);k[N]?k[N].p(w,S):(k[N]=create_each_block$c(w),k[N].c(),k[N].m(o,null))}for(;N<k.length;N+=1)k[N].d(1);k.length=v.length}(!_||S[0]&1&&m!==(m=`translate(${T[0].left},${T[0].top})`))&&attr(o,"transform",m),(!_||S[0]&1&&p!==(p=T[0].left+T[0].right))&&attr(i,"margin-lr",p),(!_||S[0]&96&&h!==(h="transform-origin: top left; transform:scale("+T[6][T[5]].zoom+");"))&&attr(i,"style",h),(!_||S[0]&8)&&attr(i,"width",T[3]),(!_||S[0]&16)&&attr(i,"height",T[4])},i(T){_||(transition_in(c),transition_in(f.$$.fragment,T),_=!0)},o(T){transition_out(c),transition_out(f.$$.fragment,T),_=!1},d(T){T&&(detach(t),detach(a),detach(i)),b[u].d(),destroy_component(f),destroy_each(k,T),y=!1,run_all(D)}}}function create_else_block$6(e){let t;return{c(){t=svg_element("text"),attr(t,"x","50%"),attr(t,"y","50%"),attr(t,"text-anchor","middle"),attr(t,"fill","red")},m(r,a){insert(r,t,a)},p:noop,i:noop,o:noop,d(r){r&&detach(t)}}}function create_if_block_2$4(e){let t,r,a=ensure_array_like(e[9]),i=[];for(let u=0;u<a.length;u+=1)i[u]=create_each_block_2$6(get_each_context_2$6(e,a,u));const o=u=>transition_out(i[u],1,1,()=>{i[u]=null});return{c(){for(let u=0;u<i.length;u+=1)i[u].c();t=empty$1()},m(u,c){for(let d=0;d<i.length;d+=1)i[d]&&i[d].m(u,c);insert(u,t,c),r=!0},p(u,c){if(c[0]&5743){a=ensure_array_like(u[9]);let d;for(d=0;d<a.length;d+=1){const f=get_each_context_2$6(u,a,d);i[d]?(i[d].p(f,c),transition_in(i[d],1)):(i[d]=create_each_block_2$6(f),i[d].c(),transition_in(i[d],1),i[d].m(t.parentNode,t))}for(group_outros(),d=a.length;d<i.length;d+=1)o(d);check_outros()}},i(u){if(!r){for(let c=0;c<a.length;c+=1)transition_in(i[c]);r=!0}},o(u){i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)transition_out(i[c]);r=!1},d(u){u&&detach(t),destroy_each(i,u)}}}function create_if_block_3$4(e){let t,r;return t=new Axis({props:{innerHeight:e[12],yoffset:e[37]*(e[2]+e[1]),xoffset:15*e[34],width:e[3]-e[0].left-e[0].right-15,scale:e[10][e[34]][e[37]],position:e[34]===0?"left":"right",nticks:e[2]/30+1,colour:e[6][e[5]].sourceData[e[34]].col.hex}}),{c(){create_component(t.$$.fragment)},m(a,i){mount_component(t,a,i),r=!0},p(a,i){const o={};i[0]&4096&&(o.innerHeight=a[12]),i[0]&518&&(o.yoffset=a[37]*(a[2]+a[1])),i[0]&9&&(o.width=a[3]-a[0].left-a[0].right-15),i[0]&1536&&(o.scale=a[10][a[34]][a[37]]),i[0]&4&&(o.nticks=a[2]/30+1),i[0]&96&&(o.colour=a[6][a[5]].sourceData[a[34]].col.hex),t.$set(o)},i(a){r||(transition_in(t.$$.fragment,a),r=!0)},o(a){transition_out(t.$$.fragment,a),r=!1},d(a){destroy_component(t,a)}}}function create_each_block_3$4(e){let t,r,a,i,o,u,c=e[6][e[5]].params.showAxes&&create_if_block_3$4(e);return{c(){t=svg_element("path"),c&&c.c(),o=empty$1(),attr(t,"d",r=e[9][e[34]][e[37]]),attr(t,"fill",a=e[6][e[5]].sourceData[e[34]].col.hex),attr(t,"fill-opacity",i=e[6][e[5]].sourceData[e[34]].col.alpha)},m(d,f){insert(d,t,f),c&&c.m(d,f),insert(d,o,f),u=!0},p(d,f){(!u||f[0]&512&&r!==(r=d[9][d[34]][d[37]]))&&attr(t,"d",r),(!u||f[0]&96&&a!==(a=d[6][d[5]].sourceData[d[34]].col.hex))&&attr(t,"fill",a),(!u||f[0]&96&&i!==(i=d[6][d[5]].sourceData[d[34]].col.alpha))&&attr(t,"fill-opacity",i),d[6][d[5]].params.showAxes?c?(c.p(d,f),f[0]&96&&transition_in(c,1)):(c=create_if_block_3$4(d),c.c(),transition_in(c,1),c.m(o.parentNode,o)):c&&(group_outros(),transition_out(c,1,1,()=>{c=null}),check_outros())},i(d){u||(transition_in(c),u=!0)},o(d){transition_out(c),u=!1},d(d){d&&(detach(t),detach(o)),c&&c.d(d)}}}function create_each_block_2$6(e){let t,r,a=ensure_array_like(createSequenceArray(0,e[9][e[34]].length-1)),i=[];for(let u=0;u<a.length;u+=1)i[u]=create_each_block_3$4(get_each_context_3$4(e,a,u));const o=u=>transition_out(i[u],1,1,()=>{i[u]=null});return{c(){for(let u=0;u<i.length;u+=1)i[u].c();t=empty$1()},m(u,c){for(let d=0;d<i.length;d+=1)i[d]&&i[d].m(u,c);insert(u,t,c),r=!0},p(u,c){if(c[0]&5743){a=ensure_array_like(createSequenceArray(0,u[9][u[34]].length-1));let d;for(d=0;d<a.length;d+=1){const f=get_each_context_3$4(u,a,d);i[d]?(i[d].p(f,c),transition_in(i[d],1)):(i[d]=create_each_block_3$4(f),i[d].c(),transition_in(i[d],1),i[d].m(t.parentNode,t))}for(group_outros(),d=a.length;d<i.length;d+=1)o(d);check_outros()}},i(u){if(!r){for(let c=0;c<a.length;c+=1)transition_in(i[c]);r=!0}},o(u){i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)transition_out(i[c]);r=!1},d(u){u&&detach(t),destroy_each(i,u)}}}function create_if_block_1$7(e){let t,r=ensure_array_like(e[6][e[5]].chartData.onsets[e[34]].onsetTimes),a=[];for(let i=0;i<r.length;i+=1)a[i]=create_each_block_1$8(get_each_context_1$8(e,r,i));return{c(){for(let i=0;i<a.length;i+=1)a[i].c();t=empty$1()},m(i,o){for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(i,o);insert(i,t,o)},p(i,o){if(o[0]&2150){r=ensure_array_like(i[6][i[5]].chartData.onsets[i[34]].onsetTimes);let u;for(u=0;u<r.length;u+=1){const c=get_each_context_1$8(i,r,u);a[u]?a[u].p(c,o):(a[u]=create_each_block_1$8(c),a[u].c(),a[u].m(t.parentNode,t))}for(;u<a.length;u+=1)a[u].d(1);a.length=r.length}},d(i){i&&detach(t),destroy_each(a,i)}}}function create_each_block_1$8(e){let t,r,a,i;return{c(){t=svg_element("circle"),attr(t,"cx",r=e[11](e[35]-e[37]*e[6][e[5]].params.periodHrs)),attr(t,"cy",a=e[37]*(e[2]+e[1])+e[2]),attr(t,"r","2"),attr(t,"fill",i=e[6][e[5]].sourceData[e[34]].col.hex),attr(t,"stroke-width","1"),attr(t,"stroke","black")},m(o,u){insert(o,t,u)},p(o,u){u[0]&2144&&r!==(r=o[11](o[35]-o[37]*o[6][o[5]].params.periodHrs))&&attr(t,"cx",r),u[0]&6&&a!==(a=o[37]*(o[2]+o[1])+o[2])&&attr(t,"cy",a),u[0]&96&&i!==(i=o[6][o[5]].sourceData[o[34]].col.hex)&&attr(t,"fill",i)},d(o){o&&detach(t)}}}function create_each_block$c(e){let t,r=e[6][e[5]].sourceData[e[34]].showOnsets&&create_if_block_1$7(e);return{c(){r&&r.c(),t=empty$1()},m(a,i){r&&r.m(a,i),insert(a,t,i)},p(a,i){a[6][a[5]].sourceData[a[34]].showOnsets?r?r.p(a,i):(r=create_if_block_1$7(a),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},d(a){a&&detach(t),r&&r.d(a)}}}function create_fragment$m(e){var i;let t,r,a=((i=e[6][e[5]])==null?void 0:i.graph)==="actigram"&&e[6][e[5]].sourceData.length>0&&create_if_block$g(e);return{c(){a&&a.c(),t=empty$1()},m(o,u){a&&a.m(o,u),insert(o,t,u),r=!0},p(o,u){var c;((c=o[6][o[5]])==null?void 0:c.graph)==="actigram"&&o[6][o[5]].sourceData.length>0?a?(a.p(o,u),u[0]&96&&transition_in(a,1)):(a=create_if_block$g(o),a.c(),transition_in(a,1),a.m(t.parentNode,t)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(o){r||(transition_in(a),r=!0)},o(o){transition_out(a),r=!1},d(o){o&&detach(t),a&&a.d(o)}}}function findCentileValue(e,t){const a=e.filter(u=>!isNaN(u)&&u!==0).slice().sort((u,c)=>u-c),i=Math.ceil(t/100*a.length)-1;return a[i]}function findBestMatchIndex(e,t){let r=-1,a=-1/0;for(let i=0;i<=e.length-t.length;i++){let o=0;for(let u=0;u<t.length;u++)o+=e[i+u]*t[u];o>a&&(a=o,r=i)}return r}const click_handler$1=e=>{e.preventDefault()};function instance$m(e,t,r){let a,i,o,u,c,d,f,m,p,h,_;component_subscribe(e,activeGraphTab,F=>r(5,m=F)),component_subscribe(e,graphs,F=>r(6,p=F)),component_subscribe(e,statusData,F=>r(22,h=F)),component_subscribe(e,data,F=>r(23,_=F));let y={top:50,bottom:20,left:80,right:80},D=!1,$={x:0,y:0},b="",g=[],v=linear().domain([0,100]).range([0,f]);function k(F){F?r(0,y={top:50,bottom:20,left:80,right:80}):r(0,y={top:50,bottom:20,left:50,right:50})}function T(F,P,Y){var z,U,ie;if(((z=p[m])==null?void 0:z.graph)==="actigram"){let X;return((U=p[m].chartData.onsets)==null?void 0:U.length)>0?X=p[m].chartData.onsets[0].onsetTimes.length:(S(p[m].sourceData,p[m].params.binSizeHrs,p[m].params.periodHrs,p[m].params.startTime),X=(ie=p[m].chartData.onsets[0])==null?void 0:ie.onsetTimes.length),r(4,a=F.top+F.bottom+(P+Y)*X-Y),a<F.top+F.bottom&&r(4,a=F.top+F.bottom),a}}function S(F,P,Y,z){var U;if(((U=p[m])==null?void 0:U.graph)==="actigram"){let ie,X,ue={data:[{time:[],values:[],day:[],scaleLimits:[]}],startOffsets:[],onsets:[]};F.forEach((oe,j)=>{oe.chartvalues.time.field!=""&&(ie=getDataFromSource(j,oe.chartvalues.time)),oe.chartvalues.values.field!=""&&(X=getDataFromSource(j,oe.chartvalues.values));const _e=averageBinnedValues(ie,X,P);ue.startOffsets=O(z,m),j>0&&(ue.data[j]={time:[],values:[],day:[],scaleLimits:[]}),ue.data[j].time=_e.time,ue.data[j].values=_e.values;let Q=Math.floor(_e.time[0]/Y);for(let fe=0;fe<_e.time.length;fe++){const pe=Math.floor(_e.time[fe]/Y);if(ue.data[j].day[fe]=pe,pe===Q){const ce=_e.values[fe];ue.data[j].scaleLimits[pe]?(ue.data[j].scaleLimits[pe].min=Math.min(ce,ue.data[j].scaleLimits[pe].min),ue.data[j].scaleLimits[pe].max=Math.max(ce,ue.data[j].scaleLimits[pe].max)):ue.data[j].scaleLimits[pe]={min:ce,max:ce}}else Q=pe,ue.data[j].scaleLimits[Q]={min:_e.values[fe],max:_e.values[fe]}}}),set_store_value(graphs,p[m].chartData=ue,p);for(let oe=0;oe<F.length;oe++)N(oe)}}function O(F,P){let Y=[];if(p[P].graph==="actigram"&&p[P].sourceData.length>0){Y=Array.from({length:p[P].sourceData.length},()=>0);for(let z=0;z<p[P].sourceData.length;z++){const U=p[P].sourceData[z].chartvalues.time.field,ie=_.findIndex(X=>X.id===p[P].sourceData[z].tableID);if(_[ie].data[U].type=="time"){const X=_[ie].data[U].data[0];Y[z]=getstartTimeOffset(F,X,_[ie].data[U].timeFormat);const ue=p[m].params.periodHrs*p[m].params.doublePlot;Y[z]>=ue&&(Y[z]=0,set_store_value(graphs,p[m].params.startTime=getISODate(X,_[ie].data[U].timeFormat),p))}}}else Y=Array.from({length:1},()=>0);return set_store_value(graphs,p[m].chartData.startOffsets=Y,p),Y}function M(F,P,Y,z,U){if(F&&p[m].graph==="actigram"){const X=z/U,ue=p[m].chartData.data.length;r(11,v=linear().domain([0,p[m].params.periodHrs*p[m].params.doublePlot]).range([0,f]));const oe=v(i/2);r(9,b=[]),r(10,g=[]);for(let j=0;j<ue;j++){r(9,b[j]=[],b),r(10,g[j]=[],g);const _e=p[m].chartData.data[j].scaleLimits.length;var ie=linear().domain([Math.min(...p[m].chartData.data[j].values),Math.max(...p[m].chartData.data[j].values)]).range([P,0]);for(let Q=0;Q<_e;Q++){r(9,b[j][Q]="",b);const fe=Q*(P+c);if(p[m].params.scaleAxes==="byPlot"){let ye=p[m].chartData.data[j].scaleLimits[Q].min,ae=p[m].chartData.data[j].scaleLimits[Q].max;for(let be=Q;be<Math.min(Q+Y,p[m].chartData.data[j].scaleLimits.length);be++)p[m].chartData.data[j].scaleLimits[be].min<ye&&(ye=p[m].chartData.data[j].scaleLimits[be].min),p[m].chartData.data[j].scaleLimits[be].max>ae&&(ae=p[m].chartData.data[j].scaleLimits[be].max);ie=linear().domain([ye,ae]).range([P,0])}r(10,g[j][Q]=ie,g);const pe=`M0,${Q*(P+c)+P}`;r(9,b[j][Q]=b[j][Q]+pe+" ",b);for(let ye=Q*X;ye<Math.min(F.data[j].time.length,(Q+Y)*X);ye++){const ae=F.data[j].time[ye]-Q*z,be=F.data[j].values[ye],G=ie(be)+fe,he=v(ae),we=`${he-oe},${fe+P}  ${he-oe},${G} ${he+oe},${G} ${he+oe},${fe+P}`;he!=null&&he!=null&&!isNaN(he)&&G!=null&&G!=null&&!isNaN(G)&&r(9,b[j][Q]=b[j][Q]+we+" ",b)}const ce=`${v(z*Y)},${Q*(P+c)+P} 0,${Q*(P+c)+P}`;r(9,b[j][Q]=b[j][Q]+ce+" Z",b)}}return b}}function N(F){const P=p[m].sourceData[F].centileThresh,Y=p[m].sourceData[F].N,z=p[m].sourceData[F].M,U=p[m].params.binSizeHrs,ie=w(Y,z,U);p[m].chartData.data[F].time;const X=p[m].chartData.data[F].values,ue=findCentileValue(X,P),oe=X.map(G=>G<=ue||isNaN(G)?-1:1),_e=p[m].params.periodHrs/U;p[m].params.doublePlot;let Q=[],fe=[];for(let G=0;G<oe.length/_e;G++)Q[G]=findBestMatchIndex(oe.slice(G*_e,(G+1)*_e),ie)+Math.round(Y/U),fe[G]=p[m].chartData.data[F].time[Q[G]+G*_e];const pe=bestFitOnsets(getDiffs(fe));set_store_value(graphs,p[m].sourceData[F].estimate=pe.toFixed(3),p);let ce=[];for(let G=0;G<fe.length;G++)ce[G]=v(fe[G]-G*p[m].params.periodHrs)+y.left,G*(u+c)+u+y.top;const ye=p[m].params.periodHrs-pe,ae=calculateMedian(ce),be=ce.reduce((G,he,we)=>Math.abs(he-ae)<Math.abs(ce[G]-ae)?we:G,0);set_store_value(graphs,p[m].chartData.onsets[F]={onsetTimes:fe,estimate:pe,median:ae,estDay:be,moveXDay:v(ye),slope:v(ye)/(p[m].params.dayHeight+p[m].params.betweenHeight)},p)}function w(F,P,Y){const z=Math.round(F/Y),U=Math.round(P/Y);return Array.from({length:z},()=>-1).concat(Array.from({length:U},()=>1))}function I(F){if(F.offsetX<y.left||F.offsetX>y.left+o||F.offsetY<y.top||F.offsetY>y.top+d)return null;const P=p[m].params.periodHrs,Y=p[m].params.doublePlot,z=Math.floor((F.offsetY-y.top)/(u+c)),U=(F.offsetX-y.left)/f*P*Y;return z*P+U}function H(F){F&&(h.push({display:q(F)}),statusData.set(h))}function q(F){Math.floor(F/p[m].params.periodHrs);let P=Math.round((F-p[m].chartData.data[0].time[0])/p[m].params.binSizeHrs);P<0&&(P=0);let Y="";Y=addTime(p[m].params.startTime,p[m].chartData.data[0].time[P]);for(let z=0;z<p[m].chartData.data.length;z++)Y+="<br><a style='color:"+p[m].sourceData[z].col.hex+";''>"+getFieldName(p[m].sourceData[z].tableID,p[m].sourceData[z].chartvalues.values.field)+": "+p[m].chartData.data[z].values[P].toFixed(2)+"</a>";return Y}function A(F){r(8,$={x:10+F.pageX,y:-10+F.pageY}),(F.offsetX<y.left||F.offsetX>y.left+f||F.offsetY<y.top||F.offsetY>y.top+d)&&r(7,D=!1);try{var P=document.querySelector(".overlay");const Y=I(F);P.innerHTML=q(Y)}catch{r(7,D=!1)}}const E=F=>{F.preventDefault(),r(7,D=!0),A(F)},L=F=>{D&&(F.preventDefault(),I(F),A(F))},Z=F=>{F.preventDefault(),r(7,D=!1),I(F)},C=F=>{F.preventDefault();const P=I(F);H(P)};return e.$$.update=()=>{var F,P,Y,z,U,ie,X,ue,oe,j,_e,Q,fe,pe;e.$$.dirty[0]&96&&k((F=p[m])==null?void 0:F.params.showAxes),e.$$.dirty[0]&96&&r(2,u=(P=p[m])==null?void 0:P.params.dayHeight),e.$$.dirty[0]&96&&r(1,c=(Y=p[m])==null?void 0:Y.params.betweenHeight),e.$$.dirty[0]&7&&r(4,a=T(y,u,c)),e.$$.dirty[0]&96&&(i=(z=p[m])==null?void 0:z.params.binSizeHrs),e.$$.dirty[0]&96&&r(3,o=(U=p[m])==null?void 0:U.params.width),e.$$.dirty[0]&17&&r(12,d=a-y.top-y.bottom),e.$$.dirty[0]&9&&(f=o-y.left-y.right),e.$$.dirty[0]&96&&S((ie=p[m])==null?void 0:ie.sourceData,(X=p[m])==null?void 0:X.params.binSizeHrs,(ue=p[m])==null?void 0:ue.params.periodHrs,(oe=p[m])==null?void 0:oe.params.startTime),e.$$.dirty[0]&96&&r(9,b=M((j=p[m])==null?void 0:j.chartData,(_e=p[m])==null?void 0:_e.params.dayHeight,(Q=p[m])==null?void 0:Q.params.doublePlot,(fe=p[m])==null?void 0:fe.params.periodHrs,(pe=p[m])==null?void 0:pe.params.binSizeHrs))},[y,c,u,o,a,m,p,D,$,b,g,v,d,I,H,A,E,L,Z,C]}class Actigram extends SvelteComponent{constructor(t){super(),init(this,t,instance$m,create_fragment$m,safe_not_equal,{},null,[-1,-1])}}function create_else_block$5(e){let t,r,a,i;return{c(){t=element("span"),r=text(e[0]),attr(t,"class","svelte-1tdrfqa")},m(o,u){insert(o,t,u),append(t,r),a||(i=[listen(t,"dblclick",e[9]),listen(t,"click",click_handler)],a=!0)},p(o,u){u&1&&set_data(r,o[0])},d(o){o&&detach(t),a=!1,run_all(i)}}}function create_if_block$f(e){let t,r,a,i,o;return{c(){t=element("form"),r=element("input"),r.required=e[1],attr(r,"class",a=null_to_empty(e[2]?"editing":"")+" svelte-1tdrfqa"),attr(t,"class","svelte-1tdrfqa")},m(u,c){insert(u,t,c),append(t,r),set_input_value(r,e[0]),e[8](r),i||(o=[listen(r,"input",e[7]),listen(r,"blur",e[5]),listen(t,"submit",prevent_default(e[5])),listen(t,"keydown",e[6])],i=!0)},p(u,c){c&2&&(r.required=u[1]),c&4&&a!==(a=null_to_empty(u[2]?"editing":"")+" svelte-1tdrfqa")&&attr(r,"class",a),c&1&&r.value!==u[0]&&set_input_value(r,u[0])},d(u){u&&detach(t),e[8](null),i=!1,run_all(o)}}}function create_fragment$l(e){let t;function r(o,u){return o[2]?create_if_block$f:create_else_block$5}let a=r(e),i=a(e);return{c(){i.c(),t=empty$1()},m(o,u){i.m(o,u),insert(o,t,u)},p(o,[u]){a===(a=r(o))&&i?i.p(o,u):(i.d(1),i=a(o),i&&(i.c(),i.m(t.parentNode,t)))},i:noop,o:noop,d(o){o&&detach(t),i.d(o)}}}function containsNonSpaceCharacter(e){return/\S/.test(e)}const click_handler=e=>{e.target.parentElement.className.includes("tabname")||e.preventDefault()};function instance$l(e,t,r){let{value:a,required:i=!0}=t;const o=createEventDispatcher();let u=!1,c,d;onMount(()=>{c=a}),afterUpdate(()=>{u&&(d.focus(),d.click())});function f(D){r(2,u=!0)}function m(){a!=c&&containsNonSpaceCharacter(a)?o("submit",a):r(0,a=c),r(2,u=!1)}function p(D){D.key=="Escape"&&(D.preventDefault(),r(0,a=c),r(2,u=!1))}function h(){a=this.value,r(0,a)}function _(D){binding_callbacks[D?"unshift":"push"](()=>{d=D,r(3,d)})}const y=D=>{f()};return e.$$set=D=>{"value"in D&&r(0,a=D.value),"required"in D&&r(1,i=D.required)},[a,i,u,d,f,m,p,h,_,y]}class InPlaceEdit extends SvelteComponent{constructor(t){super(),init(this,t,instance$l,create_fragment$l,safe_not_equal,{value:0,required:1})}}function get_each_context$b(e,t,r){const a=e.slice();return a[35]=t[r],a[36]=t,a[37]=r,a}function get_each_context_1$7(e,t,r){const a=e.slice();return a[38]=t[r],a[39]=t,a[40]=r,a}function get_each_context_2$5(e,t,r){const a=e.slice();return a[41]=t[r],a[43]=r,a}function get_each_context_3$3(e,t,r){const a=e.slice();return a[44]=t[r],a}function create_if_block$e(e){var x,de;let t,r,a,i,o,u=formatTimeFromISO(e[1][e[0]].params.startTime)+"",c,d,f,m,p,h,_,y,D,$,b,g,v,k,T,S,O,M,N,w,I,H,q,A,E,L,Z,C,F,P,Y,z,U,ie,X,ue,oe,j=e[2][e[0]].name+"",_e,Q,fe,pe,ce,ye,ae,be,G;function he(W){e[10](W)}let we={min:10,max:40,limits:[1,1/0],label:"Period (hrs):"};e[1][e[0]].params.periodHrs!==void 0&&(we.value=e[1][e[0]].params.periodHrs),h=new Slider({props:we}),binding_callbacks.push(()=>bind(h,"value",he));function se(W){e[11](W)}let ee={min:.05,max:1,step:"0.05",limits:[.05,(x=e[1][e[0]])==null?void 0:x.params.periodHrs],label:"Bin size (hrs):"};e[1][e[0]].params.binSizeHrs!==void 0&&(ee.value=e[1][e[0]].params.binSizeHrs),$=new Slider({props:ee}),binding_callbacks.push(()=>bind($,"value",se));function me(W){e[12](W)}let Te={min:100,max:1e3,step:"1",limits:[5,1/0],label:"Width: "};e[1][e[0]].params.width!==void 0&&(Te.value=e[1][e[0]].params.width),k=new Slider({props:Te}),binding_callbacks.push(()=>bind(k,"value",me));function ge(W){e[13](W)}let ne={min:10,max:30,step:"1",limits:[5,1/0],label:"Day Height:"};e[1][e[0]].params.dayHeight!==void 0&&(ne.value=e[1][e[0]].params.dayHeight),M=new Slider({props:ne}),binding_callbacks.push(()=>bind(M,"value",ge));function ve(W){e[14](W)}let B={min:1,max:20,step:"1",limits:[-((de=e[1][e[0]])==null?void 0:de.params.dayHeight),1/0],label:"Between Height:"};e[1][e[0]].params.betweenHeight!==void 0&&(B.value=e[1][e[0]].params.betweenHeight),H=new Slider({props:B}),binding_callbacks.push(()=>bind(H,"value",ve));let R=ensure_array_like(e[1][e[0]].sourceData),V=[];for(let W=0;W<R.length;W+=1)V[W]=create_each_block$b(get_each_context$b(e,R,W));const J=W=>transition_out(V[W],1,1,()=>{V[W]=null});return{c(){t=element("div"),r=element("div"),a=element("span"),a.textContent="Start time:",i=space(),o=element("div"),c=text(u),d=space(),f=element("input"),m=space(),p=element("div"),create_component(h.$$.fragment),y=space(),D=element("div"),create_component($.$$.fragment),g=space(),v=element("div"),create_component(k.$$.fragment),S=space(),O=element("div"),create_component(M.$$.fragment),w=space(),I=element("div"),create_component(H.$$.fragment),A=space(),E=element("div"),L=element("a"),L.textContent="Show y-axes:",Z=space(),C=element("input"),F=space(),P=element("a"),P.textContent="Scale:",Y=space(),z=element("select"),U=element("option"),U.textContent="By row / plot",ie=element("option"),ie.textContent="Overall",X=space(),ue=element("div"),oe=element("h1"),_e=text(j),Q=text(" Data"),fe=space(),pe=element("span"),pe.textContent="+",ce=space(),ye=element("div");for(let W=0;W<V.length;W+=1)V[W].c();attr(a,"class","svelte-jzkczy"),attr(o,"class","datepicklabel datepicklabelshow svelte-jzkczy"),set_style(o,"display","inline-block"),set_style(o,"margin-right","2px"),set_style(o,"margin-left","auto"),set_style(o,"text-align","center"),attr(f,"class","dateInput svelte-jzkczy"),attr(f,"type","datetime-local"),attr(f,"id","startTime"),attr(f,"name","startTime"),attr(r,"class","sliderContainer svelte-jzkczy"),attr(p,"class","sliderContainer svelte-jzkczy"),attr(D,"class","sliderContainer svelte-jzkczy"),attr(v,"class","sliderContainer svelte-jzkczy"),attr(O,"class","sliderContainer svelte-jzkczy"),attr(I,"class","sliderContainer svelte-jzkczy"),set_style(L,"align-self","center"),attr(L,"class","svelte-jzkczy"),attr(C,"type","checkbox"),attr(C,"class","svelte-jzkczy"),set_style(P,"align-self","center"),attr(P,"class","svelte-jzkczy"),U.__value="byPlot",set_input_value(U,U.__value),attr(U,"class","svelte-jzkczy"),ie.__value="overall",set_input_value(ie,ie.__value),attr(ie,"class","svelte-jzkczy"),attr(z,"class","selectField svelte-jzkczy"),set_style(z,"margin-right","0",1),e[1][e[0]].params.scaleAxes===void 0&&add_render_callback(()=>e[16].call(z)),attr(E,"class","sliderContainer svelte-jzkczy"),attr(t,"class","chartControls svelte-jzkczy"),set_style(oe,"display","inline"),attr(oe,"class","svelte-jzkczy"),attr(pe,"class","addbutton hoverbutton showContextMenu svelte-jzkczy"),set_style(ue,"margin","1em 1em 0 0"),attr(ue,"class","svelte-jzkczy"),attr(ye,"class","graphDataTree svelte-jzkczy")},m(W,K){insert(W,t,K),append(t,r),append(r,a),append(r,i),append(r,o),append(o,c),append(r,d),append(r,f),set_input_value(f,e[1][e[0]].params.startTime),append(t,m),append(t,p),mount_component(h,p,null),append(t,y),append(t,D),mount_component($,D,null),append(t,g),append(t,v),mount_component(k,v,null),append(t,S),append(t,O),mount_component(M,O,null),append(t,w),append(t,I),mount_component(H,I,null),append(t,A),append(t,E),append(E,L),append(E,Z),append(E,C),C.checked=e[1][e[0]].params.showAxes,append(E,F),append(E,P),append(E,Y),append(E,z),append(z,U),append(z,ie),select_option(z,e[1][e[0]].params.scaleAxes,!0),insert(W,X,K),insert(W,ue,K),append(ue,oe),append(oe,_e),append(oe,Q),append(ue,fe),append(ue,pe),insert(W,ce,K),insert(W,ye,K);for(let te=0;te<V.length;te+=1)V[te]&&V[te].m(ye,null);ae=!0,be||(G=[listen(o,"dblclick",e[7]),listen(f,"input",e[8]),listen(f,"keydown",e[9]),listen(C,"change",e[15]),listen(z,"change",e[16]),listen(pe,"click",e[17])],be=!0)},p(W,K){var De,Oe;(!ae||K[0]&3)&&u!==(u=formatTimeFromISO(W[1][W[0]].params.startTime)+"")&&set_data(c,u),K[0]&3&&set_input_value(f,W[1][W[0]].params.startTime);const te={};!_&&K[0]&3&&(_=!0,te.value=W[1][W[0]].params.periodHrs,add_flush_callback(()=>_=!1)),h.$set(te);const le={};K[0]&3&&(le.limits=[.05,(De=W[1][W[0]])==null?void 0:De.params.periodHrs]),!b&&K[0]&3&&(b=!0,le.value=W[1][W[0]].params.binSizeHrs,add_flush_callback(()=>b=!1)),$.$set(le);const ke={};!T&&K[0]&3&&(T=!0,ke.value=W[1][W[0]].params.width,add_flush_callback(()=>T=!1)),k.$set(ke);const $e={};!N&&K[0]&3&&(N=!0,$e.value=W[1][W[0]].params.dayHeight,add_flush_callback(()=>N=!1)),M.$set($e);const Me={};if(K[0]&3&&(Me.limits=[-((Oe=W[1][W[0]])==null?void 0:Oe.params.dayHeight),1/0]),!q&&K[0]&3&&(q=!0,Me.value=W[1][W[0]].params.betweenHeight,add_flush_callback(()=>q=!1)),H.$set(Me),K[0]&3&&(C.checked=W[1][W[0]].params.showAxes),K[0]&3&&select_option(z,W[1][W[0]].params.scaleAxes),(!ae||K[0]&5)&&j!==(j=W[2][W[0]].name+"")&&set_data(_e,j),K[0]&11){R=ensure_array_like(W[1][W[0]].sourceData);let Se;for(Se=0;Se<R.length;Se+=1){const Ee=get_each_context$b(W,R,Se);V[Se]?(V[Se].p(Ee,K),transition_in(V[Se],1)):(V[Se]=create_each_block$b(Ee),V[Se].c(),transition_in(V[Se],1),V[Se].m(ye,null))}for(group_outros(),Se=R.length;Se<V.length;Se+=1)J(Se);check_outros()}},i(W){if(!ae){transition_in(h.$$.fragment,W),transition_in($.$$.fragment,W),transition_in(k.$$.fragment,W),transition_in(M.$$.fragment,W),transition_in(H.$$.fragment,W);for(let K=0;K<R.length;K+=1)transition_in(V[K]);ae=!0}},o(W){transition_out(h.$$.fragment,W),transition_out($.$$.fragment,W),transition_out(k.$$.fragment,W),transition_out(M.$$.fragment,W),transition_out(H.$$.fragment,W),V=V.filter(Boolean);for(let K=0;K<V.length;K+=1)transition_out(V[K]);ae=!1},d(W){W&&(detach(t),detach(X),detach(ue),detach(ce),detach(ye)),destroy_component(h),destroy_component($),destroy_component(k),destroy_component(M),destroy_component(H),destroy_each(V,W),be=!1,run_all(G)}}}function create_each_block_3$3(e){let t,r=e[3][e[3].findIndex(o)].data[e[44]].name+"",a,i;function o(...u){return e[22](e[35],...u)}return{c(){t=element("option"),a=text(r),t.__value=i=e[44],set_input_value(t,t.__value),attr(t,"class","svelte-jzkczy")},m(u,c){insert(u,t,c),append(t,a)},p(u,c){e=u,c[0]&11&&r!==(r=e[3][e[3].findIndex(o)].data[e[44]].name+"")&&set_data(a,r),c[0]&3&&i!==(i=e[44])&&(t.__value=i,set_input_value(t,t.__value))},d(u){u&&detach(t)}}}function create_each_block_2$5(e){let t,r,a=e[41].process+"",i,o,u,c,d,f,m,p,h;function _(...g){return e[25](e[37],e[38],e[43],...g)}function y(...g){return e[26](e[35],...g)}function D(...g){return e[27](e[38],e[37],e[43],...g)}var $=componentMap[e[41].process].component;function b(g,v){return{props:{paramsStart:g[41].parameters,typeTime:{type:g[3][g[3].findIndex(y)].data[g[35].chartvalues[g[38]].field].type,tocheck:{tableID:g[35].tableID,key:g[38]}}}}}return $&&(f=construct_svelte_component($,b(e)),f.$on("update",D)),{c(){t=element("details"),r=element("summary"),i=text(a),o=space(),u=element("div"),u.textContent="",c=space(),d=element("div"),f&&create_component(f.$$.fragment),attr(u,"class","deleteProcess hoverbutton svelte-jzkczy"),attr(r,"class","svelte-jzkczy"),attr(d,"class","processDetails svelte-jzkczy"),t.open=!0,attr(t,"class","process svelte-jzkczy")},m(g,v){insert(g,t,v),append(t,r),append(r,i),append(r,o),append(r,u),append(t,c),append(t,d),f&&mount_component(f,d,null),m=!0,p||(h=listen(u,"click",_),p=!0)},p(g,v){if(e=g,(!m||v[0]&3)&&a!==(a=e[41].process+"")&&set_data(i,a),v[0]&3&&$!==($=componentMap[e[41].process].component)){if(f){group_outros();const k=f;transition_out(k.$$.fragment,1,0,()=>{destroy_component(k,1)}),check_outros()}$?(f=construct_svelte_component($,b(e)),f.$on("update",D),create_component(f.$$.fragment),transition_in(f.$$.fragment,1),mount_component(f,d,null)):f=null}else if($){const k={};v[0]&3&&(k.paramsStart=e[41].parameters),v[0]&11&&(k.typeTime={type:e[3][e[3].findIndex(y)].data[e[35].chartvalues[e[38]].field].type,tocheck:{tableID:e[35].tableID,key:e[38]}}),f.$set(k)}},i(g){m||(f&&transition_in(f.$$.fragment,g),m=!0)},o(g){f&&transition_out(f.$$.fragment,g),m=!1},d(g){g&&detach(t),f&&destroy_component(f),p=!1,h()}}}function create_each_block_1$7(e){let t,r,a=e[38]+"",i,o,u,c,d,f,m,p,h,_,y,D;function $(...M){return e[21](e[37],e[38],...M)}let b=ensure_array_like(getFieldNames(e[35])),g=[];for(let M=0;M<b.length;M+=1)g[M]=create_each_block_3$3(get_each_context_3$3(e,b,M));function v(){e[23].call(f,e[38],e[36],e[37])}function k(...M){return e[24](e[37],e[38],...M)}let T=ensure_array_like(e[35].chartvalues[e[38]].processSteps),S=[];for(let M=0;M<T.length;M+=1)S[M]=create_each_block_2$5(get_each_context_2$5(e,T,M));const O=M=>transition_out(S[M],1,1,()=>{S[M]=null});return{c(){t=element("details"),r=element("summary"),i=text(a),o=text(`:
              
              
              `),u=element("span"),u.textContent="+",c=space(),d=element("span"),f=element("select");for(let M=0;M<g.length;M+=1)g[M].c();m=space();for(let M=0;M<S.length;M+=1)S[M].c();p=space(),attr(u,"class","addbutton hoverbutton showContextMenu svelte-jzkczy"),attr(f,"class","selectField svelte-jzkczy"),e[35].chartvalues[e[38]].field===void 0&&add_render_callback(v),attr(d,"class","svelte-jzkczy"),attr(r,"class","svelte-jzkczy"),t.open=!0,attr(t,"class",h="field "+(e[35].chartvalues[e[38]].processSteps.length>0?"":"no-arrow")+" svelte-jzkczy")},m(M,N){insert(M,t,N),append(t,r),append(r,i),append(r,o),append(r,u),append(r,c),append(r,d),append(d,f);for(let w=0;w<g.length;w+=1)g[w]&&g[w].m(f,null);select_option(f,e[35].chartvalues[e[38]].field,!0),append(t,m);for(let w=0;w<S.length;w+=1)S[w]&&S[w].m(t,null);append(t,p),_=!0,y||(D=[listen(u,"click",$),listen(f,"change",v),listen(f,"change",k)],y=!0)},p(M,N){if(e=M,(!_||N[0]&3)&&a!==(a=e[38]+"")&&set_data(i,a),N[0]&11){b=ensure_array_like(getFieldNames(e[35]));let w;for(w=0;w<b.length;w+=1){const I=get_each_context_3$3(e,b,w);g[w]?g[w].p(I,N):(g[w]=create_each_block_3$3(I),g[w].c(),g[w].m(f,null))}for(;w<g.length;w+=1)g[w].d(1);g.length=b.length}if(N[0]&3&&select_option(f,e[35].chartvalues[e[38]].field),N[0]&11){T=ensure_array_like(e[35].chartvalues[e[38]].processSteps);let w;for(w=0;w<T.length;w+=1){const I=get_each_context_2$5(e,T,w);S[w]?(S[w].p(I,N),transition_in(S[w],1)):(S[w]=create_each_block_2$5(I),S[w].c(),transition_in(S[w],1),S[w].m(t,p))}for(group_outros(),w=T.length;w<S.length;w+=1)O(w);check_outros()}(!_||N[0]&3&&h!==(h="field "+(e[35].chartvalues[e[38]].processSteps.length>0?"":"no-arrow")+" svelte-jzkczy"))&&attr(t,"class",h)},i(M){if(!_){for(let N=0;N<T.length;N+=1)transition_in(S[N]);_=!0}},o(M){S=S.filter(Boolean);for(let N=0;N<S.length;N+=1)transition_out(S[N]);_=!1},d(M){M&&detach(t),destroy_each(g,M),destroy_each(S,M),y=!1,run_all(D)}}}function create_each_block$b(e){let t,r,a,i,o,u,c,d,f,m=e[3].find(ae).displayName+"",p,h,_,y,D,$,b,g,v,k,T,S,O,M,N,w,I,H,q,A=e[1][e[0]].sourceData[e[37]].estimate+"",E,L,Z,C,F,P,Y,z,U,ie,X,ue,oe,j,_e,Q,fe;function pe(V){e[18](V,e[35])}let ce={};e[35].name!==void 0&&(ce.value=e[35].name),a=new InPlaceEdit({props:ce}),binding_callbacks.push(()=>bind(a,"value",pe));function ye(...V){return e[19](e[37],...V)}function ae(...V){return e[20](e[35],...V)}let be=ensure_array_like(Object.keys(e[35].chartvalues)),G=[];for(let V=0;V<be.length;V+=1)G[V]=create_each_block_1$7(get_each_context_1$7(e,be,V));const he=V=>transition_out(G[V],1,1,()=>{G[V]=null});function we(){e[28].call(D,e[37])}function se(V){e[29](V,e[37])}let ee={min:"0",max:"1",step:"0.01",limits:[0,1],label:"Alpha: "};e[1][e[0]].sourceData[e[37]].col.alpha!==void 0&&(ee.value=e[1][e[0]].sourceData[e[37]].col.alpha),g=new Slider({props:ee}),binding_callbacks.push(()=>bind(g,"value",se));function me(){e[30].call(w,e[37])}function Te(V){e[31](V,e[37])}let ge={min:"0",max:"100",step:"1",limits:[0,100],label:"Centile threshold: "};e[1][e[0]].sourceData[e[37]].centileThresh!==void 0&&(ge.value=e[1][e[0]].sourceData[e[37]].centileThresh),C=new Slider({props:ge}),binding_callbacks.push(()=>bind(C,"value",Te));function ne(V){e[32](V,e[37])}let ve={min:"0",max:"10",step:"1",limits:[0,100],label:"Template hours before: "};e[1][e[0]].sourceData[e[37]].N!==void 0&&(ve.value=e[1][e[0]].sourceData[e[37]].N),z=new Slider({props:ve}),binding_callbacks.push(()=>bind(z,"value",ne));function B(V){e[33](V,e[37])}let R={min:"0",max:"10",step:"1",limits:[0,100],label:"Template hours after: "};return e[1][e[0]].sourceData[e[37]].M!==void 0&&(R.value=e[1][e[0]].sourceData[e[37]].M),ue=new Slider({props:R}),binding_callbacks.push(()=>bind(ue,"value",B)),{c(){t=element("details"),r=element("summary"),create_component(a.$$.fragment),o=space(),u=element("div"),u.textContent="",c=space(),d=element("div"),f=text("Table: "),p=text(m),h=space();for(let V=0;V<G.length;V+=1)G[V].c();_=space(),y=element("div"),D=element("input"),$=space(),b=element("div"),create_component(g.$$.fragment),k=space(),T=element("div"),S=element("details"),O=element("summary"),M=element("a"),M.textContent="Onsets",N=space(),w=element("input"),I=space(),H=element("span"),q=text("Est : "),E=text(A),L=space(),Z=element("div"),create_component(C.$$.fragment),P=space(),Y=element("div"),create_component(z.$$.fragment),ie=space(),X=element("div"),create_component(ue.$$.fragment),j=space(),attr(u,"class","deleteTable hoverbutton svelte-jzkczy"),attr(r,"class","svelte-jzkczy"),attr(d,"class","tableLabel svelte-jzkczy"),attr(D,"class","colourPicker svelte-jzkczy"),attr(D,"id",e[37]),attr(D,"type","color"),set_style(D,"background",e[1][e[0]].sourceData[e[37]].col.hex),attr(b,"class","sliderContainer svelte-jzkczy"),attr(y,"class","colour svelte-jzkczy"),attr(M,"class","svelte-jzkczy"),attr(w,"type","checkbox"),attr(w,"class","svelte-jzkczy"),attr(H,"class","svelte-jzkczy"),attr(O,"class","svelte-jzkczy"),set_style(Z,"padding","5px"),attr(Z,"class","svelte-jzkczy"),set_style(Y,"padding","5px"),attr(Y,"class","svelte-jzkczy"),set_style(X,"padding","5px"),attr(X,"class","svelte-jzkczy"),attr(S,"class","otherItemDetail svelte-jzkczy"),attr(T,"class","itemsliderContainer svelte-jzkczy"),t.open=!0,attr(t,"class","dataTable svelte-jzkczy")},m(V,J){insert(V,t,J),append(t,r),mount_component(a,r,null),append(r,o),append(r,u),append(t,c),append(t,d),append(d,f),append(d,p),append(t,h);for(let x=0;x<G.length;x+=1)G[x]&&G[x].m(t,null);append(t,_),append(t,y),append(y,D),set_input_value(D,e[1][e[0]].sourceData[e[37]].col.hex),append(y,$),append(y,b),mount_component(g,b,null),append(t,k),append(t,T),append(T,S),append(S,O),append(O,M),append(O,N),append(O,w),w.checked=e[1][e[0]].sourceData[e[37]].showOnsets,append(O,I),append(O,H),append(H,q),append(H,E),append(S,L),append(S,Z),mount_component(C,Z,null),append(S,P),append(S,Y),mount_component(z,Y,null),append(S,ie),append(S,X),mount_component(ue,X,null),insert(V,j,J),_e=!0,Q||(fe=[listen(u,"click",ye),listen(D,"input",we),listen(w,"change",me)],Q=!0)},p(V,J){e=V;const x={};if(!i&&J[0]&3&&(i=!0,x.value=e[35].name,add_flush_callback(()=>i=!1)),a.$set(x),(!_e||J[0]&11)&&m!==(m=e[3].find(ae).displayName+"")&&set_data(p,m),J[0]&11){be=ensure_array_like(Object.keys(e[35].chartvalues));let le;for(le=0;le<be.length;le+=1){const ke=get_each_context_1$7(e,be,le);G[le]?(G[le].p(ke,J),transition_in(G[le],1)):(G[le]=create_each_block_1$7(ke),G[le].c(),transition_in(G[le],1),G[le].m(t,_))}for(group_outros(),le=be.length;le<G.length;le+=1)he(le);check_outros()}(!_e||J[0]&3)&&set_style(D,"background",e[1][e[0]].sourceData[e[37]].col.hex),J[0]&3&&set_input_value(D,e[1][e[0]].sourceData[e[37]].col.hex);const de={};!v&&J[0]&3&&(v=!0,de.value=e[1][e[0]].sourceData[e[37]].col.alpha,add_flush_callback(()=>v=!1)),g.$set(de),J[0]&3&&(w.checked=e[1][e[0]].sourceData[e[37]].showOnsets),(!_e||J[0]&3)&&A!==(A=e[1][e[0]].sourceData[e[37]].estimate+"")&&set_data(E,A);const W={};!F&&J[0]&3&&(F=!0,W.value=e[1][e[0]].sourceData[e[37]].centileThresh,add_flush_callback(()=>F=!1)),C.$set(W);const K={};!U&&J[0]&3&&(U=!0,K.value=e[1][e[0]].sourceData[e[37]].N,add_flush_callback(()=>U=!1)),z.$set(K);const te={};!oe&&J[0]&3&&(oe=!0,te.value=e[1][e[0]].sourceData[e[37]].M,add_flush_callback(()=>oe=!1)),ue.$set(te)},i(V){if(!_e){transition_in(a.$$.fragment,V);for(let J=0;J<be.length;J+=1)transition_in(G[J]);transition_in(g.$$.fragment,V),transition_in(C.$$.fragment,V),transition_in(z.$$.fragment,V),transition_in(ue.$$.fragment,V),_e=!0}},o(V){transition_out(a.$$.fragment,V),G=G.filter(Boolean);for(let J=0;J<G.length;J+=1)transition_out(G[J]);transition_out(g.$$.fragment,V),transition_out(C.$$.fragment,V),transition_out(z.$$.fragment,V),transition_out(ue.$$.fragment,V),_e=!1},d(V){V&&(detach(t),detach(j)),destroy_component(a),destroy_each(G,V),destroy_component(g),destroy_component(C),destroy_component(z),destroy_component(ue),Q=!1,run_all(fe)}}}function create_fragment$k(e){let t,r,a=e[0]>=0&&e[1][e[0]].graph==="actigram"&&create_if_block$e(e);return{c(){a&&a.c(),t=empty$1()},m(i,o){a&&a.m(i,o),insert(i,t,o),r=!0},p(i,o){i[0]>=0&&i[1][i[0]].graph==="actigram"?a?(a.p(i,o),o[0]&3&&transition_in(a,1)):(a=create_if_block$e(i),a.c(),transition_in(a,1),a.m(t.parentNode,t)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(i){r||(transition_in(a),r=!0)},o(i){transition_out(a),r=!1},d(i){i&&detach(t),a&&a.d(i)}}}function instance$k(e,t,r){let a,i,o,u;component_subscribe(e,activeGraphTab,z=>r(0,a=z)),component_subscribe(e,graphs,z=>r(1,i=z)),component_subscribe(e,graphTabs,z=>r(2,o=z)),component_subscribe(e,data,z=>r(3,u=z));const c={time:"time",values:"values"},d={col:{hex:getRandomHexColour(),alpha:.5},showOnsets:!0,centileThresh:80,M:3,N:3,estimate:0};let f=!0;function m(){f=!f;const z=document.querySelector(".datepicklabel"),U=document.querySelector(".dateInput");f?(z.style.display="inline-block",U.style.width="18px"):(z.style.display="none",U.style.width="60%")}const p=z=>{m()};function h(){i[a].params.startTime=this.value,graphs.set(i)}const _=z=>{z.key==="Enter"&&m()};function y(z){e.$$.not_equal(i[a].params.periodHrs,z)&&(i[a].params.periodHrs=z,graphs.set(i))}function D(z){e.$$.not_equal(i[a].params.binSizeHrs,z)&&(i[a].params.binSizeHrs=z,graphs.set(i))}function $(z){e.$$.not_equal(i[a].params.width,z)&&(i[a].params.width=z,graphs.set(i))}function b(z){e.$$.not_equal(i[a].params.dayHeight,z)&&(i[a].params.dayHeight=z,graphs.set(i))}function g(z){e.$$.not_equal(i[a].params.betweenHeight,z)&&(i[a].params.betweenHeight=z,graphs.set(i))}function v(){i[a].params.showAxes=this.checked,graphs.set(i)}function k(){i[a].params.scaleAxes=select_value(this),graphs.set(i)}const T=z=>{z.preventDefault(),createnewDataForGraph(c,d)};function S(z,U){e.$$.not_equal(U.name,z)&&(U.name=z,graphs.set(i))}const O=(z,U)=>{U.preventDefault(),removeGraphData(z)},M=(z,U)=>U.id===z.tableID,N=(z,U,ie)=>{ie.preventDefault(),addProcessToGraphData("graph",z,U)},w=(z,U)=>U.id===z.tableID;function I(z,U,ie){U[ie].chartvalues[z].field=select_value(this),graphs.set(i)}const H=(z,U,ie)=>{updateGraphProcess(a,z,U)},q=(z,U,ie,X)=>{X.preventDefault(),removeProcess(z,U,ie)},A=(z,U)=>U.id===z.tableID,E=(z,U,ie,X)=>{updateProcess(z,U,ie,X.detail.params)};function L(z){i[a].sourceData[z].col.hex=this.value,graphs.set(i)}function Z(z,U){e.$$.not_equal(i[a].sourceData[U].col.alpha,z)&&(i[a].sourceData[U].col.alpha=z,graphs.set(i))}function C(z){i[a].sourceData[z].showOnsets=this.checked,graphs.set(i)}function F(z,U){e.$$.not_equal(i[a].sourceData[U].centileThresh,z)&&(i[a].sourceData[U].centileThresh=z,graphs.set(i))}function P(z,U){e.$$.not_equal(i[a].sourceData[U].N,z)&&(i[a].sourceData[U].N=z,graphs.set(i))}function Y(z,U){e.$$.not_equal(i[a].sourceData[U].M,z)&&(i[a].sourceData[U].M=z,graphs.set(i))}return[a,i,o,u,c,d,m,p,h,_,y,D,$,b,g,v,k,T,S,O,M,N,w,I,H,q,A,E,L,Z,C,F,P,Y]}class Actigram_controls extends SvelteComponent{constructor(t){super(),init(this,t,instance$k,create_fragment$k,safe_not_equal,{},null,[-1,-1])}}function bisection(e,t,r,a,i){var o=function(f){return f>0?1:f<0?-1:0},u=o(e(t));o(e(r));for(var c=.5*(t+r),d=e(c);r-t>i&&r-t>a*Math.abs(c)&&Math.abs(d)>i;)d*u>0?(t=c,u=o(d)):r=c,c=.5*(t+r),d=e(c);return c}function gamnln(e){var t=[.5723649429247001,0,-.1207822376352452,0,.2846828704729192,.6931471805599453,1.200973602347074,1.791759469228055,2.453736570842442,3.178053830347946,3.957813967618717,4.787491742782046,5.662562059857142,6.579251212010101,7.534364236758733,8.525161361065415,9.549267257300997,10.60460290274525,11.68933342079727,12.80182748008147,13.94062521940376,15.10441257307552,16.29200047656724,17.50230784587389,18.73434751193645,19.98721449566188,21.2600761562447,22.55216385312342,23.86276584168909,25.19122118273868,26.53691449111561,27.89927138384089,29.27775451504082,30.67186010608068,32.08111489594736,33.50507345013689,34.94331577687682,36.39544520803305,37.86108650896109,39.3398841871995,40.8315009745308,42.33561646075349,43.85192586067515,45.3801388984769,46.91997879580877,48.47118135183522,50.03349410501914,51.60667556776437,53.19049452616927,54.78472939811231,56.38916764371993,58.00360522298051,59.62784609588432,61.26170176100199,62.9049908288765,64.55753862700632,66.21917683354901,67.88974313718154,69.56908092082364,71.257038967168,72.9534711841694,74.65823634883016,76.37119786778275,78.0922235533153,79.82118541361436,81.55795945611503,83.30242550295004,85.05446701758153,86.81397094178108,88.58082754219767,90.35493026581838,92.1361756036871,93.92446296229978,95.71969454214322,97.52177522288821,99.33061245478741,101.1461161558646,102.9681986145138,104.7967743971583,106.6317602606435,108.4730750690654,110.3206397147574,112.1743770431779,114.0342117814617,115.9000704704145,117.7718813997451,119.6495745463449,121.5330815154387,123.4223354844396,125.3172711493569,127.2178246736118,129.1239336391272,131.0355369995686,132.9525750356163,134.8749893121619,136.8027226373264,138.7357190232026,140.6739236482343,142.617282821146,144.5657439463449,146.5192554907206,148.477766951773,150.4412288270019,152.4095925844974,154.3828106346716,156.3608363030788,158.3436238042692,160.3311282166309,162.3233054581712,164.3201122631952,166.3215061598404,168.3274454484277,170.3378891805928,172.3527971391628,174.3721298187452,176.3958484069973,178.4239147665485,180.4562914175438,182.4929415207863,184.5338288614495,186.5789178333379,188.6281734236716,190.6815611983747,192.7390472878449,194.8005983731871,196.86618167289,198.9357649299295,201.0093163992815,203.0868048358281,205.1681994826412,207.2534700596299,209.3425867525368,211.435520202271,213.5322414945632,215.6327221499328,217.7369341139542,219.8448497478113,221.9564418191303,224.0716834930795,226.1905483237276,228.3130102456502,230.4390435657769,232.5686229554685,234.7017234428182,236.8383204051684,238.9783895618343,241.121906967029,243.2688490029827,245.4191923732478,247.5729140961868,249.7299914986334,251.8904022097232,254.0541241548883,256.2211355500095,258.3914148957209,260.5649409718632,262.7416928320802,264.9216497985528,267.1047914568685,269.2910976510198,271.4805484785288,273.6731242856937,275.8688056629533,278.0675734403662,280.2694086832001,282.4742926876305,284.6822069765408,286.893133295427,289.1070536083976,291.3239500942703,293.5438051427607,295.7666013507606,297.9923215187034,300.2209486470141,302.4524659326413,304.6868567656687,306.9241047260048,309.1641935801469,311.4071072780187,313.652829949879,315.9013459032995,318.1526396202093,320.4066957540055,322.6634991267262,324.9230347262869,327.1852877037753,329.4502433708053,331.7178871969285,333.9882048070999,336.2611819791985,338.5368046415996,340.815058870799,343.0959308890863,345.3794070622669,347.6654738974312,349.9541180407703,352.245326275435,354.5390855194408,356.835382823613,359.1342053695754];if(e<201)return t[e-1];var r=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],a=2.5066282746310007,i=.5*e,o=i,u=i+5.5;u=(i+.5)*Math.log(u)-u;for(var c=1.000000000190015,d=0;d<6;d++)o=o+1,c=c+r[d]/o;var f=u+Math.log(a*c/i);return f}function gser(e,t){for(var r=1e8,a=1e-8,i=gamnln(e),o=.5*e,u=o,c=1/o,d=c,e=1;e<r&&(u++,d=d*t/u,c+=d,!(d<c*a));e++);return c*Math.exp(-t+o*Math.log(t)-i)}function gcf(e,t){for(var r=1e8,a=1e-8,i=gamnln(e),o=.5*e,u=t+1-o,c=1e-300,d=1/c,f=1/u,m=f,p=1;p<r;p++){var h=-p*(p-o);u+=2,f=h*f+u,Math.abs(f)<c&&(f=c),d=u+h/d,Math.abs(d)<c&&(d=c),f=1/f;var _=f*d;if(m=m*_,Math.abs(_-1)<a)break}return m*Math.exp(-t+o*Math.log(t)-i)}function gammp(e,t){return t<.5*e+1?gser(e,t):1-gcf(e,t)}function gammq(e,t){return t<.5*e+1?1-gser(e,t):gcf(e,t)}function pchisq(e,t,r=1){return r==1?gammq(t,.5*e):gammp(t,.5*e)}function qchisq(e,t,r=1){if(r==1){if(e==0)return 1/0;if(e==1)return 0}if(r==2){if(e==0)return 0;if(e==1)return 1/0}var a=1e-6,i=0,o=Math.sqrt(2*t),u=2*o,c=1;for(r==2&&(c=-1);c*pchisq(u,t,r)>e*c;)i=u,u+=2*o;var d=function(f){return pchisq(f,t,r)-e};return bisection(d,i,u,a,0)}function create_fragment$j(e){let t,r;return{c(){t=element("div"),r=text(e[0]),set_style(t,"top",e[2]+5+"px"),set_style(t,"left",e[1]+5+"px"),attr(t,"class","svelte-1wb4l5o")},m(a,i){insert(a,t,i),append(t,r)},p(a,[i]){i&1&&set_data(r,a[0]),i&4&&set_style(t,"top",a[2]+5+"px"),i&2&&set_style(t,"left",a[1]+5+"px")},i:noop,o:noop,d(a){a&&detach(t)}}}function instance$j(e,t,r){let{tipcontent:a}=t,{x:i}=t,{y:o}=t;return e.$$set=u=>{"tipcontent"in u&&r(0,a=u.tipcontent),"x"in u&&r(1,i=u.x),"y"in u&&r(2,o=u.y)},[a,i,o]}class TooltipFromUse extends SvelteComponent{constructor(t){super(),init(this,t,instance$j,create_fragment$j,safe_not_equal,{tipcontent:0,x:1,y:2})}}function tooltip(e){let t,r;function a(u){t=e.getAttribute("tipcontent"),e.removeAttribute("title"),r=new TooltipFromUse({props:{tipcontent:t,x:u.pageX,y:u.pageY},target:document.body})}function i(u){r.$set({x:u.pageX,y:u.pageY})}function o(){r.$destroy(),e.setAttribute("tipcontent",t)}return e.addEventListener("mouseover",a),e.addEventListener("mouseleave",o),e.addEventListener("mousemove",i),{destroy(){e.removeEventListener("mouseover",a),e.removeEventListener("mouseleave",o),e.removeEventListener("mousemove",i)}}}function get_each_context$a(e,t,r){const a=e.slice();return a[11]=t[r],a[13]=r,a}function get_each_context_1$6(e,t,r){const a=e.slice();return a[14]=t[r],a[16]=r,a}function create_if_block$d(e){let t,r,a,i,o,u,c,d,f,m,p,h,_,y,D;function $(v,k){return v[3][v[2]].chartData.data.periods.length>0?create_if_block_1$6:create_else_block$4}let b=$(e),g=b(e);return o=new Axis({props:{innerHeight:e[6],yoffset:"0",scale:e[3][e[2]].chartData.xScale,position:"bottom"}}),u=new Axis({props:{innerHeight:e[6],yoffset:"0",scale:e[3][e[2]].chartData.yScale,position:"left"}}),{c(){t=element("div"),r=svg_element("svg"),a=svg_element("g"),g.c(),i=empty$1(),create_component(o.$$.fragment),create_component(u.$$.fragment),c=svg_element("text"),d=text("Chi-sq"),m=svg_element("text"),p=text("Period"),set_style(c,"text-anchor","middle"),attr(c,"transform",f=`translate(-50,${e[6]/2}) rotate(-90)     `),set_style(m,"text-anchor","middle"),attr(m,"x",h=e[7]/2),attr(m,"y",_=e[6]+32),attr(a,"transform",`translate(${e[8].left},${e[8].top})`),attr(r,"id","svgContainer"),attr(r,"width",e[1]),attr(r,"height",e[0]),attr(r,"style",y="transform-origin: top left; transform:scale("+e[3][e[2]].zoom+");"),attr(t,"class","periodogram")},m(v,k){insert(v,t,k),append(t,r),append(r,a),g.m(a,null),append(a,i),mount_component(o,a,null),mount_component(u,a,null),append(a,c),append(c,d),append(a,m),append(m,p),D=!0},p(v,k){b===(b=$(v))&&g?g.p(v,k):(g.d(1),g=b(v),g&&(g.c(),g.m(a,i)));const T={};k&64&&(T.innerHeight=v[6]),k&12&&(T.scale=v[3][v[2]].chartData.xScale),o.$set(T);const S={};k&64&&(S.innerHeight=v[6]),k&12&&(S.scale=v[3][v[2]].chartData.yScale),u.$set(S),(!D||k&64&&f!==(f=`translate(-50,${v[6]/2}) rotate(-90)     `))&&attr(c,"transform",f),(!D||k&128&&h!==(h=v[7]/2))&&attr(m,"x",h),(!D||k&64&&_!==(_=v[6]+32))&&attr(m,"y",_),(!D||k&2)&&attr(r,"width",v[1]),(!D||k&1)&&attr(r,"height",v[0]),(!D||k&12&&y!==(y="transform-origin: top left; transform:scale("+v[3][v[2]].zoom+");"))&&attr(r,"style",y)},i(v){D||(transition_in(o.$$.fragment,v),transition_in(u.$$.fragment,v),D=!0)},o(v){transition_out(o.$$.fragment,v),transition_out(u.$$.fragment,v),D=!1},d(v){v&&detach(t),g.d(),destroy_component(o),destroy_component(u)}}}function create_else_block$4(e){let t,r;return{c(){t=svg_element("text"),r=text("No Data "),attr(t,"x","50%"),attr(t,"y","50%"),attr(t,"text-anchor","middle"),attr(t,"fill","red")},m(a,i){insert(a,t,i),append(t,r)},p:noop,d(a){a&&detach(t)}}}function create_if_block_1$6(e){let t,r=ensure_array_like(e[3][e[2]].chartData.data.periods),a=[];for(let i=0;i<r.length;i+=1)a[i]=create_each_block$a(get_each_context$a(e,r,i));return{c(){for(let i=0;i<a.length;i+=1)a[i].c();t=empty$1()},m(i,o){for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(i,o);insert(i,t,o)},p(i,o){if(o&60){r=ensure_array_like(i[3][i[2]].chartData.data.periods);let u;for(u=0;u<r.length;u+=1){const c=get_each_context$a(i,r,u);a[u]?a[u].p(c,o):(a[u]=create_each_block$a(c),a[u].c(),a[u].m(t.parentNode,t))}for(;u<a.length;u+=1)a[u].d(1);a.length=r.length}},d(i){i&&detach(t),destroy_each(a,i)}}}function create_each_block_1$6(e){let t,r,a,i,o,u,c,d;return{c(){t=svg_element("circle"),attr(t,"tipcontent",r=e[14].toFixed(2)+", "+e[3][e[2]].chartData.data.power[e[13]][e[16]].toFixed(2)+" ("+e[3][e[2]].chartData.data.pvalue[e[13]][e[16]].toFixed(2)+")"),attr(t,"cx",a=e[3][e[2]].chartData.xScale(e[14])),attr(t,"cy",i=e[3][e[2]].chartData.yScale(e[3][e[2]].chartData.data.power[e[13]][e[16]])),attr(t,"r","3"),attr(t,"fill",o=e[3][e[2]].sourceData[e[13]].col.hex),attr(t,"fill-opacity",u=e[3][e[2]].sourceData[e[13]].col.alpha)},m(f,m){insert(f,t,m),c||(d=action_destroyer(tooltip.call(null,t)),c=!0)},p(f,m){m&12&&r!==(r=f[14].toFixed(2)+", "+f[3][f[2]].chartData.data.power[f[13]][f[16]].toFixed(2)+" ("+f[3][f[2]].chartData.data.pvalue[f[13]][f[16]].toFixed(2)+")")&&attr(t,"tipcontent",r),m&12&&a!==(a=f[3][f[2]].chartData.xScale(f[14]))&&attr(t,"cx",a),m&12&&i!==(i=f[3][f[2]].chartData.yScale(f[3][f[2]].chartData.data.power[f[13]][f[16]]))&&attr(t,"cy",i),m&12&&o!==(o=f[3][f[2]].sourceData[f[13]].col.hex)&&attr(t,"fill",o),m&12&&u!==(u=f[3][f[2]].sourceData[f[13]].col.alpha)&&attr(t,"fill-opacity",u)},d(f){f&&detach(t),c=!1,d()}}}function create_each_block$a(e){let t,r,a,i,o,u,c,d=ensure_array_like(e[11]),f=[];for(let m=0;m<d.length;m+=1)f[m]=create_each_block_1$6(get_each_context_1$6(e,d,m));return{c(){for(let m=0;m<f.length;m+=1)f[m].c();t=svg_element("path"),o=svg_element("path"),attr(t,"d",r=e[4][e[13]]),attr(t,"fill","none"),attr(t,"stroke",a=e[3][e[2]].sourceData[e[13]].col.hex),attr(t,"stroke-opacity",i=e[3][e[2]].sourceData[e[13]].col.alpha),attr(t,"stroke-width","2px"),attr(o,"d",u=e[5][e[13]]),attr(o,"fill","none"),attr(o,"stroke","red"),attr(o,"stroke-opacity",c=e[3][e[2]].sourceData[e[13]].col.alpha),attr(o,"stroke-width","1px")},m(m,p){for(let h=0;h<f.length;h+=1)f[h]&&f[h].m(m,p);insert(m,t,p),insert(m,o,p)},p(m,p){if(p&12){d=ensure_array_like(m[11]);let h;for(h=0;h<d.length;h+=1){const _=get_each_context_1$6(m,d,h);f[h]?f[h].p(_,p):(f[h]=create_each_block_1$6(_),f[h].c(),f[h].m(t.parentNode,t))}for(;h<f.length;h+=1)f[h].d(1);f.length=d.length}p&16&&r!==(r=m[4][m[13]])&&attr(t,"d",r),p&12&&a!==(a=m[3][m[2]].sourceData[m[13]].col.hex)&&attr(t,"stroke",a),p&12&&i!==(i=m[3][m[2]].sourceData[m[13]].col.alpha)&&attr(t,"stroke-opacity",i),p&32&&u!==(u=m[5][m[13]])&&attr(o,"d",u),p&12&&c!==(c=m[3][m[2]].sourceData[m[13]].col.alpha)&&attr(o,"stroke-opacity",c)},d(m){m&&(detach(t),detach(o)),destroy_each(f,m)}}}function create_fragment$i(e){var i,o;let t,r,a=((i=e[3][e[2]])==null?void 0:i.graph)==="periodogram"&&((o=e[3][e[2]])==null?void 0:o.sourceData.length)>0&&create_if_block$d(e);return{c(){a&&a.c(),t=empty$1()},m(u,c){a&&a.m(u,c),insert(u,t,c),r=!0},p(u,[c]){var d,f;((d=u[3][u[2]])==null?void 0:d.graph)==="periodogram"&&((f=u[3][u[2]])==null?void 0:f.sourceData.length)>0?a?(a.p(u,c),c&12&&transition_in(a,1)):(a=create_if_block$d(u),a.c(),transition_in(a,1),a.m(t.parentNode,t)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(u){r||(transition_in(a),r=!0)},o(u){transition_out(a),r=!1},d(u){u&&detach(t),a&&a.d(u)}}}function instance$i(e,t,r){let a,i,o,u,c,d;component_subscribe(e,activeGraphTab,y=>r(2,c=y)),component_subscribe(e,graphs,y=>r(3,d=y));let f={top:20,bottom:40,left:80,right:20},m=[],p=[];function h(y,D,$,b,g){var v;if(((v=d[c])==null?void 0:v.graph)==="periodogram"){let T,S,O={data:{periods:[],power:[],sigThreshold:[],pvalue:[]},xScale:linear().domain([$,b]).range([0,u]),yScale:linear().domain([0,100]).range([i,0])},M={ymin:1/0,ymax:-1/0};y.forEach((N,w)=>{N.chartvalues.time.field!=""&&(T=getDataFromSource(w,N.chartvalues.time)),N.chartvalues.values.field!=""&&(S=getDataFromSource(w,N.chartvalues.values));const I=averageBinnedValues(T,S,D);O.data.periods[w]=[],O.data.power[w]=[],O.data.pvalue[w]=[],O.data.sigThreshold[w]=[];let H=0;const q=1+(b-$)/g,A=Math.pow(1-.05,1/q);for(let E=$;E<b;E+=g)O.data.periods[w][H]=E,O.data.power[w][H]=_(I.values,D,E),O.data.pvalue[w][H]=pchisq(O.data.power[w][H],Math.round(E/D)),O.data.sigThreshold[w][H]=qchisq(A,Math.round(E/D)),O.data.power[w][H]<M.ymin&&(M.ymin=O.data.power[w][H]),O.data.power[w][H]>M.ymax&&(M.ymax=O.data.power[w][H]),H++}),set_store_value(graphs,d[c].chartData=O,d),set_store_value(graphs,d[c].chartData.yScale=linear().domain([M.ymin,M.ymax]).range([o,0]),d),y.forEach((N,w)=>{for(let I=0;I<O.data.power[w].length;I++)I===0&&(r(4,m[w]="M ",m),r(5,p[w]="M",p)),r(4,m[w]+=`${d[c].chartData.xScale(O.data.periods[w][I])} ${d[c].chartData.yScale(O.data.power[w][I])} `,m),r(5,p[w]+=`${d[c].chartData.xScale(O.data.periods[w][I])} ${d[c].chartData.yScale(O.data.sigThreshold[w][I])} `,p)})}}function _(y,D,$){const b=Math.round($/D),g=Math.ceil(y.length/b),v=Array.from({length:b},(O,M)=>{const N=M,w=Array.from({length:g},(I,H)=>y[N+H*b]).filter(I=>I!==void 0&&!isNaN(I));return mean(w)}),k=mean(y),T=v.reduce((O,M)=>O+Math.pow(M-k,2),0)*(y.length*g),S=y.reduce((O,M)=>O+Math.pow(M-k,2),0);return T/S}return e.$$.update=()=>{var y,D,$,b,g,v,k;e.$$.dirty&12&&r(1,a=(y=d[c])==null?void 0:y.params.width),e.$$.dirty&12&&r(0,i=(D=d[c])==null?void 0:D.params.height),e.$$.dirty&1&&r(6,o=i-f.top-f.bottom),e.$$.dirty&2&&r(7,u=a-f.left-f.right),e.$$.dirty&12&&h(($=d[c])==null?void 0:$.sourceData,(b=d[c])==null?void 0:b.params.binSizeHrs,(g=d[c])==null?void 0:g.params.minPeriod,(v=d[c])==null?void 0:v.params.maxPeriod,(k=d[c])==null?void 0:k.params.stepPeriod)},[i,a,c,d,m,p,o,u,f]}class Periodogram extends SvelteComponent{constructor(t){super(),init(this,t,instance$i,create_fragment$i,safe_not_equal,{})}}function get_each_context$9(e,t,r){const a=e.slice();return a[25]=t[r],a[26]=t,a[27]=r,a}function get_each_context_1$5(e,t,r){const a=e.slice();return a[28]=t[r],a[29]=t,a[30]=r,a}function get_each_context_2$4(e,t,r){const a=e.slice();return a[31]=t[r],a[33]=r,a}function get_each_context_3$2(e,t,r){const a=e.slice();return a[34]=t[r],a}function create_if_block$c(e){let t,r,a,i,o,u,c,d,f,m,p,h,_,y,D,$,b,g,v,k,T,S,O,M,N,w,I,H=e[2][e[0]].name+"",q,A,E,L,Z,C,F,P,Y;function z(G){e[6](G)}let U={min:10,max:e[1][e[0]].params.maxPeriod,limits:[1,1/0],label:"Min period:"};e[1][e[0]].params.minPeriod!==void 0&&(U.value=e[1][e[0]].params.minPeriod),a=new Slider({props:U}),binding_callbacks.push(()=>bind(a,"value",z));function ie(G){e[7](G)}let X={min:e[1][e[0]].params.minPeriod,max:30,limits:[1,1/0],label:"Max period:"};e[1][e[0]].params.maxPeriod!==void 0&&(X.value=e[1][e[0]].params.maxPeriod),c=new Slider({props:X}),binding_callbacks.push(()=>bind(c,"value",ie));function ue(G){e[8](G)}let oe={min:.1,max:1,step:.01,limits:[.1,1],label:"Period step:"};e[1][e[0]].params.stepPeriod!==void 0&&(oe.value=e[1][e[0]].params.stepPeriod),p=new Slider({props:oe}),binding_callbacks.push(()=>bind(p,"value",ue));function j(G){e[9](G)}let _e={min:.05,max:1,step:"0.05",limits:[.05,e[1][e[0]].params.maxPeriod],label:"Bin size (hrs):"};e[1][e[0]].params.binSizeHrs!==void 0&&(_e.value=e[1][e[0]].params.binSizeHrs),D=new Slider({props:_e}),binding_callbacks.push(()=>bind(D,"value",j));function Q(G){e[10](G)}let fe={min:100,max:1e3,step:"1",limits:[5,1/0],label:"Width: "};e[1][e[0]].params.width!==void 0&&(fe.value=e[1][e[0]].params.width),v=new Slider({props:fe}),binding_callbacks.push(()=>bind(v,"value",Q));function pe(G){e[11](G)}let ce={min:10,max:30,step:"1",limits:[5,1/0],label:"Height:"};e[1][e[0]].params.height!==void 0&&(ce.value=e[1][e[0]].params.height),O=new Slider({props:ce}),binding_callbacks.push(()=>bind(O,"value",pe));let ye=ensure_array_like(e[1][e[0]].sourceData),ae=[];for(let G=0;G<ye.length;G+=1)ae[G]=create_each_block$9(get_each_context$9(e,ye,G));const be=G=>transition_out(ae[G],1,1,()=>{ae[G]=null});return{c(){t=element("div"),r=element("div"),create_component(a.$$.fragment),o=space(),u=element("div"),create_component(c.$$.fragment),f=space(),m=element("div"),create_component(p.$$.fragment),_=space(),y=element("div"),create_component(D.$$.fragment),b=space(),g=element("div"),create_component(v.$$.fragment),T=space(),S=element("div"),create_component(O.$$.fragment),N=space(),w=element("div"),I=element("h1"),q=text(H),A=text(" Data"),E=space(),L=element("span"),L.textContent="+",Z=space(),C=element("div");for(let G=0;G<ae.length;G+=1)ae[G].c();attr(r,"class","sliderContainer"),attr(u,"class","sliderContainer"),attr(m,"class","sliderContainer"),attr(y,"class","sliderContainer"),attr(g,"class","sliderContainer"),attr(S,"class","sliderContainer"),attr(t,"class","chartControls"),set_style(I,"display","inline"),attr(L,"class","addbutton hoverbutton showContextMenu"),set_style(w,"margin","1em 1em 0 0"),attr(C,"class","graphDataTree")},m(G,he){insert(G,t,he),append(t,r),mount_component(a,r,null),append(t,o),append(t,u),mount_component(c,u,null),append(t,f),append(t,m),mount_component(p,m,null),append(t,_),append(t,y),mount_component(D,y,null),append(t,b),append(t,g),mount_component(v,g,null),append(t,T),append(t,S),mount_component(O,S,null),insert(G,N,he),insert(G,w,he),append(w,I),append(I,q),append(I,A),append(w,E),append(w,L),insert(G,Z,he),insert(G,C,he);for(let we=0;we<ae.length;we+=1)ae[we]&&ae[we].m(C,null);F=!0,P||(Y=listen(L,"click",e[12]),P=!0)},p(G,he){const we={};he[0]&3&&(we.max=G[1][G[0]].params.maxPeriod),!i&&he[0]&3&&(i=!0,we.value=G[1][G[0]].params.minPeriod,add_flush_callback(()=>i=!1)),a.$set(we);const se={};he[0]&3&&(se.min=G[1][G[0]].params.minPeriod),!d&&he[0]&3&&(d=!0,se.value=G[1][G[0]].params.maxPeriod,add_flush_callback(()=>d=!1)),c.$set(se);const ee={};!h&&he[0]&3&&(h=!0,ee.value=G[1][G[0]].params.stepPeriod,add_flush_callback(()=>h=!1)),p.$set(ee);const me={};he[0]&3&&(me.limits=[.05,G[1][G[0]].params.maxPeriod]),!$&&he[0]&3&&($=!0,me.value=G[1][G[0]].params.binSizeHrs,add_flush_callback(()=>$=!1)),D.$set(me);const Te={};!k&&he[0]&3&&(k=!0,Te.value=G[1][G[0]].params.width,add_flush_callback(()=>k=!1)),v.$set(Te);const ge={};if(!M&&he[0]&3&&(M=!0,ge.value=G[1][G[0]].params.height,add_flush_callback(()=>M=!1)),O.$set(ge),(!F||he[0]&5)&&H!==(H=G[2][G[0]].name+"")&&set_data(q,H),he[0]&11){ye=ensure_array_like(G[1][G[0]].sourceData);let ne;for(ne=0;ne<ye.length;ne+=1){const ve=get_each_context$9(G,ye,ne);ae[ne]?(ae[ne].p(ve,he),transition_in(ae[ne],1)):(ae[ne]=create_each_block$9(ve),ae[ne].c(),transition_in(ae[ne],1),ae[ne].m(C,null))}for(group_outros(),ne=ye.length;ne<ae.length;ne+=1)be(ne);check_outros()}},i(G){if(!F){transition_in(a.$$.fragment,G),transition_in(c.$$.fragment,G),transition_in(p.$$.fragment,G),transition_in(D.$$.fragment,G),transition_in(v.$$.fragment,G),transition_in(O.$$.fragment,G);for(let he=0;he<ye.length;he+=1)transition_in(ae[he]);F=!0}},o(G){transition_out(a.$$.fragment,G),transition_out(c.$$.fragment,G),transition_out(p.$$.fragment,G),transition_out(D.$$.fragment,G),transition_out(v.$$.fragment,G),transition_out(O.$$.fragment,G),ae=ae.filter(Boolean);for(let he=0;he<ae.length;he+=1)transition_out(ae[he]);F=!1},d(G){G&&(detach(t),detach(N),detach(w),detach(Z),detach(C)),destroy_component(a),destroy_component(c),destroy_component(p),destroy_component(D),destroy_component(v),destroy_component(O),destroy_each(ae,G),P=!1,Y()}}}function create_each_block_3$2(e){let t,r=e[3][e[3].findIndex(o)].data[e[34]].name+"",a,i;function o(...u){return e[17](e[25],...u)}return{c(){t=element("option"),a=text(r),t.__value=i=e[34],set_input_value(t,t.__value)},m(u,c){insert(u,t,c),append(t,a)},p(u,c){e=u,c[0]&11&&r!==(r=e[3][e[3].findIndex(o)].data[e[34]].name+"")&&set_data(a,r),c[0]&3&&i!==(i=e[34])&&(t.__value=i,set_input_value(t,t.__value))},d(u){u&&detach(t)}}}function create_each_block_2$4(e){let t,r,a=e[31].process+"",i,o,u,c,d,f,m,p,h;function _(...g){return e[20](e[27],e[28],e[33],...g)}function y(...g){return e[21](e[25],...g)}function D(...g){return e[22](e[28],e[27],e[33],...g)}var $=componentMap[e[31].process].component;function b(g,v){return{props:{paramsStart:g[31].parameters,typeTime:{type:g[3][g[3].findIndex(y)].data[g[25].chartvalues[g[28]].field].type,tocheck:{tableID:g[25].tableID,key:g[28]}}}}}return $&&(f=construct_svelte_component($,b(e)),f.$on("update",D)),{c(){t=element("details"),r=element("summary"),i=text(a),o=space(),u=element("div"),u.textContent="",c=space(),d=element("div"),f&&create_component(f.$$.fragment),attr(u,"class","deleteProcess hoverbutton"),attr(d,"class","processDetails"),t.open=!0,attr(t,"class","process")},m(g,v){insert(g,t,v),append(t,r),append(r,i),append(r,o),append(r,u),append(t,c),append(t,d),f&&mount_component(f,d,null),m=!0,p||(h=listen(u,"click",_),p=!0)},p(g,v){if(e=g,(!m||v[0]&3)&&a!==(a=e[31].process+"")&&set_data(i,a),v[0]&3&&$!==($=componentMap[e[31].process].component)){if(f){group_outros();const k=f;transition_out(k.$$.fragment,1,0,()=>{destroy_component(k,1)}),check_outros()}$?(f=construct_svelte_component($,b(e)),f.$on("update",D),create_component(f.$$.fragment),transition_in(f.$$.fragment,1),mount_component(f,d,null)):f=null}else if($){const k={};v[0]&3&&(k.paramsStart=e[31].parameters),v[0]&11&&(k.typeTime={type:e[3][e[3].findIndex(y)].data[e[25].chartvalues[e[28]].field].type,tocheck:{tableID:e[25].tableID,key:e[28]}}),f.$set(k)}},i(g){m||(f&&transition_in(f.$$.fragment,g),m=!0)},o(g){f&&transition_out(f.$$.fragment,g),m=!1},d(g){g&&detach(t),f&&destroy_component(f),p=!1,h()}}}function create_each_block_1$5(e){let t,r,a=e[28]+"",i,o,u,c,d,f,m,p,h,_,y,D;function $(...M){return e[16](e[27],e[28],...M)}let b=ensure_array_like(getFieldNames(e[25])),g=[];for(let M=0;M<b.length;M+=1)g[M]=create_each_block_3$2(get_each_context_3$2(e,b,M));function v(){e[18].call(f,e[28],e[26],e[27])}function k(...M){return e[19](e[27],e[28],...M)}let T=ensure_array_like(e[25].chartvalues[e[28]].processSteps),S=[];for(let M=0;M<T.length;M+=1)S[M]=create_each_block_2$4(get_each_context_2$4(e,T,M));const O=M=>transition_out(S[M],1,1,()=>{S[M]=null});return{c(){t=element("details"),r=element("summary"),i=text(a),o=text(`:
              
              
              `),u=element("span"),u.textContent="+",c=space(),d=element("span"),f=element("select");for(let M=0;M<g.length;M+=1)g[M].c();m=space();for(let M=0;M<S.length;M+=1)S[M].c();p=space(),attr(u,"class","addbutton hoverbutton showContextMenu"),attr(f,"class","selectField"),e[25].chartvalues[e[28]].field===void 0&&add_render_callback(v),t.open=!0,attr(t,"class",h="field "+(e[25].chartvalues[e[28]].processSteps.length>0?"":"no-arrow"))},m(M,N){insert(M,t,N),append(t,r),append(r,i),append(r,o),append(r,u),append(r,c),append(r,d),append(d,f);for(let w=0;w<g.length;w+=1)g[w]&&g[w].m(f,null);select_option(f,e[25].chartvalues[e[28]].field,!0),append(t,m);for(let w=0;w<S.length;w+=1)S[w]&&S[w].m(t,null);append(t,p),_=!0,y||(D=[listen(u,"click",$),listen(f,"change",v),listen(f,"change",k)],y=!0)},p(M,N){if(e=M,(!_||N[0]&3)&&a!==(a=e[28]+"")&&set_data(i,a),N[0]&11){b=ensure_array_like(getFieldNames(e[25]));let w;for(w=0;w<b.length;w+=1){const I=get_each_context_3$2(e,b,w);g[w]?g[w].p(I,N):(g[w]=create_each_block_3$2(I),g[w].c(),g[w].m(f,null))}for(;w<g.length;w+=1)g[w].d(1);g.length=b.length}if(N[0]&3&&select_option(f,e[25].chartvalues[e[28]].field),N[0]&11){T=ensure_array_like(e[25].chartvalues[e[28]].processSteps);let w;for(w=0;w<T.length;w+=1){const I=get_each_context_2$4(e,T,w);S[w]?(S[w].p(I,N),transition_in(S[w],1)):(S[w]=create_each_block_2$4(I),S[w].c(),transition_in(S[w],1),S[w].m(t,p))}for(group_outros(),w=T.length;w<S.length;w+=1)O(w);check_outros()}(!_||N[0]&3&&h!==(h="field "+(e[25].chartvalues[e[28]].processSteps.length>0?"":"no-arrow")))&&attr(t,"class",h)},i(M){if(!_){for(let N=0;N<T.length;N+=1)transition_in(S[N]);_=!0}},o(M){S=S.filter(Boolean);for(let N=0;N<S.length;N+=1)transition_out(S[N]);_=!1},d(M){M&&detach(t),destroy_each(g,M),destroy_each(S,M),y=!1,run_all(D)}}}function create_each_block$9(e){let t,r,a,i,o,u,c,d,f,m=e[3].find(I).displayName+"",p,h,_,y,D,$,b,g,v,k,T,S,O;function M(C){e[13](C,e[25])}let N={};e[25].name!==void 0&&(N.value=e[25].name),a=new InPlaceEdit({props:N}),binding_callbacks.push(()=>bind(a,"value",M));function w(...C){return e[14](e[27],...C)}function I(...C){return e[15](e[25],...C)}let H=ensure_array_like(Object.keys(e[25].chartvalues)),q=[];for(let C=0;C<H.length;C+=1)q[C]=create_each_block_1$5(get_each_context_1$5(e,H,C));const A=C=>transition_out(q[C],1,1,()=>{q[C]=null});function E(){e[23].call(D,e[27])}function L(C){e[24](C,e[27])}let Z={min:"0",max:"1",step:"0.01",limits:[0,1],label:"Alpha: "};return e[1][e[0]].sourceData[e[27]].col.alpha!==void 0&&(Z.value=e[1][e[0]].sourceData[e[27]].col.alpha),g=new Slider({props:Z}),binding_callbacks.push(()=>bind(g,"value",L)),{c(){t=element("details"),r=element("summary"),create_component(a.$$.fragment),o=space(),u=element("div"),u.textContent="",c=space(),d=element("div"),f=text("Table: "),p=text(m),h=space();for(let C=0;C<q.length;C+=1)q[C].c();_=space(),y=element("div"),D=element("input"),$=space(),b=element("div"),create_component(g.$$.fragment),k=space(),attr(u,"class","deleteTable hoverbutton"),attr(d,"class","tableLabel"),attr(D,"class","colourPicker"),attr(D,"id",e[27]),attr(D,"type","color"),set_style(D,"background",e[1][e[0]].sourceData[e[27]].col.hex),attr(b,"class","sliderContainer"),attr(y,"class","colour"),t.open=!0,attr(t,"class","dataTable")},m(C,F){insert(C,t,F),append(t,r),mount_component(a,r,null),append(r,o),append(r,u),append(t,c),append(t,d),append(d,f),append(d,p),append(t,h);for(let P=0;P<q.length;P+=1)q[P]&&q[P].m(t,null);append(t,_),append(t,y),append(y,D),set_input_value(D,e[1][e[0]].sourceData[e[27]].col.hex),append(y,$),append(y,b),mount_component(g,b,null),insert(C,k,F),T=!0,S||(O=[listen(u,"click",w),listen(D,"input",E)],S=!0)},p(C,F){e=C;const P={};if(!i&&F[0]&3&&(i=!0,P.value=e[25].name,add_flush_callback(()=>i=!1)),a.$set(P),(!T||F[0]&11)&&m!==(m=e[3].find(I).displayName+"")&&set_data(p,m),F[0]&11){H=ensure_array_like(Object.keys(e[25].chartvalues));let z;for(z=0;z<H.length;z+=1){const U=get_each_context_1$5(e,H,z);q[z]?(q[z].p(U,F),transition_in(q[z],1)):(q[z]=create_each_block_1$5(U),q[z].c(),transition_in(q[z],1),q[z].m(t,_))}for(group_outros(),z=H.length;z<q.length;z+=1)A(z);check_outros()}(!T||F[0]&3)&&set_style(D,"background",e[1][e[0]].sourceData[e[27]].col.hex),F[0]&3&&set_input_value(D,e[1][e[0]].sourceData[e[27]].col.hex);const Y={};!v&&F[0]&3&&(v=!0,Y.value=e[1][e[0]].sourceData[e[27]].col.alpha,add_flush_callback(()=>v=!1)),g.$set(Y)},i(C){if(!T){transition_in(a.$$.fragment,C);for(let F=0;F<H.length;F+=1)transition_in(q[F]);transition_in(g.$$.fragment,C),T=!0}},o(C){transition_out(a.$$.fragment,C),q=q.filter(Boolean);for(let F=0;F<q.length;F+=1)transition_out(q[F]);transition_out(g.$$.fragment,C),T=!1},d(C){C&&(detach(t),detach(k)),destroy_component(a),destroy_each(q,C),destroy_component(g),S=!1,run_all(O)}}}function create_fragment$h(e){let t,r,a=e[0]>=0&&e[1][e[0]].graph==="periodogram"&&create_if_block$c(e);return{c(){a&&a.c(),t=empty$1()},m(i,o){a&&a.m(i,o),insert(i,t,o),r=!0},p(i,o){i[0]>=0&&i[1][i[0]].graph==="periodogram"?a?(a.p(i,o),o[0]&3&&transition_in(a,1)):(a=create_if_block$c(i),a.c(),transition_in(a,1),a.m(t.parentNode,t)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(i){r||(transition_in(a),r=!0)},o(i){transition_out(a),r=!1},d(i){i&&detach(t),a&&a.d(i)}}}function instance$h(e,t,r){let a,i,o,u;component_subscribe(e,activeGraphTab,H=>r(0,a=H)),component_subscribe(e,graphs,H=>r(1,i=H)),component_subscribe(e,graphTabs,H=>r(2,o=H)),component_subscribe(e,data,H=>r(3,u=H));const c={time:"time",values:"values"},d={col:{hex:getRandomHexColour(),alpha:.5}};function f(H){e.$$.not_equal(i[a].params.minPeriod,H)&&(i[a].params.minPeriod=H,graphs.set(i))}function m(H){e.$$.not_equal(i[a].params.maxPeriod,H)&&(i[a].params.maxPeriod=H,graphs.set(i))}function p(H){e.$$.not_equal(i[a].params.stepPeriod,H)&&(i[a].params.stepPeriod=H,graphs.set(i))}function h(H){e.$$.not_equal(i[a].params.binSizeHrs,H)&&(i[a].params.binSizeHrs=H,graphs.set(i))}function _(H){e.$$.not_equal(i[a].params.width,H)&&(i[a].params.width=H,graphs.set(i))}function y(H){e.$$.not_equal(i[a].params.height,H)&&(i[a].params.height=H,graphs.set(i))}const D=H=>{H.preventDefault(),createnewDataForGraph(c,d)};function $(H,q){e.$$.not_equal(q.name,H)&&(q.name=H,graphs.set(i))}const b=(H,q)=>{q.preventDefault(),removeGraphData(H)},g=(H,q)=>q.id===H.tableID,v=(H,q,A)=>{A.preventDefault(),addProcessToGraphData("graph",H,q)},k=(H,q)=>q.id===H.tableID;function T(H,q,A){q[A].chartvalues[H].field=select_value(this),graphs.set(i)}const S=(H,q,A)=>{updateGraphProcess(a,H,q)},O=(H,q,A,E)=>{E.preventDefault(),removeProcess(H,q,A)},M=(H,q)=>q.id===H.tableID,N=(H,q,A,E)=>{updateProcess(H,q,A,E.detail.params)};function w(H){i[a].sourceData[H].col.hex=this.value,graphs.set(i)}function I(H,q){e.$$.not_equal(i[a].sourceData[q].col.alpha,H)&&(i[a].sourceData[q].col.alpha=H,graphs.set(i))}return[a,i,o,u,c,d,f,m,p,h,_,y,D,$,b,g,v,k,T,S,O,M,N,w,I]}class Periodogram_controls extends SvelteComponent{constructor(t){super(),init(this,t,instance$h,create_fragment$h,safe_not_equal,{},null,[-1,-1])}}function get_each_context$8(e,t,r){const a=e.slice();return a[12]=t[r],a[14]=r,a}function get_each_context_1$4(e,t,r){const a=e.slice();return a[15]=t[r],a[17]=r,a}function create_if_block$b(e){let t,r,a,i,o,u,c,d=e[7][e[6]].params.yAxisLabel+"",f,m,p,h=e[7][e[6]].params.xAxisLabel+"",_,y,D,$,b,g=ensure_array_like(e[1]),v=[];for(let k=0;k<g.length;k+=1)v[k]=create_each_block$8(get_each_context$8(e,g,k));return o=new Axis({props:{innerHeight:e[2],scale:e[8],position:"bottom"}}),u=new Axis({props:{innerHeight:e[2],scale:e[9],position:"left"}}),{c(){t=element("div"),r=svg_element("svg"),a=svg_element("g");for(let k=0;k<v.length;k+=1)v[k].c();i=empty$1(),create_component(o.$$.fragment),create_component(u.$$.fragment),c=svg_element("text"),f=text(d),p=svg_element("text"),_=text(h),set_style(c,"text-anchor","middle"),attr(c,"transform",m=`translate(-30,${e[2]/2}) rotate(-90)     `),set_style(p,"text-anchor","middle"),attr(p,"x",y=e[3]/2),attr(p,"y",D=e[2]+32),attr(a,"transform",`translate(${e[10].left},${e[10].right})`),attr(r,"id","svgContainer"),attr(r,"width",e[4]),attr(r,"height",e[5]),attr(r,"style",$="transform-origin: top left; transform:scale("+e[7][e[6]].zoom+");"),attr(t,"class","rawGraph")},m(k,T){insert(k,t,T),append(t,r),append(r,a);for(let S=0;S<v.length;S+=1)v[S]&&v[S].m(a,null);append(a,i),mount_component(o,a,null),mount_component(u,a,null),append(a,c),append(c,f),append(a,p),append(p,_),b=!0},p(k,T){if(T&963){g=ensure_array_like(k[1]);let M;for(M=0;M<g.length;M+=1){const N=get_each_context$8(k,g,M);v[M]?v[M].p(N,T):(v[M]=create_each_block$8(N),v[M].c(),v[M].m(a,i))}for(;M<v.length;M+=1)v[M].d(1);v.length=g.length}const S={};T&4&&(S.innerHeight=k[2]),T&256&&(S.scale=k[8]),o.$set(S);const O={};T&4&&(O.innerHeight=k[2]),T&512&&(O.scale=k[9]),u.$set(O),(!b||T&192)&&d!==(d=k[7][k[6]].params.yAxisLabel+"")&&set_data(f,d),(!b||T&4&&m!==(m=`translate(-30,${k[2]/2}) rotate(-90)     `))&&attr(c,"transform",m),(!b||T&192)&&h!==(h=k[7][k[6]].params.xAxisLabel+"")&&set_data(_,h),(!b||T&8&&y!==(y=k[3]/2))&&attr(p,"x",y),(!b||T&4&&D!==(D=k[2]+32))&&attr(p,"y",D),(!b||T&16)&&attr(r,"width",k[4]),(!b||T&32)&&attr(r,"height",k[5]),(!b||T&192&&$!==($="transform-origin: top left; transform:scale("+k[7][k[6]].zoom+");"))&&attr(r,"style",$)},i(k){b||(transition_in(o.$$.fragment,k),transition_in(u.$$.fragment,k),b=!0)},o(k){transition_out(o.$$.fragment,k),transition_out(u.$$.fragment,k),b=!1},d(k){k&&detach(t),destroy_each(v,k),destroy_component(o),destroy_component(u)}}}function create_if_block_1$5(e){let t,r,a,i,o,u,c,d,f,m,p,h;return{c(){t=svg_element("circle"),attr(t,"tipcontent",r=e[0][e[14]][e[17]]+", "+e[15]),attr(t,"cx",a=e[8](e[0][e[14]][e[17]])),attr(t,"cy",i=e[9](e[15])),attr(t,"r",o=e[7][e[6]].sourceData[e[14]].size),attr(t,"stroke",u=e[7][e[6]].sourceData[e[14]].strokeCol.hex),attr(t,"stroke-opacity",c=e[7][e[6]].sourceData[e[14]].strokeCol.alpha),attr(t,"stroke-width",d=e[7][e[6]].sourceData[e[14]].strokeWidth),attr(t,"fill",f=e[7][e[6]].sourceData[e[14]].col.hex),attr(t,"fill-opacity",m=e[7][e[6]].sourceData[e[14]].col.alpha)},m(_,y){insert(_,t,y),p||(h=action_destroyer(tooltip.call(null,t)),p=!0)},p(_,y){y&3&&r!==(r=_[0][_[14]][_[17]]+", "+_[15])&&attr(t,"tipcontent",r),y&257&&a!==(a=_[8](_[0][_[14]][_[17]]))&&attr(t,"cx",a),y&514&&i!==(i=_[9](_[15]))&&attr(t,"cy",i),y&192&&o!==(o=_[7][_[6]].sourceData[_[14]].size)&&attr(t,"r",o),y&192&&u!==(u=_[7][_[6]].sourceData[_[14]].strokeCol.hex)&&attr(t,"stroke",u),y&192&&c!==(c=_[7][_[6]].sourceData[_[14]].strokeCol.alpha)&&attr(t,"stroke-opacity",c),y&192&&d!==(d=_[7][_[6]].sourceData[_[14]].strokeWidth)&&attr(t,"stroke-width",d),y&192&&f!==(f=_[7][_[6]].sourceData[_[14]].col.hex)&&attr(t,"fill",f),y&192&&m!==(m=_[7][_[6]].sourceData[_[14]].col.alpha)&&attr(t,"fill-opacity",m)},d(_){_&&detach(t),p=!1,h()}}}function create_each_block_1$4(e){let t=e[15]!==null&&!isNaN(e[15])&&e[0][e[14]][e[17]]!==null&&!isNaN(e[0][e[14]][e[17]]),r,a=t&&create_if_block_1$5(e);return{c(){a&&a.c(),r=empty$1()},m(i,o){a&&a.m(i,o),insert(i,r,o)},p(i,o){o&3&&(t=i[15]!==null&&!isNaN(i[15])&&i[0][i[14]][i[17]]!==null&&!isNaN(i[0][i[14]][i[17]])),t?a?a.p(i,o):(a=create_if_block_1$5(i),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null)},d(i){i&&detach(r),a&&a.d(i)}}}function create_each_block$8(e){let t,r=ensure_array_like(e[12]),a=[];for(let i=0;i<r.length;i+=1)a[i]=create_each_block_1$4(get_each_context_1$4(e,r,i));return{c(){for(let i=0;i<a.length;i+=1)a[i].c();t=empty$1()},m(i,o){for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(i,o);insert(i,t,o)},p(i,o){if(o&963){r=ensure_array_like(i[12]);let u;for(u=0;u<r.length;u+=1){const c=get_each_context_1$4(i,r,u);a[u]?a[u].p(c,o):(a[u]=create_each_block_1$4(c),a[u].c(),a[u].m(t.parentNode,t))}for(;u<a.length;u+=1)a[u].d(1);a.length=r.length}},d(i){i&&detach(t),destroy_each(a,i)}}}function create_fragment$g(e){var i,o;let t,r,a=((i=e[7][e[6]])==null?void 0:i.graph)==="raw"&&((o=e[7][e[6]])==null?void 0:o.sourceData.length)>0&&create_if_block$b(e);return{c(){a&&a.c(),t=empty$1()},m(u,c){a&&a.m(u,c),insert(u,t,c),r=!0},p(u,[c]){var d,f;((d=u[7][u[6]])==null?void 0:d.graph)==="raw"&&((f=u[7][u[6]])==null?void 0:f.sourceData.length)>0?a?(a.p(u,c),c&192&&transition_in(a,1)):(a=create_if_block$b(u),a.c(),transition_in(a,1),a.m(t.parentNode,t)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(u){r||(transition_in(a),r=!0)},o(u){transition_out(a),r=!1},d(u){u&&detach(t),a&&a.d(u)}}}function instance$g(e,t,r){let a,i,o,u,c,d,f;component_subscribe(e,activeGraphTab,D=>r(6,c=D)),component_subscribe(e,graphs,D=>r(7,d=D)),component_subscribe(e,data,D=>r(11,f=D));const m={top:20,bottom:60,left:60,right:20};let p=[],h=[],_,y;return e.$$.update=()=>{var D,$,b;if(e.$$.dirty&192&&r(4,a=(D=d[c])==null?void 0:D.params.width),e.$$.dirty&192&&r(5,i=($=d[c])==null?void 0:$.params.height),e.$$.dirty&32&&r(2,o=i-m.top-m.bottom),e.$$.dirty&16&&r(3,u=a-m.left-m.right),e.$$.dirty&2255){r(0,p=[]),r(1,h=[]);let g,v;((b=d[c])==null?void 0:b.graph)==="raw"&&(d[c].sourceData.forEach((k,T)=>{f.findIndex(S=>S.id===k.tableID),k.chartvalues.x.field!=""&&(g=getDataFromSource(T,k.chartvalues.x)),k.chartvalues.y.field!=""&&(v=getDataFromSource(T,k.chartvalues.y)),p.push(g),h.push(v)}),r(8,_=linear().domain([d[c].params.xDomainMin,d[c].params.xDomainMax]).range([0,u])),r(9,y=linear().domain([d[c].params.yDomainMin,d[c].params.yDomainMax]).range([o,0])))}},[p,h,o,u,a,i,c,d,_,y,m,f]}class Raw extends SvelteComponent{constructor(t){super(),init(this,t,instance$g,create_fragment$g,safe_not_equal,{})}}function get_each_context$7(e,t,r){const a=e.slice();return a[31]=t[r],a[32]=t,a[33]=r,a}function get_each_context_1$3(e,t,r){const a=e.slice();return a[34]=t[r],a[35]=t,a[36]=r,a}function get_each_context_2$3(e,t,r){const a=e.slice();return a[37]=t[r],a[39]=r,a}function get_each_context_3$1(e,t,r){const a=e.slice();return a[40]=t[r],a}function create_if_block$a(e){let t,r,a,i,o,u,c,d,f,m,p,h,_,y,D,$,b,g,v,k,T,S,O,M,N,w,I,H,q,A,E,L,Z,C,F,P,Y,z=e[2][e[0]].name+"",U,ie,X,ue,oe,j,_e,Q,fe;function pe(B){e[6](B)}let ce={min:100,max:1e3,limits:[5,1/0],label:"Width:"};e[1][e[0]].params.width!==void 0&&(ce.value=e[1][e[0]].params.width),a=new Slider({props:ce}),binding_callbacks.push(()=>bind(a,"value",pe));function ye(B){e[7](B)}let ae={min:10,max:3e3,limits:[5,1/0],label:"Height: "};e[1][e[0]].params.height!==void 0&&(ae.value=e[1][e[0]].params.height),c=new Slider({props:ae}),binding_callbacks.push(()=>bind(c,"value",ye));function be(B){e[9](B)}let G={min:-10,max:30,label:"Min X:"};e[1][e[0]].params.xDomainMin!==void 0&&(G.value=e[1][e[0]].params.xDomainMin),$=new Slider({props:G}),binding_callbacks.push(()=>bind($,"value",be));function he(B){e[10](B)}let we={min:-10,max:30,label:"Max X:"};e[1][e[0]].params.xDomainMax!==void 0&&(we.value=e[1][e[0]].params.xDomainMax),k=new Slider({props:we}),binding_callbacks.push(()=>bind(k,"value",he));function se(B){e[12](B)}let ee={min:-10,max:30,label:"Min Y:"};e[1][e[0]].params.yDomainMin!==void 0&&(ee.value=e[1][e[0]].params.yDomainMin),q=new Slider({props:ee}),binding_callbacks.push(()=>bind(q,"value",se));function me(B){e[13](B)}let Te={min:-10,max:30,label:"Max Y:"};e[1][e[0]].params.yDomainMax!==void 0&&(Te.value=e[1][e[0]].params.yDomainMax),Z=new Slider({props:Te}),binding_callbacks.push(()=>bind(Z,"value",me));let ge=ensure_array_like(e[1][e[0]].sourceData),ne=[];for(let B=0;B<ge.length;B+=1)ne[B]=create_each_block$7(get_each_context$7(e,ge,B));const ve=B=>transition_out(ne[B],1,1,()=>{ne[B]=null});return{c(){t=element("div"),r=element("div"),create_component(a.$$.fragment),o=space(),u=element("div"),create_component(c.$$.fragment),f=space(),m=element("div"),p=element("label"),p.textContent="X-axis:",h=space(),_=element("input"),y=space(),D=element("div"),create_component($.$$.fragment),g=space(),v=element("div"),create_component(k.$$.fragment),S=space(),O=element("div"),M=element("label"),M.textContent="Y-axis:",N=space(),w=element("input"),I=space(),H=element("div"),create_component(q.$$.fragment),E=space(),L=element("div"),create_component(Z.$$.fragment),F=space(),P=element("div"),Y=element("h1"),U=text(z),ie=text(" Data"),X=space(),ue=element("span"),ue.textContent="+",oe=space(),j=element("div");for(let B=0;B<ne.length;B+=1)ne[B].c();attr(r,"class","sliderContainer"),attr(u,"class","sliderContainer"),attr(p,"for","val"),attr(_,"type","text"),attr(_,"id","min"),attr(m,"class","sliderContainer"),attr(D,"class","sliderContainer"),attr(v,"class","sliderContainer"),attr(M,"for","val"),attr(w,"type","text"),attr(w,"id","min"),attr(O,"class","sliderContainer"),attr(H,"class","sliderContainer"),attr(L,"class","sliderContainer"),attr(t,"class","chartControls"),set_style(Y,"display","inline"),attr(ue,"class","addbutton hoverbutton showContextMenu"),set_style(P,"margin","1em 1em 0 0"),attr(j,"class","graphDataTree")},m(B,R){insert(B,t,R),append(t,r),mount_component(a,r,null),append(t,o),append(t,u),mount_component(c,u,null),append(t,f),append(t,m),append(m,p),append(m,h),append(m,_),set_input_value(_,e[1][e[0]].params.xAxisLabel),append(t,y),append(t,D),mount_component($,D,null),append(t,g),append(t,v),mount_component(k,v,null),append(t,S),append(t,O),append(O,M),append(O,N),append(O,w),set_input_value(w,e[1][e[0]].params.yAxisLabel),append(t,I),append(t,H),mount_component(q,H,null),append(t,E),append(t,L),mount_component(Z,L,null),insert(B,F,R),insert(B,P,R),append(P,Y),append(Y,U),append(Y,ie),append(P,X),append(P,ue),insert(B,oe,R),insert(B,j,R);for(let V=0;V<ne.length;V+=1)ne[V]&&ne[V].m(j,null);_e=!0,Q||(fe=[listen(_,"input",e[8]),listen(w,"input",e[11]),listen(ue,"click",e[14])],Q=!0)},p(B,R){const V={};!i&&R[0]&3&&(i=!0,V.value=B[1][B[0]].params.width,add_flush_callback(()=>i=!1)),a.$set(V);const J={};!d&&R[0]&3&&(d=!0,J.value=B[1][B[0]].params.height,add_flush_callback(()=>d=!1)),c.$set(J),R[0]&3&&_.value!==B[1][B[0]].params.xAxisLabel&&set_input_value(_,B[1][B[0]].params.xAxisLabel);const x={};!b&&R[0]&3&&(b=!0,x.value=B[1][B[0]].params.xDomainMin,add_flush_callback(()=>b=!1)),$.$set(x);const de={};!T&&R[0]&3&&(T=!0,de.value=B[1][B[0]].params.xDomainMax,add_flush_callback(()=>T=!1)),k.$set(de),R[0]&3&&w.value!==B[1][B[0]].params.yAxisLabel&&set_input_value(w,B[1][B[0]].params.yAxisLabel);const W={};!A&&R[0]&3&&(A=!0,W.value=B[1][B[0]].params.yDomainMin,add_flush_callback(()=>A=!1)),q.$set(W);const K={};if(!C&&R[0]&3&&(C=!0,K.value=B[1][B[0]].params.yDomainMax,add_flush_callback(()=>C=!1)),Z.$set(K),(!_e||R[0]&5)&&z!==(z=B[2][B[0]].name+"")&&set_data(U,z),R[0]&11){ge=ensure_array_like(B[1][B[0]].sourceData);let te;for(te=0;te<ge.length;te+=1){const le=get_each_context$7(B,ge,te);ne[te]?(ne[te].p(le,R),transition_in(ne[te],1)):(ne[te]=create_each_block$7(le),ne[te].c(),transition_in(ne[te],1),ne[te].m(j,null))}for(group_outros(),te=ge.length;te<ne.length;te+=1)ve(te);check_outros()}},i(B){if(!_e){transition_in(a.$$.fragment,B),transition_in(c.$$.fragment,B),transition_in($.$$.fragment,B),transition_in(k.$$.fragment,B),transition_in(q.$$.fragment,B),transition_in(Z.$$.fragment,B);for(let R=0;R<ge.length;R+=1)transition_in(ne[R]);_e=!0}},o(B){transition_out(a.$$.fragment,B),transition_out(c.$$.fragment,B),transition_out($.$$.fragment,B),transition_out(k.$$.fragment,B),transition_out(q.$$.fragment,B),transition_out(Z.$$.fragment,B),ne=ne.filter(Boolean);for(let R=0;R<ne.length;R+=1)transition_out(ne[R]);_e=!1},d(B){B&&(detach(t),detach(F),detach(P),detach(oe),detach(j)),destroy_component(a),destroy_component(c),destroy_component($),destroy_component(k),destroy_component(q),destroy_component(Z),destroy_each(ne,B),Q=!1,run_all(fe)}}}function create_each_block_3$1(e){let t,r=e[3][e[3].findIndex(o)].data[e[40]].name+"",a,i;function o(...u){return e[19](e[31],...u)}return{c(){t=element("option"),a=text(r),t.__value=i=e[40],set_input_value(t,t.__value)},m(u,c){insert(u,t,c),append(t,a)},p(u,c){e=u,c[0]&11&&r!==(r=e[3][e[3].findIndex(o)].data[e[40]].name+"")&&set_data(a,r),c[0]&3&&i!==(i=e[40])&&(t.__value=i,set_input_value(t,t.__value))},d(u){u&&detach(t)}}}function create_each_block_2$3(e){let t,r,a=e[37].process+"",i,o,u,c,d,f,m,p,h;function _(...g){return e[22](e[33],e[34],e[39],...g)}function y(...g){return e[23](e[31],...g)}function D(...g){return e[24](e[34],e[33],e[39],...g)}var $=componentMap[e[37].process].component;function b(g,v){return{props:{paramsStart:g[37].parameters,typeTime:{type:g[3][g[3].findIndex(y)].data[g[31].chartvalues[g[34]].field].type,tocheck:{tableID:g[31].tableID,key:g[34]}}}}}return $&&(f=construct_svelte_component($,b(e)),f.$on("update",D)),{c(){t=element("details"),r=element("summary"),i=text(a),o=space(),u=element("div"),u.textContent="",c=space(),d=element("div"),f&&create_component(f.$$.fragment),attr(u,"class","deleteProcess hoverbutton"),attr(d,"class","processDetails"),t.open=!0,attr(t,"class","process")},m(g,v){insert(g,t,v),append(t,r),append(r,i),append(r,o),append(r,u),append(t,c),append(t,d),f&&mount_component(f,d,null),m=!0,p||(h=listen(u,"click",_),p=!0)},p(g,v){if(e=g,(!m||v[0]&3)&&a!==(a=e[37].process+"")&&set_data(i,a),v[0]&3&&$!==($=componentMap[e[37].process].component)){if(f){group_outros();const k=f;transition_out(k.$$.fragment,1,0,()=>{destroy_component(k,1)}),check_outros()}$?(f=construct_svelte_component($,b(e)),f.$on("update",D),create_component(f.$$.fragment),transition_in(f.$$.fragment,1),mount_component(f,d,null)):f=null}else if($){const k={};v[0]&3&&(k.paramsStart=e[37].parameters),v[0]&11&&(k.typeTime={type:e[3][e[3].findIndex(y)].data[e[31].chartvalues[e[34]].field].type,tocheck:{tableID:e[31].tableID,key:e[34]}}),f.$set(k)}},i(g){m||(f&&transition_in(f.$$.fragment,g),m=!0)},o(g){f&&transition_out(f.$$.fragment,g),m=!1},d(g){g&&detach(t),f&&destroy_component(f),p=!1,h()}}}function create_each_block_1$3(e){let t,r,a=e[34]+"",i,o,u,c,d,f,m,p,h,_,y,D;function $(...M){return e[18](e[33],e[34],...M)}let b=ensure_array_like(getFieldNames(e[31])),g=[];for(let M=0;M<b.length;M+=1)g[M]=create_each_block_3$1(get_each_context_3$1(e,b,M));function v(){e[20].call(f,e[34],e[32],e[33])}function k(...M){return e[21](e[33],e[34],...M)}let T=ensure_array_like(e[31].chartvalues[e[34]].processSteps),S=[];for(let M=0;M<T.length;M+=1)S[M]=create_each_block_2$3(get_each_context_2$3(e,T,M));const O=M=>transition_out(S[M],1,1,()=>{S[M]=null});return{c(){t=element("details"),r=element("summary"),i=text(a),o=text(`:
              
              
              `),u=element("span"),u.textContent="+",c=space(),d=element("span"),f=element("select");for(let M=0;M<g.length;M+=1)g[M].c();m=space();for(let M=0;M<S.length;M+=1)S[M].c();p=space(),attr(u,"class","addbutton hoverbutton showContextMenu"),attr(f,"class","selectField"),e[31].chartvalues[e[34]].field===void 0&&add_render_callback(v),t.open=!0,attr(t,"class",h="field "+(e[31].chartvalues[e[34]].processSteps.length>0?"":"no-arrow"))},m(M,N){insert(M,t,N),append(t,r),append(r,i),append(r,o),append(r,u),append(r,c),append(r,d),append(d,f);for(let w=0;w<g.length;w+=1)g[w]&&g[w].m(f,null);select_option(f,e[31].chartvalues[e[34]].field,!0),append(t,m);for(let w=0;w<S.length;w+=1)S[w]&&S[w].m(t,null);append(t,p),_=!0,y||(D=[listen(u,"click",$),listen(f,"change",v),listen(f,"change",k)],y=!0)},p(M,N){if(e=M,(!_||N[0]&3)&&a!==(a=e[34]+"")&&set_data(i,a),N[0]&11){b=ensure_array_like(getFieldNames(e[31]));let w;for(w=0;w<b.length;w+=1){const I=get_each_context_3$1(e,b,w);g[w]?g[w].p(I,N):(g[w]=create_each_block_3$1(I),g[w].c(),g[w].m(f,null))}for(;w<g.length;w+=1)g[w].d(1);g.length=b.length}if(N[0]&3&&select_option(f,e[31].chartvalues[e[34]].field),N[0]&11){T=ensure_array_like(e[31].chartvalues[e[34]].processSteps);let w;for(w=0;w<T.length;w+=1){const I=get_each_context_2$3(e,T,w);S[w]?(S[w].p(I,N),transition_in(S[w],1)):(S[w]=create_each_block_2$3(I),S[w].c(),transition_in(S[w],1),S[w].m(t,p))}for(group_outros(),w=T.length;w<S.length;w+=1)O(w);check_outros()}(!_||N[0]&3&&h!==(h="field "+(e[31].chartvalues[e[34]].processSteps.length>0?"":"no-arrow")))&&attr(t,"class",h)},i(M){if(!_){for(let N=0;N<T.length;N+=1)transition_in(S[N]);_=!0}},o(M){S=S.filter(Boolean);for(let N=0;N<S.length;N+=1)transition_out(S[N]);_=!1},d(M){M&&detach(t),destroy_each(g,M),destroy_each(S,M),y=!1,run_all(D)}}}function create_each_block$7(e){let t,r,a,i,o,u,c,d,f,m=e[3].find(ue).displayName+"",p,h,_,y,D,$,b,g,v,k,T,S,O,M,N,w,I,H,q,A,E,L,Z,C,F,P,Y,z;function U(se){e[15](se,e[31])}let ie={};e[31].name!==void 0&&(ie.value=e[31].name),a=new InPlaceEdit({props:ie}),binding_callbacks.push(()=>bind(a,"value",U));function X(...se){return e[16](e[33],...se)}function ue(...se){return e[17](e[31],...se)}let oe=ensure_array_like(Object.keys(e[31].chartvalues)),j=[];for(let se=0;se<oe.length;se+=1)j[se]=create_each_block_1$3(get_each_context_1$3(e,oe,se));const _e=se=>transition_out(j[se],1,1,()=>{j[se]=null});function Q(){e[25].call(D,e[33])}function fe(se){e[26](se,e[33])}let pe={min:"0",max:"1",step:"0.01",limits:[0,1],label:"Alpha: "};e[1][e[0]].sourceData[e[33]].col.alpha!==void 0&&(pe.value=e[1][e[0]].sourceData[e[33]].col.alpha),g=new Slider({props:pe}),binding_callbacks.push(()=>bind(g,"value",fe));function ce(se){e[27](se,e[33])}let ye={min:"0.5",max:"10",step:"0.5",label:"Size: "};e[1][e[0]].sourceData[e[33]].size!==void 0&&(ye.value=e[1][e[0]].sourceData[e[33]].size),S=new Slider({props:ye}),binding_callbacks.push(()=>bind(S,"value",ce));function ae(se){e[28](se,e[33])}let be={min:"0.5",max:"10",step:"0.5",label:"Stroke width: "};e[1][e[0]].sourceData[e[33]].strokeWidth!==void 0&&(be.value=e[1][e[0]].sourceData[e[33]].strokeWidth),w=new Slider({props:be}),binding_callbacks.push(()=>bind(w,"value",ae));function G(){e[29].call(A,e[33])}function he(se){e[30](se,e[33])}let we={min:"0",max:"1",step:"0.01",limits:[0,1],label:"Stroke alpha: "};return e[1][e[0]].sourceData[e[33]].strokeCol.alpha!==void 0&&(we.value=e[1][e[0]].sourceData[e[33]].strokeCol.alpha),Z=new Slider({props:we}),binding_callbacks.push(()=>bind(Z,"value",he)),{c(){t=element("details"),r=element("summary"),create_component(a.$$.fragment),o=space(),u=element("div"),u.textContent="",c=space(),d=element("div"),f=text("Table: "),p=text(m),h=space();for(let se=0;se<j.length;se+=1)j[se].c();_=space(),y=element("div"),D=element("input"),$=space(),b=element("div"),create_component(g.$$.fragment),k=space(),T=element("div"),create_component(S.$$.fragment),M=space(),N=element("div"),create_component(w.$$.fragment),H=space(),q=element("div"),A=element("input"),E=space(),L=element("div"),create_component(Z.$$.fragment),F=space(),attr(u,"class","deleteTable hoverbutton"),attr(d,"class","tableLabel"),attr(D,"class","colourPicker"),attr(D,"id",e[33]),attr(D,"type","color"),set_style(D,"background",e[1][e[0]].sourceData[e[33]].col.hex),attr(b,"class","sliderContainer"),attr(y,"class","colour"),attr(T,"class","itemsliderContainer"),attr(N,"class","itemsliderContainer"),attr(A,"class","colourPicker"),attr(A,"id",e[33]),attr(A,"type","color"),set_style(A,"background",e[1][e[0]].sourceData[e[33]].strokeCol.hex),attr(L,"class","sliderContainer"),attr(q,"class","colour"),t.open=!0,attr(t,"class","dataTable")},m(se,ee){insert(se,t,ee),append(t,r),mount_component(a,r,null),append(r,o),append(r,u),append(t,c),append(t,d),append(d,f),append(d,p),append(t,h);for(let me=0;me<j.length;me+=1)j[me]&&j[me].m(t,null);append(t,_),append(t,y),append(y,D),set_input_value(D,e[1][e[0]].sourceData[e[33]].col.hex),append(y,$),append(y,b),mount_component(g,b,null),append(t,k),append(t,T),mount_component(S,T,null),append(t,M),append(t,N),mount_component(w,N,null),append(t,H),append(t,q),append(q,A),set_input_value(A,e[1][e[0]].sourceData[e[33]].strokeCol.hex),append(q,E),append(q,L),mount_component(Z,L,null),insert(se,F,ee),P=!0,Y||(z=[listen(u,"click",X),listen(D,"input",Q),listen(A,"input",G)],Y=!0)},p(se,ee){e=se;const me={};if(!i&&ee[0]&3&&(i=!0,me.value=e[31].name,add_flush_callback(()=>i=!1)),a.$set(me),(!P||ee[0]&11)&&m!==(m=e[3].find(ue).displayName+"")&&set_data(p,m),ee[0]&11){oe=ensure_array_like(Object.keys(e[31].chartvalues));let B;for(B=0;B<oe.length;B+=1){const R=get_each_context_1$3(e,oe,B);j[B]?(j[B].p(R,ee),transition_in(j[B],1)):(j[B]=create_each_block_1$3(R),j[B].c(),transition_in(j[B],1),j[B].m(t,_))}for(group_outros(),B=oe.length;B<j.length;B+=1)_e(B);check_outros()}(!P||ee[0]&3)&&set_style(D,"background",e[1][e[0]].sourceData[e[33]].col.hex),ee[0]&3&&set_input_value(D,e[1][e[0]].sourceData[e[33]].col.hex);const Te={};!v&&ee[0]&3&&(v=!0,Te.value=e[1][e[0]].sourceData[e[33]].col.alpha,add_flush_callback(()=>v=!1)),g.$set(Te);const ge={};!O&&ee[0]&3&&(O=!0,ge.value=e[1][e[0]].sourceData[e[33]].size,add_flush_callback(()=>O=!1)),S.$set(ge);const ne={};!I&&ee[0]&3&&(I=!0,ne.value=e[1][e[0]].sourceData[e[33]].strokeWidth,add_flush_callback(()=>I=!1)),w.$set(ne),(!P||ee[0]&3)&&set_style(A,"background",e[1][e[0]].sourceData[e[33]].strokeCol.hex),ee[0]&3&&set_input_value(A,e[1][e[0]].sourceData[e[33]].strokeCol.hex);const ve={};!C&&ee[0]&3&&(C=!0,ve.value=e[1][e[0]].sourceData[e[33]].strokeCol.alpha,add_flush_callback(()=>C=!1)),Z.$set(ve)},i(se){if(!P){transition_in(a.$$.fragment,se);for(let ee=0;ee<oe.length;ee+=1)transition_in(j[ee]);transition_in(g.$$.fragment,se),transition_in(S.$$.fragment,se),transition_in(w.$$.fragment,se),transition_in(Z.$$.fragment,se),P=!0}},o(se){transition_out(a.$$.fragment,se),j=j.filter(Boolean);for(let ee=0;ee<j.length;ee+=1)transition_out(j[ee]);transition_out(g.$$.fragment,se),transition_out(S.$$.fragment,se),transition_out(w.$$.fragment,se),transition_out(Z.$$.fragment,se),P=!1},d(se){se&&(detach(t),detach(F)),destroy_component(a),destroy_each(j,se),destroy_component(g),destroy_component(S),destroy_component(w),destroy_component(Z),Y=!1,run_all(z)}}}function create_fragment$f(e){let t,r,a=e[0]>=0&&e[1][e[0]].graph==="raw"&&create_if_block$a(e);return{c(){a&&a.c(),t=empty$1()},m(i,o){a&&a.m(i,o),insert(i,t,o),r=!0},p(i,o){i[0]>=0&&i[1][i[0]].graph==="raw"?a?(a.p(i,o),o[0]&3&&transition_in(a,1)):(a=create_if_block$a(i),a.c(),transition_in(a,1),a.m(t.parentNode,t)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(i){r||(transition_in(a),r=!0)},o(i){transition_out(a),r=!1},d(i){i&&detach(t),a&&a.d(i)}}}function instance$f(e,t,r){let a,i,o,u;component_subscribe(e,activeGraphTab,C=>r(0,a=C)),component_subscribe(e,graphs,C=>r(1,i=C)),component_subscribe(e,graphTabs,C=>r(2,o=C)),component_subscribe(e,data,C=>r(3,u=C));const c={x:"time",y:"values"},d={col:{hex:getRandomHexColour(),alpha:.5},size:2,strokeWidth:1,strokeCol:{hex:getRandomHexColour(),alpha:.9}};function f(C){e.$$.not_equal(i[a].params.width,C)&&(i[a].params.width=C,graphs.set(i))}function m(C){e.$$.not_equal(i[a].params.height,C)&&(i[a].params.height=C,graphs.set(i))}function p(){i[a].params.xAxisLabel=this.value,graphs.set(i)}function h(C){e.$$.not_equal(i[a].params.xDomainMin,C)&&(i[a].params.xDomainMin=C,graphs.set(i))}function _(C){e.$$.not_equal(i[a].params.xDomainMax,C)&&(i[a].params.xDomainMax=C,graphs.set(i))}function y(){i[a].params.yAxisLabel=this.value,graphs.set(i)}function D(C){e.$$.not_equal(i[a].params.yDomainMin,C)&&(i[a].params.yDomainMin=C,graphs.set(i))}function $(C){e.$$.not_equal(i[a].params.yDomainMax,C)&&(i[a].params.yDomainMax=C,graphs.set(i))}const b=C=>{C.preventDefault(),createnewDataForGraph(c,d)};function g(C,F){e.$$.not_equal(F.name,C)&&(F.name=C,graphs.set(i))}const v=(C,F)=>{F.preventDefault(),removeGraphData(C)},k=(C,F)=>F.id===C.tableID,T=(C,F,P)=>{P.preventDefault(),addProcessToGraphData("graph",C,F)},S=(C,F)=>F.id===C.tableID;function O(C,F,P){F[P].chartvalues[C].field=select_value(this),graphs.set(i)}const M=(C,F,P)=>{updateGraphProcess(a,C,F)},N=(C,F,P,Y)=>{Y.preventDefault(),removeProcess(C,F,P)},w=(C,F)=>F.id===C.tableID,I=(C,F,P,Y)=>{updateProcess(C,F,P,Y.detail.params)};function H(C){i[a].sourceData[C].col.hex=this.value,graphs.set(i)}function q(C,F){e.$$.not_equal(i[a].sourceData[F].col.alpha,C)&&(i[a].sourceData[F].col.alpha=C,graphs.set(i))}function A(C,F){e.$$.not_equal(i[a].sourceData[F].size,C)&&(i[a].sourceData[F].size=C,graphs.set(i))}function E(C,F){e.$$.not_equal(i[a].sourceData[F].strokeWidth,C)&&(i[a].sourceData[F].strokeWidth=C,graphs.set(i))}function L(C){i[a].sourceData[C].strokeCol.hex=this.value,graphs.set(i)}function Z(C,F){e.$$.not_equal(i[a].sourceData[F].strokeCol.alpha,C)&&(i[a].sourceData[F].strokeCol.alpha=C,graphs.set(i))}return[a,i,o,u,c,d,f,m,p,h,_,y,D,$,b,g,v,k,T,S,O,M,N,w,I,H,q,A,E,L,Z]}class Raw_controls extends SvelteComponent{constructor(t){super(),init(this,t,instance$f,create_fragment$f,safe_not_equal,{},null,[-1,-1])}}const graphMap={actigram:{graph:Actigram,controls:Actigram_controls,prototypechartvalues:{time:"time",values:"values"},prototypeother:{col:{hex:"#1B1D50",alpha:.5},showOnsets:!0,centileThresh:80,M:3,N:3,estimate:0},params:{startTime:DateTime.now().set({hour:0,minute:0,second:0,millisecond:0}).toISO().slice(0,16),periodHrs:24,binSizeHrs:.25,width:800,dayHeight:10,betweenHeight:2,doublePlot:2,scaleAxes:"byPlot",showAxes:!1},chartData:{data:[{time:[],values:[],day:[],scaleLimits:[]}],startOffsets:[],onsets:[]}},periodogram:{graph:Periodogram,controls:Periodogram_controls,prototypechartvalues:{time:"any",values:"any"},prototypeother:{col:{hex:"#78322e",alpha:.5}},params:{width:600,height:200,minPeriod:4,maxPeriod:30,stepPeriod:.25,binSizeHrs:.25},chartData:{}},raw:{graph:Raw,controls:Raw_controls,prototypechartvalues:{x:"any",y:"any"},prototypeother:{col:{hex:"#78322e",alpha:.5},size:2,strokeWidth:1,strokeCol:{hex:"#000000",alpha:.9}},params:{width:600,height:200,yDomainMin:0,yDomainMax:200,xDomainMin:0,xDomainMax:680,yAxisLabel:"y-axis",xAxisLabel:"x-axis title here"},chartData:{}}};function getRandomHexColour(){return"#"+Math.floor(Math.random()*16777215).toString(16)}function makeNewChart(e){if(get_store_value(data).length===0)statusData.update(t=>(t.push({display:`There is no data to make a ${e} with.`}),t));else{let t={graph:e,id:getID(),zoom:1,sourceData:[],params:{...deepCopy$1(graphMap[e].params)},chartData:{...deepCopy$1(graphMap[e].chartData)}};get_store_value(graphs).push(t),get_store_value(graphTabs).push({name:"Chart "+getID()}),graphTabs.update(r=>[...r]),activeGraphTab.update(()=>get_store_value(graphTabs).length-1)}}function getID(){if(get_store_value(graphs).length===0)return 0;let e=[];return get_store_value(graphs).forEach(t=>e.push(t.id)),Math.max(...e)+1}function deepCopy$1(e){return JSON.parse(JSON.stringify(e))}function getDataFromTable(e,t,r=!0){const a=get_store_value(data)[get_store_value(data).findIndex(i=>i.id===e)].data[t];return a.processedData.length>0&&r?a.processedData:a.type==="time"?a.timeData:a.data}function getFieldName(e,t){return get_store_value(data)[get_store_value(data).findIndex(a=>a.id===e)].data[t].name}function getFieldNames(e){return Object.keys(get_store_value(data)[get_store_value(data).findIndex(t=>t.id===e.tableID)].data)}function getDataFromSource(e,t){const r=get_store_value(graphs)[get_store_value(activeGraphTab)].sourceData[e];if(t.processedData.length>0)return t.processedData;{const a=r.tableID;return getDataFromTable(a,t.field)}}function getFieldType(e,t){return get_store_value(data)[get_store_value(data).findIndex(a=>a.id===e)].data[t].type}function removeGraphData(e){graphs.update(t=>{const r=[...t],a=r[get_store_value(activeGraphTab)].id,i=r.find(o=>o.id===a);return i&&i.sourceData&&i.sourceData.splice(e,1),r}),console.log(get_store_value(graphs))}function createnewDataForGraph(e,t){contextMenu.update(r=>(r.labels=[],r.funcs=[],r));for(let r=0;r<get_store_value(data).length;r++)contextMenu.update(a=>(a.labels.push(get_store_value(data)[r].displayName),a.funcs.push(()=>addDataToGraph(get_store_value(data)[r].id,e,t)),a))}function addDataToGraph(e,t,r){let a={};Object.keys(t).forEach((i,o)=>{a[i]={field:Object.keys(get_store_value(data)[get_store_value(data).findIndex(u=>u.id===e)].data)[o],processSteps:[],processedData:[]}}),graphs.update(i=>{i[get_store_value(activeGraphTab)].sourceData.push({tableID:e,name:"Data "+(1+get_store_value(graphs)[get_store_value(activeGraphTab)].sourceData.length),chartvalues:a,...deepCopy(r)});const o=get_store_value(graphs)[get_store_value(activeGraphTab)].sourceData.length-1;return Object.keys(i[get_store_value(activeGraphTab)].sourceData[o]).forEach(u=>{Object.keys(i[get_store_value(activeGraphTab)].sourceData[o][u]).includes("hex")&&(i[get_store_value(activeGraphTab)].sourceData[o][u].hex=getRandomHexColour(),console.log(i[get_store_value(activeGraphTab)].sourceData[o][u].hex))}),i}),get_store_value(graphs)[get_store_value(activeGraphTab)].graph==="raw"&&(addedNewChartData.set(!0),console.log("set sem")),console.log(get_store_value(graphs))}function deepCopy(e){return JSON.parse(JSON.stringify(e))}function averageBinnedValues(e,t,r){const a=Math.ceil((max(e.filter(d=>d||0))+r)/r)||1,i=new Array(a),o=new Array(a),u=new Array(a);for(let d=0;d<a;d++)i[d]=d*r+r/2,o[d]=0,u[d]=0;for(let d=0;d<e.length;d++){const f=Math.floor(e[d]/r);t[d]&&(o[f]+=t[d],u[f]++)}const c=o.map((d,f)=>u[f]>0?d/u[f]:0);return{time:i,values:c}}function getDiffs(e){let t=[];for(let r=1;r<e.length;r++)t[r-1]=e[r]-e[r-1];return t}function bestFitOnsets(e){const t=calculateMedian(e),r=calculateMAD(e,t),a=e.filter(o=>Math.abs(o-t)<=2*r);return calculateMean(a)}function calculateMedian(e){const t=e.slice().sort((a,i)=>a-i),r=Math.floor(t.length/2);return t.length%2===0?(t[r-1]+t[r])/2:t[r]}function calculateMAD(e,t){const r=e.map(a=>Math.abs(a-t));return calculateMedian(r)}function calculateMean(e){return e.reduce((r,a)=>r+a,0)/e.length}const componentMap={add:{component:Add,startParams:{val:0},func:add,forTypes:["value","time"]},filter:{component:Filter,startParams:{min:0,max:12},func:filter$1,forTypes:["value","time"]},replace:{component:Replace,startParams:{from:-999,to:NaN},func:replace,forTypes:["value"]}};let selectedSettings=null;function addProcess(e,t,r,a){selectedSettings={process:e,parameters:componentMap[e].startParams},t==="data"&&(data.update(i=>{const o=[...i],u=o.find(c=>c.id===r);return u&&u.data[a]&&u.data[a].processSteps.push(selectedSettings),o}),updateDataProcess(r,a)),t==="graph"&&(graphs.update(i=>{const o=[...i];return o.find(u=>u.id===r),o[get_store_value(activeGraphTab)].sourceData[r].chartvalues[a].processSteps.push(selectedSettings),o}),updateGraphProcess(get_store_value(activeGraphTab),r,a))}function processData(e,t){for(const r of e){const a=r.process,i=componentMap[a].func;typeof i=="function"?t=i(t,r.parameters):console.error(`Function '${a}' does not exist.`)}return t}function updateGraphProcess(e,t,r){let a=get_store_value(graphs)[e].sourceData[t].tableID,i=get_store_value(graphs)[e].sourceData[t].chartvalues[r].field,o=getDataFromTable(a,i),u=get_store_value(graphs)[e].sourceData[t].chartvalues[r].processSteps;u.length>0&&(o=processData(u,o)),graphs.update(c=>{const d=[...c];return d[e].sourceData[t].chartvalues[r].processedData=o,d})}function updateDataProcess(e,t){let r=getDataFromTable(e,t,!1),a=get_store_value(data).find(i=>i.id===e).data[t].processSteps;a.length>0&&(r=processData(a,r)),data.update(i=>{const o=[...i],u=o.find(c=>c.id===e);return u&&u.data[t]&&(u.data[t].processedData=r),o}),get_store_value(graphs).forEach((i,o)=>{i.sourceData.forEach((u,c)=>{u.tableID===e&&Object.keys(u.chartvalues).forEach(d=>{u.chartvalues[d].field===t&&updateGraphProcess(o,c,d)})})})}function updateProcess(e,t,r,a){get_store_value(graphs)[get_store_value(activeGraphTab)].sourceData[t].chartvalues[e].processSteps[r].parameters=a,updateGraphProcess(get_store_value(activeGraphTab),t,e)}function removeProcess(e,t,r){get_store_value(graphs)[get_store_value(activeGraphTab)].sourceData[e].chartvalues[t].processSteps.splice(r,1),updateGraphProcess(get_store_value(activeGraphTab),e,t)}function addProcessToGraphData(e,t,r){contextMenu.set({labels:[],funcs:[]});const a=getFieldType(get_store_value(graphs)[get_store_value(activeGraphTab)].sourceData[t].tableID,get_store_value(graphs)[get_store_value(activeGraphTab)].sourceData[t].chartvalues[r].field),i=Object.keys(componentMap);contextMenu.update(o=>{for(let u=0;u<i.length;u++)componentMap[i[u]].forTypes.includes(a)&&(console.log(i[u]),o.labels[u]=i[u],o.funcs[u]=()=>addProcess(i[u],e,t,r));return o})}class ProcessStep extends SvelteComponent{constructor(t){super(),init(this,t,null,null,safe_not_equal,{})}}function get_each_context$6(e,t,r){const a=e.slice();return a[17]=t[r],a[18]=t,a[19]=r,a}function get_each_context_1$2(e,t,r){const a=e.slice();return a[20]=t[r][0],a[21]=t[r][1],a[22]=t,a[23]=r,a}function get_each_context_2$2(e,t,r){const a=e.slice();return a[24]=t[r],a[26]=r,a}function create_each_block_2$2(e){let t,r,a=e[24].process+"",i,o,u,c,d,f,m,p,h;function _(...b){return e[11](e[17],e[20],e[26],...b)}function y(...b){return e[12](e[17],e[20],e[26],...b)}var D=componentMap[e[24].process].component;function $(b,g){return{props:{paramsStart:b[24].parameters,typeTime:{type:b[0][b[19]].data[b[20]].type,tocheck:{tableID:b[17].id,key:b[20]}}}}}return D&&(f=construct_svelte_component(D,$(e)),f.$on("update",y)),{c(){t=element("details"),r=element("summary"),i=text(a),o=space(),u=element("div"),u.textContent="",c=space(),d=element("div"),f&&create_component(f.$$.fragment),attr(u,"class","deleteProcess hoverbutton svelte-uakoe0"),attr(r,"class","svelte-uakoe0"),attr(d,"class","processDetails svelte-uakoe0"),t.open=!0,attr(t,"class","process svelte-uakoe0")},m(b,g){insert(b,t,g),append(t,r),append(r,i),append(r,o),append(r,u),append(t,c),append(t,d),f&&mount_component(f,d,null),m=!0,p||(h=listen(u,"click",_),p=!0)},p(b,g){if(e=b,(!m||g&1)&&a!==(a=e[24].process+"")&&set_data(i,a),g&1&&D!==(D=componentMap[e[24].process].component)){if(f){group_outros();const v=f;transition_out(v.$$.fragment,1,0,()=>{destroy_component(v,1)}),check_outros()}D?(f=construct_svelte_component(D,$(e)),f.$on("update",y),create_component(f.$$.fragment),transition_in(f.$$.fragment,1),mount_component(f,d,null)):f=null}else if(D){const v={};g&1&&(v.paramsStart=e[24].parameters),g&1&&(v.typeTime={type:e[0][e[19]].data[e[20]].type,tocheck:{tableID:e[17].id,key:e[20]}}),f.$set(v)}},i(b){m||(f&&transition_in(f.$$.fragment,b),m=!0)},o(b){f&&transition_out(f.$$.fragment,b),m=!1},d(b){b&&detach(t),f&&destroy_component(f),p=!1,h()}}}function create_each_block_1$2(e,t){let r,a,i,o,u,c,d,f,m,p,h,_,y;function D(T){t[9](T,t[17],t[20])}let $={};t[17].data[t[20]].name!==void 0&&($.value=t[17].data[t[20]].name),i=new InPlaceEdit({props:$}),binding_callbacks.push(()=>bind(i,"value",D));function b(...T){return t[10](t[17],t[20],...T)}let g=ensure_array_like(t[17].data[t[20]].processSteps),v=[];for(let T=0;T<g.length;T+=1)v[T]=create_each_block_2$2(get_each_context_2$2(t,g,T));const k=T=>transition_out(v[T],1,1,()=>{v[T]=null});return{key:e,first:null,c(){r=element("details"),a=element("summary"),create_component(i.$$.fragment),u=space(),c=element("span"),d=text("+"),m=space();for(let T=0;T<v.length;T+=1)v[T].c();attr(c,"class","addbutton hoverbutton showContextMenu svelte-uakoe0"),attr(c,"tipcontent",f="Add process to "+t[17].data[t[20]].name),attr(a,"class","svelte-uakoe0"),r.open=!0,attr(r,"class",p="field "+(t[17].data[t[20]].processSteps.length>0?"":"no-arrow")+" svelte-uakoe0"),this.first=r},m(T,S){insert(T,r,S),append(r,a),mount_component(i,a,null),append(a,u),append(a,c),append(c,d),append(r,m);for(let O=0;O<v.length;O+=1)v[O]&&v[O].m(r,null);h=!0,_||(y=[listen(c,"click",b),action_destroyer(tooltip.call(null,c))],_=!0)},p(T,S){t=T;const O={};if(!o&&S&1&&(o=!0,O.value=t[17].data[t[20]].name,add_flush_callback(()=>o=!1)),i.$set(O),(!h||S&1&&f!==(f="Add process to "+t[17].data[t[20]].name))&&attr(c,"tipcontent",f),S&13){g=ensure_array_like(t[17].data[t[20]].processSteps);let M;for(M=0;M<g.length;M+=1){const N=get_each_context_2$2(t,g,M);v[M]?(v[M].p(N,S),transition_in(v[M],1)):(v[M]=create_each_block_2$2(N),v[M].c(),transition_in(v[M],1),v[M].m(r,null))}for(group_outros(),M=g.length;M<v.length;M+=1)k(M);check_outros()}(!h||S&1&&p!==(p="field "+(t[17].data[t[20]].processSteps.length>0?"":"no-arrow")+" svelte-uakoe0"))&&attr(r,"class",p)},i(T){if(!h){transition_in(i.$$.fragment,T);for(let S=0;S<g.length;S+=1)transition_in(v[S]);h=!0}},o(T){transition_out(i.$$.fragment,T),v=v.filter(Boolean);for(let S=0;S<v.length;S+=1)transition_out(v[S]);h=!1},d(T){T&&detach(r),destroy_component(i),destroy_each(v,T),_=!1,run_all(y)}}}function create_each_block$6(e){let t,r,a,i,o,u,c,d,f,m,p,h,_,y=[],D=new Map,$,b,g,v;function k(w){e[6](w,e[17])}let T={};e[17].displayName!==void 0&&(T.value=e[17].displayName),a=new InPlaceEdit({props:T}),binding_callbacks.push(()=>bind(a,"value",k));function S(...w){return e[7](e[17],...w)}function O(...w){return e[8](e[17],...w)}let M=ensure_array_like(Object.entries(e[17].data));const N=w=>w[20];for(let w=0;w<M.length;w+=1){let I=get_each_context_1$2(e,M,w),H=N(I);D.set(H,y[w]=create_each_block_1$2(H,I))}return{c(){t=element("details"),r=element("summary"),create_component(a.$$.fragment),o=space(),u=element("div"),c=text(""),f=space(),m=element("div"),p=text(""),_=space();for(let w=0;w<y.length;w+=1)y[w].c();$=space(),attr(u,"class","deleteTable hoverbutton svelte-uakoe0"),attr(u,"tipcontent",d="Delete "+e[17].displayName),attr(m,"class","viewTable hoverbutton svelte-uakoe0"),attr(m,"tipcontent",h="View "+e[17].displayName+" as table"),attr(r,"class","svelte-uakoe0"),t.open=!0,attr(t,"class","dataTable svelte-uakoe0")},m(w,I){insert(w,t,I),append(t,r),mount_component(a,r,null),append(r,o),append(r,u),append(u,c),append(r,f),append(r,m),append(m,p),append(t,_);for(let H=0;H<y.length;H+=1)y[H]&&y[H].m(t,null);append(t,$),b=!0,g||(v=[listen(u,"click",S),action_destroyer(tooltip.call(null,u)),listen(m,"click",O),action_destroyer(tooltip.call(null,m))],g=!0)},p(w,I){e=w;const H={};!i&&I&1&&(i=!0,H.value=e[17].displayName,add_flush_callback(()=>i=!1)),a.$set(H),(!b||I&1&&d!==(d="Delete "+e[17].displayName))&&attr(u,"tipcontent",d),(!b||I&1&&h!==(h="View "+e[17].displayName+" as table"))&&attr(m,"tipcontent",h),I&45&&(M=ensure_array_like(Object.entries(e[17].data)),group_outros(),y=update_keyed_each(y,I,N,1,e,M,D,t,outro_and_destroy_block,create_each_block_1$2,$,get_each_context_1$2),check_outros())},i(w){if(!b){transition_in(a.$$.fragment,w);for(let I=0;I<M.length;I+=1)transition_in(y[I]);b=!0}},o(w){transition_out(a.$$.fragment,w);for(let I=0;I<y.length;I+=1)transition_out(y[I]);b=!1},d(w){w&&detach(t),destroy_component(a);for(let I=0;I<y.length;I+=1)y[I].d();g=!1,run_all(v)}}}function create_fragment$e(e){let t,r,a,i,o,u=ensure_array_like(e[0]),c=[];for(let f=0;f<u.length;f+=1)c[f]=create_each_block$6(get_each_context$6(e,u,f));const d=f=>transition_out(c[f],1,1,()=>{c[f]=null});return{c(){t=element("div"),r=element("h1"),r.textContent="Data Tables",a=space(),i=element("div");for(let f=0;f<c.length;f+=1)c[f].c();attr(i,"class","dataTree scroll-shadows svelte-uakoe0"),attr(t,"id","dataTreeContainer"),set_style(t,"overflow","auto"),set_style(t,"height","100%"),set_style(t,"width","auto")},m(f,m){insert(f,t,m),append(t,r),append(t,a),append(t,i);for(let p=0;p<c.length;p+=1)c[p]&&c[p].m(i,null);o=!0},p(f,[m]){if(m&63){u=ensure_array_like(f[0]);let p;for(p=0;p<u.length;p+=1){const h=get_each_context$6(f,u,p);c[p]?(c[p].p(h,m),transition_in(c[p],1)):(c[p]=create_each_block$6(h),c[p].c(),transition_in(c[p],1),c[p].m(i,null))}for(group_outros(),p=u.length;p<c.length;p+=1)d(p);check_outros()}},i(f){if(!o){for(let m=0;m<u.length;m+=1)transition_in(c[m]);o=!0}},o(f){c=c.filter(Boolean);for(let m=0;m<c.length;m+=1)transition_out(c[m]);o=!1},d(f){f&&detach(t),destroy_each(c,f)}}}function instance$e(e,t,r){let a,i,o,u,c;component_subscribe(e,contextMenu,k=>r(13,a=k)),component_subscribe(e,data,k=>r(0,i=k)),component_subscribe(e,dataIDsforTables,k=>r(14,o=k)),component_subscribe(e,activeTableTab,k=>r(15,u=k)),component_subscribe(e,showalldata,k=>r(16,c=k));function d(k){const T=o.indexOf(k);T<0?(o.push(k),dataIDsforTables.set(o),c.push(!1),showalldata.set(c),set_store_value(activeTableTab,u=o.length-1,u)):set_store_value(activeTableTab,u=T,u)}function f(k,T,S,O){let M=i.findIndex(N=>N.id===k);set_store_value(data,i[M].data[T].processSteps[S].parameters=O,i),updateDataProcess(k,T)}function m(k,T,S){let O=i.findIndex(M=>M.id===k);i[O].data[T].processSteps.splice(S,1),updateDataProcess(k,T),i[O].data[T].processSteps.length===0&&set_store_value(data,i[O].data[T].processedData=[],i)}function p(k){set_store_value(dataIDsforTables,o=o.filter(S=>S!==k),o),set_store_value(activeTableTab,u=o.length>0?0:-1,u),graphs.update(S=>S.map(O=>{const M=O.sourceData.filter(N=>N.tableID!==k);return{...O,sourceData:M}}));let T=i.findIndex(S=>S.id===k);data.update(S=>(S.splice(T,1),S))}function h(k,T,S){set_store_value(contextMenu,a={labels:[],funcs:[]},a);const O=getFieldType(T,S),M=Object.keys(componentMap);for(let N=0;N<M.length;N++)componentMap[M[N]].forTypes.includes(O)&&(set_store_value(contextMenu,a.labels[N]=M[N],a),set_store_value(contextMenu,a.funcs[N]=()=>addProcess(M[N],k,T,S),a))}function _(k,T){e.$$.not_equal(T.displayName,k)&&(T.displayName=k,data.set(i))}const y=(k,T)=>{T.preventDefault(),p(k.id)},D=(k,T)=>{T.preventDefault(),d(k.id)};function $(k,T,S){e.$$.not_equal(T.data[S].name,k)&&(T.data[S].name=k,data.set(i))}return[i,d,f,m,p,h,_,y,D,$,(k,T,S)=>{S.preventDefault(),h("data",k.id,T)},(k,T,S,O)=>{O.preventDefault(),m(k.id,T,S)},(k,T,S,O)=>f(k.id,T,S,O.detail.params)]}class DataTree extends SvelteComponent{constructor(t){super(),init(this,t,instance$e,create_fragment$e,safe_not_equal,{})}}function create_if_block$9(e){let t,r;return{c(){t=element("div"),r=text(e[0]),set_style(t,"top",e[3]+"px"),set_style(t,"left",e[2]+"px"),attr(t,"class","tooltip svelte-1ryw8s3")},m(a,i){insert(a,t,i),append(t,r)},p(a,i){i&1&&set_data(r,a[0]),i&8&&set_style(t,"top",a[3]+"px"),i&4&&set_style(t,"left",a[2]+"px")},d(a){a&&detach(t)}}}function create_fragment$d(e){let t,r,a,i,o;const u=e[8].default,c=create_slot(u,e,e[7],null);let d=e[1]&&create_if_block$9(e);return{c(){t=element("div"),c&&c.c(),r=space(),d&&d.c(),set_style(t,"position","relative")},m(f,m){insert(f,t,m),c&&c.m(t,null),append(t,r),d&&d.m(t,null),a=!0,i||(o=[listen(t,"mouseover",e[4]),listen(t,"mouseleave",e[6]),listen(t,"mousemove",e[5])],i=!0)},p(f,[m]){c&&c.p&&(!a||m&128)&&update_slot_base(c,u,f,f[7],a?get_slot_changes(u,f[7],m,null):get_all_dirty_from_scope(f[7]),null),f[1]?d?d.p(f,m):(d=create_if_block$9(f),d.c(),d.m(t,null)):d&&(d.d(1),d=null)},i(f){a||(transition_in(c,f),a=!0)},o(f){transition_out(c,f),a=!1},d(f){f&&detach(t),c&&c.d(f),d&&d.d(),i=!1,run_all(o)}}}function instance$d(e,t,r){let{$$slots:a={},$$scope:i}=t,{tipcontent:o=""}=t,u=!1,c,d;function f(h){console.log(h),r(1,u=!0),r(2,c=15),r(3,d=35)}function m(h){r(2,c=15),r(3,d=35)}function p(){r(1,u=!1)}return e.$$set=h=>{"tipcontent"in h&&r(0,o=h.tipcontent),"$$scope"in h&&r(7,i=h.$$scope)},[o,u,c,d,f,m,p,i,a]}class Tooltip extends SvelteComponent{constructor(t){super(),init(this,t,instance$d,create_fragment$d,safe_not_equal,{tipcontent:0})}}function exportSVG(){if(get_store_value(activeGraphTab)<0){console.log("Nothing to export");return}const e=document.getElementById("thePlot").querySelector("svg").outerHTML,t=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),r=URL.createObjectURL(t),a=document.createElement("a");a.href=r,a.download=get_store_value(graphTabs)[get_store_value(activeGraphTab)].name+".svg",document.body.appendChild(a),a.click(),URL.revokeObjectURL(r)}function create_default_slot$6(e){let t,r,a;return{c(){t=element("div"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" stroke-width="1.5" stroke="currentColor"><path d="M2 2L2 18L18 18" stroke="#292929" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',attr(t,"class","button svelte-owaav"),attr(t,"id","scaleRaw")},m(i,o){insert(i,t,o),r||(a=listen(t,"click",e[2]),r=!0)},p:noop,d(i){i&&detach(t),r=!1,a()}}}function create_fragment$c(e){let t,r;return t=new Tooltip({props:{tipcontent:"Auto scale axes",$$slots:{default:[create_default_slot$6]},$$scope:{ctx:e}}}),{c(){create_component(t.$$.fragment)},m(a,i){mount_component(t,a,i),r=!0},p(a,[i]){const o={};i&128&&(o.$$scope={dirty:i,ctx:a}),t.$set(o)},i(a){r||(transition_in(t.$$.fragment,a),r=!0)},o(a){transition_out(t.$$.fragment,a),r=!1},d(a){destroy_component(t,a)}}}function instance$c(e,t,r){let a,i,o,u;component_subscribe(e,addedNewChartData,m=>r(1,a=m)),component_subscribe(e,activeGraphTab,m=>r(3,i=m)),component_subscribe(e,graphs,m=>r(4,o=m)),component_subscribe(e,data,m=>r(5,u=m));function c(){var g;let m=1/0,p=-1/0,h=1/0,_=-1/0,y=[],D=[],$,b;if(((g=o[i])==null?void 0:g.graph)==="raw"){o[i].sourceData.forEach((v,k)=>{u.findIndex(T=>T.id===v.tableID),v.chartvalues.x.field!=""&&($=getDataFromSource(k,v.chartvalues.x)),v.chartvalues.y.field!=""&&(b=getDataFromSource(k,v.chartvalues.y)),y.push($),D.push(b)});for(let v=0;v<y.length;v++){const k=y[v].filter(S=>!isNaN(S));min(k)<m&&(m=min(k)),max(k)>p&&(p=max(k));const T=D[v].filter(S=>!isNaN(S));min(T)<h&&(h=min(T)),max(T)>_&&(_=max(T))}set_store_value(graphs,o[i].params.xDomainMin=m,o),set_store_value(graphs,o[i].params.xDomainMax=p,o),set_store_value(graphs,o[i].params.yDomainMin=h,o),set_store_value(graphs,o[i].params.yDomainMax=_,o)}}function d(m){console.log("sem = "+m),m&&(c(),set_store_value(addedNewChartData,a=!1,a))}const f=m=>c();return e.$$.update=()=>{e.$$.dirty&2&&d(a)},[c,a,f]}class Raw_tools extends SvelteComponent{constructor(t){super(),init(this,t,instance$c,create_fragment$c,safe_not_equal,{})}}function create_if_block$8(e){let t,r;return t=new Raw_tools({}),{c(){create_component(t.$$.fragment)},m(a,i){mount_component(t,a,i),r=!0},i(a){r||(transition_in(t.$$.fragment,a),r=!0)},o(a){transition_out(t.$$.fragment,a),r=!1},d(a){destroy_component(t,a)}}}function create_default_slot_2$3(e){let t,r,a;return{c(){t=element("div"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M304 192v32c0 6.6-5.4 12-12 12h-56v56c0 6.6-5.4 12-12 12h-32c-6.6 0-12-5.4-12-12v-56h-56c-6.6 0-12-5.4-12-12v-32c0-6.6 5.4-12 12-12h56v-56c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v56h56c6.6 0 12 5.4 12 12zm201 284.7L476.7 505c-9.4 9.4-24.6 9.4-33.9 0L343 405.3c-4.5-4.5-7-10.6-7-17V372c-35.3 27.6-79.7 44-128 44C93.1 416 0 322.9 0 208S93.1 0 208 0s208 93.1 208 208c0 48.3-16.4 92.7-44 128h16.3c6.4 0 12.5 2.5 17 7l99.7 99.7c9.3 9.4 9.3 24.6 0 34zM344 208c0-75.2-60.8-136-136-136S72 132.8 72 208s60.8 136 136 136 136-60.8 136-136z" style="transform: scale(0.04); fill: var(--font-color); "></path></svg>',attr(t,"class","button svelte-10g9qi8"),attr(t,"id","Zoom in")},m(i,o){insert(i,t,o),r||(a=listen(t,"click",e[3]),r=!0)},p:noop,d(i){i&&detach(t),r=!1,a()}}}function create_default_slot_1$3(e){let t,r,a;return{c(){t=element("div"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M304 192v32c0 6.6-5.4 12-12 12H124c-6.6 0-12-5.4-12-12v-32c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm201 284.7L476.7 505c-9.4 9.4-24.6 9.4-33.9 0L343 405.3c-4.5-4.5-7-10.6-7-17V372c-35.3 27.6-79.7 44-128 44C93.1 416 0 322.9 0 208S93.1 0 208 0s208 93.1 208 208c0 48.3-16.4 92.7-44 128h16.3c6.4 0 12.5 2.5 17 7l99.7 99.7c9.3 9.4 9.3 24.6 0 34zM344 208c0-75.2-60.8-136-136-136S72 132.8 72 208s60.8 136 136 136 136-60.8 136-136z" style="transform: scale(0.04); fill: var(--font-color); "></path></svg>',attr(t,"class","button svelte-10g9qi8"),attr(t,"id","Zoom in")},m(i,o){insert(i,t,o),r||(a=listen(t,"click",e[4]),r=!0)},p:noop,d(i){i&&detach(t),r=!1,a()}}}function create_default_slot$5(e){let t,r,a;return{c(){t=element("div"),t.textContent="",attr(t,"class","button svelte-10g9qi8"),attr(t,"id","export")},m(i,o){insert(i,t,o),r||(a=listen(t,"click",e[5]),r=!0)},p:noop,d(i){i&&detach(t),r=!1,a()}}}function create_fragment$b(e){var m;let t,r,a,i,o,u,c,d,f=((m=e[1][e[0]])==null?void 0:m.graph)==="raw"&&create_if_block$8();return a=new Tooltip({props:{tipcontent:"Zoom in",$$slots:{default:[create_default_slot_2$3]},$$scope:{ctx:e}}}),o=new Tooltip({props:{tipcontent:"Zoom out",$$slots:{default:[create_default_slot_1$3]},$$scope:{ctx:e}}}),c=new Tooltip({props:{tipcontent:"Save plot",$$slots:{default:[create_default_slot$5]},$$scope:{ctx:e}}}),{c(){t=element("div"),f&&f.c(),r=space(),create_component(a.$$.fragment),i=space(),create_component(o.$$.fragment),u=space(),create_component(c.$$.fragment),attr(t,"id","chartTools"),attr(t,"class","svelte-10g9qi8")},m(p,h){insert(p,t,h),f&&f.m(t,null),append(t,r),mount_component(a,t,null),append(t,i),mount_component(o,t,null),append(t,u),mount_component(c,t,null),d=!0},p(p,[h]){var $;(($=p[1][p[0]])==null?void 0:$.graph)==="raw"?f?h&3&&transition_in(f,1):(f=create_if_block$8(),f.c(),transition_in(f,1),f.m(t,r)):f&&(group_outros(),transition_out(f,1,1,()=>{f=null}),check_outros());const _={};h&64&&(_.$$scope={dirty:h,ctx:p}),a.$set(_);const y={};h&64&&(y.$$scope={dirty:h,ctx:p}),o.$set(y);const D={};h&64&&(D.$$scope={dirty:h,ctx:p}),c.$set(D)},i(p){d||(transition_in(f),transition_in(a.$$.fragment,p),transition_in(o.$$.fragment,p),transition_in(c.$$.fragment,p),d=!0)},o(p){transition_out(f),transition_out(a.$$.fragment,p),transition_out(o.$$.fragment,p),transition_out(c.$$.fragment,p),d=!1},d(p){p&&detach(t),f&&f.d(),destroy_component(a),destroy_component(o),destroy_component(c)}}}function instance$b(e,t,r){let a,i;component_subscribe(e,activeGraphTab,f=>r(0,a=f)),component_subscribe(e,graphs,f=>r(1,i=f));function o(f="in"){const m=document.getElementById("svgContainer");var h=parseFloat(m.style.transform.slice(m.style.transform.indexOf("scale")+6));f==="in"?h+=.1:h-=.1,set_store_value(graphs,i[a].zoom=h,i),m.style.transform="scale("+h+")",m.style.width=""}return[a,i,o,f=>o("in"),()=>o("out"),()=>exportSVG()]}class Charttools extends SvelteComponent{constructor(t){super(),init(this,t,instance$b,create_fragment$b,safe_not_equal,{})}}function get_each_context$5(e,t,r){const a=e.slice();return a[8]=t[r],a[9]=t,a[10]=r,a}function create_else_block$3(e){let t,r,a,i,o,u=ensure_array_like(e[0]),c=[];for(let f=0;f<u.length;f+=1)c[f]=create_each_block$5(get_each_context$5(e,u,f));const d=f=>transition_out(c[f],1,1,()=>{c[f]=null});return i=new Charttools({}),{c(){t=element("nav"),r=element("ul");for(let f=0;f<c.length;f+=1)c[f].c();a=space(),create_component(i.$$.fragment),attr(r,"class","svelte-1gfrvzx"),attr(t,"class","svelte-1gfrvzx")},m(f,m){insert(f,t,m),append(t,r);for(let p=0;p<c.length;p+=1)c[p]&&c[p].m(r,null);insert(f,a,m),mount_component(i,f,m),o=!0},p(f,m){if(m&15){u=ensure_array_like(f[0]);let p;for(p=0;p<u.length;p+=1){const h=get_each_context$5(f,u,p);c[p]?(c[p].p(h,m),transition_in(c[p],1)):(c[p]=create_each_block$5(h),c[p].c(),transition_in(c[p],1),c[p].m(r,null))}for(group_outros(),p=u.length;p<c.length;p+=1)d(p);check_outros()}},i(f){if(!o){for(let m=0;m<u.length;m+=1)transition_in(c[m]);transition_in(i.$$.fragment,f),o=!0}},o(f){c=c.filter(Boolean);for(let m=0;m<c.length;m+=1)transition_out(c[m]);transition_out(i.$$.fragment,f),o=!1},d(f){f&&(detach(t),detach(a)),destroy_each(c,f),destroy_component(i,f)}}}function create_if_block$7(e){let t;return{c(){t=element("h3"),t.textContent="Need to add a chart"},m(r,a){insert(r,t,a)},p:noop,i:noop,o:noop,d(r){r&&detach(t)}}}function create_each_block$5(e){let t,r,a,i,o,u,c,d,f,m,p;function h($){e[4]($,e[8])}let _={};e[8].name!==void 0&&(_.value=e[8].name),a=new InPlaceEdit({props:_}),binding_callbacks.push(()=>bind(a,"value",h));function y(){return e[5](e[10])}function D(){return e[6](e[10])}return{c(){t=element("li"),r=element("span"),create_component(a.$$.fragment),o=space(),u=element("button"),u.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="svelte-1gfrvzx"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg>',c=space(),attr(r,"class","tabname svelte-1gfrvzx"),attr(u,"class","closeButton svelte-1gfrvzx"),attr(t,"class",d=null_to_empty(e[1]===e[10]?"active":"")+" svelte-1gfrvzx")},m($,b){insert($,t,b),append(t,r),mount_component(a,r,null),append(t,o),append(t,u),append(t,c),f=!0,m||(p=[listen(r,"click",y),listen(u,"click",D)],m=!0)},p($,b){e=$;const g={};!i&&b&1&&(i=!0,g.value=e[8].name,add_flush_callback(()=>i=!1)),a.$set(g),(!f||b&2&&d!==(d=null_to_empty(e[1]===e[10]?"active":"")+" svelte-1gfrvzx"))&&attr(t,"class",d)},i($){f||(transition_in(a.$$.fragment,$),f=!0)},o($){transition_out(a.$$.fragment,$),f=!1},d($){$&&detach(t),destroy_component(a),m=!1,run_all(p)}}}function create_fragment$a(e){let t,r,a,i;const o=[create_if_block$7,create_else_block$3],u=[];function c(d,f){return d[1]<0?0:1}return r=c(e),a=u[r]=o[r](e),{c(){t=element("div"),a.c(),attr(t,"id","graphTabs"),set_style(t,"margin","0 1em"),attr(t,"class","svelte-1gfrvzx")},m(d,f){insert(d,t,f),u[r].m(t,null),i=!0},p(d,[f]){let m=r;r=c(d),r===m?u[r].p(d,f):(group_outros(),transition_out(u[m],1,1,()=>{u[m]=null}),check_outros(),a=u[r],a?a.p(d,f):(a=u[r]=o[r](d),a.c()),transition_in(a,1),a.m(t,null))},i(d){i||(transition_in(a),i=!0)},o(d){transition_out(a),i=!1},d(d){d&&detach(t),u[r].d()}}}function instance$a(e,t,r){let a,i,o;component_subscribe(e,graphTabs,p=>r(0,a=p)),component_subscribe(e,graphs,p=>r(7,i=p)),component_subscribe(e,activeGraphTab,p=>r(1,o=p));function u(p){set_store_value(activeGraphTab,o=p,o)}function c(p){i.splice(p,1),a.splice(p,1),set_store_value(activeGraphTab,o=i.length-1,o),console.log(o),graphs.set(i),graphTabs.set(a)}function d(p,h){e.$$.not_equal(h.name,p)&&(h.name=p,graphTabs.set(a))}return[a,o,u,c,d,p=>u(p),p=>c(p)]}class GraphTabs extends SvelteComponent{constructor(t){super(),init(this,t,instance$a,create_fragment$a,safe_not_equal,{})}}function create_else_block_1$1(e){let t=e[1][e[0]].graph+"",r;return{c(){r=text(t)},m(a,i){insert(a,r,i)},p(a,i){i&3&&t!==(t=a[1][a[0]].graph+"")&&set_data(r,t)},i:noop,o:noop,d(a){a&&detach(r)}}}function create_if_block_3$3(e){let t,r,a;var i=graphMap[e[1][e[0]].graph].graph;function o(u,c){return{}}return i&&(t=construct_svelte_component(i,o())),{c(){t&&create_component(t.$$.fragment),r=empty$1()},m(u,c){t&&mount_component(t,u,c),insert(u,r,c),a=!0},p(u,c){if(c&3&&i!==(i=graphMap[u[1][u[0]].graph].graph)){if(t){group_outros();const d=t;transition_out(d.$$.fragment,1,0,()=>{destroy_component(d,1)}),check_outros()}i?(t=construct_svelte_component(i,o()),create_component(t.$$.fragment),transition_in(t.$$.fragment,1),mount_component(t,r.parentNode,r)):t=null}},i(u){a||(t&&transition_in(t.$$.fragment,u),a=!0)},o(u){t&&transition_out(t.$$.fragment,u),a=!1},d(u){u&&detach(r),t&&destroy_component(t,u)}}}function create_if_block_2$3(e){return{c:noop,m:noop,p:noop,i:noop,o:noop,d:noop}}function create_default_slot_3$2(e){let t,r,a,i,o,u;t=new GraphTabs({});const c=[create_if_block_2$3,create_if_block_3$3,create_else_block_1$1],d=[];function f(m,p){return m[0]<0?0:m[1][m[0]].graph in graphMap?1:2}return i=f(e),o=d[i]=c[i](e),{c(){create_component(t.$$.fragment),r=space(),a=element("div"),o.c(),attr(a,"id","thePlot"),set_style(a,"height","calc(100% - 4em)"),set_style(a,"overflow","auto"),set_style(a,"width","auto")},m(m,p){mount_component(t,m,p),insert(m,r,p),insert(m,a,p),d[i].m(a,null),u=!0},p(m,p){let h=i;i=f(m),i===h?d[i].p(m,p):(group_outros(),transition_out(d[h],1,1,()=>{d[h]=null}),check_outros(),o=d[i],o?o.p(m,p):(o=d[i]=c[i](m),o.c()),transition_in(o,1),o.m(a,null))},i(m){u||(transition_in(t.$$.fragment,m),transition_in(o),u=!0)},o(m){transition_out(t.$$.fragment,m),transition_out(o),u=!1},d(m){m&&(detach(r),detach(a)),destroy_component(t,m),d[i].d()}}}function create_else_block$2(e){let t=JSON.stringify(e[1][e[0]].sourceData)+"",r;return{c(){r=text(t)},m(a,i){insert(a,r,i)},p(a,i){i&3&&t!==(t=JSON.stringify(a[1][a[0]].sourceData)+"")&&set_data(r,t)},i:noop,o:noop,d(a){a&&detach(r)}}}function create_if_block_1$4(e){let t,r,a,i,o;var u=graphMap[e[1][e[0]].graph].controls;function c(d,f){return{}}return u&&(i=construct_svelte_component(u,c())),{c(){t=element("div"),r=element("div"),r.innerHTML="<h1>Controls</h1>",a=space(),i&&create_component(i.$$.fragment),set_style(r,"display","flex"),set_style(r,"min-width","200px"),attr(t,"id","chartControlsTree"),set_style(t,"height","100%"),set_style(t,"width","auto"),set_style(t,"overflow","auto")},m(d,f){insert(d,t,f),append(t,r),append(t,a),i&&mount_component(i,t,null),o=!0},p(d,f){if(f&3&&u!==(u=graphMap[d[1][d[0]].graph].controls)){if(i){group_outros();const m=i;transition_out(m.$$.fragment,1,0,()=>{destroy_component(m,1)}),check_outros()}u?(i=construct_svelte_component(u,c()),create_component(i.$$.fragment),transition_in(i.$$.fragment,1),mount_component(i,t,null)):i=null}},i(d){o||(i&&transition_in(i.$$.fragment,d),o=!0)},o(d){i&&transition_out(i.$$.fragment,d),o=!1},d(d){d&&detach(t),i&&destroy_component(i)}}}function create_if_block$6(e){return{c:noop,m:noop,p:noop,i:noop,o:noop,d:noop}}function create_default_slot_2$2(e){let t,r,a,i;const o=[create_if_block$6,create_if_block_1$4,create_else_block$2],u=[];function c(d,f){return d[0]<0?0:d[1][d[0]].graph in graphMap?1:2}return t=c(e),r=u[t]=o[t](e),{c(){r.c(),a=empty$1()},m(d,f){u[t].m(d,f),insert(d,a,f),i=!0},p(d,f){let m=t;t=c(d),t===m?u[t].p(d,f):(group_outros(),transition_out(u[m],1,1,()=>{u[m]=null}),check_outros(),r=u[t],r?r.p(d,f):(r=u[t]=o[t](d),r.c()),transition_in(r,1),r.m(a.parentNode,a))},i(d){i||(transition_in(r),i=!0)},o(d){transition_out(r),i=!1},d(d){d&&detach(a),u[t].d(d)}}}function create_default_slot_1$2(e){let t,r,a,i;return t=new Pane({props:{$$slots:{default:[create_default_slot_3$2]},$$scope:{ctx:e}}}),a=new Pane({props:{size:25,$$slots:{default:[create_default_slot_2$2]},$$scope:{ctx:e}}}),{c(){create_component(t.$$.fragment),r=space(),create_component(a.$$.fragment)},m(o,u){mount_component(t,o,u),insert(o,r,u),mount_component(a,o,u),i=!0},p(o,u){const c={};u&7&&(c.$$scope={dirty:u,ctx:o}),t.$set(c);const d={};u&7&&(d.$$scope={dirty:u,ctx:o}),a.$set(d)},i(o){i||(transition_in(t.$$.fragment,o),transition_in(a.$$.fragment,o),i=!0)},o(o){transition_out(t.$$.fragment,o),transition_out(a.$$.fragment,o),i=!1},d(o){o&&detach(r),destroy_component(t,o),destroy_component(a,o)}}}function create_default_slot$4(e){let t,r;return t=new Splitpanes({props:{theme:"modern-theme",style:"height: 100%;",pushOtherPanes:!1,dblClickSplitter:!1,$$slots:{default:[create_default_slot_1$2]},$$scope:{ctx:e}}}),{c(){create_component(t.$$.fragment)},m(a,i){mount_component(t,a,i),r=!0},p(a,i){const o={};i&7&&(o.$$scope={dirty:i,ctx:a}),t.$set(o)},i(a){r||(transition_in(t.$$.fragment,a),r=!0)},o(a){transition_out(t.$$.fragment,a),r=!1},d(a){destroy_component(t,a)}}}function create_fragment$9(e){let t,r;return t=new Pane({props:{size:80,$$slots:{default:[create_default_slot$4]},$$scope:{ctx:e}}}),{c(){create_component(t.$$.fragment)},m(a,i){mount_component(t,a,i),r=!0},p(a,[i]){const o={};i&7&&(o.$$scope={dirty:i,ctx:a}),t.$set(o)},i(a){r||(transition_in(t.$$.fragment,a),r=!0)},o(a){transition_out(t.$$.fragment,a),r=!1},d(a){destroy_component(t,a)}}}function instance$9(e,t,r){let a,i;return component_subscribe(e,activeGraphTab,o=>r(0,a=o)),component_subscribe(e,graphs,o=>r(1,i=o)),[a,i]}class GraphMaster extends SvelteComponent{constructor(t){super(),init(this,t,instance$9,create_fragment$9,safe_not_equal,{})}}function get_each_context_2$1(e,t,r){const a=e.slice();return a[16]=t[r],a[18]=r,a}function get_each_context_3(e,t,r){const a=e.slice();return a[22]=t[r],a[20]=r,a}function get_each_context$4(e,t,r){const a=e.slice();return a[16]=t[r],a[18]=r,a}function get_each_context_1$1(e,t,r){const a=e.slice();return a[16]=t[r],a[20]=r,a}function get_each_context_4(e,t,r){const a=e.slice();return a[24]=t[r],a[26]=r,a}function get_each_context_5(e,t,r){const a=e.slice();return a[27]=t[r],a[28]=t,a[29]=r,a}function create_else_block_4(e){let t,r,a,i=ensure_array_like(e[5]),o=[];for(let c=0;c<i.length;c+=1)o[c]=create_each_block_5(get_each_context_5(e,i,c));const u=c=>transition_out(o[c],1,1,()=>{o[c]=null});return{c(){t=element("nav"),r=element("ul");for(let c=0;c<o.length;c+=1)o[c].c();attr(r,"class","svelte-nulfcf"),attr(t,"class","svelte-nulfcf")},m(c,d){insert(c,t,d),append(t,r);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(r,null);a=!0},p(c,d){if(d&422){i=ensure_array_like(c[5]);let f;for(f=0;f<i.length;f+=1){const m=get_each_context_5(c,i,f);o[f]?(o[f].p(m,d),transition_in(o[f],1)):(o[f]=create_each_block_5(m),o[f].c(),transition_in(o[f],1),o[f].m(r,null))}for(group_outros(),f=i.length;f<o.length;f+=1)u(f);check_outros()}},i(c){if(!a){for(let d=0;d<i.length;d+=1)transition_in(o[d]);a=!0}},o(c){o=o.filter(Boolean);for(let d=0;d<o.length;d+=1)transition_out(o[d]);a=!1},d(c){c&&detach(t),destroy_each(o,c)}}}function create_if_block_6(e){let t;return{c(){t=element("h3"),t.textContent="Need to add a table"},m(r,a){insert(r,t,a)},p:noop,i:noop,o:noop,d(r){r&&detach(t)}}}function create_each_block_5(e){let t,r,a,i,o,u,c,d,f,m,p;function h(...b){return e[10](e[27],...b)}function _(b){e[9](b,e[27])}let y={};e[1][e[1].findIndex(h)].displayName!==void 0&&(y.value=e[1][e[1].findIndex(h)].displayName),a=new InPlaceEdit({props:y}),binding_callbacks.push(()=>bind(a,"value",_));function D(){return e[11](e[29])}function $(){return e[12](e[29])}return{c(){t=element("li"),r=element("span"),create_component(a.$$.fragment),o=space(),u=element("button"),u.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 svelte-nulfcf"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg>',c=space(),attr(r,"class","tabname svelte-nulfcf"),attr(u,"class","closeButton svelte-nulfcf"),attr(t,"class",d=null_to_empty(e[2]===e[29]?"active":"")+" svelte-nulfcf")},m(b,g){insert(b,t,g),append(t,r),mount_component(a,r,null),append(t,o),append(t,u),append(t,c),f=!0,m||(p=[listen(u,"click",D),listen(t,"click",$)],m=!0)},p(b,g){e=b;const v={};!i&&g&34&&(i=!0,v.value=e[1][e[1].findIndex(h)].displayName,add_flush_callback(()=>i=!1)),a.$set(v),(!f||g&4&&d!==(d=null_to_empty(e[2]===e[29]?"active":"")+" svelte-nulfcf"))&&attr(t,"class",d)},i(b){f||(transition_in(a.$$.fragment,b),f=!0)},o(b){transition_out(a.$$.fragment,b),f=!1},d(b){b&&detach(t),destroy_component(a),m=!1,run_all(p)}}}function create_if_block$5(e){let t,r,a,i,o,u,c,d,f=ensure_array_like(e[3].headings),m=[];for(let D=0;D<f.length;D+=1)m[D]=create_each_block_4(get_each_context_4(e,f,D));function p(D,$){return D[4][D[2]]?create_if_block_2$2:create_else_block_1}let h=p(e),_=h(e),y=!e[4][e[2]]&&create_if_block_1$3(e);return{c(){t=element("main"),r=element("table"),a=element("thead"),i=element("tr");for(let D=0;D<m.length;D+=1)m[D].c();o=space(),u=element("tbody"),_.c(),c=space(),y&&y.c(),d=empty$1(),attr(a,"class","svelte-nulfcf"),attr(r,"class","svelte-nulfcf")},m(D,$){insert(D,t,$),append(t,r),append(r,a),append(a,i);for(let b=0;b<m.length;b+=1)m[b]&&m[b].m(i,null);append(r,o),append(r,u),_.m(u,null),insert(D,c,$),y&&y.m(D,$),insert(D,d,$)},p(D,$){if($&8){f=ensure_array_like(D[3].headings);let b;for(b=0;b<f.length;b+=1){const g=get_each_context_4(D,f,b);m[b]?m[b].p(g,$):(m[b]=create_each_block_4(g),m[b].c(),m[b].m(i,null))}for(;b<m.length;b+=1)m[b].d(1);m.length=f.length}h===(h=p(D))&&_?_.p(D,$):(_.d(1),_=h(D),_&&(_.c(),_.m(u,null))),D[4][D[2]]?y&&(y.d(1),y=null):y?y.p(D,$):(y=create_if_block_1$3(D),y.c(),y.m(d.parentNode,d))},d(D){D&&(detach(t),detach(c),detach(d)),destroy_each(m,D),_.d(),y&&y.d(D)}}}function create_else_block_3(e){let t,r=e[24]+"",a;return{c(){t=element("th"),a=text(r),attr(t,"class","svelte-nulfcf")},m(i,o){insert(i,t,o),append(t,a)},p(i,o){o&8&&r!==(r=i[24]+"")&&set_data(a,r)},d(i){i&&detach(t)}}}function create_if_block_5(e){let t,r,a=e[24]+"",i,o;return{c(){t=element("th"),r=element("i"),i=text(a),o=text("*"),attr(t,"class","svelte-nulfcf")},m(u,c){insert(u,t,c),append(t,r),append(r,i),append(r,o)},p(u,c){c&8&&a!==(a=u[24]+"")&&set_data(i,a)},d(u){u&&detach(t)}}}function create_each_block_4(e){let t;function r(o,u){return o[3].processed[o[26]]?create_if_block_5:create_else_block_3}let a=r(e),i=a(e);return{c(){i.c(),t=empty$1()},m(o,u){i.m(o,u),insert(o,t,u)},p(o,u){a===(a=r(o))&&i?i.p(o,u):(i.d(1),i=a(o),i&&(i.c(),i.m(t.parentNode,t)))},d(o){o&&detach(t),i.d(o)}}}function create_else_block_1(e){let t,r=ensure_array_like({length:minrowstoshow}),a=[];for(let i=0;i<r.length;i+=1)a[i]=create_each_block_2$1(get_each_context_2$1(e,r,i));return{c(){for(let i=0;i<a.length;i+=1)a[i].c();t=empty$1()},m(i,o){for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(i,o);insert(i,t,o)},p(i,o){if(o&9){r=ensure_array_like({length:minrowstoshow});let u;for(u=0;u<r.length;u+=1){const c=get_each_context_2$1(i,r,u);a[u]?a[u].p(c,o):(a[u]=create_each_block_2$1(c),a[u].c(),a[u].m(t.parentNode,t))}for(;u<a.length;u+=1)a[u].d(1);a.length=r.length}},d(i){i&&detach(t),destroy_each(a,i)}}}function create_if_block_2$2(e){let t,r=ensure_array_like(e[0][0]),a=[];for(let i=0;i<r.length;i+=1)a[i]=create_each_block$4(get_each_context$4(e,r,i));return{c(){for(let i=0;i<a.length;i+=1)a[i].c();t=empty$1()},m(i,o){for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(i,o);insert(i,t,o)},p(i,o){if(o&9){r=ensure_array_like(i[0][0]);let u;for(u=0;u<r.length;u+=1){const c=get_each_context$4(i,r,u);a[u]?a[u].p(c,o):(a[u]=create_each_block$4(c),a[u].c(),a[u].m(t.parentNode,t))}for(;u<a.length;u+=1)a[u].d(1);a.length=r.length}},d(i){i&&detach(t),destroy_each(a,i)}}}function create_else_block_2(e){let t,r=e[0][e[20]][e[18]]+"",a;return{c(){t=element("td"),a=text(r),attr(t,"class","svelte-nulfcf")},m(i,o){insert(i,t,o),append(t,a)},p(i,o){o&1&&r!==(r=i[0][i[20]][i[18]]+"")&&set_data(a,r)},d(i){i&&detach(t)}}}function create_if_block_4$2(e){let t,r,a=e[0][e[20]][e[18]]+"",i;return{c(){t=element("td"),r=element("i"),i=text(a),attr(t,"class","svelte-nulfcf")},m(o,u){insert(o,t,u),append(t,r),append(r,i)},p(o,u){u&1&&a!==(a=o[0][o[20]][o[18]]+"")&&set_data(i,a)},d(o){o&&detach(t)}}}function create_each_block_3(e){let t;function r(o,u){return o[3].processed[o[20]]?create_if_block_4$2:create_else_block_2}let a=r(e),i=a(e);return{c(){i.c(),t=empty$1()},m(o,u){i.m(o,u),insert(o,t,u)},p(o,u){a===(a=r(o))&&i?i.p(o,u):(i.d(1),i=a(o),i&&(i.c(),i.m(t.parentNode,t)))},d(o){o&&detach(t),i.d(o)}}}function create_each_block_2$1(e){let t,r,a=ensure_array_like(e[0]),i=[];for(let o=0;o<a.length;o+=1)i[o]=create_each_block_3(get_each_context_3(e,a,o));return{c(){t=element("tr");for(let o=0;o<i.length;o+=1)i[o].c();r=space()},m(o,u){insert(o,t,u);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(t,null);append(t,r)},p(o,u){if(u&9){a=ensure_array_like(o[0]);let c;for(c=0;c<a.length;c+=1){const d=get_each_context_3(o,a,c);i[c]?i[c].p(d,u):(i[c]=create_each_block_3(d),i[c].c(),i[c].m(t,r))}for(;c<i.length;c+=1)i[c].d(1);i.length=a.length}},d(o){o&&detach(t),destroy_each(i,o)}}}function create_else_block$1(e){let t,r=e[0][e[20]][e[18]]+"",a;return{c(){t=element("td"),a=text(r),attr(t,"class","svelte-nulfcf")},m(i,o){insert(i,t,o),append(t,a)},p(i,o){o&1&&r!==(r=i[0][i[20]][i[18]]+"")&&set_data(a,r)},d(i){i&&detach(t)}}}function create_if_block_3$2(e){let t,r,a=e[0][e[20]][e[18]]+"",i;return{c(){t=element("td"),r=element("i"),i=text(a),attr(t,"class","svelte-nulfcf")},m(o,u){insert(o,t,u),append(t,r),append(r,i)},p(o,u){u&1&&a!==(a=o[0][o[20]][o[18]]+"")&&set_data(i,a)},d(o){o&&detach(t)}}}function create_each_block_1$1(e){let t;function r(o,u){return o[3].processed[o[20]]?create_if_block_3$2:create_else_block$1}let a=r(e),i=a(e);return{c(){i.c(),t=empty$1()},m(o,u){i.m(o,u),insert(o,t,u)},p(o,u){a===(a=r(o))&&i?i.p(o,u):(i.d(1),i=a(o),i&&(i.c(),i.m(t.parentNode,t)))},d(o){o&&detach(t),i.d(o)}}}function create_each_block$4(e){let t,r,a=ensure_array_like(e[0]),i=[];for(let o=0;o<a.length;o+=1)i[o]=create_each_block_1$1(get_each_context_1$1(e,a,o));return{c(){t=element("tr");for(let o=0;o<i.length;o+=1)i[o].c();r=space()},m(o,u){insert(o,t,u);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(t,null);append(t,r)},p(o,u){if(u&9){a=ensure_array_like(o[0]);let c;for(c=0;c<a.length;c+=1){const d=get_each_context_1$1(o,a,c);i[c]?i[c].p(d,u):(i[c]=create_each_block_1$1(d),i[c].c(),i[c].m(t,r))}for(;c<i.length;c+=1)i[c].d(1);i.length=a.length}},d(o){o&&detach(t),destroy_each(i,o)}}}function create_if_block_1$3(e){let t,r,a,i;return{c(){t=element("button"),r=text("..."),attr(t,"tipcontent","Show more"),attr(t,"class","showmorebutton svelte-nulfcf"),set_style(t,"display",e[4][e[2]]?"none":"block")},m(o,u){insert(o,t,u),append(t,r),a||(i=[action_destroyer(tooltip.call(null,t)),listen(t,"click",e[13])],a=!0)},p(o,u){u&20&&set_style(t,"display",o[4][o[2]]?"none":"block")},d(o){o&&detach(t),a=!1,run_all(i)}}}function create_fragment$8(e){let t,r,a,i,o,u;const c=[create_if_block_6,create_else_block_4],d=[];function f(p,h){return p[2]<0?0:1}r=f(e),a=d[r]=c[r](e);let m=e[2]>=0&&e[0].length>0&&create_if_block$5(e);return{c(){t=element("div"),a.c(),i=space(),m&&m.c(),o=empty$1(),attr(t,"id","tableTabs"),set_style(t,"margin","0 1em"),attr(t,"class","svelte-nulfcf")},m(p,h){insert(p,t,h),d[r].m(t,null),insert(p,i,h),m&&m.m(p,h),insert(p,o,h),u=!0},p(p,[h]){let _=r;r=f(p),r===_?d[r].p(p,h):(group_outros(),transition_out(d[_],1,1,()=>{d[_]=null}),check_outros(),a=d[r],a?a.p(p,h):(a=d[r]=c[r](p),a.c()),transition_in(a,1),a.m(t,null)),p[2]>=0&&p[0].length>0?m?m.p(p,h):(m=create_if_block$5(p),m.c(),m.m(o.parentNode,o)):m&&(m.d(1),m=null)},i(p){u||(transition_in(a),u=!0)},o(p){transition_out(a),u=!1},d(p){p&&(detach(t),detach(i),detach(o)),d[r].d(),m&&m.d(p)}}}let minrowstoshow=100;function makeTableData(e,t){let r=[];for(const a in e)r.push(e[a].data),e[a].type==="time"&&r.push(e[a].timeData),e[a].processSteps.length>0&&r.push(e[a].processedData);return r}function instance$8(e,t,r){let a,i,o,u,c;component_subscribe(e,data,v=>r(1,i=v)),component_subscribe(e,activeTableTab,v=>r(2,o=v)),component_subscribe(e,showalldata,v=>r(4,u=v)),component_subscribe(e,dataIDsforTables,v=>r(5,c=v));function d(){set_store_value(showalldata,u[o]=!0,u)}function f(v){set_store_value(activeTableTab,o=v,o)}function m(v){c.splice(v,1),dataIDsforTables.set(c),u.splice(v,1),showalldata.set(u),set_store_value(activeTableTab,o=c.length>0?0:-1,o)}function p(v){return c.length>0?i.find(k=>k.id===c[v]):{data:-1,displayName:-1}}function h(v,k){if(c.length>0){var T=[],S=[];for(const O in v)T.push(v[O].name),S.push(!1),v[O].processSteps.length>0&&(T.push(v[O].name),S.push(!0)),v[O].type==="time"&&(T.push(v[O].name+" (hrs)"),S.push(!0));return{headings:T,processed:S}}else return{headings:[""],processed:[!1]}}let _;const y=(v,k)=>k.id===v;function D(v,k){e.$$.not_equal(i[i.findIndex(T=>T.id===k)].displayName,v)&&(i[i.findIndex(T=>T.id===k)].displayName=v,data.set(i))}const $=v=>m(v),b=v=>f(v),g=v=>d();return e.$$.update=()=>{e.$$.dirty&7&&(r(0,_=makeTableData(p(o).data)),_.length>0&&_[0].length<=minrowstoshow&&(console.log(_[0].length),console.log(_[0].length<=minrowstoshow),set_store_value(showalldata,u[o]=!0,u))),e.$$.dirty&6&&r(3,a=h(p(o).data))},[_,i,o,a,u,c,d,f,m,D,y,$,b,g]}class TableTabs extends SvelteComponent{constructor(t){super(),init(this,t,instance$8,create_fragment$8,safe_not_equal,{})}}function get_each_context$3(e,t,r){const a=e.slice();return a[10]=t[r],a[11]=t,a[12]=r,a}function create_default_slot_3$1(e){let t,r,a;return r=new TableTabs({}),{c(){t=element("div"),create_component(r.$$.fragment),attr(t,"id","TableMain"),set_style(t,"height","100%"),set_style(t,"width","auto"),set_style(t,"overflow","auto")},m(i,o){insert(i,t,o),mount_component(r,t,null),a=!0},p:noop,i(i){a||(transition_in(r.$$.fragment,i),a=!0)},o(i){transition_out(r.$$.fragment,i),a=!1},d(i){i&&detach(t),destroy_component(r)}}}function create_if_block$4(e){let t,r;return t=new Pane({props:{size:30,$$slots:{default:[create_default_slot_2$1]},$$scope:{ctx:e}}}),{c(){create_component(t.$$.fragment)},m(a,i){mount_component(t,a,i),r=!0},p(a,i){const o={};i&8193&&(o.$$scope={dirty:i,ctx:a}),t.$set(o)},i(a){r||(transition_in(t.$$.fragment,a),r=!0)},o(a){transition_out(t.$$.fragment,a),r=!1},d(a){destroy_component(t,a)}}}function create_if_block_1$2(e){let t,r=e[0].data[e[10]].name+"",a,i,o,u,c,d,f,m,p=e[0].data[e[10]].recordPeriod.minDiff+"",h,_,y=e[0].data[e[10]].recordPeriod.constant?"equal":"unequal",D,$,b,g;function v(){e[7].call(o,e[10])}function k(...S){return e[8](e[10],...S)}function T(...S){return e[9](e[10],...S)}return{c(){t=element("div"),a=text(r),i=space(),o=element("input"),u=space(),c=element("button"),c.textContent="",d=space(),f=element("div"),m=text("Sampling freq: "),h=text(p),_=text(`
                  hrs,
                  `),D=text(y),$=space(),attr(o,"type","text"),attr(c,"class","guessFmtBtn svelte-1wt1n0s"),set_style(t,"display","flex"),set_style(t,"margin","5px"),set_style(f,"display","flex"),set_style(f,"margin","5px"),set_style(f,"margin-left","1em")},m(S,O){insert(S,t,O),append(t,a),append(t,i),append(t,o),set_input_value(o,e[0].data[e[10]].timeFormat),append(t,u),append(t,c),insert(S,d,O),insert(S,f,O),append(f,m),append(f,h),append(f,_),append(f,D),append(f,$),b||(g=[listen(o,"input",v),listen(o,"change",k),listen(c,"click",T)],b=!0)},p(S,O){e=S,O&1&&r!==(r=e[0].data[e[10]].name+"")&&set_data(a,r),O&1&&o.value!==e[0].data[e[10]].timeFormat&&set_input_value(o,e[0].data[e[10]].timeFormat),O&1&&p!==(p=e[0].data[e[10]].recordPeriod.minDiff+"")&&set_data(h,p),O&1&&y!==(y=e[0].data[e[10]].recordPeriod.constant?"equal":"unequal")&&set_data(D,y)},d(S){S&&(detach(t),detach(d),detach(f)),b=!1,run_all(g)}}}function create_each_block$3(e){let t,r=e[0].data[e[10]].type==="time"&&create_if_block_1$2(e);return{c(){r&&r.c(),t=empty$1()},m(a,i){r&&r.m(a,i),insert(a,t,i)},p(a,i){a[0].data[a[10]].type==="time"?r?r.p(a,i):(r=create_if_block_1$2(a),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},d(a){a&&detach(t),r&&r.d(a)}}}function create_default_slot_2$1(e){let t,r,a,i,o=e[0].displayName+"",u,c,d,f,m=e[0].importedFrom+"",p,h,_,y,D=e[0].data[Object.keys(e[0].data)[0]].data.length+"",$,b,g=ensure_array_like(Object.keys(e[0].data)),v=[];for(let k=0;k<g.length;k+=1)v[k]=create_each_block$3(get_each_context$3(e,g,k));return{c(){t=element("div"),r=element("div"),a=element("div"),i=text("Data: "),u=text(o),c=space(),d=element("div"),f=text("Imported: "),p=text(m),h=space(),_=element("div"),y=text("Data length: "),$=text(D),b=space();for(let k=0;k<v.length;k+=1)v[k].c();attr(r,"class","tableData"),attr(t,"id","TableMeta"),set_style(t,"height","100%"),set_style(t,"width","auto"),set_style(t,"overflow","auto")},m(k,T){insert(k,t,T),append(t,r),append(r,a),append(a,i),append(a,u),append(r,c),append(r,d),append(d,f),append(d,p),append(r,h),append(r,_),append(_,y),append(_,$),append(r,b);for(let S=0;S<v.length;S+=1)v[S]&&v[S].m(r,null)},p(k,T){if(T&1&&o!==(o=k[0].displayName+"")&&set_data(u,o),T&1&&m!==(m=k[0].importedFrom+"")&&set_data(p,m),T&1&&D!==(D=k[0].data[Object.keys(k[0].data)[0]].data.length+"")&&set_data($,D),T&13){g=ensure_array_like(Object.keys(k[0].data));let S;for(S=0;S<g.length;S+=1){const O=get_each_context$3(k,g,S);v[S]?v[S].p(O,T):(v[S]=create_each_block$3(O),v[S].c(),v[S].m(r,null))}for(;S<v.length;S+=1)v[S].d(1);v.length=g.length}},d(k){k&&detach(t),destroy_each(v,k)}}}function create_default_slot_1$1(e){let t,r,a,i;t=new Pane({props:{$$slots:{default:[create_default_slot_3$1]},$$scope:{ctx:e}}});let o=e[1]&&create_if_block$4(e);return{c(){create_component(t.$$.fragment),r=space(),o&&o.c(),a=empty$1()},m(u,c){mount_component(t,u,c),insert(u,r,c),o&&o.m(u,c),insert(u,a,c),i=!0},p(u,c){const d={};c&8192&&(d.$$scope={dirty:c,ctx:u}),t.$set(d),u[1]?o?(o.p(u,c),c&2&&transition_in(o,1)):(o=create_if_block$4(u),o.c(),transition_in(o,1),o.m(a.parentNode,a)):o&&(group_outros(),transition_out(o,1,1,()=>{o=null}),check_outros())},i(u){i||(transition_in(t.$$.fragment,u),transition_in(o),i=!0)},o(u){transition_out(t.$$.fragment,u),transition_out(o),i=!1},d(u){u&&(detach(r),detach(a)),destroy_component(t,u),o&&o.d(u)}}}function create_default_slot$3(e){let t,r;return t=new Splitpanes({props:{theme:"modern-theme",style:"height: 100%",pushOtherPanes:!1,dblClickSplitter:!1,$$slots:{default:[create_default_slot_1$1]},$$scope:{ctx:e}}}),{c(){create_component(t.$$.fragment)},m(a,i){mount_component(t,a,i),r=!0},p(a,i){const o={};i&8195&&(o.$$scope={dirty:i,ctx:a}),t.$set(o)},i(a){r||(transition_in(t.$$.fragment,a),r=!0)},o(a){transition_out(t.$$.fragment,a),r=!1},d(a){destroy_component(t,a)}}}function create_fragment$7(e){let t,r;return t=new Pane({props:{$$slots:{default:[create_default_slot$3]},$$scope:{ctx:e}}}),{c(){create_component(t.$$.fragment)},m(a,i){mount_component(t,a,i),r=!0},p(a,[i]){const o={};i&8195&&(o.$$scope={dirty:i,ctx:a}),t.$set(o)},i(a){r||(transition_in(t.$$.fragment,a),r=!0)},o(a){transition_out(t.$$.fragment,a),r=!1},d(a){destroy_component(t,a)}}}function instance$7(e,t,r){let a,i,o,u,c;component_subscribe(e,activeTableTab,_=>r(4,o=_)),component_subscribe(e,dataIDsforTables,_=>r(5,u=_)),component_subscribe(e,data,_=>r(6,c=_));function d(_){console.log(i),set_store_value(data,c[c.findIndex(y=>y.id===u[o])].data[_].timeData=forceFormat(i.data[_].data,i.data[_].timeFormat),c),set_store_value(data,c[c.findIndex(y=>y.id===u[o])].data[_].recordPeriod=getPeriod(i.data[_].data,i.data[_].timeFormat),c),updateDataProcess(u[o],_)}function f(_){set_store_value(data,c[c.findIndex(y=>y.id===u[o])].data[_].timeFormat=getGuessedFormat(i.data[_].data),c),d(_)}function m(_){i.data[_].timeFormat=this.value,r(0,i),r(6,c),r(5,u),r(4,o)}const p=(_,y)=>{d(_)},h=(_,y)=>{f(_)};return e.$$.update=()=>{e.$$.dirty&16&&r(1,a=o>=0),e.$$.dirty&112&&r(0,i=c[c.findIndex(_=>_.id===u[o])])},[i,a,d,f,o,u,c,m,p,h]}class TableMaster extends SvelteComponent{constructor(t){super(),init(this,t,instance$7,create_fragment$7,safe_not_equal,{})}}function create_fragment$6(e){let t,r,a;return{c(){t=svg_element("svg"),r=svg_element("circle"),attr(r,"role","presentation"),attr(r,"cx","16"),attr(r,"cy","16"),attr(r,"r",e[4]),attr(r,"stroke",e[2]),attr(r,"fill","none"),attr(r,"stroke-width",e[3]),attr(r,"stroke-dasharray",a=e[5]+",100"),attr(r,"stroke-linecap","round"),attr(t,"height",e[0]),attr(t,"width",e[0]),set_style(t,"animation-duration",e[1]+"ms"),attr(t,"class","svelte-spinner svelte-ynopmf"),attr(t,"viewBox","0 0 32 32")},m(i,o){insert(i,t,o),append(t,r)},p(i,[o]){o&16&&attr(r,"r",i[4]),o&4&&attr(r,"stroke",i[2]),o&8&&attr(r,"stroke-width",i[3]),o&32&&a!==(a=i[5]+",100")&&attr(r,"stroke-dasharray",a),o&1&&attr(t,"height",i[0]),o&1&&attr(t,"width",i[0]),o&2&&set_style(t,"animation-duration",i[1]+"ms")},i:noop,o:noop,d(i){i&&detach(t)}}}function instance$6(e,t,r){let{size:a=25}=t,{speed:i=750}=t,{color:o="rgba(0,0,0,0.4)"}=t,{thickness:u=5}=t,{gap:c=30}=t,{radius:d=15}=t,f;return e.$$set=m=>{"size"in m&&r(0,a=m.size),"speed"in m&&r(1,i=m.speed),"color"in m&&r(2,o=m.color),"thickness"in m&&r(3,u=m.thickness),"gap"in m&&r(6,c=m.gap),"radius"in m&&r(4,d=m.radius)},e.$$.update=()=>{e.$$.dirty&80&&r(5,f=2*Math.PI*d*(100-c)/100)},[a,i,o,u,d,f,c]}class Spinner extends SvelteComponent{constructor(t){super(),init(this,t,instance$6,create_fragment$6,safe_not_equal,{size:0,speed:1,color:2,thickness:3,gap:6,radius:4})}}function get_each_context$2(e,t,r){const a=e.slice();return a[4]=t[r],a}function create_each_block$2(e){let t,r=e[4].display+"";return{c(){t=element("p")},m(a,i){insert(a,t,i),t.innerHTML=r},p(a,i){i&2&&r!==(r=a[4].display+"")&&(t.innerHTML=r)},d(a){a&&detach(t)}}}function create_fragment$5(e){let t,r,a,i,o,u;i=new Spinner({props:{size:"1em",color:"var(--primary-color)"}});let c=ensure_array_like(e[1]),d=[];for(let f=0;f<c.length;f+=1)d[f]=create_each_block$2(get_each_context$2(e,c,f));return{c(){t=element("div"),r=element("h3"),r.textContent="statusbar",a=space(),create_component(i.$$.fragment),o=space();for(let f=0;f<d.length;f+=1)d[f].c();set_style(t,"height","100%"),set_style(t,"overflow","auto")},m(f,m){insert(f,t,m),append(t,r),append(t,a),mount_component(i,t,null),append(t,o);for(let p=0;p<d.length;p+=1)d[p]&&d[p].m(t,null);e[2](t),u=!0},p(f,[m]){if(m&2){c=ensure_array_like(f[1]);let p;for(p=0;p<c.length;p+=1){const h=get_each_context$2(f,c,p);d[p]?d[p].p(h,m):(d[p]=create_each_block$2(h),d[p].c(),d[p].m(t,null))}for(;p<d.length;p+=1)d[p].d(1);d.length=c.length}},i(f){u||(transition_in(i.$$.fragment,f),u=!0)},o(f){transition_out(i.$$.fragment,f),u=!1},d(f){f&&detach(t),destroy_component(i),destroy_each(d,f),e[2](null)}}}function instance$5(e,t,r){let a;component_subscribe(e,statusData,c=>r(1,a=c));let i;afterUpdate(()=>{statusData&&o(i)});const o=async c=>{c.scroll({top:c.scrollHeight,behavior:"smooth"})};function u(c){binding_callbacks[c?"unshift":"push"](()=>{i=c,r(0,i)})}return[i,a,u]}class StatusMaster extends SvelteComponent{constructor(t){super(),init(this,t,instance$5,create_fragment$5,safe_not_equal,{})}}function saveStoreData(){const e=get_store_value(data),t=get_store_value(graphTabs),r=get_store_value(activeGraphTab),a=get_store_value(graphs),i=get_store_value(dataIDsforTables),o=get_store_value(showalldata),u=get_store_value(activeTableTab),c=get_store_value(selectedTheme),d=get_store_value(statusData),f={_data:e,_graphTabs:t,_activeGraphTab:r,_graphs:a,_dataIDsforTables:i,_showalldata:o,_activeTableTab:u,_selectedTheme:c,_statusData:d},m="testStore.ancir",p=JSON.stringify(f),h=new Blob([p],{type:"application/json"}),_=URL.createObjectURL(h),y=document.createElement("a");y.href=_,y.download=m,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(_)}function loadStoreData(){const e=document.createElement("input");e.type="file",e.id="fileInput",e.style.display="none",document.body.appendChild(e),e.addEventListener("change",handleFileSelect),e.click()}function loadTheData(jsonString){console.log("TODO: load script not working ");const loadedObject=JSON.parse(jsonString);for(const key in loadedObject)if(loadedObject.hasOwnProperty(key)){const modifiedKey=key.substring(1);loadedObject[key],eval(`${modifiedKey}.update((current) => {return loadedObject[key]});`)}}function handleFileSelect(e){const t=e.target.files[0];if(t){const r=new FileReader;r.onload=function(a){const i=a.target.result,o=loadTheData(i);console.log(o)},r.readAsText(t)}}function get_each_context$1(e,t,r){const a=e.slice();return a[19]=t[r],a[20]=t,a[21]=r,a}function get_each_context_1(e,t,r){const a=e.slice();return a[22]=t[r],a[23]=t,a[24]=r,a}function get_each_context_2(e,t,r){const a=e.slice();return a[25]=t[r],a}function create_if_block$3(e){let t,r=ensure_array_like(e[19].items),a=[];for(let i=0;i<r.length;i+=1)a[i]=create_each_block_1(get_each_context_1(e,r,i));return{c(){t=element("ul");for(let i=0;i<a.length;i+=1)a[i].c();attr(t,"class","secondmenu dontclose svelte-mptgu6")},m(i,o){insert(i,t,o);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(t,null)},p(i,o){if(o&11){r=ensure_array_like(i[19].items);let u;for(u=0;u<r.length;u+=1){const c=get_each_context_1(i,r,u);a[u]?a[u].p(c,o):(a[u]=create_each_block_1(c),a[u].c(),a[u].m(t,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=r.length}},d(i){i&&detach(t),destroy_each(a,i)}}}function create_else_block(e){let t,r,a=e[22].displayText+"",i,o;function u(...c){return e[13](e[22],...c)}return{c(){t=element("li"),r=element("button"),attr(r,"class","svelte-mptgu6"),attr(t,"class","svelte-mptgu6")},m(c,d){insert(c,t,d),append(t,r),r.innerHTML=a,i||(o=listen(r,"click",u),i=!0)},p(c,d){e=c,d&2&&a!==(a=e[22].displayText+"")&&(r.innerHTML=a)},d(c){c&&detach(t),i=!1,o()}}}function create_if_block_3$1(e){let t,r,a,i=e[22].displayText+"",o,u,c,d,f;function m(){return e[8](e[22],e[23],e[24])}function p(){return e[9](e[22],e[23],e[24])}let h=(e[22].visibleState||e[0])&&create_if_block_4$1(e);return{c(){t=element("li"),r=element("button"),a=new HtmlTag(!1),o=space(),u=element("span"),u.textContent="",c=space(),h&&h.c(),a.a=o,set_style(u,"float","right"),attr(r,"class","svelte-mptgu6"),attr(t,"class","svelte-mptgu6")},m(_,y){insert(_,t,y),append(t,r),a.m(i,r),append(r,o),append(r,u),append(t,c),h&&h.m(t,null),d||(f=[listen(r,"mouseover",m),listen(r,"mouseleave",p)],d=!0)},p(_,y){e=_,y&2&&i!==(i=e[22].displayText+"")&&a.p(i),e[22].visibleState||e[0]?h?h.p(e,y):(h=create_if_block_4$1(e),h.c(),h.m(t,null)):h&&(h.d(1),h=null)},d(_){_&&detach(t),h&&h.d(),d=!1,run_all(f)}}}function create_if_block_2$1(e){let t;return{c(){t=element("hr"),attr(t,"class","svelte-mptgu6")},m(r,a){insert(r,t,a)},p:noop,d(r){r&&detach(t)}}}function create_if_block_1$1(e){return{c:noop,m:noop,p:noop,d:noop}}function create_if_block_4$1(e){let t,r,a,i=ensure_array_like(e[22].items[0]),o=[];for(let u=0;u<i.length;u+=1)o[u]=create_each_block_2(get_each_context_2(e,i,u));return{c(){t=element("ul");for(let u=0;u<o.length;u+=1)o[u].c();attr(t,"class","thirdmenu dontclose svelte-mptgu6")},m(u,c){insert(u,t,c);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(t,null);r||(a=[listen(t,"mouseover",e[11]),listen(t,"mouseleave",e[12])],r=!0)},p(u,c){if(c&10){i=ensure_array_like(u[22].items[0]);let d;for(d=0;d<i.length;d+=1){const f=get_each_context_2(u,i,d);o[d]?o[d].p(f,c):(o[d]=create_each_block_2(f),o[d].c(),o[d].m(t,null))}for(;d<o.length;d+=1)o[d].d(1);o.length=i.length}},d(u){u&&detach(t),destroy_each(o,u),r=!1,run_all(a)}}}function create_each_block_2(e){let t,r,a=e[25].displayText+"",i,o,u,c;function d(...f){return e[10](e[25],...f)}return{c(){t=element("li"),r=element("button"),i=text(a),o=space(),attr(r,"class","svelte-mptgu6"),attr(t,"class","svelte-mptgu6")},m(f,m){insert(f,t,m),append(t,r),append(r,i),append(t,o),u||(c=listen(r,"click",d),u=!0)},p(f,m){e=f,m&2&&a!==(a=e[25].displayText+"")&&set_data(i,a)},d(f){f&&detach(t),u=!1,c()}}}function create_each_block_1(e){let t;function r(o,u){return o[22]===null?create_if_block_1$1:o[22].displayText==="--hr"?create_if_block_2$1:o[22].items?create_if_block_3$1:create_else_block}let a=r(e),i=a(e);return{c(){i.c(),t=space()},m(o,u){i.m(o,u),insert(o,t,u)},p(o,u){a===(a=r(o))&&i?i.p(o,u):(i.d(1),i=a(o),i&&(i.c(),i.m(t.parentNode,t)))},d(o){o&&detach(t),i.d(o)}}}function create_each_block$1(e){let t,r,a=e[19].displayText+"",i,o,u,c;function d(){return e[6](e[19],e[20],e[21])}function f(){return e[7](e[19])}let m=e[19].visibleState&&create_if_block$3(e);return{c(){t=element("li"),r=element("button"),i=space(),m&&m.c(),o=space(),attr(r,"class","dontclose svelte-mptgu6"),attr(t,"class","svelte-mptgu6")},m(p,h){insert(p,t,h),append(t,r),r.innerHTML=a,append(t,i),m&&m.m(t,null),append(t,o),u||(c=[listen(r,"click",d),listen(r,"mouseover",f)],u=!0)},p(p,h){e=p,h&2&&a!==(a=e[19].displayText+"")&&(r.innerHTML=a),e[19].visibleState?m?m.p(e,h):(m=create_if_block$3(e),m.c(),m.m(t,o)):m&&(m.d(1),m=null)},d(p){p&&detach(t),m&&m.d(),u=!1,run_all(c)}}}function create_fragment$4(e){let t,r,a,i,o,u,c,d=ensure_array_like(e[1]),f=[];for(let m=0;m<d.length;m+=1)f[m]=create_each_block$1(get_each_context$1(e,d,m));return{c(){t=element("nav"),r=element("div"),a=element("ul");for(let m=0;m<f.length;m+=1)f[m].c();i=space(),o=element("input"),attr(a,"class","topmenu svelte-mptgu6"),attr(o,"type","checkbox"),attr(o,"id","switchtheme"),attr(o,"class","svelte-mptgu6"),attr(r,"class","applicationmenu svelte-mptgu6"),attr(t,"class","svelte-mptgu6")},m(m,p){insert(m,t,p),append(t,r),append(r,a);for(let h=0;h<f.length;h+=1)f[h]&&f[h].m(a,null);append(r,i),append(r,o),u||(c=listen(o,"change",e[14]),u=!0)},p(m,[p]){if(p&31){d=ensure_array_like(m[1]);let h;for(h=0;h<d.length;h+=1){const _=get_each_context$1(m,d,h);f[h]?f[h].p(_,p):(f[h]=create_each_block$1(_),f[h].c(),f[h].m(a,null))}for(;h<f.length;h+=1)f[h].d(1);f.length=d.length}},i:noop,o:noop,d(m){m&&detach(t),destroy_each(f,m),u=!1,c()}}}function switchTheme(e){e.target.checked?document.documentElement.setAttribute("data-theme","dark"):document.documentElement.setAttribute("data-theme","light")}function createMenuItem(e,t,r=!1){return r?null:{displayText:e,onClick:t,visibleState:!1}}function instance$4(e,t,r){let a,i,o,u;component_subscribe(e,activeGraphTab,S=>r(5,i=S)),component_subscribe(e,menuModalType,S=>r(15,o=S)),component_subscribe(e,graphTabs,S=>r(16,u=S));let c=!1;function d(){return Object.keys(graphMap).map(O=>createMenuItem(O,()=>makeNewChart(O.toString())))}function f(S){var O;return[{displayText:"Data",items:[createMenuItem("Import Data",()=>set_store_value(menuModalType,o="import",o)),createMenuItem("Simulate Data",()=>{set_store_value(menuModalType,o="generateSim",o)}),{displayText:"--hr"},createMenuItem("Save session",saveStoreData),createMenuItem("Load session",loadStoreData)]},{displayText:"Chart",items:[{displayText:"Insert Chart",items:[d()]},createMenuItem("Export <i>"+((O=u[S])==null?void 0:O.name)+"</i>",()=>exportSVG(),S<0)]},{displayText:"Help",items:[createMenuItem("About",()=>{set_store_value(menuModalType,o="about",o)})]}]}function m(S){a.forEach(O=>{O!==S&&O.visibleState&&(O.visibleState=!1)}),r(1,a),r(5,i)}function p(){a.forEach(S=>{S.visibleState=!1}),r(1,a),r(5,i)}function h(S){a.forEach(O=>{O!==S&&O.visibleState?O.visibleState=!1:O===S&&(O.visibleState=!0)}),r(1,a),r(5,i)}onMount(()=>{makeNewChart("raw"),addDataToGraph(0,{x:"any",y:"any"},{col:{hex:getRandomHexColour(),alpha:.5},size:2,strokeWidth:1,strokeCol:{hex:getRandomHexColour(),alpha:.9}}),makeNewChart("actigram"),addDataToGraph(0,{time:"time",values:"values"},{col:{hex:getRandomHexColour(),alpha:.5},showOnsets:!0,centileThresh:80,M:3,N:3,estimate:0}),makeNewChart("periodogram"),addDataToGraph(0,{time:"any",values:"any"},{col:{hex:getRandomHexColour(),alpha:.5}}),set_store_value(activeGraphTab,i=0,i);const S=O=>{try{O.srcElement&&O.srcElement.className.includes("dontclose")||p()}catch{p()}};return document.addEventListener("click",S),()=>{document.removeEventListener("click",S)}});const _=(S,O,M)=>{r(1,O[M].visibleState=!S.visibleState,a),m(S)},y=S=>{a.some(O=>O.visibleState)&&h(S)},D=(S,O,M)=>r(1,O[M].visibleState=!0,a),$=(S,O,M)=>setTimeout(()=>{r(1,O[M].visibleState=!1,a)},50),b=(S,O)=>{S.onClick(),p()},g=()=>{r(0,c=!0)},v=()=>{setTimeout(()=>r(0,c=!1),50)},k=(S,O)=>{S.onClick(),p()},T=S=>switchTheme(S);return e.$$.update=()=>{e.$$.dirty&32&&r(1,a=f(i))},[c,a,m,p,h,i,_,y,D,$,b,g,v,k,T]}class MenuMaster extends SvelteComponent{constructor(t){super(),init(this,t,instance$4,create_fragment$4,safe_not_equal,{})}}const{window:window_1}=globals;function get_each_context(e,t,r){const a=e.slice();return a[9]=t[r],a[11]=r,a}function create_if_block$2(e){let t,r,a,i,o,u=ensure_array_like(e[2].labels),c=[];for(let d=0;d<u.length;d+=1)c[d]=create_each_block(get_each_context(e,u,d));return{c(){t=element("nav"),r=element("div"),a=element("ul");for(let d=0;d<c.length;d+=1)c[d].c();attr(a,"class","svelte-ouzgb9"),attr(r,"class","navbar svelte-ouzgb9"),attr(r,"id","navbar"),set_style(t,"position","absolute"),set_style(t,"top",e[0].y+"px"),set_style(t,"left",e[0].x+"px"),set_style(t,"z-index","999")},m(d,f){insert(d,t,f),append(t,r),append(r,a);for(let m=0;m<c.length;m+=1)c[m]&&c[m].m(a,null);i||(o=action_destroyer(e[4].call(null,t)),i=!0)},p(d,f){if(f&6){u=ensure_array_like(d[2].labels);let m;for(m=0;m<u.length;m+=1){const p=get_each_context(d,u,m);c[m]?c[m].p(p,f):(c[m]=create_each_block(p),c[m].c(),c[m].m(a,null))}for(;m<c.length;m+=1)c[m].d(1);c.length=u.length}f&1&&set_style(t,"top",d[0].y+"px"),f&1&&set_style(t,"left",d[0].x+"px")},d(d){d&&detach(t),destroy_each(c,d),i=!1,o()}}}function create_each_block(e){let t,r,a=e[9]+"",i,o,u,c;function d(...f){return e[6](e[11],...f)}return{c(){t=element("li"),r=element("button"),i=text(a),o=space(),attr(r,"class","svelte-ouzgb9"),attr(t,"class","svelte-ouzgb9")},m(f,m){insert(f,t,m),append(t,r),append(r,i),append(t,o),u||(c=listen(r,"click",d),u=!0)},p(f,m){e=f,m&4&&a!==(a=e[9]+"")&&set_data(i,a)},d(f){f&&detach(t),u=!1,c()}}}function create_fragment$3(e){let t,r,a,i=e[1]&&create_if_block$2(e);return{c(){i&&i.c(),t=empty$1()},m(o,u){i&&i.m(o,u),insert(o,t,u),r||(a=listen(window_1,"click",e[3]),r=!0)},p(o,[u]){o[1]?i?i.p(o,u):(i=create_if_block$2(o),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},i:noop,o:noop,d(o){o&&detach(t),i&&i.d(o),r=!1,a()}}}function instance$3(e,t,r){let a;component_subscribe(e,contextMenu,h=>r(2,a=h));let i={x:0,y:0},o={h:100,w:76},u={h:0,w:0},c;function d(h){h.stopPropagation(),u={w:window.innerWidth,h:window.innerHeight},r(0,i={x:h.clientX,y:h.clientY}),u.h-i.y<o.h&&r(0,i.y=i.y-o.h,i),u.w-i.x<o.w&&r(0,i.x=i.x-o.w,i),r(1,c=!0)}function f(h){try{h.srcElement.className.includes("showContextMenu")?d(h):r(1,c=!1)}catch{r(1,c=!1)}}function m(h){let _=h.offsetHeight,y=h.offsetWidth;o={h:_,w:y}}return[i,c,a,f,m,d,(h,_)=>{a.funcs[h](),r(1,c=!1)}]}class ContextMenu extends SvelteComponent{constructor(t){super(),init(this,t,instance$3,create_fragment$3,safe_not_equal,{rightClickContextMenu:5})}get rightClickContextMenu(){return this.$$.ctx[5]}}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var i=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(r,a,i.get?i:{enumerable:!0,get:function(){return e[a]}})}),r}var papaparse={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(e,t){(function(r,a){e.exports=a()})(commonjsGlobal,function r(){var a=function(){return typeof self<"u"?self:typeof window<"u"?window:typeof a<"u"?a:{}}();function i(){var A=a.URL||a.webkitURL||null,E=r.toString();return f.BLOB_URL||(f.BLOB_URL=A.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",E,")();"],{type:"text/javascript"})))}var o=!a.document&&!!a.postMessage,u=a.IS_PAPA_WORKER||!1,c={},d=0,f={};if(f.parse=p,f.unparse=h,f.RECORD_SEP="",f.UNIT_SEP="",f.BYTE_ORDER_MARK="\uFEFF",f.BAD_DELIMITERS=["\r",`
`,'"',f.BYTE_ORDER_MARK],f.WORKERS_SUPPORTED=!o&&!!a.Worker,f.NODE_STREAM_INPUT=1,f.LocalChunkSize=1024*1024*10,f.RemoteChunkSize=1024*1024*5,f.DefaultDelimiter=",",f.Parser=T,f.ParserHandle=v,f.NetworkStreamer=y,f.FileStreamer=D,f.StringStreamer=$,f.ReadableStreamStreamer=b,typeof PAPA_BROWSER_CONTEXT>"u"&&(f.DuplexStreamStreamer=g),a.jQuery){var m=a.jQuery;m.fn.parse=function(A){var E=A.config||{},L=[];return this.each(function(P){var Y=m(this).prop("tagName").toUpperCase()==="INPUT"&&m(this).attr("type").toLowerCase()==="file"&&a.FileReader;if(!Y||!this.files||this.files.length===0)return!0;for(var z=0;z<this.files.length;z++)L.push({file:this.files[z],inputElem:this,instanceConfig:m.extend({},E)})}),Z(),this;function Z(){if(L.length===0){q(A.complete)&&A.complete();return}var P=L[0];if(q(A.before)){var Y=A.before(P.file,P.inputElem);if(typeof Y=="object")if(Y.action==="abort"){C("AbortError",P.file,P.inputElem,Y.reason);return}else if(Y.action==="skip"){F();return}else typeof Y.config=="object"&&(P.instanceConfig=m.extend(P.instanceConfig,Y.config));else if(Y==="skip"){F();return}}var z=P.instanceConfig.complete;P.instanceConfig.complete=function(U){q(z)&&z(U,P.file,P.inputElem),F()},f.parse(P.file,P.instanceConfig)}function C(P,Y,z,U){q(A.error)&&A.error({name:P},Y,z,U)}function F(){L.splice(0,1),Z()}}}u&&(a.onmessage=w);function p(A,E){E=E||{};var L=E.dynamicTyping||!1;if(q(L)&&(E.dynamicTypingFunction=L,L={}),E.dynamicTyping=L,E.transform=q(E.transform)?E.transform:!1,E.worker&&f.WORKERS_SUPPORTED){var Z=S();Z.userStep=E.step,Z.userChunk=E.chunk,Z.userComplete=E.complete,Z.userError=E.error,E.step=q(E.step),E.chunk=q(E.chunk),E.complete=q(E.complete),E.error=q(E.error),delete E.worker,Z.postMessage({input:A,config:E,workerId:Z.id});return}var C=null;if(A===f.NODE_STREAM_INPUT&&typeof PAPA_BROWSER_CONTEXT>"u")return C=new g(E),C.getStream();return typeof A=="string"?(A=F(A),E.download?C=new y(E):C=new $(E)):A.readable===!0&&q(A.read)&&q(A.on)?C=new b(E):(a.File&&A instanceof File||A instanceof Object)&&(C=new D(E)),C.stream(A);function F(P){return P.charCodeAt(0)===65279?P.slice(1):P}}function h(A,E){var L=!1,Z=!0,C=",",F=`\r
`,P='"',Y=P+P,z=!1,U=null,ie=!1;ue();var X=new RegExp(k(P),"g");if(typeof A=="string"&&(A=JSON.parse(A)),Array.isArray(A)){if(!A.length||Array.isArray(A[0]))return oe(null,A,z);if(typeof A[0]=="object")return oe(U||Object.keys(A[0]),A,z)}else if(typeof A=="object")return typeof A.data=="string"&&(A.data=JSON.parse(A.data)),Array.isArray(A.data)&&(A.fields||(A.fields=A.meta&&A.meta.fields||U),A.fields||(A.fields=Array.isArray(A.data[0])?A.fields:typeof A.data[0]=="object"?Object.keys(A.data[0]):[]),!Array.isArray(A.data[0])&&typeof A.data[0]!="object"&&(A.data=[A.data])),oe(A.fields||[],A.data||[],z);throw new Error("Unable to serialize unrecognized input");function ue(){if(typeof E=="object"){if(typeof E.delimiter=="string"&&!f.BAD_DELIMITERS.filter(function(Q){return E.delimiter.indexOf(Q)!==-1}).length&&(C=E.delimiter),(typeof E.quotes=="boolean"||typeof E.quotes=="function"||Array.isArray(E.quotes))&&(L=E.quotes),(typeof E.skipEmptyLines=="boolean"||typeof E.skipEmptyLines=="string")&&(z=E.skipEmptyLines),typeof E.newline=="string"&&(F=E.newline),typeof E.quoteChar=="string"&&(P=E.quoteChar),typeof E.header=="boolean"&&(Z=E.header),Array.isArray(E.columns)){if(E.columns.length===0)throw new Error("Option columns is empty");U=E.columns}E.escapeChar!==void 0&&(Y=E.escapeChar+P),(typeof E.escapeFormulae=="boolean"||E.escapeFormulae instanceof RegExp)&&(ie=E.escapeFormulae instanceof RegExp?E.escapeFormulae:/^[=+\-@\t\r].*$/)}}function oe(Q,fe,pe){var ce="";typeof Q=="string"&&(Q=JSON.parse(Q)),typeof fe=="string"&&(fe=JSON.parse(fe));var ye=Array.isArray(Q)&&Q.length>0,ae=!Array.isArray(fe[0]);if(ye&&Z){for(var be=0;be<Q.length;be++)be>0&&(ce+=C),ce+=j(Q[be],be);fe.length>0&&(ce+=F)}for(var G=0;G<fe.length;G++){var he=ye?Q.length:fe[G].length,we=!1,se=ye?Object.keys(fe[G]).length===0:fe[G].length===0;if(pe&&!ye&&(we=pe==="greedy"?fe[G].join("").trim()==="":fe[G].length===1&&fe[G][0].length===0),pe==="greedy"&&ye){for(var ee=[],me=0;me<he;me++){var Te=ae?Q[me]:me;ee.push(fe[G][Te])}we=ee.join("").trim()===""}if(!we){for(var ge=0;ge<he;ge++){ge>0&&!se&&(ce+=C);var ne=ye&&ae?Q[ge]:ge;ce+=j(fe[G][ne],ge)}G<fe.length-1&&(!pe||he>0&&!se)&&(ce+=F)}}return ce}function j(Q,fe){if(typeof Q>"u"||Q===null)return"";if(Q.constructor===Date)return JSON.stringify(Q).slice(1,25);var pe=!1;ie&&typeof Q=="string"&&ie.test(Q)&&(Q="'"+Q,pe=!0);var ce=Q.toString().replace(X,Y);return pe=pe||L===!0||typeof L=="function"&&L(Q,fe)||Array.isArray(L)&&L[fe]||_e(ce,f.BAD_DELIMITERS)||ce.indexOf(C)>-1||ce.charAt(0)===" "||ce.charAt(ce.length-1)===" ",pe?P+ce+P:ce}function _e(Q,fe){for(var pe=0;pe<fe.length;pe++)if(Q.indexOf(fe[pe])>-1)return!0;return!1}}function _(A){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},E.call(this,A),this.parseChunk=function(L,Z){if(this.isFirstChunk&&q(this._config.beforeFirstChunk)){var C=this._config.beforeFirstChunk(L);C!==void 0&&(L=C)}this.isFirstChunk=!1,this._halted=!1;var F=this._partialLine+L;this._partialLine="";var P=this._handle.parse(F,this._baseIndex,!this._finished);if(this._handle.paused()||this._handle.aborted()){this._halted=!0;return}var Y=P.meta.cursor;this._finished||(this._partialLine=F.substring(Y-this._baseIndex),this._baseIndex=Y),P&&P.data&&(this._rowCount+=P.data.length);var z=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(u)a.postMessage({results:P,workerId:f.WORKER_ID,finished:z});else if(q(this._config.chunk)&&!Z){if(this._config.chunk(P,this._handle),this._handle.paused()||this._handle.aborted()){this._halted=!0;return}P=void 0,this._completeResults=void 0}return!this._config.step&&!this._config.chunk&&(this._completeResults.data=this._completeResults.data.concat(P.data),this._completeResults.errors=this._completeResults.errors.concat(P.errors),this._completeResults.meta=P.meta),!this._completed&&z&&q(this._config.complete)&&(!P||!P.meta.aborted)&&(this._config.complete(this._completeResults,this._input),this._completed=!0),!z&&(!P||!P.meta.paused)&&this._nextChunk(),P},this._sendError=function(L){q(this._config.error)?this._config.error(L):u&&this._config.error&&a.postMessage({workerId:f.WORKER_ID,error:L,finished:!1})};function E(L){var Z=I(L);Z.chunkSize=parseInt(Z.chunkSize),!L.step&&!L.chunk&&(Z.chunkSize=null),this._handle=new v(Z),this._handle.streamer=this,this._config=Z}}function y(A){A=A||{},A.chunkSize||(A.chunkSize=f.RemoteChunkSize),_.call(this,A);var E;o?this._nextChunk=function(){this._readChunk(),this._chunkLoaded()}:this._nextChunk=function(){this._readChunk()},this.stream=function(Z){this._input=Z,this._nextChunk()},this._readChunk=function(){if(this._finished){this._chunkLoaded();return}if(E=new XMLHttpRequest,this._config.withCredentials&&(E.withCredentials=this._config.withCredentials),o||(E.onload=H(this._chunkLoaded,this),E.onerror=H(this._chunkError,this)),E.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var Z=this._config.downloadRequestHeaders;for(var C in Z)E.setRequestHeader(C,Z[C])}if(this._config.chunkSize){var F=this._start+this._config.chunkSize-1;E.setRequestHeader("Range","bytes="+this._start+"-"+F)}try{E.send(this._config.downloadRequestBody)}catch(P){this._chunkError(P.message)}o&&E.status===0&&this._chunkError()},this._chunkLoaded=function(){if(E.readyState===4){if(E.status<200||E.status>=400){this._chunkError();return}this._start+=this._config.chunkSize?this._config.chunkSize:E.responseText.length,this._finished=!this._config.chunkSize||this._start>=L(E),this.parseChunk(E.responseText)}},this._chunkError=function(Z){var C=E.statusText||Z;this._sendError(new Error(C))};function L(Z){var C=Z.getResponseHeader("Content-Range");return C===null?-1:parseInt(C.substring(C.lastIndexOf("/")+1))}}y.prototype=Object.create(_.prototype),y.prototype.constructor=y;function D(A){A=A||{},A.chunkSize||(A.chunkSize=f.LocalChunkSize),_.call(this,A);var E,L,Z=typeof FileReader<"u";this.stream=function(C){this._input=C,L=C.slice||C.webkitSlice||C.mozSlice,Z?(E=new FileReader,E.onload=H(this._chunkLoaded,this),E.onerror=H(this._chunkError,this)):E=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){!this._finished&&(!this._config.preview||this._rowCount<this._config.preview)&&this._readChunk()},this._readChunk=function(){var C=this._input;if(this._config.chunkSize){var F=Math.min(this._start+this._config.chunkSize,this._input.size);C=L.call(C,this._start,F)}var P=E.readAsText(C,this._config.encoding);Z||this._chunkLoaded({target:{result:P}})},this._chunkLoaded=function(C){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(C.target.result)},this._chunkError=function(){this._sendError(E.error)}}D.prototype=Object.create(_.prototype),D.prototype.constructor=D;function $(A){A=A||{},_.call(this,A);var E;this.stream=function(L){return E=L,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var L=this._config.chunkSize,Z;return L?(Z=E.substring(0,L),E=E.substring(L)):(Z=E,E=""),this._finished=!E,this.parseChunk(Z)}}}$.prototype=Object.create($.prototype),$.prototype.constructor=$;function b(A){A=A||{},_.call(this,A);var E=[],L=!0,Z=!1;this.pause=function(){_.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){_.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(C){this._input=C,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){Z&&E.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),E.length?this.parseChunk(E.shift()):L=!0},this._streamData=H(function(C){try{E.push(typeof C=="string"?C:C.toString(this._config.encoding)),L&&(L=!1,this._checkIsFinished(),this.parseChunk(E.shift()))}catch(F){this._streamError(F)}},this),this._streamError=H(function(C){this._streamCleanUp(),this._sendError(C)},this),this._streamEnd=H(function(){this._streamCleanUp(),Z=!0,this._streamData("")},this),this._streamCleanUp=H(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}b.prototype=Object.create(_.prototype),b.prototype.constructor=b;function g(A){var E=require$$0.Duplex,L=I(A),Z=!0,C=!1,F=[],P=null;this._onCsvData=function(Y){var z=Y.data;!P.push(z)&&!this._handle.paused()&&this._handle.pause()},this._onCsvComplete=function(){P.push(null)},L.step=H(this._onCsvData,this),L.complete=H(this._onCsvComplete,this),_.call(this,L),this._nextChunk=function(){C&&F.length===1&&(this._finished=!0),F.length?F.shift()():Z=!0},this._addToParseQueue=function(Y,z){F.push(H(function(){if(this.parseChunk(typeof Y=="string"?Y:Y.toString(L.encoding)),q(z))return z()},this)),Z&&(Z=!1,this._nextChunk())},this._onRead=function(){this._handle.paused()&&this._handle.resume()},this._onWrite=function(Y,z,U){this._addToParseQueue(Y,U)},this._onWriteComplete=function(){C=!0,this._addToParseQueue("")},this.getStream=function(){return P},P=new E({readableObjectMode:!0,decodeStrings:!1,read:H(this._onRead,this),write:H(this._onWrite,this)}),P.once("finish",H(this._onWriteComplete,this))}typeof PAPA_BROWSER_CONTEXT>"u"&&(g.prototype=Object.create(_.prototype),g.prototype.constructor=g);function v(A){var E=Math.pow(2,53),L=-E,Z=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,C=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,F=this,P=0,Y=0,z,U,ie=!1,X=!1,ue,oe=[],j={data:[],errors:[],meta:{}};if(q(A.step)){var _e=A.step;A.step=function(ee){if(j=ee,ce())pe();else{if(pe(),j.data.length===0)return;P+=ee.data.length,A.preview&&P>A.preview?U.abort():(j.data=j.data[0],_e(j,F))}}}this.parse=function(ee,me,Te){var ge=A.quoteChar||'"';if(A.newline||(A.newline=we(ee,ge)),ue=!1,A.delimiter)q(A.delimiter)&&(A.delimiter=A.delimiter(ee),j.meta.delimiter=A.delimiter);else{var ne=he(ee,A.newline,A.skipEmptyLines,A.comments,A.delimitersToGuess);ne.successful?A.delimiter=ne.bestDelimiter:(ue=!0,A.delimiter=f.DefaultDelimiter),j.meta.delimiter=A.delimiter}var ve=I(A);return A.preview&&A.header&&ve.preview++,z=ee,U=new T(ve),j=U.parse(z,me,Te),pe(),ie?{meta:{paused:!0}}:j||{meta:{paused:!1}}},this.paused=function(){return ie},this.pause=function(){ie=!0,U.abort(),z=q(A.chunk)?"":z.substring(U.getCharIndex())},this.resume=function(){F.streamer._halted?(ie=!1,F.streamer.parseChunk(z,!0)):setTimeout(F.resume,3)},this.aborted=function(){return X},this.abort=function(){X=!0,U.abort(),j.meta.aborted=!0,q(A.complete)&&A.complete(j),z=""};function Q(ee){return A.skipEmptyLines==="greedy"?ee.join("").trim()==="":ee.length===1&&ee[0].length===0}function fe(ee){if(Z.test(ee)){var me=parseFloat(ee);if(me>L&&me<E)return!0}return!1}function pe(){return j&&ue&&(se("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+f.DefaultDelimiter+"'"),ue=!1),A.skipEmptyLines&&(j.data=j.data.filter(function(ee){return!Q(ee)})),ce()&&ye(),G()}function ce(){return A.header&&oe.length===0}function ye(){if(!j)return;function ee(Te,ge){q(A.transformHeader)&&(Te=A.transformHeader(Te,ge)),oe.push(Te)}if(Array.isArray(j.data[0])){for(var me=0;ce()&&me<j.data.length;me++)j.data[me].forEach(ee);j.data.splice(0,1)}else j.data.forEach(ee)}function ae(ee){return A.dynamicTypingFunction&&A.dynamicTyping[ee]===void 0&&(A.dynamicTyping[ee]=A.dynamicTypingFunction(ee)),(A.dynamicTyping[ee]||A.dynamicTyping)===!0}function be(ee,me){return ae(ee)?me==="true"||me==="TRUE"?!0:me==="false"||me==="FALSE"?!1:fe(me)?parseFloat(me):C.test(me)?new Date(me):me===""?null:me:me}function G(){if(!j||!A.header&&!A.dynamicTyping&&!A.transform)return j;function ee(Te,ge){var ne=A.header?{}:[],ve;for(ve=0;ve<Te.length;ve++){var B=ve,R=Te[ve];A.header&&(B=ve>=oe.length?"__parsed_extra":oe[ve]),A.transform&&(R=A.transform(R,B)),R=be(B,R),B==="__parsed_extra"?(ne[B]=ne[B]||[],ne[B].push(R)):ne[B]=R}return A.header&&(ve>oe.length?se("FieldMismatch","TooManyFields","Too many fields: expected "+oe.length+" fields but parsed "+ve,Y+ge):ve<oe.length&&se("FieldMismatch","TooFewFields","Too few fields: expected "+oe.length+" fields but parsed "+ve,Y+ge)),ne}var me=1;return!j.data.length||Array.isArray(j.data[0])?(j.data=j.data.map(ee),me=j.data.length):j.data=ee(j.data,0),A.header&&j.meta&&(j.meta.fields=oe),Y+=me,j}function he(ee,me,Te,ge,ne){var ve,B,R,V;ne=ne||[",","	","|",";",f.RECORD_SEP,f.UNIT_SEP];for(var J=0;J<ne.length;J++){var x=ne[J],de=0,W=0,K=0;R=void 0;for(var te=new T({comments:ge,delimiter:x,newline:me,preview:10}).parse(ee),le=0;le<te.data.length;le++){if(Te&&Q(te.data[le])){K++;continue}var ke=te.data[le].length;if(W+=ke,typeof R>"u"){R=ke;continue}else ke>0&&(de+=Math.abs(ke-R),R=ke)}te.data.length>0&&(W/=te.data.length-K),(typeof B>"u"||de<=B)&&(typeof V>"u"||W>V)&&W>1.99&&(B=de,ve=x,V=W)}return A.delimiter=ve,{successful:!!ve,bestDelimiter:ve}}function we(ee,me){ee=ee.substring(0,1024*1024);var Te=new RegExp(k(me)+"([^]*?)"+k(me),"gm");ee=ee.replace(Te,"");var ge=ee.split("\r"),ne=ee.split(`
`),ve=ne.length>1&&ne[0].length<ge[0].length;if(ge.length===1||ve)return`
`;for(var B=0,R=0;R<ge.length;R++)ge[R][0]===`
`&&B++;return B>=ge.length/2?`\r
`:"\r"}function se(ee,me,Te,ge){var ne={type:ee,code:me,message:Te};ge!==void 0&&(ne.row=ge),j.errors.push(ne)}}function k(A){return A.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function T(A){A=A||{};var E=A.delimiter,L=A.newline,Z=A.comments,C=A.step,F=A.preview,P=A.fastMode,Y;A.quoteChar===void 0||A.quoteChar===null?Y='"':Y=A.quoteChar;var z=Y;if(A.escapeChar!==void 0&&(z=A.escapeChar),(typeof E!="string"||f.BAD_DELIMITERS.indexOf(E)>-1)&&(E=","),Z===E)throw new Error("Comment character same as delimiter");Z===!0?Z="#":(typeof Z!="string"||f.BAD_DELIMITERS.indexOf(Z)>-1)&&(Z=!1),L!==`
`&&L!=="\r"&&L!==`\r
`&&(L=`
`);var U=0,ie=!1;this.parse=function(X,ue,oe){if(typeof X!="string")throw new Error("Input must be a string");var j=X.length,_e=E.length,Q=L.length,fe=Z.length,pe=q(C);U=0;var ce=[],ye=[],ae=[],be=0;if(!X)return Se();if(A.header&&!ue){var G=X.split(L)[0],he=G.split(E),we="_",se=[],ee={},me=!1;for(var Te in he){var ge=he[Te];q(A.transformHeader)&&(ge=A.transformHeader(ge,Te));var ne=ge,ve=ee[ge]||0;for(ve>0&&(me=!0,ne=ge+we+ve),ee[ge]=ve+1;se.includes(ne);)ne=ne+we+ve;se.push(ne)}if(me){var B=X.split(L);B[0]=se.join(E),X=B.join(L)}}if(P||P!==!1&&X.indexOf(Y)===-1){for(var R=X.split(L),V=0;V<R.length;V++){if(ae=R[V],U+=ae.length,V!==R.length-1)U+=L.length;else if(oe)return Se();if(!(Z&&ae.substring(0,fe)===Z)){if(pe){if(ce=[],$e(ae.split(E)),Ee(),ie)return Se()}else $e(ae.split(E));if(F&&V>=F)return ce=ce.slice(0,F),Se(!0)}}return Se()}for(var J=X.indexOf(E,U),x=X.indexOf(L,U),de=new RegExp(k(z)+k(Y),"g"),W=X.indexOf(Y,U);;){if(X[U]===Y){for(W=U,U++;;){if(W=X.indexOf(Y,W+1),W===-1)return oe||ye.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ce.length,index:U}),De();if(W===j-1){var K=X.substring(U,W).replace(de,Y);return De(K)}if(Y===z&&X[W+1]===z){W++;continue}if(!(Y!==z&&W!==0&&X[W-1]===z)){J!==-1&&J<W+1&&(J=X.indexOf(E,W+1)),x!==-1&&x<W+1&&(x=X.indexOf(L,W+1));var te=x===-1?J:Math.min(J,x),le=Me(te);if(X.substr(W+1+le,_e)===E){ae.push(X.substring(U,W).replace(de,Y)),U=W+1+le+_e,X[W+1+le+_e]!==Y&&(W=X.indexOf(Y,U)),J=X.indexOf(E,U),x=X.indexOf(L,U);break}var ke=Me(x);if(X.substring(W+1+ke,W+1+ke+Q)===L){if(ae.push(X.substring(U,W).replace(de,Y)),Oe(W+1+ke+Q),J=X.indexOf(E,U),W=X.indexOf(Y,U),pe&&(Ee(),ie))return Se();if(F&&ce.length>=F)return Se(!0);break}ye.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ce.length,index:U}),W++}}continue}if(Z&&ae.length===0&&X.substring(U,U+fe)===Z){if(x===-1)return Se();U=x+Q,x=X.indexOf(L,U),J=X.indexOf(E,U);continue}if(J!==-1&&(J<x||x===-1)){ae.push(X.substring(U,J)),U=J+_e,J=X.indexOf(E,U);continue}if(x!==-1){if(ae.push(X.substring(U,x)),Oe(x+Q),pe&&(Ee(),ie))return Se();if(F&&ce.length>=F)return Se(!0);continue}break}return De();function $e(Ae){ce.push(Ae),be=U}function Me(Ae){var Ie=0;if(Ae!==-1){var Fe=X.substring(W+1,Ae);Fe&&Fe.trim()===""&&(Ie=Fe.length)}return Ie}function De(Ae){return oe||(typeof Ae>"u"&&(Ae=X.substring(U)),ae.push(Ae),U=j,$e(ae),pe&&Ee()),Se()}function Oe(Ae){U=Ae,$e(ae),ae=[],x=X.indexOf(L,U)}function Se(Ae){return{data:ce,errors:ye,meta:{delimiter:E,linebreak:L,aborted:ie,truncated:!!Ae,cursor:be+(ue||0)}}}function Ee(){C(Se()),ce=[],ye=[]}},this.abort=function(){ie=!0},this.getCharIndex=function(){return U}}function S(){if(!f.WORKERS_SUPPORTED)return!1;var A=i(),E=new a.Worker(A);return E.onmessage=O,E.id=d++,c[E.id]=E,E}function O(A){var E=A.data,L=c[E.workerId],Z=!1;if(E.error)L.userError(E.error,E.file);else if(E.results&&E.results.data){var C=function(){Z=!0,M(E.workerId,{data:[],errors:[],meta:{aborted:!0}})},F={abort:C,pause:N,resume:N};if(q(L.userStep)){for(var P=0;P<E.results.data.length&&(L.userStep({data:E.results.data[P],errors:E.results.errors,meta:E.results.meta},F),!Z);P++);delete E.results}else q(L.userChunk)&&(L.userChunk(E.results,F,E.file),delete E.results)}E.finished&&!Z&&M(E.workerId,E.results)}function M(A,E){var L=c[A];q(L.userComplete)&&L.userComplete(E),L.terminate(),delete c[A]}function N(){throw new Error("Not implemented.")}function w(A){var E=A.data;if(typeof f.WORKER_ID>"u"&&E&&(f.WORKER_ID=E.workerId),typeof E.input=="string")a.postMessage({workerId:f.WORKER_ID,results:f.parse(E.input,E.config),finished:!0});else if(a.File&&E.input instanceof File||E.input instanceof Object){var L=f.parse(E.input,E.config);L&&a.postMessage({workerId:f.WORKER_ID,results:L,finished:!0})}}function I(A){if(typeof A!="object"||A===null)return A;var E=Array.isArray(A)?[]:{};for(var L in A)E[L]=I(A[L]);return E}function H(A,E){return function(){A.apply(E,arguments)}}function q(A){return typeof A=="function"}return f})})(papaparse);var papaparseExports=papaparse.exports;const Papa=getDefaultExportFromCjs(papaparseExports);function create_if_block$1(e){let t,r;return t=new Dialog({props:{title:"IMPORT DATA",$$slots:{default:[create_default_slot$2]},$$scope:{ctx:e}}}),{c(){create_component(t.$$.fragment)},m(a,i){mount_component(t,a,i),r=!0},p(a,i){const o={};i[0]&119|i[1]&1&&(o.$$scope={dirty:i,ctx:a}),t.$set(o)},i(a){r||(transition_in(t.$$.fragment,a),r=!0)},o(a){transition_out(t.$$.fragment,a),r=!1},d(a){destroy_component(t,a)}}}function create_if_block_4(e){let t,r,a,i,o,u,c,d,f;return{c(){t=element("button"),t.textContent="Choose file",r=space(),a=element("lable"),a.textContent="Skip lines:",i=element("input"),o=space(),u=element("lable"),u.textContent="Header:",c=element("input"),attr(i,"type","number"),attr(i,"class","svelte-hoz60g"),attr(c,"type","checkbox"),attr(c,"label","headers")},m(m,p){insert(m,t,p),insert(m,r,p),insert(m,a,p),insert(m,i,p),set_input_value(i,e[1]),insert(m,o,p),insert(m,u,p),insert(m,c,p),c.checked=e[2],d||(f=[listen(t,"click",e[7]),listen(i,"input",e[12]),listen(c,"change",e[13])],d=!0)},p(m,p){p[0]&2&&to_number(i.value)!==m[1]&&set_input_value(i,m[1]),p[0]&4&&(c.checked=m[2])},d(m){m&&(detach(t),detach(r),detach(a),detach(i),detach(o),detach(u),detach(c)),d=!1,run_all(f)}}}function create_if_block_3(e){let t,r=JSON.stringify(e[5])+"",a;return{c(){t=element("div"),a=text(r),attr(t,"class","error")},m(i,o){insert(i,t,o),append(t,a)},p(i,o){o[0]&32&&r!==(r=JSON.stringify(i[5])+"")&&set_data(a,r)},d(i){i&&detach(t)}}}function create_if_block_2(e){let t,r=e[0][0].name+"",a,i,o,u,c,d,f,m,p,h,_,y,D,$,b,g=e[10](e[4])+"",v,k,T,S,O,M;return{c(){t=element("p"),a=text(r),i=space(),o=element("button"),o.textContent="Change file",u=space(),c=element("label"),c.textContent="Header:",d=element("input"),f=space(),m=element("label"),m.textContent="Skip lines:",p=element("input"),h=space(),_=element("p"),_.textContent="Preview of the data:",y=space(),D=element("hr"),$=space(),b=element("p"),v=space(),k=element("hr"),T=space(),S=element("button"),S.textContent="Import",attr(d,"type","checkbox"),attr(d,"label","headers"),attr(p,"type","number"),attr(p,"class","svelte-hoz60g")},m(N,w){insert(N,t,w),append(t,a),insert(N,i,w),insert(N,o,w),insert(N,u,w),insert(N,c,w),insert(N,d,w),d.checked=e[2],insert(N,f,w),insert(N,m,w),insert(N,p,w),set_input_value(p,e[1]),insert(N,h,w),insert(N,_,w),insert(N,y,w),insert(N,D,w),insert(N,$,w),insert(N,b,w),b.innerHTML=g,insert(N,v,w),insert(N,k,w),insert(N,T,w),insert(N,S,w),O||(M=[listen(o,"click",e[7]),listen(d,"change",e[18]),listen(d,"change",e[19]),listen(p,"input",e[20]),listen(p,"input",e[21]),listen(S,"click",e[9])],O=!0)},p(N,w){w[0]&1&&r!==(r=N[0][0].name+"")&&set_data(a,r),w[0]&4&&(d.checked=N[2]),w[0]&2&&to_number(p.value)!==N[1]&&set_input_value(p,N[1]),w[0]&16&&g!==(g=N[10](N[4])+"")&&(b.innerHTML=g)},d(N){N&&(detach(t),detach(i),detach(o),detach(u),detach(c),detach(d),detach(f),detach(m),detach(p),detach(h),detach(_),detach(y),detach(D),detach($),detach(b),detach(v),detach(k),detach(T),detach(S)),O=!1,run_all(M)}}}function create_if_block_1(e){let t,r=e[0][0].name+"",a,i,o,u,c,d,f,m,p,h,_,y,D,$,b,g,v;return{c(){t=element("p"),a=text(r),i=space(),o=element("button"),o.textContent="Change file",u=space(),c=element("label"),c.textContent="Header:",d=element("input"),f=space(),m=element("label"),m.textContent="Skip lines:",p=element("input"),h=space(),_=element("hr"),y=space(),D=element("p"),D.textContent="There was an error reading the file.",$=space(),b=element("hr"),attr(d,"type","checkbox"),attr(d,"label","headers"),attr(p,"type","number"),attr(p,"class","svelte-hoz60g")},m(k,T){insert(k,t,T),append(t,a),insert(k,i,T),insert(k,o,T),insert(k,u,T),insert(k,c,T),insert(k,d,T),d.checked=e[2],insert(k,f,T),insert(k,m,T),insert(k,p,T),set_input_value(p,e[1]),insert(k,h,T),insert(k,_,T),insert(k,y,T),insert(k,D,T),insert(k,$,T),insert(k,b,T),g||(v=[listen(o,"click",e[7]),listen(d,"change",e[14]),listen(d,"change",e[15]),listen(p,"input",e[16]),listen(p,"input",e[17])],g=!0)},p(k,T){T[0]&1&&r!==(r=k[0][0].name+"")&&set_data(a,r),T[0]&4&&(d.checked=k[2]),T[0]&2&&to_number(p.value)!==k[1]&&set_input_value(p,k[1])},d(k){k&&(detach(t),detach(i),detach(o),detach(u),detach(c),detach(d),detach(f),detach(m),detach(p),detach(h),detach(_),detach(y),detach(D),detach($),detach(b)),g=!1,run_all(v)}}}function create_default_slot$2(e){let t,r,a=Object.keys(e[4]).length===0,i,o=Object.keys(e[5]).length,u,c,d,f,m,p=a&&create_if_block_4(e),h=o&&create_if_block_3(e);function _($,b){if(b[0]&16&&(c=null),$[6])return create_if_block_1;if(c==null&&(c=!!Object.keys($[4]).length),c)return create_if_block_2}let y=_(e,[-1,-1]),D=y&&y(e);return{c(){t=element("input"),r=space(),p&&p.c(),i=space(),h&&h.c(),u=space(),D&&D.c(),d=empty$1(),attr(t,"type","file"),attr(t,"id","fileInput"),attr(t,"accept",".csv, .txt, .TXT"),set_style(t,"display","none")},m($,b){insert($,t,b),insert($,r,b),p&&p.m($,b),insert($,i,b),h&&h.m($,b),insert($,u,b),D&&D.m($,b),insert($,d,b),f||(m=listen(t,"change",e[11]),f=!0)},p($,b){b[0]&16&&(a=Object.keys($[4]).length===0),a?p?p.p($,b):(p=create_if_block_4($),p.c(),p.m(i.parentNode,i)):p&&(p.d(1),p=null),b[0]&32&&(o=Object.keys($[5]).length),o?h?h.p($,b):(h=create_if_block_3($),h.c(),h.m(u.parentNode,u)):h&&(h.d(1),h=null),y===(y=_($,b))&&D?D.p($,b):(D&&D.d(1),D=y&&y($),D&&(D.c(),D.m(d.parentNode,d)))},d($){$&&(detach(t),detach(r),detach(i),detach(u),detach(d)),p&&p.d($),h&&h.d($),D&&D.d($),f=!1,m()}}}function create_fragment$2(e){let t,r,a=e[3]==="import"&&create_if_block$1(e);return{c(){a&&a.c(),t=empty$1()},m(i,o){a&&a.m(i,o),insert(i,t,o),r=!0},p(i,o){i[3]==="import"?a?(a.p(i,o),o[0]&8&&transition_in(a,1)):(a=create_if_block$1(i),a.c(),transition_in(a,1),a.m(t.parentNode,t)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(i){r||(transition_in(a),r=!0)},o(i){transition_out(a),r=!1},d(i){i&&detach(t),a&&a.d(i)}}}const previewTableNrows=6;function changeObjectKeys(e,t){console.log(e);const r={};return Object.keys(e).forEach((a,i)=>{const o=t[i]||a;e[a].splice(0,1),r[o]=e[a]}),r}function instance$2(e,t,r){let a,i;component_subscribe(e,data,C=>r(24,a=C)),component_subscribe(e,menuModalType,C=>r(3,i=C));const o=["NaN","NA","null"];let u,c={},d={},f=0,m=!0,p=!1,h=!1,_=!1;async function y(){r(4,c={}),r(5,d={}),r(2,m=!0),p=!1,r(6,h=!1),_=!1,await tick(),document.getElementById("fileInput").click()}function D(C=0){return r(6,h=!1),new Promise(F=>{console.log("doing papa previewIN= "+C+", useHeaders= "+m),Papa.parse(u[0],{preview:C,header:m,dynamicTyping:!0,skipEmptyLines:"greedy",error(P,Y,z,U){console.log("Error: "+P+" | "+U),r(4,c={}),r(5,d={err:P,reason:U}),F()},beforeFirstChunk:P=>{var U;const Y=P.split(/\r\n|\r|\n/);return console.log(Y),(U=(f?Y.splice(0,f):Y[0].split(/[,;\t]/))[0])!=null&&U.includes("Actiware Export File")&&!_&&(console.log("ACTIWARE"),_="actiware",r(1,f=148),D(f+C+1)),Y.join(`
`)},complete(P,Y){console.log("Parsing complete:",P,Y),console.log(P),P.errors.length>0&&r(6,h=!0),$(P.data),F()}})})}function $(C){if(console.log("DEALING WITH DATA..."),console.log(C),r(4,c=b(C)),_==="actiware"){r(4,c.DateTime=[],c);for(let F=0;F<c.Date.length;F++)c.DateTime.push(c.Date[F]+" "+c.Time[F].replace(/\b([ap])\.m\./gi,(P,Y)=>Y.toUpperCase()+"M"))}console.log(c)}function b(C){try{let F={};return C.forEach(P=>{Object.keys(P).forEach(Y=>{F[Y]||(F[Y]=[]),F[Y].push(P[Y])})}),p&&m&&(F=changeObjectKeys(F,C[0])),F}catch(F){return console.error("Error converting array to object:",F),{}}}async function g(){console.log("loading..."),await D(0),console.log(c),v(c,u[0].name),set_store_value(menuModalType,i="",i)}function v(C,F){console.log(C),console.log(F);let P={id:k(),importedFrom:F,displayName:"data_"+k(),datalength:NaN,data:{}};P.datalength=C[Object.keys(C)[0]].length,Object.keys(C).forEach(Y=>{const z=T(C[Y]);if(console.log(z+" : "+guessDateofArray([z])),guessDateofArray([z])!=-1){const U=guessDateofArray([z]);console.log("guessedformat = "+U),P.data[Y]={name:Y,type:"time",data:C[Y],timeFormat:U,timeData:forceFormat(C[Y],U),recordPeriod:getPeriod(z,U),processSteps:[],processedData:[]}}else isNaN(z)?P.data[Y]={name:Y,type:"category",data:C[Y],processSteps:[],processedData:[]}:P.data[Y]={name:Y,type:"value",data:C[Y],processSteps:[],processedData:[]}}),console.log(P),a.push(P),data.set(a)}function k(){if(a.length===0)return 0;let C=[];return a.forEach(F=>C.push(F.id)),Math.max(...C)+1}function T(C){for(const F of C)if(F!==null&&F!==""&&!o.includes(F))return F;return null}function S(C){if(Object.keys(C).length===0)return"There was an error reading the file "+u[0].name;let F="<table><thead><tr>";Object.keys(C).forEach(P=>F+=`<th>${P}</th>`),F+="</tr></thead><tbody>";for(let P=0;P<previewTableNrows;P++){F+="<tr>";for(let Y=0;Y<Object.keys(C).length;Y++)F+=`<td>${C[Object.keys(C)[Y]][P]}</td>`;F+="</tr>"}return F+="</tbody></table>",F}function O(){u=this.files,r(0,u)}function M(){f=to_number(this.value),r(1,f)}function N(){m=this.checked,r(2,m)}function w(){m=this.checked,r(2,m)}const I=()=>D(f+previewTableNrows+m);function H(){f=to_number(this.value),r(1,f)}const q=()=>D(f+previewTableNrows+m);function A(){m=this.checked,r(2,m)}const E=()=>D(f+previewTableNrows+m);function L(){f=to_number(this.value),r(1,f)}const Z=()=>D(f+previewTableNrows+m);return e.$$.update=()=>{e.$$.dirty[0]&8&&i==="import"&&y(),e.$$.dirty[0]&7&&u&&D(f+previewTableNrows+m)},[u,f,m,i,c,d,h,y,D,g,S,O,M,N,w,I,H,q,A,E,L,Z]}class ImportData extends SvelteComponent{constructor(t){super(),init(this,t,instance$2,create_fragment$2,safe_not_equal,{},null,[-1,-1])}}const version="2.27";function create_if_block(e){let t,r;return t=new Dialog({props:{title:"ABOUT AnCiR",$$slots:{default:[create_default_slot$1]},$$scope:{ctx:e}}}),{c(){create_component(t.$$.fragment)},m(a,i){mount_component(t,a,i),r=!0},i(a){r||(transition_in(t.$$.fragment,a),r=!0)},o(a){transition_out(t.$$.fragment,a),r=!1},d(a){destroy_component(t,a)}}}function create_default_slot$1(e){let t,r,a,i,o,u,c,d,f,m,p,h,_,y,D,$,b,g,v,k,T,S,O,M,N;return{c(){t=element("h3"),t.textContent="Analysis of Circadian Rhythms (AnCiR)",r=space(),a=element("p"),a.textContent=`This is our 'AnCiR' to the need for a simple-to-use (GUI; no coding) tool
      for analysis of circadian rhythms. Currently, the tool only allows for
      import of csv data and plotting of actigrams.`,i=space(),o=element("p"),o.innerHTML=`This is written in Svelte, using D3, with help from <a href="https://github.com/korur">@korur</a>
      and <a href="https://github.com/khromov">@khromov</a> - thank you!`,u=space(),c=element("h4"),c.textContent="For users",d=space(),f=element("p"),f.innerHTML=`AnCiR should start with some sample data already in the <strong>Data</strong> section on the left hand side. If you want to generate more sample data,
      just click on _Data_&gt;_Create_ and a new Sample set should appear. Similarly,
      if you have your own .csv file, then you can import it and it should show up
      in the list.`,m=space(),p=element("p"),p.textContent=`Clicking on the name of the data table should display the contents in the
      bottom viewer, so you can see what the data look like.`,h=space(),_=element("p"),_.textContent=`To create an actigram, click on _Plot_>_Actigram_. You can change the data
      that is used by using the dropdown lists under _Data for this plot_ on the
      right hand panel. You can add multiple data sources and change their
      colours. To see the post-processed data useed in the plot, click on the
      hyperlinked data for each source and see it appear in the data tabs below.`,y=space(),D=element("p"),D.textContent="The other controls for the actigram should be self-explanatory.",$=space(),b=element("p"),b.textContent=`The Periodogram plot is what it says it is, and raw is just a plot of the
      data - with similar controls to the actigram.`,g=space(),v=element("p"),v.textContent="Have fun.",k=space(),T=element("h4"),T.textContent="For developers",S=space(),O=element("p"),O.innerHTML='Any advice or offers of support will be welcommed - email <a href="mailto:d.cumin@auckland.ac.nz?subject=AnCiR">d.cumin@auckland.ac.nz</a>',M=text(`

    The following packages code was used in this project:
    `),N=element("ul"),N.innerHTML=`<li><a href="https://svelte.dev/">Svelte</a> is used as the framework/library/compiler
        of the code.</li> <li><a href="https://d3js.org/">D3</a> is used for plotting.</li> <li><a href="https://www.papaparse.com/">Papaparse</a> is used for importing
        the data.</li> <li><a href="https://svelte.dev/repl/79d35c3691cf4ed0924e7e98dc9af55e?version=4.2.8">In-place editing</a> for updating items.</li> <li><a href="https://www.npmjs.com/package/moment-guess">Moment-guess</a>
        was adapted to guess the time format of data.</li> <li><a href="https://svelte.dev/repl/dd6754a2ad0547c5b1c1ea37c0293fef?version=4.2.10">Tooltip</a> was adapted for this project.</li> <li><a href="https://github.com/EmilTholin/svelte-spinner/">Spinner</a> was taken
        to use for the spinner.</li> <li><a href="https://www.npmjs.com/package/luxon">Luxon</a> is used for date
        manipulation and caluclations.</li>`},m(w,I){insert(w,t,I),insert(w,r,I),insert(w,a,I),insert(w,i,I),insert(w,o,I),insert(w,u,I),insert(w,c,I),insert(w,d,I),insert(w,f,I),insert(w,m,I),insert(w,p,I),insert(w,h,I),insert(w,_,I),insert(w,y,I),insert(w,D,I),insert(w,$,I),insert(w,b,I),insert(w,g,I),insert(w,v,I),insert(w,k,I),insert(w,T,I),insert(w,S,I),insert(w,O,I),insert(w,M,I),insert(w,N,I)},p:noop,d(w){w&&(detach(t),detach(r),detach(a),detach(i),detach(o),detach(u),detach(c),detach(d),detach(f),detach(m),detach(p),detach(h),detach(_),detach(y),detach(D),detach($),detach(b),detach(g),detach(v),detach(k),detach(T),detach(S),detach(O),detach(M),detach(N))}}}function create_fragment$1(e){let t,r,a=e[0]==="about"&&create_if_block(e);return{c(){a&&a.c(),t=empty$1()},m(i,o){a&&a.m(i,o),insert(i,t,o),r=!0},p(i,[o]){i[0]==="about"?a?o&1&&transition_in(a,1):(a=create_if_block(i),a.c(),transition_in(a,1),a.m(t.parentNode,t)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(i){r||(transition_in(a),r=!0)},o(i){transition_out(a),r=!1},d(i){i&&detach(t),a&&a.d(i)}}}function instance$1(e,t,r){let a;return component_subscribe(e,menuModalType,i=>r(0,a=i)),[a]}class About extends SvelteComponent{constructor(t){super(),init(this,t,instance$1,create_fragment$1,safe_not_equal,{})}}function create_default_slot_6(e){let t,r;return t=new DataTree({}),{c(){create_component(t.$$.fragment)},m(a,i){mount_component(t,a,i),r=!0},i(a){r||(transition_in(t.$$.fragment,a),r=!0)},o(a){transition_out(t.$$.fragment,a),r=!1},d(a){destroy_component(t,a)}}}function create_default_slot_5(e){let t,r,a,i;return t=new GraphMaster({}),a=new TableMaster({}),{c(){create_component(t.$$.fragment),r=space(),create_component(a.$$.fragment)},m(o,u){mount_component(t,o,u),insert(o,r,u),mount_component(a,o,u),i=!0},i(o){i||(transition_in(t.$$.fragment,o),transition_in(a.$$.fragment,o),i=!0)},o(o){transition_out(t.$$.fragment,o),transition_out(a.$$.fragment,o),i=!1},d(o){o&&detach(r),destroy_component(t,o),destroy_component(a,o)}}}function create_default_slot_4(e){let t,r;return t=new Splitpanes({props:{theme:"modern-theme",horizontal:!0,style:"height: 100%;",pushOtherPanes:!1,dblClickSplitter:!1,$$slots:{default:[create_default_slot_5]},$$scope:{ctx:e}}}),{c(){create_component(t.$$.fragment)},m(a,i){mount_component(t,a,i),r=!0},p(a,i){const o={};i&2&&(o.$$scope={dirty:i,ctx:a}),t.$set(o)},i(a){r||(transition_in(t.$$.fragment,a),r=!0)},o(a){transition_out(t.$$.fragment,a),r=!1},d(a){destroy_component(t,a)}}}function create_default_slot_3(e){let t,r,a,i;return t=new Pane({props:{size:18,$$slots:{default:[create_default_slot_6]},$$scope:{ctx:e}}}),a=new Pane({props:{$$slots:{default:[create_default_slot_4]},$$scope:{ctx:e}}}),{c(){create_component(t.$$.fragment),r=space(),create_component(a.$$.fragment)},m(o,u){mount_component(t,o,u),insert(o,r,u),mount_component(a,o,u),i=!0},p(o,u){const c={};u&2&&(c.$$scope={dirty:u,ctx:o}),t.$set(c);const d={};u&2&&(d.$$scope={dirty:u,ctx:o}),a.$set(d)},i(o){i||(transition_in(t.$$.fragment,o),transition_in(a.$$.fragment,o),i=!0)},o(o){transition_out(t.$$.fragment,o),transition_out(a.$$.fragment,o),i=!1},d(o){o&&detach(r),destroy_component(t,o),destroy_component(a,o)}}}function create_default_slot_2(e){let t,r;return t=new Splitpanes({props:{theme:"modern-theme",style:"height: 100%;",pushOtherPanes:!1,dblClickSplitter:!0,$$slots:{default:[create_default_slot_3]},$$scope:{ctx:e}}}),{c(){create_component(t.$$.fragment)},m(a,i){mount_component(t,a,i),r=!0},p(a,i){const o={};i&2&&(o.$$scope={dirty:i,ctx:a}),t.$set(o)},i(a){r||(transition_in(t.$$.fragment,a),r=!0)},o(a){transition_out(t.$$.fragment,a),r=!1},d(a){destroy_component(t,a)}}}function create_default_slot_1(e){let t,r;return t=new StatusMaster({}),{c(){create_component(t.$$.fragment)},m(a,i){mount_component(t,a,i),r=!0},i(a){r||(transition_in(t.$$.fragment,a),r=!0)},o(a){transition_out(t.$$.fragment,a),r=!1},d(a){destroy_component(t,a)}}}function create_default_slot(e){let t,r,a,i;return t=new Pane({props:{minSize:30,$$slots:{default:[create_default_slot_2]},$$scope:{ctx:e}}}),a=new Pane({props:{size:10,$$slots:{default:[create_default_slot_1]},$$scope:{ctx:e}}}),{c(){create_component(t.$$.fragment),r=space(),create_component(a.$$.fragment)},m(o,u){mount_component(t,o,u),insert(o,r,u),mount_component(a,o,u),i=!0},p(o,u){const c={};u&2&&(c.$$scope={dirty:u,ctx:o}),t.$set(c);const d={};u&2&&(d.$$scope={dirty:u,ctx:o}),a.$set(d)},i(o){i||(transition_in(t.$$.fragment,o),transition_in(a.$$.fragment,o),i=!0)},o(o){transition_out(t.$$.fragment,o),transition_out(a.$$.fragment,o),i=!1},d(o){o&&detach(r),destroy_component(t,o),destroy_component(a,o)}}}function create_fragment(e){let t,r,a,i,o,u,c,d,f,m,p,h,_,y,D,$,b;return document.title="AnCiR v ."+version,r=new ContextMenu({}),i=new GenerateSimulated({}),u=new About({}),d=new ImportData({}),h=new MenuMaster({}),y=new Splitpanes({props:{theme:"modern-theme",horizontal:!0,style:"height: calc(100vh - 3.4em); width: calc(100vw - 1em);",pushOtherPanes:!1,$$slots:{default:[create_default_slot]},$$scope:{ctx:e}}}),$=new ProcessStep({}),{c(){t=space(),create_component(r.$$.fragment),a=space(),create_component(i.$$.fragment),o=space(),create_component(u.$$.fragment),c=space(),create_component(d.$$.fragment),f=space(),m=element("div"),p=element("div"),create_component(h.$$.fragment),_=space(),create_component(y.$$.fragment),D=space(),create_component($.$$.fragment),set_style(p,"max-width","100vw"),attr(m,"data-theme",e[0])},m(g,v){insert(g,t,v),mount_component(r,g,v),insert(g,a,v),mount_component(i,g,v),insert(g,o,v),mount_component(u,g,v),insert(g,c,v),mount_component(d,g,v),insert(g,f,v),insert(g,m,v),append(m,p),mount_component(h,p,null),append(m,_),mount_component(y,m,null),append(m,D),mount_component($,m,null),b=!0},p(g,[v]){const k={};v&2&&(k.$$scope={dirty:v,ctx:g}),y.$set(k),(!b||v&1)&&attr(m,"data-theme",g[0])},i(g){b||(transition_in(r.$$.fragment,g),transition_in(i.$$.fragment,g),transition_in(u.$$.fragment,g),transition_in(d.$$.fragment,g),transition_in(h.$$.fragment,g),transition_in(y.$$.fragment,g),transition_in($.$$.fragment,g),b=!0)},o(g){transition_out(r.$$.fragment,g),transition_out(i.$$.fragment,g),transition_out(u.$$.fragment,g),transition_out(d.$$.fragment,g),transition_out(h.$$.fragment,g),transition_out(y.$$.fragment,g),transition_out($.$$.fragment,g),b=!1},d(g){g&&(detach(t),detach(a),detach(o),detach(c),detach(f),detach(m)),destroy_component(r,g),destroy_component(i,g),destroy_component(u,g),destroy_component(d,g),destroy_component(h),destroy_component(y),destroy_component($)}}}function instance(e,t,r){let a;return component_subscribe(e,selectedTheme,i=>r(0,a=i)),console.log("VERSION: "+version),[a]}class App extends SvelteComponent{constructor(t){super(),init(this,t,instance,create_fragment,safe_not_equal,{})}}new App({target:document.getElementById("app")});

</script>
    <style>
:root{--bg-color: #fff;--font-color: #424242;--hover-color: #eee;--primary-color: lightblue;--secondary-color: #888888}[data-theme=dark]{--bg-color: #161625;--font-color: #e1e1ff;--hover-color: #888888;--primary-color: #9a97f3;--secondary-color: #888888}*{font-size:10pt;color:var(--font-color)}body{-webkit-tap-highlight-color:transparent;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;background:var(--bg-color)}h1{padding:6px 6px 0;font-weight:700;font-size:1.2em;text-decoration:none}button{cursor:pointer}::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.3);background-color:#f5f5f5}::-webkit-scrollbar{width:6px;height:6px;background-color:var(--bg-color)}::-webkit-scrollbar-thumb{background-color:var(--secondary-color)}.splitpanes.modern-theme .splitpanes__pane{background-color:hsl(var(--b1))}.splitpanes__splitter{position:relative;cursor:grab;padding:.2em;opacity:.6}.splitpanes--vertical>.splitpanes__splitter{cursor:col-resize}.splitpanes--horizontal>.splitpanes__splitter{cursor:row-resize}.splitpanes.modern-theme .splitpanes__splitter{background-color:var(--hover-color);position:relative}.splitpanes__splitter:before{content:"";position:absolute;left:0;top:0;transition:opacity .4s;background-color:var(--bg-color);opacity:0;z-index:1}.splitpanes__splitter:hover{opacity:.6}.splitpanes__splitter:hover:before{opacity:.6}.splitpanes--vertical>.splitpanes__splitter:before{left:-3px;right:-3px;height:100%}.splitpanes--horizontal>.splitpanes__splitter:before{top:-3px;bottom:-3px;width:100%}.chartControls{width:calc(100% - 28px);border-radius:0;min-width:184px;box-shadow:1px 1px 5px #888;padding:10px 8px;margin:10px 0 10px 6px}.sliderContainer{width:calc(100% - .5em);display:flex}.sliderContainer>label{line-height:1rem;align-self:center;display:flex;padding:15px 0}input[type=text],input[type=datetime-local]{height:1.4em;border-radius:.5rem;align-self:center;padding-left:4px;border-width:1px;display:flex;margin-left:auto;width:60%;background:var(--bg-color)}select{height:1.5rem;align-self:center;border-radius:.5rem;width:50%;float:right;margin-right:calc(.5em + 2px);margin-top:-2px;background-color:var(--bg-color)}.processItem{flex-basis:100%;flex-grow:0;flex-shrink:0}g.axis>path{font-size:10pt;stroke:var(--font-color)!important}#thePlot svg{border:1px solid var(--hover-color)}.graphDataTree{width:calc(100% - 12px);border-radius:0;margin-left:6px;min-width:200px}details{padding:0 10px}summary{padding:0 10px;cursor:pointer}.dataTable{box-shadow:1px 1px 5px #888;padding:10px 0;margin:8px 0 10px}.dataTable>summary{font-size:1.1em;font-weight:700}.tableLabel{margin:1em 1em .5em}.field{margin-left:1.5em;padding:5px 0}.process[open]{margin-bottom:15px;margin-top:5px;margin-right:10px;box-shadow:1px 1px 5px #888}.process{margin-left:1.5em;padding:5px 0}.otherItemDetail[open]{margin-bottom:15px;margin-top:5px;margin-right:0;box-shadow:1px 1px 5px #888}.otherItemDetail{margin-left:0;padding:5px 0}.processDetails{padding:.5em}.no-arrow summary{list-style:none;cursor:default}.no-arrow summary:before{content:"";margin-left:-2px}.addbutton{float:right;cursor:pointer;margin-right:0}.addbutton:hover{background:var(--hover-color);padding:.2em .5em;margin-right:-.5em;margin-top:-.2em;border-radius:20%}.deleteTable{float:right;cursor:pointer;margin-right:0;z-index:2}.hoverbutton:hover{background:var(--hover-color);padding:.2em .5em;margin:-.2em -.5em;border-radius:20%;cursor:pointer}.deleteProcess{float:right;cursor:pointer;margin-right:0}.colour{display:flex;align-items:center;margin-left:1em;margin-right:1em}.colourPicker{border-radius:25px;height:2.5em;padding:0;width:2.5em;margin-right:1em}.colourPicker::-webkit-color-swatch{display:none}.colourPicker::-moz-color-swatch{display:none}.sliderContainer{width:calc(100% - 3.5em)}.itemsliderContainer{width:calc(100% - 2em);margin-left:1em}div.splitpanes--horizontal.splitpanes--dragging{cursor:row-resize}div.splitpanes--vertical.splitpanes--dragging{cursor:col-resize}.splitpanes{display:flex;width:100%;height:100%}.splitpanes--vertical{flex-direction:row}.splitpanes--horizontal{flex-direction:column}.splitpanes--dragging *{-webkit-user-select:none;-moz-user-select:none;user-select:none}.splitpanes__pane{width:100%;height:100%;overflow:hidden}.splitpanes--vertical .splitpanes__pane{transition:width .2s ease-out}.splitpanes--horizontal .splitpanes__pane{transition:height .2s ease-out}.splitpanes--vertical>.splitpanes__pane{transition:width .2s ease-out}.splitpanes--horizontal>.splitpanes__pane{transition:height .2s ease-out}.splitpanes--dragging .splitpanes__pane{transition:none;pointer-events:none}.splitpanes--freeze .splitpanes__pane{transition:none}.splitpanes__splitter{touch-action:none}.splitpanes--vertical>.splitpanes__splitter{min-width:1px}.splitpanes--horizontal>.splitpanes__splitter{min-height:1px}.splitpanes.default-theme .splitpanes__pane{background-color:#f2f2f2}.splitpanes.default-theme .splitpanes__splitter{background-color:#fff;box-sizing:border-box;position:relative;flex-shrink:0}.splitpanes.default-theme .splitpanes__splitter:before,.splitpanes.default-theme .splitpanes__splitter:after{content:"";position:absolute;top:50%;left:50%;background-color:#00000026;transition:background-color .3s}.splitpanes.default-theme .splitpanes__splitter:hover:before,.splitpanes.default-theme .splitpanes__splitter:hover:after{background-color:#00000040}.splitpanes.default-theme .splitpanes__splitter:first-child{cursor:auto}.default-theme.splitpanes .splitpanes .splitpanes__splitter{z-index:1}.default-theme.splitpanes--vertical>.splitpanes__splitter,.default-theme .splitpanes--vertical>.splitpanes__splitter{width:7px;border-left:1px solid #eee;cursor:col-resize}.default-theme.splitpanes--vertical>.splitpanes__splitter:before,.default-theme.splitpanes--vertical>.splitpanes__splitter:after,.default-theme .splitpanes--vertical>.splitpanes__splitter:before,.default-theme .splitpanes--vertical>.splitpanes__splitter:after{transform:translateY(-50%);width:1px;height:30px}.default-theme.splitpanes--vertical>.splitpanes__splitter:before,.default-theme .splitpanes--vertical>.splitpanes__splitter:before{margin-left:-2px}.default-theme.splitpanes--vertical>.splitpanes__splitter:after,.default-theme .splitpanes--vertical>.splitpanes__splitter:after{margin-left:1px}.default-theme.splitpanes--horizontal>.splitpanes__splitter,.default-theme .splitpanes--horizontal>.splitpanes__splitter{height:7px;border-top:1px solid #eee;cursor:row-resize}.default-theme.splitpanes--horizontal>.splitpanes__splitter:before,.default-theme.splitpanes--horizontal>.splitpanes__splitter:after,.default-theme .splitpanes--horizontal>.splitpanes__splitter:before,.default-theme .splitpanes--horizontal>.splitpanes__splitter:after{transform:translate(-50%);width:30px;height:1px}.default-theme.splitpanes--horizontal>.splitpanes__splitter:before,.default-theme .splitpanes--horizontal>.splitpanes__splitter:before{margin-top:-2px}.default-theme.splitpanes--horizontal>.splitpanes__splitter:after,.default-theme .splitpanes--horizontal>.splitpanes__splitter:after{margin-top:1px}.backdrop.svelte-r5e5cj{position:absolute;top:0;left:0;height:100vh;width:100vw;background:#fffc;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);z-index:9998}dialog.svelte-r5e5cj{display:block;position:absolute;top:10vh;max-height:80vh;max-width:80vw;min-width:270px;overflow:auto;background:var(--bg-color);z-index:9999;box-shadow:5px 5px 15px var(--secondary-color);border:none;border-radius:5px}.closeDialogButton.svelte-r5e5cj{width:15px;cursor:pointer;padding:0;float:right;margin-right:5px;margin-top:-10px;border:none;background-color:var(--bg-color)}svg.svelte-r5e5cj:hover{stroke:red}.numberInput.svelte-1o4zp2p.svelte-1o4zp2p{width:40%;max-width:6em;float:right;height:1.1rem;border-radius:.5rem;margin-left:auto;align-self:center;padding-left:4px;border-width:1px;text-align:end;background:var(--bg-color)}.sliderInput.svelte-1o4zp2p.svelte-1o4zp2p{width:100%;accent-color:var(--primary-color);cursor:pointer;box-sizing:border-box;border-width:0;border-style:solid}.sliderLabel.svelte-1o4zp2p.svelte-1o4zp2p{line-height:1rem;display:flex}.sliderLabel.svelte-1o4zp2p>span.svelte-1o4zp2p{align-self:center}.processItem.svelte-1o4zp2p.svelte-1o4zp2p{padding:5px 0}.min.svelte-1o4zp2p.svelte-1o4zp2p{font-size:.7em;display:block;margin-top:-.7em;margin-left:.2em}.max.svelte-1o4zp2p.svelte-1o4zp2p{font-size:.7em;display:block;margin-top:-1.3em;margin-left:.2em;float:right}.stop.svelte-1o4zp2p.svelte-1o4zp2p{font-style:italic;text-decoration:underline}.addSimDataButton.svelte-13hhe3j{float:right;margin-top:-2.2em}.addSimDataButton.svelte-13hhe3j:hover{background:var(--hover-color);padding:.2em .5em;margin:-2.4em -.5em;border-radius:20%;cursor:pointer}.dataTitle.svelte-13hhe3j{margin-top:10px}.datum.svelte-13hhe3j{box-shadow:1px 1px 5px var(--secondary-color);padding:2px 10px;margin:0 0 10px}.removeData.svelte-13hhe3j{display:inline-block;float:right;cursor:pointer;margin-top:-1.3em}.hoverbutton.svelte-13hhe3j:hover{background:var(--hover-color);padding:.2em .5em;margin:-1.5em -.5em;border-radius:20%;cursor:pointer}.overlay.svelte-1hj8mph{position:absolute;cursor:pointer;z-index:10001;background:var(--hover-color);padding:5px;border-radius:10px;box-shadow:0 0 15px -5px var(--font-color)}span.svelte-1tdrfqa{cursor:context-menu}form.svelte-1tdrfqa{display:inline}input.svelte-1tdrfqa{display:inherit;border:none;background:inherit;background-color:inherit;font-size:inherit;color:inherit;font-weight:inherit;text-align:inherit;box-shadow:none}.editing.svelte-1tdrfqa{font-style:italic}.dateInput.svelte-jzkczy{margin-right:2px;width:18px;padding-right:4px;margin-bottom:5px;margin-top:-3px;padding-top:2px;background:var(--primary-color);cursor:pointer}.datepicklabelshow.svelte-jzkczy{display:inline-block}.datepicklabel.svelte-jzkczy{display:none}.dateInput.svelte-jzkczy:hover{background:#eee}.svelte-jzkczy::-webkit-calendar-picker-indicator:hover{cursor:pointer}div.svelte-1wb4l5o{border:1px solid #ddd;box-shadow:1px 1px 1px #ddd;background:#fff;border-radius:4px;padding:4px;position:absolute}.dataTree.svelte-uakoe0.svelte-uakoe0{width:calc(100% - 6px);border-radius:0;margin-left:1px;min-width:200px}details.svelte-uakoe0.svelte-uakoe0{padding:0 10px}summary.svelte-uakoe0.svelte-uakoe0{padding:0 10px;cursor:pointer}.dataTable.svelte-uakoe0.svelte-uakoe0{box-shadow:1px 1px 5px #888;padding:10px 0;margin:8px 0 10px}.dataTable.svelte-uakoe0>summary.svelte-uakoe0{font-size:1.1em;font-weight:700}.field.svelte-uakoe0.svelte-uakoe0{margin-left:1.5em;padding:5px 0}.process[open].svelte-uakoe0.svelte-uakoe0{margin-bottom:15px;margin-top:5px;margin-right:10px;box-shadow:1px 1px 5px #888}.process.svelte-uakoe0.svelte-uakoe0{margin-left:1.5em;padding:5px 0}.processDetails.svelte-uakoe0.svelte-uakoe0{padding:.5em}.no-arrow.svelte-uakoe0 summary.svelte-uakoe0{list-style:none;cursor:default}.no-arrow.svelte-uakoe0 summary.svelte-uakoe0:before{content:"";margin-left:-2px}.addbutton.svelte-uakoe0.svelte-uakoe0{float:right;cursor:pointer;margin-right:0}.addbutton.svelte-uakoe0.svelte-uakoe0:hover{background:var(--hover-color);padding:.2em .5em;margin-right:-.5em;margin-top:-.2em;border-radius:20%}.deleteTable.svelte-uakoe0.svelte-uakoe0{float:right;cursor:pointer;margin-right:0;z-index:2}.hoverbutton.svelte-uakoe0.svelte-uakoe0:hover{background:var(--hover-color);padding:.2em .5em;margin:-.2em -.5em;border-radius:20%;cursor:pointer}.viewTable.svelte-uakoe0.svelte-uakoe0{float:right;cursor:pointer;margin-right:.5em}.viewTable.svelte-uakoe0.svelte-uakoe0:hover{margin-right:0;cursor:pointer}.deleteProcess.svelte-uakoe0.svelte-uakoe0{float:right;cursor:pointer;margin-right:0}.tooltip.svelte-1ryw8s3{transform:none;border:1px solid #ddd;box-shadow:1px 1px 1px #ddd;background:#fff;border-radius:4px;padding:4px;position:absolute;margin:0;z-index:9999;width:-moz-max-content;width:max-content}.button.svelte-owaav{margin:5px;border:none;border-radius:20%;padding:.2em .5em;opacity:1;cursor:pointer;width:20px;height:20px}.button.svelte-owaav:hover{background:var(--hover-color)}#chartTools.svelte-10g9qi8{margin-top:-10px;background-color:var(--hover-color);-webkit-backdrop-filter:blur(1px);backdrop-filter:blur(1px);opacity:.4;position:absolute;border-radius:5px;display:flex;right:10px}.button.svelte-10g9qi8{margin:5px;border:none;border-radius:20%;padding:2px 5px;opacity:1;cursor:pointer;width:20px;height:20px}.button.svelte-10g9qi8:hover{background:var(--hover-color)}#chartTools.svelte-10g9qi8:hover{opacity:1;background:var(--bg-color)}#graphTabs.svelte-1gfrvzx.svelte-1gfrvzx{position:sticky;top:0;left:0;z-index:999;background:var(--bg-color);padding:0;margin:0!important;display:flow-root}nav.svelte-1gfrvzx.svelte-1gfrvzx{margin:0;background-color:var(--bg-color);z-index:9;width:100%}ul.svelte-1gfrvzx.svelte-1gfrvzx{display:flex;flex-wrap:wrap;list-style:none;border-bottom:3px solid var(--hover-color);margin-left:-2em;margin-top:2px}li.svelte-1gfrvzx.svelte-1gfrvzx{margin-bottom:-3px;margin-right:2px;border-top-left-radius:.25rem;border-top-right-radius:.25rem;background:var(--hover-color)}span.svelte-1gfrvzx.svelte-1gfrvzx{border:3px solid transparent;border-top-left-radius:.25rem;border-top-right-radius:.25rem;display:block;padding:.5rem 1rem;cursor:pointer}li.active.svelte-1gfrvzx>span.svelte-1gfrvzx,li.active.svelte-1gfrvzx>.closeButton.svelte-1gfrvzx,li.active.svelte-1gfrvzx:hover>span.svelte-1gfrvzx{border-color:var(--hover-color) var(--hover-color) var(--bg-color);background:var(--bg-color)}li.svelte-1gfrvzx.svelte-1gfrvzx:hover,li.svelte-1gfrvzx:hover>span.svelte-1gfrvzx,li.svelte-1gfrvzx:hover>.closeButton.svelte-1gfrvzx{border-color:var(--hover-color) var(--hover-color) var(--hover-color);background:var(--bg-color)}li.active.svelte-1gfrvzx:hover>span.svelte-1gfrvzx,li.active.svelte-1gfrvzx:hover>.closeButton.svelte-1gfrvzx{cursor:default;background:var(--bg-color)}.closeButton.svelte-1gfrvzx.svelte-1gfrvzx{width:15px;cursor:pointer;padding:0;float:right;margin-right:3px;margin-top:-32px;border:none;background-color:var(--hover-color)}svg.svelte-1gfrvzx.svelte-1gfrvzx:hover{stroke:red}#tableTabs.svelte-nulfcf.svelte-nulfcf{position:sticky;top:0;left:0;z-index:999;padding:0;margin:0 2.2em 0 0!important}nav.svelte-nulfcf.svelte-nulfcf{margin:0;z-index:9;width:calc(100% + 2.2em);background-color:var(--bg-color)}ul.svelte-nulfcf.svelte-nulfcf{display:flex;flex-wrap:wrap;list-style:none;border-bottom:3px solid var(--hover-color);margin-top:2px}li.svelte-nulfcf.svelte-nulfcf{margin-bottom:-3px;margin-right:2px;border-top-left-radius:.25rem;border-top-right-radius:.25rem;background:var(--hover-color)}span.svelte-nulfcf.svelte-nulfcf{border:3px solid transparent;border-top-left-radius:.25rem;border-top-right-radius:.25rem;display:block;padding:.5rem 1rem;cursor:pointer}li.active.svelte-nulfcf>span.svelte-nulfcf,li.active.svelte-nulfcf>.closeButton.svelte-nulfcf,li.active.svelte-nulfcf:hover>span.svelte-nulfcf{border-color:var(--hover-color) var(--hover-color) var(--bg-color);background:var(--bg-color)}li.svelte-nulfcf.svelte-nulfcf:hover,li.svelte-nulfcf:hover>span.svelte-nulfcf,li.svelte-nulfcf:hover>.closeButton.svelte-nulfcf{border-color:var(--hover-color) var(--hover-color) var(--hover-color);background:var(--bg-color)}li.active.svelte-nulfcf:hover>span.svelte-nulfcf,li.active.svelte-nulfcf:hover>.closeButton.svelte-nulfcf{cursor:default;background:var(--bg-color)}.closeButton.svelte-nulfcf.svelte-nulfcf{width:15px;cursor:pointer;padding:0;float:right;margin-right:3px;margin-top:-32px;border:none;background-color:var(--hover-color)}svg.svelte-nulfcf.svelte-nulfcf:hover{stroke:red}table.svelte-nulfcf.svelte-nulfcf{border-collapse:collapse;width:-moz-max-content;width:max-content;margin-left:5px}th.svelte-nulfcf.svelte-nulfcf,td.svelte-nulfcf.svelte-nulfcf{border:1px solid var(--hover-color);text-align:left;padding:8px}thead.svelte-nulfcf th.svelte-nulfcf{background-color:var(--hover-color)}.showmorebutton.svelte-nulfcf.svelte-nulfcf{display:flex;padding:0 10px 5px;margin:10px auto;background-color:var(--bg-color)}.guessFmtBtn.svelte-1wt1n0s{margin-right:10px}.svelte-spinner.svelte-ynopmf{transition-property:transform;animation-name:svelte-ynopmf-svelte-spinner_infinite-spin;animation-iteration-count:infinite;animation-timing-function:linear}@keyframes svelte-ynopmf-svelte-spinner_infinite-spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}nav.svelte-mptgu6.svelte-mptgu6{position:sticky;height:2em;background-color:var(--bg-color);z-index:1001}.applicationmenu.svelte-mptgu6.svelte-mptgu6{border-bottom:1px var(--hover-color) solid;height:2em;z-index:3;padding:3px;position:fixed;width:100%;margin:-8px}ul.svelte-mptgu6.svelte-mptgu6{padding:0}ul.topmenu.svelte-mptgu6.svelte-mptgu6{display:flex;flex-direction:row;margin-top:0}ul.topmenu.svelte-mptgu6 li.svelte-mptgu6{list-style-type:none}button.svelte-mptgu6.svelte-mptgu6{border:0px #000 solid;color:var(--font-color);height:30px;padding:0 10px;background:var(--bg-color)}ul.svelte-mptgu6 li button.svelte-mptgu6:hover{background-color:var(--hover-color);cursor:pointer}ul.svelte-mptgu6 li ul.secondmenu.svelte-mptgu6{display:flex;align-items:stretch;flex-direction:column;position:absolute;box-shadow:1px 1px 5px #888}ul.svelte-mptgu6 li ul.secondmenu li button.svelte-mptgu6{width:100%;min-width:150px;text-align:left}ul.svelte-mptgu6 li ul.thirdmenu.svelte-mptgu6{display:flex;align-items:stretch;flex-direction:column;position:absolute;box-shadow:1px 1px 5px #888;margin-left:calc(100% + 1px);margin-top:-30px}hr.svelte-mptgu6.svelte-mptgu6{border:none;border-bottom:1px solid var(--hover-color);margin:0}#switchtheme.svelte-mptgu6.svelte-mptgu6{float:right;margin-right:10px;margin-top:-3em}:root{--theme-toggle-width:3rem;--theme-toggle-height:1.5rem;--theme-toggle-circle-width:0;--theme-toggle-circle-dimensions:calc(var(--theme-toggle-height) - .5rem)}#switchtheme.svelte-mptgu6.svelte-mptgu6{-webkit-appearance:none;-moz-appearance:none;appearance:none;outline:none;cursor:pointer;height:var(--theme-toggle-height);width:var(--theme-toggle-width);box-shadow:#63636333 0 2px 8px;border:1px solid var(--hover-color);position:relative;border-radius:var(--theme-toggle-circle-dimensions);padding:.2rem;background-color:var(--bg-color);transition:background-color .5s}#switchtheme.svelte-mptgu6.svelte-mptgu6:before{content:"";width:var(--theme-toggle-circle-dimensions);height:var(--theme-toggle-circle-dimensions);background-color:var(--primary-color);position:absolute;border-radius:50%;top:50%;transform:translateY(-50%) translate(0);transition:transform .5s}#switchtheme.svelte-mptgu6.svelte-mptgu6:after{content:"Light mode";white-space:nowrap;color:var(--bg-color);position:absolute;left:calc(100% + 1.5rem);font-size:1.3rem;top:50%;transform:translateY(-50%);pointer-events:none}#switchtheme.svelte-mptgu6.svelte-mptgu6:checked{background-color:var(--primary-color);border:none}#switchtheme.svelte-mptgu6.svelte-mptgu6:checked:before{background-color:#fff;transform:translateY(-50%) translate(calc(var(--theme-toggle-width) - var(--theme-toggle-height)))}#switchtheme.svelte-mptgu6.svelte-mptgu6:checked:after{content:"Dark mode";color:var(--bg-color)}.navbar.svelte-ouzgb9.svelte-ouzgb9{display:inline-flex;border:1px #999 solid;width:-moz-fit-content;width:fit-content;background-color:var(--bg-color);border-radius:5px;overflow:hidden;flex-direction:column}.navbar.svelte-ouzgb9 ul.svelte-ouzgb9{margin:6px}ul.svelte-ouzgb9.svelte-ouzgb9{padding:0}ul.svelte-ouzgb9 li.svelte-ouzgb9{display:block;list-style-type:none;width:1fr}ul.svelte-ouzgb9 li button.svelte-ouzgb9{font-size:.75rem;width:100%;height:30px;text-align:left;border:0px;background-color:var(--bg-color)}ul.svelte-ouzgb9 li button.svelte-ouzgb9:hover{color:var(--bg-color);text-align:left;border-radius:5px;background-color:#eee}input[type=number].svelte-hoz60g{width:4em;max-width:6em;height:1.1rem;border-radius:.5rem;margin-left:auto;align-self:center;padding-left:4px;border-width:1px;text-align:end;background:var(--bg-color)}

</style>
  </head>
  <body>
    <div id="app"></div>
  </body>
</html>
