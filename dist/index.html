<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link
      rel="icon"
      type="image/svg+xml"
      href="data:image/svg+xml, %3Csvg data-v-6805eed4='' version='1.0' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='100%25' height='100%25' viewBox='0 0 70.000000 70.000000' preserveAspectRatio='xMidYMid meet' color-interpolation-filters='sRGB' style='margin: auto;'%3E%3Cg data-v-6805eed4='' fill='%23333' class='icon-text-wrapper icon-svg-group iconsvg' transform='translate(71.40499877929688,97.81155776977539)'%3E%3Cg class='iconsvg-imagesvg' transform='matrix(1,0,0,1,0,0)' opacity='1'%3E%3Cg%3E%3Crect fill='%23333' fill-opacity='0' stroke-width='2' x='0' y='0' width='60' height='54.37688619824' class='image-rect'%3E%3C/rect%3E%3Csvg x='-120' y='-95' width='160' height='54.37688619824' filtersec='colorsb2791788449' class='image-svg-svg primary' style='overflow: visible;'%3E%3Csvg xmlns='http://www.w3.org/2000/svg' xlink='http://www.w3.org/1999/xlink' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='ae8194c03-b976-4110-a715-bc6a7dcd8efe' x1='127.09' y1='100.34' x2='11.24' y2='19.22' gradientUnits='userSpaceOnUse'%3E%3Cstop offset='0' stop-color='%23fad5a5'%3E%3C/stop%3E%3Cstop offset='1' stop-color='%23f06c68'%3E%3C/stop%3E%3C/linearGradient%3E%3ClinearGradient id='b74247629-084e-4695-a572-5323a7fe49da' x1='12.79' y1='-21.54' x2='83.81' y2='101.47' href='%23ae8194c03-b976-4110-a715-bc6a7dcd8efe'%3E%3C/linearGradient%3E%3C/defs%3E%3Cpath d='M108.13 58.27L88.82 91.72A16.56 16.56 0 0 1 74.49 100H35.86a16.54 16.54 0 0 1-8.72-2.49C86.56 97.51 82.65 50 82.65 50a8.59 8.59 0 0 0-2.52-6.09L61.26 25a8.62 8.62 0 0 0-12.18 0L30.22 43.91a8.51 8.51 0 0 0-2.41 4.69c-.06-8.11 2.5-46 55.56-46a16.43 16.43 0 0 1 5.43 5.68l19.31 33.45a16.51 16.51 0 0 1 .02 16.54z' fill='url(%23ae8194c03-b976-4110-a715-bc6a7dcd8efe)'%3E%3C/path%3E%3Cpath d='M27.81 48.6a8.61 8.61 0 0 0 2.41 7.49L49.08 75a8.62 8.62 0 0 0 12.18 0l18.87-18.91A8.59 8.59 0 0 0 82.65 50s3.91 47.51-55.51 47.51a16.48 16.48 0 0 1-5.61-5.79L2.22 58.27a16.51 16.51 0 0 1 0-16.54L21.53 8.28A16.56 16.56 0 0 1 35.86 0h38.63a16.54 16.54 0 0 1 8.9 2.6c-53.08 0-55.64 37.89-55.58 46z' fill='url(%23b74247629-084e-4695-a572-5323a7fe49da)'%3E%3C/path%3E%3C/svg%3E%3C/svg%3E%3C!----%3E%3C/g%3E%3C/g%3E%3C/g%3E%3Cdefs v-gra='od'%3E%3C/defs%3E%3C/svg%3E"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script type="module" crossorigin>
var Ne=Object.defineProperty;var Pe=(t,e,r)=>e in t?Ne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Ee=(t,e,r)=>(Pe(t,typeof e!="symbol"?e+"":e,r),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();function noop(){}const identity$3=t=>t;function assign(t,e){for(const r in e)t[r]=e[r];return t}function run(t){return t()}function blank_object(){return Object.create(null)}function run_all(t){t.forEach(run)}function is_function(t){return typeof t=="function"}function safe_not_equal(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function is_empty(t){return Object.keys(t).length===0}function subscribe(t,...e){if(t==null){for(const a of e)a(void 0);return noop}const r=t.subscribe(...e);return r.unsubscribe?()=>r.unsubscribe():r}function get_store_value(t){let e;return subscribe(t,r=>e=r)(),e}function component_subscribe(t,e,r){t.$$.on_destroy.push(subscribe(e,r))}function create_slot(t,e,r,a){if(t){const i=get_slot_context(t,e,r,a);return t[0](i)}}function get_slot_context(t,e,r,a){return t[1]&&a?assign(r.ctx.slice(),t[1](a(e))):r.ctx}function get_slot_changes(t,e,r,a){if(t[2]&&a){const i=t[2](a(r));if(e.dirty===void 0)return i;if(typeof i=="object"){const o=[],u=Math.max(e.dirty.length,i.length);for(let c=0;c<u;c+=1)o[c]=e.dirty[c]|i[c];return o}return e.dirty|i}return e.dirty}function update_slot_base(t,e,r,a,i,o){if(i){const u=get_slot_context(e,r,a,o);t.p(u,i)}}function get_all_dirty_from_scope(t){if(t.ctx.length>32){const e=[],r=t.ctx.length/32;for(let a=0;a<r;a++)e[a]=-1;return e}return-1}function null_to_empty(t){return t??""}function set_store_value(t,e,r){return t.set(r),e}function action_destroyer(t){return t&&is_function(t.destroy)?t.destroy:noop}const is_client=typeof window<"u";let now$1=is_client?()=>window.performance.now():()=>Date.now(),raf=is_client?t=>requestAnimationFrame(t):noop;const tasks=new Set;function run_tasks(t){tasks.forEach(e=>{e.c(t)||(tasks.delete(e),e.f())}),tasks.size!==0&&raf(run_tasks)}function loop(t){let e;return tasks.size===0&&raf(run_tasks),{promise:new Promise(r=>{tasks.add(e={c:t,f:r})}),abort(){tasks.delete(e)}}}const globals=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function append(t,e){t.appendChild(e)}function get_root_for_style(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function append_empty_stylesheet(t){const e=element("style");return e.textContent="/* empty */",append_stylesheet(get_root_for_style(t),e),e.sheet}function append_stylesheet(t,e){return append(t.head||t,e),e.sheet}function insert(t,e,r){t.insertBefore(e,r||null)}function detach(t){t.parentNode&&t.parentNode.removeChild(t)}function destroy_each(t,e){for(let r=0;r<t.length;r+=1)t[r]&&t[r].d(e)}function element(t){return document.createElement(t)}function svg_element(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function text(t){return document.createTextNode(t)}function space(){return text(" ")}function empty$1(){return text("")}function listen(t,e,r,a){return t.addEventListener(e,r,a),()=>t.removeEventListener(e,r,a)}function prevent_default(t){return function(e){return e.preventDefault(),t.call(this,e)}}function attr(t,e,r){r==null?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function to_number(t){return t===""?null:+t}function children$1(t){return Array.from(t.childNodes)}function set_data(t,e){e=""+e,t.data!==e&&(t.data=e)}function set_input_value(t,e){t.value=e??""}function set_style(t,e,r,a){r==null?t.style.removeProperty(e):t.style.setProperty(e,r,a?"important":"")}function select_option(t,e,r){for(let a=0;a<t.options.length;a+=1){const i=t.options[a];if(i.__value===e){i.selected=!0;return}}(!r||e!==void 0)&&(t.selectedIndex=-1)}function select_value(t){const e=t.querySelector(":checked");return e&&e.__value}function toggle_class(t,e,r){t.classList.toggle(e,!!r)}function custom_event(t,e,{bubbles:r=!1,cancelable:a=!1}={}){return new CustomEvent(t,{detail:e,bubbles:r,cancelable:a})}class HtmlTag{constructor(e=!1){Ee(this,"is_svg",!1);Ee(this,"e");Ee(this,"n");Ee(this,"t");Ee(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,r,a=null){this.e||(this.is_svg?this.e=svg_element(r.nodeName):this.e=element(r.nodeType===11?"TEMPLATE":r.nodeName),this.t=r.tagName!=="TEMPLATE"?r:r.content,this.c(e)),this.i(a)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let r=0;r<this.n.length;r+=1)insert(this.t,this.n[r],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(detach)}}function construct_svelte_component(t,e){return new t(e)}const managed_styles=new Map;let active=0;function hash(t){let e=5381,r=t.length;for(;r--;)e=(e<<5)-e^t.charCodeAt(r);return e>>>0}function create_style_information(t,e){const r={stylesheet:append_empty_stylesheet(e),rules:{}};return managed_styles.set(t,r),r}function create_rule(t,e,r,a,i,o,u,c=0){const f=16.666/a;let d=`{
`;for(let v=0;v<=1;v+=f){const b=e+(r-e)*o(v);d+=v*100+`%{${u(b,1-b)}}
`}const m=d+`100% {${u(r,1-r)}}
}`,h=`__svelte_${hash(m)}_${c}`,_=get_root_for_style(t),{stylesheet:p,rules:g}=managed_styles.get(_)||create_style_information(_,t);g[h]||(g[h]=!0,p.insertRule(`@keyframes ${h} ${m}`,p.cssRules.length));const D=t.style.animation||"";return t.style.animation=`${D?`${D}, `:""}${h} ${a}ms linear ${i}ms 1 both`,active+=1,h}function delete_rule(t,e){const r=(t.style.animation||"").split(", "),a=r.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),i=r.length-a.length;i&&(t.style.animation=a.join(", "),active-=i,active||clear_rules())}function clear_rules(){raf(()=>{active||(managed_styles.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&detach(e)}),managed_styles.clear())})}let current_component;function set_current_component(t){current_component=t}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function onMount(t){get_current_component().$$.on_mount.push(t)}function afterUpdate(t){get_current_component().$$.after_update.push(t)}function onDestroy(t){get_current_component().$$.on_destroy.push(t)}function createEventDispatcher(){const t=get_current_component();return(e,r,{cancelable:a=!1}={})=>{const i=t.$$.callbacks[e];if(i){const o=custom_event(e,r,{cancelable:a});return i.slice().forEach(u=>{u.call(t,o)}),!o.defaultPrevented}return!0}}function setContext(t,e){return get_current_component().$$.context.set(t,e),e}function getContext(t){return get_current_component().$$.context.get(t)}const dirty_components=[],binding_callbacks=[];let render_callbacks=[];const flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function tick(){return schedule_update(),resolved_promise}function add_render_callback(t){render_callbacks.push(t)}function add_flush_callback(t){flush_callbacks.push(t)}const seen_callbacks=new Set;let flushidx=0;function flush(){if(flushidx!==0)return;const t=current_component;do{try{for(;flushidx<dirty_components.length;){const e=dirty_components[flushidx];flushidx++,set_current_component(e),update(e.$$)}}catch(e){throw dirty_components.length=0,flushidx=0,e}for(set_current_component(null),dirty_components.length=0,flushidx=0;binding_callbacks.length;)binding_callbacks.pop()();for(let e=0;e<render_callbacks.length;e+=1){const r=render_callbacks[e];seen_callbacks.has(r)||(seen_callbacks.add(r),r())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,seen_callbacks.clear(),set_current_component(t)}function update(t){if(t.fragment!==null){t.update(),run_all(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(add_render_callback)}}function flush_render_callbacks(t){const e=[],r=[];render_callbacks.forEach(a=>t.indexOf(a)===-1?e.push(a):r.push(a)),r.forEach(a=>a()),render_callbacks=e}let promise;function wait(){return promise||(promise=Promise.resolve(),promise.then(()=>{promise=null})),promise}function dispatch(t,e,r){t.dispatchEvent(custom_event(`${e?"intro":"outro"}${r}`))}const outroing=new Set;let outros;function group_outros(){outros={r:0,c:[],p:outros}}function check_outros(){outros.r||run_all(outros.c),outros=outros.p}function transition_in(t,e){t&&t.i&&(outroing.delete(t),t.i(e))}function transition_out(t,e,r,a){if(t&&t.o){if(outroing.has(t))return;outroing.add(t),outros.c.push(()=>{outroing.delete(t),a&&(r&&t.d(1),a())}),t.o(e)}else a&&a()}const null_transition={duration:0};function create_bidirectional_transition(t,e,r,a){let o=e(t,r,{direction:"both"}),u=a?0:1,c=null,f=null,d=null,m;function h(){d&&delete_rule(t,d)}function _(g,D){const v=g.b-u;return D*=Math.abs(v),{a:u,b:g.b,d:v,duration:D,start:g.start,end:g.start+D,group:g.group}}function p(g){const{delay:D=0,duration:v=300,easing:b=identity$3,tick:y=noop,css:T}=o||null_transition,w={start:now$1()+D,b:g};g||(w.group=outros,outros.r+=1),"inert"in t&&(g?m!==void 0&&(t.inert=m):(m=t.inert,t.inert=!0)),c||f?f=w:(T&&(h(),d=create_rule(t,u,g,v,D,b,T)),g&&y(0,1),c=_(w,v),add_render_callback(()=>dispatch(t,g,"start")),loop(A=>{if(f&&A>f.start&&(c=_(f,v),f=null,dispatch(t,c.b,"start"),T&&(h(),d=create_rule(t,u,c.b,c.duration,0,b,o.css))),c){if(A>=c.end)y(u=c.b,1-u),dispatch(t,c.b,"end"),f||(c.b?h():--c.group.r||run_all(c.group.c)),c=null;else if(A>=c.start){const E=A-c.start;u=c.a+c.d*b(E/c.duration),y(u,1-u)}}return!!(c||f)}))}return{run(g){is_function(o)?wait().then(()=>{o=o({direction:g?"in":"out"}),p(g)}):p(g)},end(){h(),c=f=null}}}function ensure_array_like(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function outro_and_destroy_block(t,e){transition_out(t,1,1,()=>{e.delete(t.key)})}function update_keyed_each(t,e,r,a,i,o,u,c,f,d,m,h){let _=t.length,p=o.length,g=_;const D={};for(;g--;)D[t[g].key]=g;const v=[],b=new Map,y=new Map,T=[];for(g=p;g--;){const k=h(i,o,g),O=r(k);let L=u.get(O);L?a&&T.push(()=>L.p(k,e)):(L=d(O,k),L.c()),b.set(O,v[g]=L),O in D&&y.set(O,Math.abs(g-D[O]))}const w=new Set,A=new Set;function E(k){transition_in(k,1),k.m(c,m),u.set(k.key,k),m=k.first,p--}for(;_&&p;){const k=v[p-1],O=t[_-1],L=k.key,P=O.key;k===O?(m=k.first,_--,p--):b.has(P)?!u.has(L)||w.has(L)?E(k):A.has(P)?_--:y.get(L)>y.get(P)?(A.add(L),E(k)):(w.add(P),_--):(f(O,u),_--)}for(;_--;){const k=t[_];b.has(k.key)||f(k,u)}for(;p;)E(v[p-1]);return run_all(T),v}function bind(t,e,r){const a=t.$$.props[e];a!==void 0&&(t.$$.bound[a]=r,r(t.$$.ctx[a]))}function create_component(t){t&&t.c()}function mount_component(t,e,r){const{fragment:a,after_update:i}=t.$$;a&&a.m(e,r),add_render_callback(()=>{const o=t.$$.on_mount.map(run).filter(is_function);t.$$.on_destroy?t.$$.on_destroy.push(...o):run_all(o),t.$$.on_mount=[]}),i.forEach(add_render_callback)}function destroy_component(t,e){const r=t.$$;r.fragment!==null&&(flush_render_callbacks(r.after_update),run_all(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function make_dirty(t,e){t.$$.dirty[0]===-1&&(dirty_components.push(t),schedule_update(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function init(t,e,r,a,i,o,u=null,c=[-1]){const f=current_component;set_current_component(t);const d=t.$$={fragment:null,ctx:[],props:o,update:noop,not_equal:i,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:blank_object(),dirty:c,skip_bound:!1,root:e.target||f.$$.root};u&&u(d.root);let m=!1;if(d.ctx=r?r(t,e.props||{},(h,_,...p)=>{const g=p.length?p[0]:_;return d.ctx&&i(d.ctx[h],d.ctx[h]=g)&&(!d.skip_bound&&d.bound[h]&&d.bound[h](g),m&&make_dirty(t,h)),_}):[],d.update(),m=!0,run_all(d.before_update),d.fragment=a?a(d.ctx):!1,e.target){if(e.hydrate){const h=children$1(e.target);d.fragment&&d.fragment.l(h),h.forEach(detach)}else d.fragment&&d.fragment.c();e.intro&&transition_in(t.$$.fragment),mount_component(t,e.target,e.anchor),flush()}set_current_component(f)}class SvelteComponent{constructor(){Ee(this,"$$");Ee(this,"$$set")}$destroy(){destroy_component(this,1),this.$destroy=noop}$on(e,r){if(!is_function(r))return noop;const a=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return a.push(r),()=>{const i=a.indexOf(r);i!==-1&&a.splice(i,1)}}$set(e){this.$$set&&!is_empty(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const PUBLIC_VERSION="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(PUBLIC_VERSION);const subscriber_queue=[];function writable(t,e=noop){let r;const a=new Set;function i(c){if(safe_not_equal(t,c)&&(t=c,r)){const f=!subscriber_queue.length;for(const d of a)d[1](),subscriber_queue.push(d,t);if(f){for(let d=0;d<subscriber_queue.length;d+=2)subscriber_queue[d][0](subscriber_queue[d+1]);subscriber_queue.length=0}}}function o(c){i(c(t))}function u(c,f=noop){const d=[c,f];return a.add(d),a.size===1&&(r=e(i,o)||noop),c(t),()=>{a.delete(d),a.size===0&&r&&(r(),r=null)}}return{set:i,update:o,subscribe:u}}var data=writable([]),graphTabs=writable([]),activeGraphTab=writable(-1),graphs=writable([]),dataIDsforTables=writable([]),showalldata=writable([]),activeTableTab=writable(-1),menuModalType=writable(null),contextMenu=writable({labels:[],funcs:[]}),selectedTheme=writable("light"),importFileOpen=writable(!1),statusData=writable([]);const BROWSER=!0;function pxToNumber(t){if(!t.endsWith("px"))return;const e=parseFloat(t.slice(0,t.length-2));return isNaN(e)?void 0:e}const getDimensionName=t=>t?"height":"width",calcComputedStyle=t=>window.getComputedStyle(t),getElementRect=t=>t.getBoundingClientRect(),getBordersSizeOffsets=(t,e=!0)=>{if(t.getPropertyValue("box-sizing")==="border-box")return;const r=pxToNumber(t.getPropertyValue("border-left-width"));if(r===void 0){console.error("Splitpanes Error: Fail to parse container `border-left-width`.");return}const a=pxToNumber(t.getPropertyValue("border-top-width"));if(a===void 0){console.error("Splitpanes Error: Fail to parse container `border-top-width`.");return}const i={left:r,top:a};if(e){const o=pxToNumber(t.getPropertyValue("border-right-width"));if(o===void 0){console.error("Splitpanes Error: Fail to parse container `border-right-width`.");return}const u=pxToNumber(t.getPropertyValue("border-bottom-width"));if(u===void 0){console.error("Splitpanes Error: Fail to parse container `border-bottom-width`.");return}const c=i;c.right=o,c.bottom=u}return i};function elementRectWithoutBorder(t,e){e||(e=calcComputedStyle(t));const r=getElementRect(t),a=getBordersSizeOffsets(e,!0)||{left:0,top:0,right:0,bottom:0};return{width:r.width-a.left-a.right,height:r.height-a.top-a.bottom,left:r.left+a.left,top:r.top+a.top}}const positionDiff=(t,e)=>({left:t.left-e.left,top:t.top-e.top});function getGlobalMousePosition(t){const e=t,r=t,{clientX:a,clientY:i}="ontouchstart"in window&&r.touches?r.touches[0]:e;return{left:a,top:i}}function sumPartial(t,e,r,a){let i=0;for(let o=e;o<r;o++)i+=a(t[o],o);return i}function forEachPartial(t,e,r,a){for(let i=e;i<r;i++)a(t[i],i)}function create_fragment$v(t){let e,r,a,i,o=!BROWSER;const u=t[16].default,c=create_slot(u,t,t[18],null);return{c(){e=element("div"),r=space(),c&&c.c(),attr(e,"id",t[0]),attr(e,"class",a=`splitpanes ${t[3]||""} ${t[4]||""}`),attr(e,"style",t[2]),toggle_class(e,"splitpanes--horizontal",t[1]),toggle_class(e,"splitpanes--vertical",!t[1]),toggle_class(e,"splitpanes--dragging",t[7]||t[8]),toggle_class(e,"splitpanes--freeze",!t[6])},m(f,d){insert(f,e,d),append(e,r),c&&c.m(e,null),t[17](e),i=!0},p(f,d){c&&c.p&&(!i||d[0]&262144)&&update_slot_base(c,u,f,f[18],i?get_slot_changes(u,f[18],d,null):get_all_dirty_from_scope(f[18]),null),(!i||d[0]&1)&&attr(e,"id",f[0]),(!i||d[0]&24&&a!==(a=`splitpanes ${f[3]||""} ${f[4]||""}`))&&attr(e,"class",a),(!i||d[0]&4)&&attr(e,"style",f[2]),(!i||d[0]&26)&&toggle_class(e,"splitpanes--horizontal",f[1]),(!i||d[0]&26)&&toggle_class(e,"splitpanes--vertical",!f[1]),(!i||d[0]&408)&&toggle_class(e,"splitpanes--dragging",f[7]||f[8]),(!i||d[0]&88)&&toggle_class(e,"splitpanes--freeze",!f[6])},i(f){i||(transition_in(o),transition_in(c,f),i=!0)},o(f){transition_out(o),transition_out(c,f),i=!1},d(f){f&&detach(e),c&&c.d(f),t[17](null)}}}const KEY={};function instance$v(t,e,r){let a,i,o,{$$slots:u={},$$scope:c}=e,{id:f=void 0}=e,{horizontal:d=!1}=e,{pushOtherPanes:m=!0}=e,{dblClickSplitter:h=!0}=e,{rtl:_="auto"}=e,{firstSplitter:p=!1}=e,{style:g=null}=e,{theme:D="default-theme"}=e,{class:v=""}=e;const b=createEventDispatcher();let y,T=!1,w=!1,A=!1,E=!1,k=!1,O=-1,L=-1,P,C=new Array,W=writable(d);component_subscribe(t,W,R=>r(31,o=R));const x=writable(p);component_subscribe(t,x,R=>r(30,i=R));const M=writable(void 0);component_subscribe(t,M,R=>r(29,a=R));let S=null,$=null;setContext(KEY,{showFirstSplitter:x,veryFirstPaneKey:M,isHorizontal:W,ssrRegisterPaneSize:void 0,onPaneInit:R=>(a===void 0&&set_store_value(M,a=R,a),{undefinedPaneInitSize:0}),clientOnly:{onPaneAdd:H,onPaneRemove:I}});function H(R){let j=-1;Array.from(R.element.parentNode.children).some(Z=>(Z.className.includes("splitpanes__pane")&&j++,Z===R.element)),j===0&&set_store_value(M,a=R.key,a),C.splice(j,0,R);for(let Z=0;Z<C.length;Z++)C[Z].index=Z;T&&de().then(()=>{R.isReady=!0,b("pane-add",{index:j,panes:ie()})});const K=(Z,se=!0)=>Y=>{(se||R.index>0)&&Z(Y,R)};return{onSplitterDown:K(q,!1),onSplitterClick:K(ae,!1),onSplitterDblClick:K(ue),onPaneClick:K(N),reportGivenSizeChange:K(U)}}async function I(R){const j=C.findIndex(K=>K.key===R);if(j>=0){const K=C.splice(j,1)[0];for(let Z=0;Z<C.length;Z++)C[Z].index=Z;j===0&&set_store_value(M,a=C.length>0?C[0].key:void 0,a),T&&(await de(),b("pane-remove",{removed:K,panes:ie()}))}}function N(R,j){b("pane-click",j)}function U(R,j){j.setSz(R),de()}onMount(()=>{ge(),ke();for(let R=0;R<C.length;R++)C[R].isReady=!0;T=!0,b("ready"),setTimeout(()=>{r(6,A=!0)},0)}),onDestroy(()=>{T&&ne(),T=!1}),afterUpdate(()=>{ge()});function z(R){if(_==="auto")try{return(R??calcComputedStyle(y)).direction==="rtl"}catch{}return _===!0}function V(){document.body.style.cursor=W?"col-resize":"row-resize",document.addEventListener("mousemove",he,{passive:!1}),document.addEventListener("mouseup",J),"ontouchstart"in window&&(document.addEventListener("touchmove",he,{passive:!1}),document.addEventListener("touchend",J))}function ne(){document.body.style.cursor="",document.removeEventListener("mousemove",he),document.removeEventListener("mouseup",J),"ontouchstart"in window&&(document.removeEventListener("touchmove",he),document.removeEventListener("touchend",J))}const B=R=>R.nodeType===Node.ELEMENT_NODE&&R.classList.contains("splitpanes__splitter");function ce(R,j,K){let Z=R[d?"top":"left"];return K&&!d&&(Z=j-Z),Z}const le=()=>getDimensionName(d);function q(R,j){r(7,E=!0),O=j.index,j.setSplitterActive(!0);let Z=j.element;for(;Z!=null&&(Z=Z.previousSibling,!B(Z)););if(Z==null){console.error("Splitpane Error: Active splitter wasn't found!");return}S=Z;const se=getGlobalMousePosition(R),Y=getElementRect(S);$=ce(positionDiff(se,Y),Y[le()],z()),V()}function he(R){if(E){R.preventDefault(),r(8,k=!0);const j=getGlobalMousePosition(R),K=calcComputedStyle(y),Z=elementRectWithoutBorder(y,K),se=Z[le()],Y=z(K),ee=positionDiff(j,Z),te=ce(ee,se,Y);fe(te,se),b("resize",ie())}}function J(){k&&b("resized",ie()),r(7,E=!1),C[O].setSplitterActive(!1),setTimeout(()=>{r(8,k=!1),ne()},100)}function ae(R,j){if("ontouchstart"in window){R.preventDefault();const K=j.index;h&&(L===K?(P&&clearTimeout(P),P=null,ue(R,j),L=-1):(L=K,P=setTimeout(()=>{L=-1},500)))}k||b("splitter-click",j)}function ue(R,j){if(h){const K=j.index;let Z=0;for(let ee=0;ee<C.length;ee++){const te=C[ee];ee!==K&&(Z+=te.min())}const se=Math.min(Math.max(0,100-Z),j.max()),Y=Z+se;if(Y>=100)for(let ee=0;ee<C.length;ee++){const te=C[ee];te!==j?te.setSz(te.min()):te.setSz(100-Z)}else{let ee=100-Y;j.setSz(se);const te=me=>{const _e=me.min(),De=me.max(),$e=Math.min(Math.max(0,ee),De-_e);me.setSz(_e+$e),ee-=$e};for(let me=K-1;me>=0;me--)te(C[me]);for(let me=K+1;me<C.length;me++)te(C[me]);ee!=0&&console.warn("Splitpanes: there is a left spare size after computation of splitter double click, which means there are issues on the size constains of the panes.")}b("pane-maximize",j),b("resized",ie())}r(7,E=!1)}const ie=()=>C.map(R=>({min:R.min(),max:R.max(),size:R.sz(),snap:R.snap()}));function G(R,j){const K=De=>getElementRect(De)[le()],Z=K(S);let se=0,Y=S.previousSibling;for(;Y!=null;)B(Y)&&(se+=K(Y)),Y=Y.previousSibling;let ee=0,te=S.nextSibling;for(;te!=null;)B(te)&&(ee+=K(te)),te=te.nextSibling;const me=se+$,_e=se+Z+ee;return(R-me)/(j-_e)*100}function fe(R,j){let K=O-1,Z=C[K],se=O,Y=C[se],ee={prevPanesSize:Te(K),nextPanesSize:we(se),prevReachedMinPanes:0,nextReachedMinPanes:0};const te=0+(m?0:ee.prevPanesSize),me=100-(m?0:ee.nextPanesSize),_e=Math.max(Math.min(G(R,j),me),te),De=ee.prevPanesSize+Z.min()+Z.snap(),$e=100-(ee.nextPanesSize+Y.min()+Y.snap());let be=_e,Ae=!1;_e<=De?_e>ee.prevPanesSize+Z.min()&&(be=Math.max(Z.min()+ee.prevPanesSize,100-(Y.max()+ee.nextPanesSize)),Ae=!0):_e>=$e&&_e<100-ee.nextPanesSize-Y.min()&&(be=Math.min(100-(Y.min()+ee.nextPanesSize),Z.max()+ee.prevPanesSize),Ae=!0);const Me=Z.max()<100&&be>=Z.max()+ee.prevPanesSize,Fe=Y.max()<100&&be<=100-(Y.max()+ee.nextPanesSize);if(Me||Fe)Me?(Z.setSz(Z.max()),Y.setSz(Math.max(100-Z.max()-ee.prevPanesSize-ee.nextPanesSize,0))):(Z.setSz(Math.max(100-Y.max()-ee.prevPanesSize-ee.nextPanesSize,0)),Y.setSz(Y.max()));else{if(m&&!Ae){const Oe=ve(ee,be);if(!Oe)return;({sums:ee,paneBeforeIndex:K,paneAfterIndex:se}=Oe),Z=C[K],Y=C[se]}K!=null&&Z.setSz(Math.min(Math.max(be-ee.prevPanesSize-ee.prevReachedMinPanes,Z.min()),Z.max())),se!=null&&Y.setSz(Math.min(Math.max(100-be-ee.nextPanesSize-ee.nextReachedMinPanes,Y.min()),Y.max()))}}function ve(R,j){var Y,ee;const K=O-1;let Z=K,se=K+1;if(j<R.prevPanesSize+C[Z].min()&&(Z=(Y=Q(K))==null?void 0:Y.index,R.prevReachedMinPanes=0,Z<K&&forEachPartial(C,Z+1,K+1,te=>{te.setSz(te.min()),R.prevReachedMinPanes+=te.min()}),R.prevPanesSize=Te(Z),Z==null))return R.prevReachedMinPanes=0,C[0].setSz(C[0].min()),forEachPartial(C,1,K+1,te=>{te.setSz(te.min()),R.prevReachedMinPanes+=te.min()}),C[se].setSz(100-R.prevReachedMinPanes-C[0].min()-R.prevPanesSize-R.nextPanesSize),null;if(j>100-R.nextPanesSize-C[se].min()){se=(ee=X(K))==null?void 0:ee.index,R.nextReachedMinPanes=0,se>K+1&&forEachPartial(C,K+1,se,me=>{me.setSz(me.min()),R.nextReachedMinPanes+=me.min()}),R.nextPanesSize=we(se);const te=C.length;if(se==null)return R.nextReachedMinPanes=0,C[te-1].setSz(C[te-1].min()),forEachPartial(C,K+1,te-1,me=>{me.setSz(me.min()),R.nextReachedMinPanes+=me.min()}),C[Z].setSz(100-R.prevPanesSize-R.nextReachedMinPanes-C[te-1].min()-R.nextPanesSize),null}return{sums:R,paneBeforeIndex:Z,paneAfterIndex:se}}const oe=R=>R.sz(),Te=R=>sumPartial(C,0,R,oe),we=R=>sumPartial(C,R+1,C.length,oe),Q=R=>[...C].reverse().find(j=>j.index<R&&j.sz()>j.min()),X=R=>C.find(j=>j.index>R+1&&j.sz()>j.min());async function de(){w=!0,await tick(),w&&(ke(),w=!1)}function ke(){pe(),T&&b("resized",ie())}function pe(){if(C.length===0)return;const R=C.length;let j=100,K=0,Z=0,se=0,Y=[],ee=[];for(let $e=0;$e<R;$e++){const be=C[$e],Ae=be.sz();be.givenSize==null?be.isReady?(se+=Ae,Ae>=be.max()&&Y.push(be),Ae<=be.min()&&ee.push(be)):Z+=1:(j-=Ae,K++,Y.push(be),ee.push(be))}const te=R-K,me=te-Z;let _e,De;if(me>0?(_e=se/me,_e>.1&&j>.1?(se+=Z*_e,De=j/se):(_e=0,De=1)):(_e=j/te,De=1),j+se>.1){j=100;for(let $e=0;$e<R;$e++){const be=C[$e];if(be.givenSize==null){const Ae=be.isReady?be.sz():_e,Me=Math.max(Math.min(Ae*De,be.max()),be.min());be.setSz(Me)}j-=be.sz()}Math.abs(j)>.1&&(j=ye(j,Y,ee))}isFinite(j)?Math.abs(j)>.1&&console.warn("Splitpanes: Could not resize panes correctly due to their constraints."):console.warn("Splitpanes: Internal error, sizes might be NaN as a result.")}function ye(R,j,K){const se=C.length-(R>0?j.length:K.length);if(se<=0)return R;const Y=R/se;if(C.length===1)C[0].setSz(100),R=0;else for(let ee=0;ee<C.length;ee++){const te=C[ee],me=te.sz();if(R>0&&!j.includes(te)){const _e=Math.max(Math.min(me+Y,te.max()),te.min()),De=_e-me;R-=De,te.setSz(_e)}else if(!K.includes(te)){const _e=Math.max(Math.min(me+Y,te.max()),te.min()),De=_e-me;R-=De,te.setSz(_e)}}return R}function ge(){var Z;const{children:R}=y;let j=0,K=!1;for(let se=0;se<R.length;se++){const Y=R.item(se),ee=Y.classList.contains("splitpanes__pane"),te=Y.classList.contains("splitpanes__splitter");if(!ee&&!te){(Z=Y.parentNode)==null||Z.removeChild(Y),console.warn("Splitpanes: Only <Pane> elements are allowed at the root of <Splitpanes>. One of your DOM nodes was removed.");return}else ee&&(!K&&C[j].element!==Y&&(K=!0),j++)}if(K){const se=[];for(let Y=0;Y<R.length;Y++){const ee=R.item(Y);if(ee.classList.contains("splitpanes__pane")){const me=C.find(_e=>_e.element===ee);me!=null?(me.index=se.length,se.push(me)):console.warn("Splitpanes: Internal error - found a <Pane> elements which isn't tracked.")}}C=se,set_store_value(M,a=C.length>0?C[0].key:void 0,a)}}function Se(R){binding_callbacks[R?"unshift":"push"](()=>{y=R,r(5,y)})}return t.$$set=R=>{"id"in R&&r(0,f=R.id),"horizontal"in R&&r(1,d=R.horizontal),"pushOtherPanes"in R&&r(12,m=R.pushOtherPanes),"dblClickSplitter"in R&&r(13,h=R.dblClickSplitter),"rtl"in R&&r(14,_=R.rtl),"firstSplitter"in R&&r(15,p=R.firstSplitter),"style"in R&&r(2,g=R.style),"theme"in R&&r(3,D=R.theme),"class"in R&&r(4,v=R.class),"$$scope"in R&&r(18,c=R.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&2&&set_store_value(W,o=d,o),t.$$.dirty[0]&32768&&set_store_value(x,i=p,i)},[f,d,g,D,v,y,A,E,k,W,x,M,m,h,_,p,u,Se,c]}class Splitpanes extends SvelteComponent{constructor(e){super(),init(this,e,instance$v,create_fragment$v,safe_not_equal,{id:0,horizontal:1,pushOtherPanes:12,dblClickSplitter:13,rtl:14,firstSplitter:15,style:2,theme:3,class:4},null,[-1,-1,-1])}}const carefullCallbackGenerator=(t,e)=>r=>{const a=t();a!=null&&a[e](r)},carefullCallbackSource=t=>carefullCallbackGenerator.bind(null,t);function create_if_block$j(t){let e,r,a,i,o,u,c=(t[4]!==t[9]||t[5])&&create_if_block_1$a(t);const f=t[20].default,d=create_slot(f,t,t[19],null);return{c(){c&&c.c(),e=space(),r=element("div"),d&&d.c(),attr(r,"class",a=`splitpanes__pane ${t[0]||""}`),attr(r,"style",t[3])},m(m,h){c&&c.m(m,h),insert(m,e,h),insert(m,r,h),d&&d.m(r,null),t[21](r),i=!0,o||(u=listen(r,"click",t[11]("onPaneClick")),o=!0)},p(m,h){m[4]!==m[9]||m[5]?c?c.p(m,h):(c=create_if_block_1$a(m),c.c(),c.m(e.parentNode,e)):c&&(c.d(1),c=null),d&&d.p&&(!i||h&524288)&&update_slot_base(d,f,m,m[19],i?get_slot_changes(f,m[19],h,null):get_all_dirty_from_scope(m[19]),null),(!i||h&1&&a!==(a=`splitpanes__pane ${m[0]||""}`))&&attr(r,"class",a),(!i||h&8)&&attr(r,"style",m[3])},i(m){i||(transition_in(d,m),i=!0)},o(m){transition_out(d,m),i=!1},d(m){m&&(detach(e),detach(r)),c&&c.d(m),d&&d.d(m),t[21](null),o=!1,u()}}}function create_if_block_1$a(t){let e,r,a,i;return{c(){e=element("div"),attr(e,"class",r="splitpanes__splitter "+(t[2]?"splitpanes__splitter__active":""))},m(o,u){insert(o,e,u),a||(i=[listen(e,"mousedown",t[11]("onSplitterDown")),listen(e,"touchstart",t[11]("onSplitterDown")),listen(e,"click",t[11]("onSplitterClick")),listen(e,"dblclick",t[11]("onSplitterDblClick"))],a=!0)},p(o,u){u&4&&r!==(r="splitpanes__splitter "+(o[2]?"splitpanes__splitter__active":""))&&attr(e,"class",r)},d(o){o&&detach(e),a=!1,run_all(i)}}}function create_fragment$u(t){let e,r,a=!t[10]&&create_if_block$j(t);return{c(){a&&a.c(),e=empty$1()},m(i,o){a&&a.m(i,o),insert(i,e,o),r=!0},p(i,[o]){i[10]||a.p(i,o)},i(i){r||(transition_in(a),r=!0)},o(i){transition_out(a),r=!1},d(i){i&&detach(e),a&&a.d(i)}}}function instance$u(t,e,r){let a,i,o,u,c,{$$slots:f={},$$scope:d}=e;const{ssrRegisterPaneSize:m,onPaneInit:h,clientOnly:_,isHorizontal:p,showFirstSplitter:g,veryFirstPaneKey:D}=getContext(KEY);component_subscribe(t,p,S=>r(18,o=S)),component_subscribe(t,g,S=>r(5,c=S)),component_subscribe(t,D,S=>r(4,u=S));let{size:v=null}=e,{minSize:b=0}=e,{maxSize:y=100}=e,{snapSize:T=0}=e,{class:w=""}=e;const A={},E=!BROWSER,{undefinedPaneInitSize:k}=h(A);let O,L=v??k,P=!1,C;const W=carefullCallbackSource(()=>C),x=S=>{S!=L&&W("reportGivenSizeChange")(S)};onMount(()=>{const S={key:A,element:O,givenSize:v,sz:()=>L,setSz:$=>{r(16,L=$),v!=null&&v!=L&&r(12,v=L)},min:()=>b,max:()=>y,snap:()=>T,setSplitterActive:$=>{r(2,P=$)},isReady:!1};C=_.onPaneAdd(S)}),onDestroy(()=>{_.onPaneRemove(A)});function M(S){binding_callbacks[S?"unshift":"push"](()=>{O=S,r(1,O)})}return t.$$set=S=>{"size"in S&&r(12,v=S.size),"minSize"in S&&r(13,b=S.minSize),"maxSize"in S&&r(14,y=S.maxSize),"snapSize"in S&&r(15,T=S.snapSize),"class"in S&&r(0,w=S.class),"$$scope"in S&&r(19,d=S.$$scope)},t.$$.update=()=>{t.$$.dirty&4096&&v!=null&&x(v),t.$$.dirty&262144&&r(17,a=getDimensionName(o)),t.$$.dirty&196608&&r(3,i=`${a}: ${L}%;`)},[w,O,P,i,u,c,p,g,D,A,E,W,v,b,y,T,L,a,o,d,f,M]}class Pane extends SvelteComponent{constructor(e){super(),init(this,e,instance$u,create_fragment$u,safe_not_equal,{size:12,minSize:13,maxSize:14,snapSize:15,class:0})}}function fade(t,{delay:e=0,duration:r=400,easing:a=identity$3}={}){const i=+getComputedStyle(t).opacity;return{delay:e,duration:r,easing:a,css:o=>`opacity: ${o*i}`}}function create_fragment$t(t){let e,r,a,i,o,u,c,f,d,m,h,_,p,g,D;const v=t[4].default,b=create_slot(v,t,t[3],null);return{c(){e=element("div"),a=space(),i=element("dialog"),o=element("div"),u=element("button"),u.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="svelte-r5e5cj"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg>',c=space(),f=element("h1"),d=text(t[0]),m=space(),h=element("div"),b&&b.c(),attr(e,"class","backdrop svelte-r5e5cj"),attr(u,"class","closeDialogButton svelte-r5e5cj"),set_style(h,"margin-left","1em"),attr(o,"class","modal-box"),attr(i,"id","modal_data"),attr(i,"class","dialog svelte-r5e5cj")},m(y,T){insert(y,e,T),insert(y,a,T),insert(y,i,T),append(i,o),append(o,u),append(o,c),append(o,f),append(f,d),append(o,m),append(o,h),b&&b.m(h,null),p=!0,g||(D=[listen(window,"keydown",t[2]),listen(e,"click",t[1]),listen(u,"click",t[1])],g=!0)},p(y,[T]){t=y,(!p||T&1)&&set_data(d,t[0]),b&&b.p&&(!p||T&8)&&update_slot_base(b,v,t,t[3],p?get_slot_changes(v,t[3],T,null):get_all_dirty_from_scope(t[3]),null)},i(y){p||(y&&add_render_callback(()=>{p&&(r||(r=create_bidirectional_transition(e,fade,{duration:fadeTime_ms},!0)),r.run(1))}),transition_in(b,y),y&&add_render_callback(()=>{p&&(_||(_=create_bidirectional_transition(i,fade,{duration:fadeTime_ms},!0)),_.run(1))}),p=!0)},o(y){y&&(r||(r=create_bidirectional_transition(e,fade,{duration:fadeTime_ms},!1)),r.run(0)),transition_out(b,y),y&&(_||(_=create_bidirectional_transition(i,fade,{duration:fadeTime_ms},!1)),_.run(0)),p=!1},d(y){y&&(detach(e),detach(a),detach(i)),y&&r&&r.end(),b&&b.d(y),y&&_&&_.end(),g=!1,run_all(D)}}}let fadeTime_ms=250;function instance$t(t,e,r){let a;component_subscribe(t,menuModalType,d=>r(5,a=d));let{$$slots:i={},$$scope:o}=e,{title:u=""}=e;function c(){set_store_value(menuModalType,a=null,a)}function f(d){d.key,d.keyCode===27&&c()}return t.$$set=d=>{"title"in d&&r(0,u=d.title),"$$scope"in d&&r(3,o=d.$$scope)},[u,c,f,o,i]}class Dialog extends SvelteComponent{constructor(e){super(),init(this,e,instance$t,create_fragment$t,safe_not_equal,{title:0})}}function create_fragment$s(t){let e,r,a,i,o,u,c,f,d,m,h=truncateDecimalPlaces(t[0])+"",_,p,g,D,v=truncateDecimalPlaces(t[1])+"",b,y,T;return{c(){e=element("div"),r=element("label"),a=element("span"),i=text(t[5]),o=space(),u=element("input"),c=space(),f=element("input"),d=space(),m=element("span"),_=text(h),g=space(),D=element("span"),b=text(v),attr(a,"class","svelte-1o4zp2p"),attr(u,"class","numberInput svelte-1o4zp2p"),attr(u,"type","number"),attr(u,"id","val"),attr(u,"min",t[0]),attr(u,"max",t[1]),attr(u,"step",t[3]),attr(r,"for","val"),attr(r,"class","sliderLabel svelte-1o4zp2p"),attr(f,"class","sliderInput svelte-1o4zp2p"),attr(f,"type","range"),attr(f,"min",t[0]),attr(f,"max",t[1]),attr(f,"step",t[3]),attr(m,"class",p="min "+(t[0]===t[4][0]?"stop":"")+" svelte-1o4zp2p"),attr(D,"class","max svelte-1o4zp2p"),attr(e,"class","processItem svelte-1o4zp2p")},m(w,A){insert(w,e,A),append(e,r),append(r,a),append(a,i),append(r,o),append(r,u),set_input_value(u,t[2]),append(e,c),append(e,f),set_input_value(f,t[2]),append(e,d),append(e,m),append(m,_),append(e,g),append(e,D),append(D,b),y||(T=[listen(u,"change",t[8]),listen(u,"input",t[9]),listen(u,"input",t[10]),listen(f,"change",t[11]),listen(f,"input",t[12]),listen(f,"change",t[13]),listen(f,"input",t[13])],y=!0)},p(w,[A]){A&32&&set_data(i,w[5]),A&1&&attr(u,"min",w[0]),A&2&&attr(u,"max",w[1]),A&8&&attr(u,"step",w[3]),A&4&&to_number(u.value)!==w[2]&&set_input_value(u,w[2]),A&1&&attr(f,"min",w[0]),A&2&&attr(f,"max",w[1]),A&8&&attr(f,"step",w[3]),A&4&&set_input_value(f,w[2]),A&1&&h!==(h=truncateDecimalPlaces(w[0])+"")&&set_data(_,h),A&17&&p!==(p="min "+(w[0]===w[4][0]?"stop":"")+" svelte-1o4zp2p")&&attr(m,"class",p),A&2&&v!==(v=truncateDecimalPlaces(w[1])+"")&&set_data(b,v)},i:noop,o:noop,d(w){w&&detach(e),y=!1,run_all(T)}}}function truncateDecimalPlaces(t,e=2){const r=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);if(!r||!r[1])return t;const a=r[1].slice(0,e);return parseFloat(r[0].replace(r[1],a))}function instance$s(t,e,r){let{min:a=-100}=e,{max:i=100}=e,{step:o=1}=e,{limits:u=[-1/0,1/0]}=e,{value:c}=e,{label:f="Label:"}=e;function d(){a<u[0]&&r(0,a=u[0]),i>u[1]&&r(1,i=u[1]),c<u[0]&&(r(2,c=u[0]),r(0,a=c)),c>u[1]&&(r(2,c=u[1]),r(1,i=c))}function m(){const b=Math.abs(i-a),y=Math.max(u[0],a+b*.2),T=Math.min(u[1],i-b*.2);Number.isInteger(o)?(c>T||c<y)&&(r(1,i=Math.ceil(c+b/2)),r(0,a=Math.floor(c-b/2))):(c>T||c<y)&&(r(1,i=c+b/2),r(0,a=c-b/2)),d()}const h=()=>m(),_=()=>{d()};function p(){c=to_number(this.value),r(2,c)}const g=()=>m(),D=()=>{d()};function v(){c=to_number(this.value),r(2,c)}return t.$$set=b=>{"min"in b&&r(0,a=b.min),"max"in b&&r(1,i=b.max),"step"in b&&r(3,o=b.step),"limits"in b&&r(4,u=b.limits),"value"in b&&r(2,c=b.value),"label"in b&&r(5,f=b.label)},[a,i,c,o,u,f,d,m,h,_,p,g,D,v]}class Slider extends SvelteComponent{constructor(e){super(),init(this,e,instance$s,create_fragment$s,safe_not_equal,{min:0,max:1,step:3,limits:4,value:2,label:5})}}class LuxonError extends Error{}class InvalidDateTimeError extends LuxonError{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class InvalidIntervalError extends LuxonError{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class InvalidDurationError extends LuxonError{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class ConflictingSpecificationError extends LuxonError{}class InvalidUnitError extends LuxonError{constructor(e){super(`Invalid unit ${e}`)}}class InvalidArgumentError extends LuxonError{}class ZoneIsAbstractError extends LuxonError{constructor(){super("Zone is an abstract class")}}const n="numeric",s="short",l="long",DATE_SHORT={year:n,month:n,day:n},DATE_MED={year:n,month:s,day:n},DATE_MED_WITH_WEEKDAY={year:n,month:s,day:n,weekday:s},DATE_FULL={year:n,month:l,day:n},DATE_HUGE={year:n,month:l,day:n,weekday:l},TIME_SIMPLE={hour:n,minute:n},TIME_WITH_SECONDS={hour:n,minute:n,second:n},TIME_WITH_SHORT_OFFSET={hour:n,minute:n,second:n,timeZoneName:s},TIME_WITH_LONG_OFFSET={hour:n,minute:n,second:n,timeZoneName:l},TIME_24_SIMPLE={hour:n,minute:n,hourCycle:"h23"},TIME_24_WITH_SECONDS={hour:n,minute:n,second:n,hourCycle:"h23"},TIME_24_WITH_SHORT_OFFSET={hour:n,minute:n,second:n,hourCycle:"h23",timeZoneName:s},TIME_24_WITH_LONG_OFFSET={hour:n,minute:n,second:n,hourCycle:"h23",timeZoneName:l},DATETIME_SHORT={year:n,month:n,day:n,hour:n,minute:n},DATETIME_SHORT_WITH_SECONDS={year:n,month:n,day:n,hour:n,minute:n,second:n},DATETIME_MED={year:n,month:s,day:n,hour:n,minute:n},DATETIME_MED_WITH_SECONDS={year:n,month:s,day:n,hour:n,minute:n,second:n},DATETIME_MED_WITH_WEEKDAY={year:n,month:s,day:n,weekday:s,hour:n,minute:n},DATETIME_FULL={year:n,month:l,day:n,hour:n,minute:n,timeZoneName:s},DATETIME_FULL_WITH_SECONDS={year:n,month:l,day:n,hour:n,minute:n,second:n,timeZoneName:s},DATETIME_HUGE={year:n,month:l,day:n,weekday:l,hour:n,minute:n,timeZoneName:l},DATETIME_HUGE_WITH_SECONDS={year:n,month:l,day:n,weekday:l,hour:n,minute:n,second:n,timeZoneName:l};class Zone{get type(){throw new ZoneIsAbstractError}get name(){throw new ZoneIsAbstractError}get ianaName(){return this.name}get isUniversal(){throw new ZoneIsAbstractError}offsetName(e,r){throw new ZoneIsAbstractError}formatOffset(e,r){throw new ZoneIsAbstractError}offset(e){throw new ZoneIsAbstractError}equals(e){throw new ZoneIsAbstractError}get isValid(){throw new ZoneIsAbstractError}}let singleton$1=null;class SystemZone extends Zone{static get instance(){return singleton$1===null&&(singleton$1=new SystemZone),singleton$1}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:r,locale:a}){return parseZoneInfo(e,r,a)}formatOffset(e,r){return formatOffset(this.offset(e),r)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let dtfCache={};function makeDTF(t){return dtfCache[t]||(dtfCache[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),dtfCache[t]}const typeToPos={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function hackyOffset(t,e){const r=t.format(e).replace(/\u200E/g,""),a=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,i,o,u,c,f,d,m]=a;return[u,i,o,c,f,d,m]}function partsOffset(t,e){const r=t.formatToParts(e),a=[];for(let i=0;i<r.length;i++){const{type:o,value:u}=r[i],c=typeToPos[o];o==="era"?a[c]=u:isUndefined(c)||(a[c]=parseInt(u,10))}return a}let ianaZoneCache={};class IANAZone extends Zone{static create(e){return ianaZoneCache[e]||(ianaZoneCache[e]=new IANAZone(e)),ianaZoneCache[e]}static resetCache(){ianaZoneCache={},dtfCache={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=IANAZone.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:r,locale:a}){return parseZoneInfo(e,r,a,this.name)}formatOffset(e,r){return formatOffset(this.offset(e),r)}offset(e){const r=new Date(e);if(isNaN(r))return NaN;const a=makeDTF(this.name);let[i,o,u,c,f,d,m]=a.formatToParts?partsOffset(a,r):hackyOffset(a,r);c==="BC"&&(i=-Math.abs(i)+1);const _=objToLocalTS({year:i,month:o,day:u,hour:f===24?0:f,minute:d,second:m,millisecond:0});let p=+r;const g=p%1e3;return p-=g>=0?g:1e3+g,(_-p)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let intlLFCache={};function getCachedLF(t,e={}){const r=JSON.stringify([t,e]);let a=intlLFCache[r];return a||(a=new Intl.ListFormat(t,e),intlLFCache[r]=a),a}let intlDTCache={};function getCachedDTF(t,e={}){const r=JSON.stringify([t,e]);let a=intlDTCache[r];return a||(a=new Intl.DateTimeFormat(t,e),intlDTCache[r]=a),a}let intlNumCache={};function getCachedINF(t,e={}){const r=JSON.stringify([t,e]);let a=intlNumCache[r];return a||(a=new Intl.NumberFormat(t,e),intlNumCache[r]=a),a}let intlRelCache={};function getCachedRTF(t,e={}){const{base:r,...a}=e,i=JSON.stringify([t,a]);let o=intlRelCache[i];return o||(o=new Intl.RelativeTimeFormat(t,e),intlRelCache[i]=o),o}let sysLocaleCache=null;function systemLocale(){return sysLocaleCache||(sysLocaleCache=new Intl.DateTimeFormat().resolvedOptions().locale,sysLocaleCache)}let weekInfoCache={};function getCachedWeekInfo(t){let e=weekInfoCache[t];if(!e){const r=new Intl.Locale(t);e="getWeekInfo"in r?r.getWeekInfo():r.weekInfo,weekInfoCache[t]=e}return e}function parseLocaleString(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const r=t.indexOf("-u-");if(r===-1)return[t];{let a,i;try{a=getCachedDTF(t).resolvedOptions(),i=t}catch{const f=t.substring(0,r);a=getCachedDTF(f).resolvedOptions(),i=f}const{numberingSystem:o,calendar:u}=a;return[i,o,u]}}function intlConfigString(t,e,r){return(r||e)&&(t.includes("-u-")||(t+="-u"),r&&(t+=`-ca-${r}`),e&&(t+=`-nu-${e}`)),t}function mapMonths(t){const e=[];for(let r=1;r<=12;r++){const a=DateTime.utc(2009,r,1);e.push(t(a))}return e}function mapWeekdays(t){const e=[];for(let r=1;r<=7;r++){const a=DateTime.utc(2016,11,13+r);e.push(t(a))}return e}function listStuff(t,e,r,a){const i=t.listingMode();return i==="error"?null:i==="en"?r(e):a(e)}function supportsFastNumbers(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}class PolyNumberFormatter{constructor(e,r,a){this.padTo=a.padTo||0,this.floor=a.floor||!1;const{padTo:i,floor:o,...u}=a;if(!r||Object.keys(u).length>0){const c={useGrouping:!1,...a};a.padTo>0&&(c.minimumIntegerDigits=a.padTo),this.inf=getCachedINF(e,c)}}format(e){if(this.inf){const r=this.floor?Math.floor(e):e;return this.inf.format(r)}else{const r=this.floor?Math.floor(e):roundTo(e,3);return padStart(r,this.padTo)}}}class PolyDateFormatter{constructor(e,r,a){this.opts=a,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const u=-1*(e.offset/60),c=u>=0?`Etc/GMT+${u}`:`Etc/GMT${u}`;e.offset!==0&&IANAZone.create(c).valid?(i=c,this.dt=e):(i="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,i=e.zone.name):(i="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const o={...this.opts};o.timeZone=o.timeZone||i,this.dtf=getCachedDTF(r,o)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(r=>{if(r.type==="timeZoneName"){const a=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...r,value:a}}else return r}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class PolyRelFormatter{constructor(e,r,a){this.opts={style:"long",...a},!r&&hasRelative()&&(this.rtf=getCachedRTF(e,a))}format(e,r){return this.rtf?this.rtf.format(e,r):formatRelativeTime(r,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,r){return this.rtf?this.rtf.formatToParts(e,r):[]}}const fallbackWeekSettings={firstDay:1,minimalDays:4,weekend:[6,7]};class Locale{static fromOpts(e){return Locale.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,r,a,i,o=!1){const u=e||Settings.defaultLocale,c=u||(o?"en-US":systemLocale()),f=r||Settings.defaultNumberingSystem,d=a||Settings.defaultOutputCalendar,m=validateWeekSettings(i)||Settings.defaultWeekSettings;return new Locale(c,f,d,m,u)}static resetCache(){sysLocaleCache=null,intlDTCache={},intlNumCache={},intlRelCache={}}static fromObject({locale:e,numberingSystem:r,outputCalendar:a,weekSettings:i}={}){return Locale.create(e,r,a,i)}constructor(e,r,a,i,o){const[u,c,f]=parseLocaleString(e);this.locale=u,this.numberingSystem=r||c||null,this.outputCalendar=a||f||null,this.weekSettings=i,this.intl=intlConfigString(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=o,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=supportsFastNumbers(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&r?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Locale.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,validateWeekSettings(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,r=!1){return listStuff(this,e,months,()=>{const a=r?{month:e,day:"numeric"}:{month:e},i=r?"format":"standalone";return this.monthsCache[i][e]||(this.monthsCache[i][e]=mapMonths(o=>this.extract(o,a,"month"))),this.monthsCache[i][e]})}weekdays(e,r=!1){return listStuff(this,e,weekdays,()=>{const a=r?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=r?"format":"standalone";return this.weekdaysCache[i][e]||(this.weekdaysCache[i][e]=mapWeekdays(o=>this.extract(o,a,"weekday"))),this.weekdaysCache[i][e]})}meridiems(){return listStuff(this,void 0,()=>meridiems,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[DateTime.utc(2016,11,13,9),DateTime.utc(2016,11,13,19)].map(r=>this.extract(r,e,"dayperiod"))}return this.meridiemCache})}eras(e){return listStuff(this,e,eras,()=>{const r={era:e};return this.eraCache[e]||(this.eraCache[e]=[DateTime.utc(-40,1,1),DateTime.utc(2017,1,1)].map(a=>this.extract(a,r,"era"))),this.eraCache[e]})}extract(e,r,a){const i=this.dtFormatter(e,r),o=i.formatToParts(),u=o.find(c=>c.type.toLowerCase()===a);return u?u.value:null}numberFormatter(e={}){return new PolyNumberFormatter(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,r={}){return new PolyDateFormatter(e,this.intl,r)}relFormatter(e={}){return new PolyRelFormatter(this.intl,this.isEnglish(),e)}listFormatter(e={}){return getCachedLF(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:hasLocaleWeekInfo()?getCachedWeekInfo(this.locale):fallbackWeekSettings}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let singleton=null;class FixedOffsetZone extends Zone{static get utcInstance(){return singleton===null&&(singleton=new FixedOffsetZone(0)),singleton}static instance(e){return e===0?FixedOffsetZone.utcInstance:new FixedOffsetZone(e)}static parseSpecifier(e){if(e){const r=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new FixedOffsetZone(signedOffset(r[1],r[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${formatOffset(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${formatOffset(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,r){return formatOffset(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class InvalidZone extends Zone{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function normalizeZone(t,e){if(isUndefined(t)||t===null)return e;if(t instanceof Zone)return t;if(isString(t)){const r=t.toLowerCase();return r==="default"?e:r==="local"||r==="system"?SystemZone.instance:r==="utc"||r==="gmt"?FixedOffsetZone.utcInstance:FixedOffsetZone.parseSpecifier(r)||IANAZone.create(t)}else return isNumber(t)?FixedOffsetZone.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new InvalidZone(t)}let now=()=>Date.now(),defaultZone="system",defaultLocale$1=null,defaultNumberingSystem=null,defaultOutputCalendar=null,twoDigitCutoffYear=60,throwOnInvalid,defaultWeekSettings=null;class Settings{static get now(){return now}static set now(e){now=e}static set defaultZone(e){defaultZone=e}static get defaultZone(){return normalizeZone(defaultZone,SystemZone.instance)}static get defaultLocale(){return defaultLocale$1}static set defaultLocale(e){defaultLocale$1=e}static get defaultNumberingSystem(){return defaultNumberingSystem}static set defaultNumberingSystem(e){defaultNumberingSystem=e}static get defaultOutputCalendar(){return defaultOutputCalendar}static set defaultOutputCalendar(e){defaultOutputCalendar=e}static get defaultWeekSettings(){return defaultWeekSettings}static set defaultWeekSettings(e){defaultWeekSettings=validateWeekSettings(e)}static get twoDigitCutoffYear(){return twoDigitCutoffYear}static set twoDigitCutoffYear(e){twoDigitCutoffYear=e%100}static get throwOnInvalid(){return throwOnInvalid}static set throwOnInvalid(e){throwOnInvalid=e}static resetCaches(){Locale.resetCache(),IANAZone.resetCache()}}class Invalid{constructor(e,r){this.reason=e,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const nonLeapLadder=[0,31,59,90,120,151,181,212,243,273,304,334],leapLadder=[0,31,60,91,121,152,182,213,244,274,305,335];function unitOutOfRange(t,e){return new Invalid("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function dayOfWeek(t,e,r){const a=new Date(Date.UTC(t,e-1,r));t<100&&t>=0&&a.setUTCFullYear(a.getUTCFullYear()-1900);const i=a.getUTCDay();return i===0?7:i}function computeOrdinal(t,e,r){return r+(isLeapYear(t)?leapLadder:nonLeapLadder)[e-1]}function uncomputeOrdinal(t,e){const r=isLeapYear(t)?leapLadder:nonLeapLadder,a=r.findIndex(o=>o<e),i=e-r[a];return{month:a+1,day:i}}function isoWeekdayToLocal(t,e){return(t-e+7)%7+1}function gregorianToWeek(t,e=4,r=1){const{year:a,month:i,day:o}=t,u=computeOrdinal(a,i,o),c=isoWeekdayToLocal(dayOfWeek(a,i,o),r);let f=Math.floor((u-c+14-e)/7),d;return f<1?(d=a-1,f=weeksInWeekYear(d,e,r)):f>weeksInWeekYear(a,e,r)?(d=a+1,f=1):d=a,{weekYear:d,weekNumber:f,weekday:c,...timeObject(t)}}function weekToGregorian(t,e=4,r=1){const{weekYear:a,weekNumber:i,weekday:o}=t,u=isoWeekdayToLocal(dayOfWeek(a,1,e),r),c=daysInYear(a);let f=i*7+o-u-7+e,d;f<1?(d=a-1,f+=daysInYear(d)):f>c?(d=a+1,f-=daysInYear(a)):d=a;const{month:m,day:h}=uncomputeOrdinal(d,f);return{year:d,month:m,day:h,...timeObject(t)}}function gregorianToOrdinal(t){const{year:e,month:r,day:a}=t,i=computeOrdinal(e,r,a);return{year:e,ordinal:i,...timeObject(t)}}function ordinalToGregorian(t){const{year:e,ordinal:r}=t,{month:a,day:i}=uncomputeOrdinal(e,r);return{year:e,month:a,day:i,...timeObject(t)}}function usesLocalWeekValues(t,e){if(!isUndefined(t.localWeekday)||!isUndefined(t.localWeekNumber)||!isUndefined(t.localWeekYear)){if(!isUndefined(t.weekday)||!isUndefined(t.weekNumber)||!isUndefined(t.weekYear))throw new ConflictingSpecificationError("Cannot mix locale-based week fields with ISO-based week fields");return isUndefined(t.localWeekday)||(t.weekday=t.localWeekday),isUndefined(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),isUndefined(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function hasInvalidWeekData(t,e=4,r=1){const a=isInteger(t.weekYear),i=integerBetween(t.weekNumber,1,weeksInWeekYear(t.weekYear,e,r)),o=integerBetween(t.weekday,1,7);return a?i?o?!1:unitOutOfRange("weekday",t.weekday):unitOutOfRange("week",t.weekNumber):unitOutOfRange("weekYear",t.weekYear)}function hasInvalidOrdinalData(t){const e=isInteger(t.year),r=integerBetween(t.ordinal,1,daysInYear(t.year));return e?r?!1:unitOutOfRange("ordinal",t.ordinal):unitOutOfRange("year",t.year)}function hasInvalidGregorianData(t){const e=isInteger(t.year),r=integerBetween(t.month,1,12),a=integerBetween(t.day,1,daysInMonth(t.year,t.month));return e?r?a?!1:unitOutOfRange("day",t.day):unitOutOfRange("month",t.month):unitOutOfRange("year",t.year)}function hasInvalidTimeData(t){const{hour:e,minute:r,second:a,millisecond:i}=t,o=integerBetween(e,0,23)||e===24&&r===0&&a===0&&i===0,u=integerBetween(r,0,59),c=integerBetween(a,0,59),f=integerBetween(i,0,999);return o?u?c?f?!1:unitOutOfRange("millisecond",i):unitOutOfRange("second",a):unitOutOfRange("minute",r):unitOutOfRange("hour",e)}function isUndefined(t){return typeof t>"u"}function isNumber(t){return typeof t=="number"}function isInteger(t){return typeof t=="number"&&t%1===0}function isString(t){return typeof t=="string"}function isDate(t){return Object.prototype.toString.call(t)==="[object Date]"}function hasRelative(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function hasLocaleWeekInfo(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function maybeArray(t){return Array.isArray(t)?t:[t]}function bestBy(t,e,r){if(t.length!==0)return t.reduce((a,i)=>{const o=[e(i),i];return a&&r(a[0],o[0])===a[0]?a:o},null)[1]}function pick(t,e){return e.reduce((r,a)=>(r[a]=t[a],r),{})}function hasOwnProperty(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function validateWeekSettings(t){if(t==null)return null;if(typeof t!="object")throw new InvalidArgumentError("Week settings must be an object");if(!integerBetween(t.firstDay,1,7)||!integerBetween(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!integerBetween(e,1,7)))throw new InvalidArgumentError("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function integerBetween(t,e,r){return isInteger(t)&&t>=e&&t<=r}function floorMod(t,e){return t-e*Math.floor(t/e)}function padStart(t,e=2){const r=t<0;let a;return r?a="-"+(""+-t).padStart(e,"0"):a=(""+t).padStart(e,"0"),a}function parseInteger(t){if(!(isUndefined(t)||t===null||t===""))return parseInt(t,10)}function parseFloating(t){if(!(isUndefined(t)||t===null||t===""))return parseFloat(t)}function parseMillis(t){if(!(isUndefined(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function roundTo(t,e,r=!1){const a=10**e;return(r?Math.trunc:Math.round)(t*a)/a}function isLeapYear(t){return t%4===0&&(t%100!==0||t%400===0)}function daysInYear(t){return isLeapYear(t)?366:365}function daysInMonth(t,e){const r=floorMod(e-1,12)+1,a=t+(e-r)/12;return r===2?isLeapYear(a)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function objToLocalTS(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function firstWeekOffset(t,e,r){return-isoWeekdayToLocal(dayOfWeek(t,1,e),r)+e-1}function weeksInWeekYear(t,e=4,r=1){const a=firstWeekOffset(t,e,r),i=firstWeekOffset(t+1,e,r);return(daysInYear(t)-a+i)/7}function untruncateYear(t){return t>99?t:t>Settings.twoDigitCutoffYear?1900+t:2e3+t}function parseZoneInfo(t,e,r,a=null){const i=new Date(t),o={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};a&&(o.timeZone=a);const u={timeZoneName:e,...o},c=new Intl.DateTimeFormat(r,u).formatToParts(i).find(f=>f.type.toLowerCase()==="timezonename");return c?c.value:null}function signedOffset(t,e){let r=parseInt(t,10);Number.isNaN(r)&&(r=0);const a=parseInt(e,10)||0,i=r<0||Object.is(r,-0)?-a:a;return r*60+i}function asNumber(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new InvalidArgumentError(`Invalid unit value ${t}`);return e}function normalizeObject(t,e){const r={};for(const a in t)if(hasOwnProperty(t,a)){const i=t[a];if(i==null)continue;r[e(a)]=asNumber(i)}return r}function formatOffset(t,e){const r=Math.trunc(Math.abs(t/60)),a=Math.trunc(Math.abs(t%60)),i=t>=0?"+":"-";switch(e){case"short":return`${i}${padStart(r,2)}:${padStart(a,2)}`;case"narrow":return`${i}${r}${a>0?`:${a}`:""}`;case"techie":return`${i}${padStart(r,2)}${padStart(a,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function timeObject(t){return pick(t,["hour","minute","second","millisecond"])}const monthsLong=["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthsNarrow=["J","F","M","A","M","J","J","A","S","O","N","D"];function months(t){switch(t){case"narrow":return[...monthsNarrow];case"short":return[...monthsShort];case"long":return[...monthsLong];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const weekdaysLong=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],weekdaysShort=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],weekdaysNarrow=["M","T","W","T","F","S","S"];function weekdays(t){switch(t){case"narrow":return[...weekdaysNarrow];case"short":return[...weekdaysShort];case"long":return[...weekdaysLong];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const meridiems=["AM","PM"],erasLong=["Before Christ","Anno Domini"],erasShort=["BC","AD"],erasNarrow=["B","A"];function eras(t){switch(t){case"narrow":return[...erasNarrow];case"short":return[...erasShort];case"long":return[...erasLong];default:return null}}function meridiemForDateTime(t){return meridiems[t.hour<12?0:1]}function weekdayForDateTime(t,e){return weekdays(e)[t.weekday-1]}function monthForDateTime(t,e){return months(e)[t.month-1]}function eraForDateTime(t,e){return eras(e)[t.year<0?0:1]}function formatRelativeTime(t,e,r="always",a=!1){const i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},o=["hours","minutes","seconds"].indexOf(t)===-1;if(r==="auto"&&o){const h=t==="days";switch(e){case 1:return h?"tomorrow":`next ${i[t][0]}`;case-1:return h?"yesterday":`last ${i[t][0]}`;case 0:return h?"today":`this ${i[t][0]}`}}const u=Object.is(e,-0)||e<0,c=Math.abs(e),f=c===1,d=i[t],m=a?f?d[1]:d[2]||d[1]:f?i[t][0]:t;return u?`${c} ${m} ago`:`in ${c} ${m}`}function stringifyTokens(t,e){let r="";for(const a of t)a.literal?r+=a.val:r+=e(a.val);return r}const macroTokenToFormatOpts={D:DATE_SHORT,DD:DATE_MED,DDD:DATE_FULL,DDDD:DATE_HUGE,t:TIME_SIMPLE,tt:TIME_WITH_SECONDS,ttt:TIME_WITH_SHORT_OFFSET,tttt:TIME_WITH_LONG_OFFSET,T:TIME_24_SIMPLE,TT:TIME_24_WITH_SECONDS,TTT:TIME_24_WITH_SHORT_OFFSET,TTTT:TIME_24_WITH_LONG_OFFSET,f:DATETIME_SHORT,ff:DATETIME_MED,fff:DATETIME_FULL,ffff:DATETIME_HUGE,F:DATETIME_SHORT_WITH_SECONDS,FF:DATETIME_MED_WITH_SECONDS,FFF:DATETIME_FULL_WITH_SECONDS,FFFF:DATETIME_HUGE_WITH_SECONDS};class Formatter{static create(e,r={}){return new Formatter(e,r)}static parseFormat(e){let r=null,a="",i=!1;const o=[];for(let u=0;u<e.length;u++){const c=e.charAt(u);c==="'"?(a.length>0&&o.push({literal:i||/^\s+$/.test(a),val:a}),r=null,a="",i=!i):i||c===r?a+=c:(a.length>0&&o.push({literal:/^\s+$/.test(a),val:a}),a=c,r=c)}return a.length>0&&o.push({literal:i||/^\s+$/.test(a),val:a}),o}static macroTokenToFormatOpts(e){return macroTokenToFormatOpts[e]}constructor(e,r){this.opts=r,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...r}).format()}dtFormatter(e,r={}){return this.loc.dtFormatter(e,{...this.opts,...r})}formatDateTime(e,r){return this.dtFormatter(e,r).format()}formatDateTimeParts(e,r){return this.dtFormatter(e,r).formatToParts()}formatInterval(e,r){return this.dtFormatter(e.start,r).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,r){return this.dtFormatter(e,r).resolvedOptions()}num(e,r=0){if(this.opts.forceSimple)return padStart(e,r);const a={...this.opts};return r>0&&(a.padTo=r),this.loc.numberFormatter(a).format(e)}formatDateTimeFromString(e,r){const a=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",o=(p,g)=>this.loc.extract(e,p,g),u=p=>e.isOffsetFixed&&e.offset===0&&p.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,p.format):"",c=()=>a?meridiemForDateTime(e):o({hour:"numeric",hourCycle:"h12"},"dayperiod"),f=(p,g)=>a?monthForDateTime(e,p):o(g?{month:p}:{month:p,day:"numeric"},"month"),d=(p,g)=>a?weekdayForDateTime(e,p):o(g?{weekday:p}:{weekday:p,month:"long",day:"numeric"},"weekday"),m=p=>{const g=Formatter.macroTokenToFormatOpts(p);return g?this.formatWithSystemDefault(e,g):p},h=p=>a?eraForDateTime(e,p):o({era:p},"era"),_=p=>{switch(p){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return u({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return u({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return u({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return c();case"d":return i?o({day:"numeric"},"day"):this.num(e.day);case"dd":return i?o({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return d("short",!0);case"cccc":return d("long",!0);case"ccccc":return d("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return d("short",!1);case"EEEE":return d("long",!1);case"EEEEE":return d("narrow",!1);case"L":return i?o({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?o({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return f("short",!0);case"LLLL":return f("long",!0);case"LLLLL":return f("narrow",!0);case"M":return i?o({month:"numeric"},"month"):this.num(e.month);case"MM":return i?o({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return f("short",!1);case"MMMM":return f("long",!1);case"MMMMM":return f("narrow",!1);case"y":return i?o({year:"numeric"},"year"):this.num(e.year);case"yy":return i?o({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?o({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?o({year:"numeric"},"year"):this.num(e.year,6);case"G":return h("short");case"GG":return h("long");case"GGGGG":return h("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return m(p)}};return stringifyTokens(Formatter.parseFormat(r),_)}formatDurationFromString(e,r){const a=f=>{switch(f[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},i=f=>d=>{const m=a(d);return m?this.num(f.get(m),d.length):d},o=Formatter.parseFormat(r),u=o.reduce((f,{literal:d,val:m})=>d?f:f.concat(m),[]),c=e.shiftTo(...u.map(a).filter(f=>f));return stringifyTokens(o,i(c))}}const ianaRegex=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function combineRegexes(...t){const e=t.reduce((r,a)=>r+a.source,"");return RegExp(`^${e}$`)}function combineExtractors(...t){return e=>t.reduce(([r,a,i],o)=>{const[u,c,f]=o(e,i);return[{...r,...u},c||a,f]},[{},null,1]).slice(0,2)}function parse(t,...e){if(t==null)return[null,null];for(const[r,a]of e){const i=r.exec(t);if(i)return a(i)}return[null,null]}function simpleParse(...t){return(e,r)=>{const a={};let i;for(i=0;i<t.length;i++)a[t[i]]=parseInteger(e[r+i]);return[a,null,r+i]}}const offsetRegex=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,isoExtendedZone=`(?:${offsetRegex.source}?(?:\\[(${ianaRegex.source})\\])?)?`,isoTimeBaseRegex=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,isoTimeRegex=RegExp(`${isoTimeBaseRegex.source}${isoExtendedZone}`),isoTimeExtensionRegex=RegExp(`(?:T${isoTimeRegex.source})?`),isoYmdRegex=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,isoWeekRegex=/(\d{4})-?W(\d\d)(?:-?(\d))?/,isoOrdinalRegex=/(\d{4})-?(\d{3})/,extractISOWeekData=simpleParse("weekYear","weekNumber","weekDay"),extractISOOrdinalData=simpleParse("year","ordinal"),sqlYmdRegex=/(\d{4})-(\d\d)-(\d\d)/,sqlTimeRegex=RegExp(`${isoTimeBaseRegex.source} ?(?:${offsetRegex.source}|(${ianaRegex.source}))?`),sqlTimeExtensionRegex=RegExp(`(?: ${sqlTimeRegex.source})?`);function int(t,e,r){const a=t[e];return isUndefined(a)?r:parseInteger(a)}function extractISOYmd(t,e){return[{year:int(t,e),month:int(t,e+1,1),day:int(t,e+2,1)},null,e+3]}function extractISOTime(t,e){return[{hours:int(t,e,0),minutes:int(t,e+1,0),seconds:int(t,e+2,0),milliseconds:parseMillis(t[e+3])},null,e+4]}function extractISOOffset(t,e){const r=!t[e]&&!t[e+1],a=signedOffset(t[e+1],t[e+2]),i=r?null:FixedOffsetZone.instance(a);return[{},i,e+3]}function extractIANAZone(t,e){const r=t[e]?IANAZone.create(t[e]):null;return[{},r,e+1]}const isoTimeOnly=RegExp(`^T?${isoTimeBaseRegex.source}$`),isoDuration=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function extractISODuration(t){const[e,r,a,i,o,u,c,f,d]=t,m=e[0]==="-",h=f&&f[0]==="-",_=(p,g=!1)=>p!==void 0&&(g||p&&m)?-p:p;return[{years:_(parseFloating(r)),months:_(parseFloating(a)),weeks:_(parseFloating(i)),days:_(parseFloating(o)),hours:_(parseFloating(u)),minutes:_(parseFloating(c)),seconds:_(parseFloating(f),f==="-0"),milliseconds:_(parseMillis(d),h)}]}const obsOffsets={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function fromStrings(t,e,r,a,i,o,u){const c={year:e.length===2?untruncateYear(parseInteger(e)):parseInteger(e),month:monthsShort.indexOf(r)+1,day:parseInteger(a),hour:parseInteger(i),minute:parseInteger(o)};return u&&(c.second=parseInteger(u)),t&&(c.weekday=t.length>3?weekdaysLong.indexOf(t)+1:weekdaysShort.indexOf(t)+1),c}const rfc2822=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function extractRFC2822(t){const[,e,r,a,i,o,u,c,f,d,m,h]=t,_=fromStrings(e,i,a,r,o,u,c);let p;return f?p=obsOffsets[f]:d?p=0:p=signedOffset(m,h),[_,new FixedOffsetZone(p)]}function preprocessRFC2822(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const rfc1123=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,rfc850=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,ascii=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function extractRFC1123Or850(t){const[,e,r,a,i,o,u,c]=t;return[fromStrings(e,i,a,r,o,u,c),FixedOffsetZone.utcInstance]}function extractASCII(t){const[,e,r,a,i,o,u,c]=t;return[fromStrings(e,c,r,a,i,o,u),FixedOffsetZone.utcInstance]}const isoYmdWithTimeExtensionRegex=combineRegexes(isoYmdRegex,isoTimeExtensionRegex),isoWeekWithTimeExtensionRegex=combineRegexes(isoWeekRegex,isoTimeExtensionRegex),isoOrdinalWithTimeExtensionRegex=combineRegexes(isoOrdinalRegex,isoTimeExtensionRegex),isoTimeCombinedRegex=combineRegexes(isoTimeRegex),extractISOYmdTimeAndOffset=combineExtractors(extractISOYmd,extractISOTime,extractISOOffset,extractIANAZone),extractISOWeekTimeAndOffset=combineExtractors(extractISOWeekData,extractISOTime,extractISOOffset,extractIANAZone),extractISOOrdinalDateAndTime=combineExtractors(extractISOOrdinalData,extractISOTime,extractISOOffset,extractIANAZone),extractISOTimeAndOffset=combineExtractors(extractISOTime,extractISOOffset,extractIANAZone);function parseISODate(t){return parse(t,[isoYmdWithTimeExtensionRegex,extractISOYmdTimeAndOffset],[isoWeekWithTimeExtensionRegex,extractISOWeekTimeAndOffset],[isoOrdinalWithTimeExtensionRegex,extractISOOrdinalDateAndTime],[isoTimeCombinedRegex,extractISOTimeAndOffset])}function parseRFC2822Date(t){return parse(preprocessRFC2822(t),[rfc2822,extractRFC2822])}function parseHTTPDate(t){return parse(t,[rfc1123,extractRFC1123Or850],[rfc850,extractRFC1123Or850],[ascii,extractASCII])}function parseISODuration(t){return parse(t,[isoDuration,extractISODuration])}const extractISOTimeOnly=combineExtractors(extractISOTime);function parseISOTimeOnly(t){return parse(t,[isoTimeOnly,extractISOTimeOnly])}const sqlYmdWithTimeExtensionRegex=combineRegexes(sqlYmdRegex,sqlTimeExtensionRegex),sqlTimeCombinedRegex=combineRegexes(sqlTimeRegex),extractISOTimeOffsetAndIANAZone=combineExtractors(extractISOTime,extractISOOffset,extractIANAZone);function parseSQL(t){return parse(t,[sqlYmdWithTimeExtensionRegex,extractISOYmdTimeAndOffset],[sqlTimeCombinedRegex,extractISOTimeOffsetAndIANAZone])}const INVALID$2="Invalid Duration",lowOrderMatrix={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},casualMatrix={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...lowOrderMatrix},daysInYearAccurate=146097/400,daysInMonthAccurate=146097/4800,accurateMatrix={years:{quarters:4,months:12,weeks:daysInYearAccurate/7,days:daysInYearAccurate,hours:daysInYearAccurate*24,minutes:daysInYearAccurate*24*60,seconds:daysInYearAccurate*24*60*60,milliseconds:daysInYearAccurate*24*60*60*1e3},quarters:{months:3,weeks:daysInYearAccurate/28,days:daysInYearAccurate/4,hours:daysInYearAccurate*24/4,minutes:daysInYearAccurate*24*60/4,seconds:daysInYearAccurate*24*60*60/4,milliseconds:daysInYearAccurate*24*60*60*1e3/4},months:{weeks:daysInMonthAccurate/7,days:daysInMonthAccurate,hours:daysInMonthAccurate*24,minutes:daysInMonthAccurate*24*60,seconds:daysInMonthAccurate*24*60*60,milliseconds:daysInMonthAccurate*24*60*60*1e3},...lowOrderMatrix},orderedUnits$1=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],reverseUnits=orderedUnits$1.slice(0).reverse();function clone$1(t,e,r=!1){const a={values:r?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new Duration(a)}function durationToMillis(t,e){let r=e.milliseconds??0;for(const a of reverseUnits.slice(1))e[a]&&(r+=e[a]*t[a].milliseconds);return r}function normalizeValues(t,e){const r=durationToMillis(t,e)<0?-1:1;orderedUnits$1.reduceRight((a,i)=>{if(isUndefined(e[i]))return a;if(a){const o=e[a]*r,u=t[i][a],c=Math.floor(o/u);e[i]+=c*r,e[a]-=c*u*r}return i},null),orderedUnits$1.reduce((a,i)=>{if(isUndefined(e[i]))return a;if(a){const o=e[a]%1;e[a]-=o,e[i]+=o*t[a][i]}return i},null)}function removeZeroes(t){const e={};for(const[r,a]of Object.entries(t))a!==0&&(e[r]=a);return e}class Duration{constructor(e){const r=e.conversionAccuracy==="longterm"||!1;let a=r?accurateMatrix:casualMatrix;e.matrix&&(a=e.matrix),this.values=e.values,this.loc=e.loc||Locale.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=a,this.isLuxonDuration=!0}static fromMillis(e,r){return Duration.fromObject({milliseconds:e},r)}static fromObject(e,r={}){if(e==null||typeof e!="object")throw new InvalidArgumentError(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Duration({values:normalizeObject(e,Duration.normalizeUnit),loc:Locale.fromObject(r),conversionAccuracy:r.conversionAccuracy,matrix:r.matrix})}static fromDurationLike(e){if(isNumber(e))return Duration.fromMillis(e);if(Duration.isDuration(e))return e;if(typeof e=="object")return Duration.fromObject(e);throw new InvalidArgumentError(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,r){const[a]=parseISODuration(e);return a?Duration.fromObject(a,r):Duration.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,r){const[a]=parseISOTimeOnly(e);return a?Duration.fromObject(a,r):Duration.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,r=null){if(!e)throw new InvalidArgumentError("need to specify a reason the Duration is invalid");const a=e instanceof Invalid?e:new Invalid(e,r);if(Settings.throwOnInvalid)throw new InvalidDurationError(a);return new Duration({invalid:a})}static normalizeUnit(e){const r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!r)throw new InvalidUnitError(e);return r}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,r={}){const a={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?Formatter.create(this.loc,a).formatDurationFromString(this,e):INVALID$2}toHuman(e={}){if(!this.isValid)return INVALID$2;const r=orderedUnits$1.map(a=>{const i=this.values[a];return isUndefined(i)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:a.slice(0,-1)}).format(i)}).filter(a=>a);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=roundTo(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const r=this.toMillis();return r<0||r>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},DateTime.fromMillis(r,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?durationToMillis(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const r=Duration.fromDurationLike(e),a={};for(const i of orderedUnits$1)(hasOwnProperty(r.values,i)||hasOwnProperty(this.values,i))&&(a[i]=r.get(i)+this.get(i));return clone$1(this,{values:a},!0)}minus(e){if(!this.isValid)return this;const r=Duration.fromDurationLike(e);return this.plus(r.negate())}mapUnits(e){if(!this.isValid)return this;const r={};for(const a of Object.keys(this.values))r[a]=asNumber(e(this.values[a],a));return clone$1(this,{values:r},!0)}get(e){return this[Duration.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const r={...this.values,...normalizeObject(e,Duration.normalizeUnit)};return clone$1(this,{values:r})}reconfigure({locale:e,numberingSystem:r,conversionAccuracy:a,matrix:i}={}){const u={loc:this.loc.clone({locale:e,numberingSystem:r}),matrix:i,conversionAccuracy:a};return clone$1(this,u)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return normalizeValues(this.matrix,e),clone$1(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=removeZeroes(this.normalize().shiftToAll().toObject());return clone$1(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(u=>Duration.normalizeUnit(u));const r={},a={},i=this.toObject();let o;for(const u of orderedUnits$1)if(e.indexOf(u)>=0){o=u;let c=0;for(const d in a)c+=this.matrix[d][u]*a[d],a[d]=0;isNumber(i[u])&&(c+=i[u]);const f=Math.trunc(c);r[u]=f,a[u]=(c*1e3-f*1e3)/1e3}else isNumber(i[u])&&(a[u]=i[u]);for(const u in a)a[u]!==0&&(r[o]+=u===o?a[u]:a[u]/this.matrix[o][u]);return normalizeValues(this.matrix,r),clone$1(this,{values:r},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const r of Object.keys(this.values))e[r]=this.values[r]===0?0:-this.values[r];return clone$1(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function r(a,i){return a===void 0||a===0?i===void 0||i===0:a===i}for(const a of orderedUnits$1)if(!r(this.values[a],e.values[a]))return!1;return!0}}const INVALID$1="Invalid Interval";function validateStartEnd(t,e){return!t||!t.isValid?Interval.invalid("missing or invalid start"):!e||!e.isValid?Interval.invalid("missing or invalid end"):e<t?Interval.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class Interval{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,r=null){if(!e)throw new InvalidArgumentError("need to specify a reason the Interval is invalid");const a=e instanceof Invalid?e:new Invalid(e,r);if(Settings.throwOnInvalid)throw new InvalidIntervalError(a);return new Interval({invalid:a})}static fromDateTimes(e,r){const a=friendlyDateTime(e),i=friendlyDateTime(r),o=validateStartEnd(a,i);return o??new Interval({start:a,end:i})}static after(e,r){const a=Duration.fromDurationLike(r),i=friendlyDateTime(e);return Interval.fromDateTimes(i,i.plus(a))}static before(e,r){const a=Duration.fromDurationLike(r),i=friendlyDateTime(e);return Interval.fromDateTimes(i.minus(a),i)}static fromISO(e,r){const[a,i]=(e||"").split("/",2);if(a&&i){let o,u;try{o=DateTime.fromISO(a,r),u=o.isValid}catch{u=!1}let c,f;try{c=DateTime.fromISO(i,r),f=c.isValid}catch{f=!1}if(u&&f)return Interval.fromDateTimes(o,c);if(u){const d=Duration.fromISO(i,r);if(d.isValid)return Interval.after(o,d)}else if(f){const d=Duration.fromISO(a,r);if(d.isValid)return Interval.before(c,d)}}return Interval.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",r){if(!this.isValid)return NaN;const a=this.start.startOf(e,r);let i;return r!=null&&r.useLocaleWeeks?i=this.end.reconfigure({locale:a.locale}):i=this.end,i=i.startOf(e,r),Math.floor(i.diff(a,e).get(e))+(i.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:r}={}){return this.isValid?Interval.fromDateTimes(e||this.s,r||this.e):this}splitAt(...e){if(!this.isValid)return[];const r=e.map(friendlyDateTime).filter(u=>this.contains(u)).sort((u,c)=>u.toMillis()-c.toMillis()),a=[];let{s:i}=this,o=0;for(;i<this.e;){const u=r[o]||this.e,c=+u>+this.e?this.e:u;a.push(Interval.fromDateTimes(i,c)),i=c,o+=1}return a}splitBy(e){const r=Duration.fromDurationLike(e);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s:a}=this,i=1,o;const u=[];for(;a<this.e;){const c=this.start.plus(r.mapUnits(f=>f*i));o=+c>+this.e?this.e:c,u.push(Interval.fromDateTimes(a,o)),a=o,i+=1}return u}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const r=this.s>e.s?this.s:e.s,a=this.e<e.e?this.e:e.e;return r>=a?null:Interval.fromDateTimes(r,a)}union(e){if(!this.isValid)return this;const r=this.s<e.s?this.s:e.s,a=this.e>e.e?this.e:e.e;return Interval.fromDateTimes(r,a)}static merge(e){const[r,a]=e.sort((i,o)=>i.s-o.s).reduce(([i,o],u)=>o?o.overlaps(u)||o.abutsStart(u)?[i,o.union(u)]:[i.concat([o]),u]:[i,u],[[],null]);return a&&r.push(a),r}static xor(e){let r=null,a=0;const i=[],o=e.map(f=>[{time:f.s,type:"s"},{time:f.e,type:"e"}]),u=Array.prototype.concat(...o),c=u.sort((f,d)=>f.time-d.time);for(const f of c)a+=f.type==="s"?1:-1,a===1?r=f.time:(r&&+r!=+f.time&&i.push(Interval.fromDateTimes(r,f.time)),r=null);return Interval.merge(i)}difference(...e){return Interval.xor([this].concat(e)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:INVALID$1}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=DATE_SHORT,r={}){return this.isValid?Formatter.create(this.s.loc.clone(r),e).formatInterval(this):INVALID$1}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:INVALID$1}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:INVALID$1}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:INVALID$1}toFormat(e,{separator:r="  "}={}){return this.isValid?`${this.s.toFormat(e)}${r}${this.e.toFormat(e)}`:INVALID$1}toDuration(e,r){return this.isValid?this.e.diff(this.s,e,r):Duration.invalid(this.invalidReason)}mapEndpoints(e){return Interval.fromDateTimes(e(this.s),e(this.e))}}class Info{static hasDST(e=Settings.defaultZone){const r=DateTime.now().setZone(e).set({month:12});return!e.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(e){return IANAZone.isValidZone(e)}static normalizeZone(e){return normalizeZone(e,Settings.defaultZone)}static getStartOfWeek({locale:e=null,locObj:r=null}={}){return(r||Locale.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:r=null}={}){return(r||Locale.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:r=null}={}){return(r||Locale.create(e)).getWeekendDays().slice()}static months(e="long",{locale:r=null,numberingSystem:a=null,locObj:i=null,outputCalendar:o="gregory"}={}){return(i||Locale.create(r,a,o)).months(e)}static monthsFormat(e="long",{locale:r=null,numberingSystem:a=null,locObj:i=null,outputCalendar:o="gregory"}={}){return(i||Locale.create(r,a,o)).months(e,!0)}static weekdays(e="long",{locale:r=null,numberingSystem:a=null,locObj:i=null}={}){return(i||Locale.create(r,a,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:r=null,numberingSystem:a=null,locObj:i=null}={}){return(i||Locale.create(r,a,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Locale.create(e).meridiems()}static eras(e="short",{locale:r=null}={}){return Locale.create(r,null,"gregory").eras(e)}static features(){return{relative:hasRelative(),localeWeek:hasLocaleWeekInfo()}}}function dayDiff(t,e){const r=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),a=r(e)-r(t);return Math.floor(Duration.fromMillis(a).as("days"))}function highOrderDiffs(t,e,r){const a=[["years",(f,d)=>d.year-f.year],["quarters",(f,d)=>d.quarter-f.quarter+(d.year-f.year)*4],["months",(f,d)=>d.month-f.month+(d.year-f.year)*12],["weeks",(f,d)=>{const m=dayDiff(f,d);return(m-m%7)/7}],["days",dayDiff]],i={},o=t;let u,c;for(const[f,d]of a)r.indexOf(f)>=0&&(u=f,i[f]=d(t,e),c=o.plus(i),c>e?(i[f]--,t=o.plus(i),t>e&&(c=t,i[f]--,t=o.plus(i))):t=c);return[t,i,c,u]}function diff(t,e,r,a){let[i,o,u,c]=highOrderDiffs(t,e,r);const f=e-i,d=r.filter(h=>["hours","minutes","seconds","milliseconds"].indexOf(h)>=0);d.length===0&&(u<e&&(u=i.plus({[c]:1})),u!==i&&(o[c]=(o[c]||0)+f/(u-i)));const m=Duration.fromObject(o,a);return d.length>0?Duration.fromMillis(f,a).shiftTo(...d).plus(m):m}const numberingSystems={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},numberingSystemsUTF16={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},hanidecChars=numberingSystems.hanidec.replace(/[\[|\]]/g,"").split("");function parseDigits(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let r=0;r<t.length;r++){const a=t.charCodeAt(r);if(t[r].search(numberingSystems.hanidec)!==-1)e+=hanidecChars.indexOf(t[r]);else for(const i in numberingSystemsUTF16){const[o,u]=numberingSystemsUTF16[i];a>=o&&a<=u&&(e+=a-o)}}return parseInt(e,10)}else return e}function digitRegex({numberingSystem:t},e=""){return new RegExp(`${numberingSystems[t||"latn"]}${e}`)}const MISSING_FTP="missing Intl.DateTimeFormat.formatToParts support";function intUnit(t,e=r=>r){return{regex:t,deser:([r])=>e(parseDigits(r))}}const NBSP="",spaceOrNBSP=`[ ${NBSP}]`,spaceOrNBSPRegExp=new RegExp(spaceOrNBSP,"g");function fixListRegex(t){return t.replace(/\./g,"\\.?").replace(spaceOrNBSPRegExp,spaceOrNBSP)}function stripInsensitivities(t){return t.replace(/\./g,"").replace(spaceOrNBSPRegExp," ").toLowerCase()}function oneOf(t,e){return t===null?null:{regex:RegExp(t.map(fixListRegex).join("|")),deser:([r])=>t.findIndex(a=>stripInsensitivities(r)===stripInsensitivities(a))+e}}function offset(t,e){return{regex:t,deser:([,r,a])=>signedOffset(r,a),groups:e}}function simple(t){return{regex:t,deser:([e])=>e}}function escapeToken(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function unitForToken(t,e){const r=digitRegex(e),a=digitRegex(e,"{2}"),i=digitRegex(e,"{3}"),o=digitRegex(e,"{4}"),u=digitRegex(e,"{6}"),c=digitRegex(e,"{1,2}"),f=digitRegex(e,"{1,3}"),d=digitRegex(e,"{1,6}"),m=digitRegex(e,"{1,9}"),h=digitRegex(e,"{2,4}"),_=digitRegex(e,"{4,6}"),p=v=>({regex:RegExp(escapeToken(v.val)),deser:([b])=>b,literal:!0}),D=(v=>{if(t.literal)return p(v);switch(v.val){case"G":return oneOf(e.eras("short"),0);case"GG":return oneOf(e.eras("long"),0);case"y":return intUnit(d);case"yy":return intUnit(h,untruncateYear);case"yyyy":return intUnit(o);case"yyyyy":return intUnit(_);case"yyyyyy":return intUnit(u);case"M":return intUnit(c);case"MM":return intUnit(a);case"MMM":return oneOf(e.months("short",!0),1);case"MMMM":return oneOf(e.months("long",!0),1);case"L":return intUnit(c);case"LL":return intUnit(a);case"LLL":return oneOf(e.months("short",!1),1);case"LLLL":return oneOf(e.months("long",!1),1);case"d":return intUnit(c);case"dd":return intUnit(a);case"o":return intUnit(f);case"ooo":return intUnit(i);case"HH":return intUnit(a);case"H":return intUnit(c);case"hh":return intUnit(a);case"h":return intUnit(c);case"mm":return intUnit(a);case"m":return intUnit(c);case"q":return intUnit(c);case"qq":return intUnit(a);case"s":return intUnit(c);case"ss":return intUnit(a);case"S":return intUnit(f);case"SSS":return intUnit(i);case"u":return simple(m);case"uu":return simple(c);case"uuu":return intUnit(r);case"a":return oneOf(e.meridiems(),0);case"kkkk":return intUnit(o);case"kk":return intUnit(h,untruncateYear);case"W":return intUnit(c);case"WW":return intUnit(a);case"E":case"c":return intUnit(r);case"EEE":return oneOf(e.weekdays("short",!1),1);case"EEEE":return oneOf(e.weekdays("long",!1),1);case"ccc":return oneOf(e.weekdays("short",!0),1);case"cccc":return oneOf(e.weekdays("long",!0),1);case"Z":case"ZZ":return offset(new RegExp(`([+-]${c.source})(?::(${a.source}))?`),2);case"ZZZ":return offset(new RegExp(`([+-]${c.source})(${a.source})?`),2);case"z":return simple(/[a-z_+-/]{1,256}?/i);case" ":return simple(/[^\S\n\r]/);default:return p(v)}})(t)||{invalidReason:MISSING_FTP};return D.token=t,D}const partTypeStyleToTokenVal={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function tokenForPart(t,e,r){const{type:a,value:i}=t;if(a==="literal"){const f=/^\s+$/.test(i);return{literal:!f,val:f?" ":i}}const o=e[a];let u=a;a==="hour"&&(e.hour12!=null?u=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?u="hour12":u="hour24":u=r.hour12?"hour12":"hour24");let c=partTypeStyleToTokenVal[u];if(typeof c=="object"&&(c=c[o]),c)return{literal:!1,val:c}}function buildRegex(t){return[`^${t.map(r=>r.regex).reduce((r,a)=>`${r}(${a.source})`,"")}$`,t]}function match(t,e,r){const a=t.match(e);if(a){const i={};let o=1;for(const u in r)if(hasOwnProperty(r,u)){const c=r[u],f=c.groups?c.groups+1:1;!c.literal&&c.token&&(i[c.token.val[0]]=c.deser(a.slice(o,o+f))),o+=f}return[a,i]}else return[a,{}]}function dateTimeFromMatches(t){const e=o=>{switch(o){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let r=null,a;return isUndefined(t.z)||(r=IANAZone.create(t.z)),isUndefined(t.Z)||(r||(r=new FixedOffsetZone(t.Z)),a=t.Z),isUndefined(t.q)||(t.M=(t.q-1)*3+1),isUndefined(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),isUndefined(t.u)||(t.S=parseMillis(t.u)),[Object.keys(t).reduce((o,u)=>{const c=e(u);return c&&(o[c]=t[u]),o},{}),r,a]}let dummyDateTimeCache=null;function getDummyDateTime(){return dummyDateTimeCache||(dummyDateTimeCache=DateTime.fromMillis(1555555555555)),dummyDateTimeCache}function maybeExpandMacroToken(t,e){if(t.literal)return t;const r=Formatter.macroTokenToFormatOpts(t.val),a=formatOptsToTokens(r,e);return a==null||a.includes(void 0)?t:a}function expandMacroTokens(t,e){return Array.prototype.concat(...t.map(r=>maybeExpandMacroToken(r,e)))}function explainFromTokens(t,e,r){const a=expandMacroTokens(Formatter.parseFormat(r),t),i=a.map(u=>unitForToken(u,t)),o=i.find(u=>u.invalidReason);if(o)return{input:e,tokens:a,invalidReason:o.invalidReason};{const[u,c]=buildRegex(i),f=RegExp(u,"i"),[d,m]=match(e,f,c),[h,_,p]=m?dateTimeFromMatches(m):[null,null,void 0];if(hasOwnProperty(m,"a")&&hasOwnProperty(m,"H"))throw new ConflictingSpecificationError("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:a,regex:f,rawMatches:d,matches:m,result:h,zone:_,specificOffset:p}}}function parseFromTokens(t,e,r){const{result:a,zone:i,specificOffset:o,invalidReason:u}=explainFromTokens(t,e,r);return[a,i,o,u]}function formatOptsToTokens(t,e){if(!t)return null;const a=Formatter.create(e,t).dtFormatter(getDummyDateTime()),i=a.formatToParts(),o=a.resolvedOptions();return i.map(u=>tokenForPart(u,t,o))}const INVALID="Invalid DateTime",MAX_DATE=864e13;function unsupportedZone(t){return new Invalid("unsupported zone",`the zone "${t.name}" is not supported`)}function possiblyCachedWeekData(t){return t.weekData===null&&(t.weekData=gregorianToWeek(t.c)),t.weekData}function possiblyCachedLocalWeekData(t){return t.localWeekData===null&&(t.localWeekData=gregorianToWeek(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function clone(t,e){const r={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new DateTime({...r,...e,old:r})}function fixOffset(t,e,r){let a=t-e*60*1e3;const i=r.offset(a);if(e===i)return[a,e];a-=(i-e)*60*1e3;const o=r.offset(a);return i===o?[a,i]:[t-Math.min(i,o)*60*1e3,Math.max(i,o)]}function tsToObj(t,e){t+=e*60*1e3;const r=new Date(t);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function objToTS(t,e,r){return fixOffset(objToLocalTS(t),e,r)}function adjustTime(t,e){const r=t.o,a=t.c.year+Math.trunc(e.years),i=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,o={...t.c,year:a,month:i,day:Math.min(t.c.day,daysInMonth(a,i))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},u=Duration.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),c=objToLocalTS(o);let[f,d]=fixOffset(c,r,t.zone);return u!==0&&(f+=u,d=t.zone.offset(f)),{ts:f,o:d}}function parseDataToDateTime(t,e,r,a,i,o){const{setZone:u,zone:c}=r;if(t&&Object.keys(t).length!==0||e){const f=e||c,d=DateTime.fromObject(t,{...r,zone:f,specificOffset:o});return u?d:d.setZone(c)}else return DateTime.invalid(new Invalid("unparsable",`the input "${i}" can't be parsed as ${a}`))}function toTechFormat(t,e,r=!0){return t.isValid?Formatter.create(Locale.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(t,e):null}function toISODate(t,e){const r=t.c.year>9999||t.c.year<0;let a="";return r&&t.c.year>=0&&(a+="+"),a+=padStart(t.c.year,r?6:4),e?(a+="-",a+=padStart(t.c.month),a+="-",a+=padStart(t.c.day)):(a+=padStart(t.c.month),a+=padStart(t.c.day)),a}function toISOTime(t,e,r,a,i,o){let u=padStart(t.c.hour);return e?(u+=":",u+=padStart(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!r)&&(u+=":")):u+=padStart(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!r)&&(u+=padStart(t.c.second),(t.c.millisecond!==0||!a)&&(u+=".",u+=padStart(t.c.millisecond,3))),i&&(t.isOffsetFixed&&t.offset===0&&!o?u+="Z":t.o<0?(u+="-",u+=padStart(Math.trunc(-t.o/60)),u+=":",u+=padStart(Math.trunc(-t.o%60))):(u+="+",u+=padStart(Math.trunc(t.o/60)),u+=":",u+=padStart(Math.trunc(t.o%60)))),o&&(u+="["+t.zone.ianaName+"]"),u}const defaultUnitValues={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},defaultWeekUnitValues={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},defaultOrdinalUnitValues={ordinal:1,hour:0,minute:0,second:0,millisecond:0},orderedUnits=["year","month","day","hour","minute","second","millisecond"],orderedWeekUnits=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],orderedOrdinalUnits=["year","ordinal","hour","minute","second","millisecond"];function normalizeUnit(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new InvalidUnitError(t);return e}function normalizeUnitWithLocalWeeks(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return normalizeUnit(t)}}function quickDT(t,e){const r=normalizeZone(e.zone,Settings.defaultZone),a=Locale.fromObject(e),i=Settings.now();let o,u;if(isUndefined(t.year))o=i;else{for(const d of orderedUnits)isUndefined(t[d])&&(t[d]=defaultUnitValues[d]);const c=hasInvalidGregorianData(t)||hasInvalidTimeData(t);if(c)return DateTime.invalid(c);const f=r.offset(i);[o,u]=objToTS(t,f,r)}return new DateTime({ts:o,zone:r,loc:a,o:u})}function diffRelative(t,e,r){const a=isUndefined(r.round)?!0:r.round,i=(u,c)=>(u=roundTo(u,a||r.calendary?0:2,!0),e.loc.clone(r).relFormatter(r).format(u,c)),o=u=>r.calendary?e.hasSame(t,u)?0:e.startOf(u).diff(t.startOf(u),u).get(u):e.diff(t,u).get(u);if(r.unit)return i(o(r.unit),r.unit);for(const u of r.units){const c=o(u);if(Math.abs(c)>=1)return i(c,u)}return i(t>e?-0:0,r.units[r.units.length-1])}function lastOpts(t){let e={},r;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],r=Array.from(t).slice(0,t.length-1)):r=Array.from(t),[e,r]}class DateTime{constructor(e){const r=e.zone||Settings.defaultZone;let a=e.invalid||(Number.isNaN(e.ts)?new Invalid("invalid input"):null)||(r.isValid?null:unsupportedZone(r));this.ts=isUndefined(e.ts)?Settings.now():e.ts;let i=null,o=null;if(!a)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(r))[i,o]=[e.old.c,e.old.o];else{const c=r.offset(this.ts);i=tsToObj(this.ts,c),a=Number.isNaN(i.year)?new Invalid("invalid input"):null,i=a?null:i,o=a?null:c}this._zone=r,this.loc=e.loc||Locale.create(),this.invalid=a,this.weekData=null,this.localWeekData=null,this.c=i,this.o=o,this.isLuxonDateTime=!0}static now(){return new DateTime({})}static local(){const[e,r]=lastOpts(arguments),[a,i,o,u,c,f,d]=r;return quickDT({year:a,month:i,day:o,hour:u,minute:c,second:f,millisecond:d},e)}static utc(){const[e,r]=lastOpts(arguments),[a,i,o,u,c,f,d]=r;return e.zone=FixedOffsetZone.utcInstance,quickDT({year:a,month:i,day:o,hour:u,minute:c,second:f,millisecond:d},e)}static fromJSDate(e,r={}){const a=isDate(e)?e.valueOf():NaN;if(Number.isNaN(a))return DateTime.invalid("invalid input");const i=normalizeZone(r.zone,Settings.defaultZone);return i.isValid?new DateTime({ts:a,zone:i,loc:Locale.fromObject(r)}):DateTime.invalid(unsupportedZone(i))}static fromMillis(e,r={}){if(isNumber(e))return e<-MAX_DATE||e>MAX_DATE?DateTime.invalid("Timestamp out of range"):new DateTime({ts:e,zone:normalizeZone(r.zone,Settings.defaultZone),loc:Locale.fromObject(r)});throw new InvalidArgumentError(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,r={}){if(isNumber(e))return new DateTime({ts:e*1e3,zone:normalizeZone(r.zone,Settings.defaultZone),loc:Locale.fromObject(r)});throw new InvalidArgumentError("fromSeconds requires a numerical input")}static fromObject(e,r={}){e=e||{};const a=normalizeZone(r.zone,Settings.defaultZone);if(!a.isValid)return DateTime.invalid(unsupportedZone(a));const i=Locale.fromObject(r),o=normalizeObject(e,normalizeUnitWithLocalWeeks),{minDaysInFirstWeek:u,startOfWeek:c}=usesLocalWeekValues(o,i),f=Settings.now(),d=isUndefined(r.specificOffset)?a.offset(f):r.specificOffset,m=!isUndefined(o.ordinal),h=!isUndefined(o.year),_=!isUndefined(o.month)||!isUndefined(o.day),p=h||_,g=o.weekYear||o.weekNumber;if((p||m)&&g)throw new ConflictingSpecificationError("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(_&&m)throw new ConflictingSpecificationError("Can't mix ordinal dates with month/day");const D=g||o.weekday&&!p;let v,b,y=tsToObj(f,d);D?(v=orderedWeekUnits,b=defaultWeekUnitValues,y=gregorianToWeek(y,u,c)):m?(v=orderedOrdinalUnits,b=defaultOrdinalUnitValues,y=gregorianToOrdinal(y)):(v=orderedUnits,b=defaultUnitValues);let T=!1;for(const P of v){const C=o[P];isUndefined(C)?T?o[P]=b[P]:o[P]=y[P]:T=!0}const w=D?hasInvalidWeekData(o,u,c):m?hasInvalidOrdinalData(o):hasInvalidGregorianData(o),A=w||hasInvalidTimeData(o);if(A)return DateTime.invalid(A);const E=D?weekToGregorian(o,u,c):m?ordinalToGregorian(o):o,[k,O]=objToTS(E,d,a),L=new DateTime({ts:k,zone:a,o:O,loc:i});return o.weekday&&p&&e.weekday!==L.weekday?DateTime.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${L.toISO()}`):L}static fromISO(e,r={}){const[a,i]=parseISODate(e);return parseDataToDateTime(a,i,r,"ISO 8601",e)}static fromRFC2822(e,r={}){const[a,i]=parseRFC2822Date(e);return parseDataToDateTime(a,i,r,"RFC 2822",e)}static fromHTTP(e,r={}){const[a,i]=parseHTTPDate(e);return parseDataToDateTime(a,i,r,"HTTP",r)}static fromFormat(e,r,a={}){if(isUndefined(e)||isUndefined(r))throw new InvalidArgumentError("fromFormat requires an input string and a format");const{locale:i=null,numberingSystem:o=null}=a,u=Locale.fromOpts({locale:i,numberingSystem:o,defaultToEN:!0}),[c,f,d,m]=parseFromTokens(u,e,r);return m?DateTime.invalid(m):parseDataToDateTime(c,f,a,`format ${r}`,e,d)}static fromString(e,r,a={}){return DateTime.fromFormat(e,r,a)}static fromSQL(e,r={}){const[a,i]=parseSQL(e);return parseDataToDateTime(a,i,r,"SQL",e)}static invalid(e,r=null){if(!e)throw new InvalidArgumentError("need to specify a reason the DateTime is invalid");const a=e instanceof Invalid?e:new Invalid(e,r);if(Settings.throwOnInvalid)throw new InvalidDateTimeError(a);return new DateTime({invalid:a})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,r={}){const a=formatOptsToTokens(e,Locale.fromObject(r));return a?a.map(i=>i?i.val:null).join(""):null}static expandFormat(e,r={}){return expandMacroTokens(Formatter.parseFormat(e),Locale.fromObject(r)).map(i=>i.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?possiblyCachedWeekData(this).weekYear:NaN}get weekNumber(){return this.isValid?possiblyCachedWeekData(this).weekNumber:NaN}get weekday(){return this.isValid?possiblyCachedWeekData(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?possiblyCachedLocalWeekData(this).weekday:NaN}get localWeekNumber(){return this.isValid?possiblyCachedLocalWeekData(this).weekNumber:NaN}get localWeekYear(){return this.isValid?possiblyCachedLocalWeekData(this).weekYear:NaN}get ordinal(){return this.isValid?gregorianToOrdinal(this.c).ordinal:NaN}get monthShort(){return this.isValid?Info.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Info.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Info.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Info.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,r=6e4,a=objToLocalTS(this.c),i=this.zone.offset(a-e),o=this.zone.offset(a+e),u=this.zone.offset(a-i*r),c=this.zone.offset(a-o*r);if(u===c)return[this];const f=a-u*r,d=a-c*r,m=tsToObj(f,u),h=tsToObj(d,c);return m.hour===h.hour&&m.minute===h.minute&&m.second===h.second&&m.millisecond===h.millisecond?[clone(this,{ts:f}),clone(this,{ts:d})]:[this]}get isInLeapYear(){return isLeapYear(this.year)}get daysInMonth(){return daysInMonth(this.year,this.month)}get daysInYear(){return this.isValid?daysInYear(this.year):NaN}get weeksInWeekYear(){return this.isValid?weeksInWeekYear(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?weeksInWeekYear(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:r,numberingSystem:a,calendar:i}=Formatter.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:r,numberingSystem:a,outputCalendar:i}}toUTC(e=0,r={}){return this.setZone(FixedOffsetZone.instance(e),r)}toLocal(){return this.setZone(Settings.defaultZone)}setZone(e,{keepLocalTime:r=!1,keepCalendarTime:a=!1}={}){if(e=normalizeZone(e,Settings.defaultZone),e.equals(this.zone))return this;if(e.isValid){let i=this.ts;if(r||a){const o=e.offset(this.ts),u=this.toObject();[i]=objToTS(u,o,e)}return clone(this,{ts:i,zone:e})}else return DateTime.invalid(unsupportedZone(e))}reconfigure({locale:e,numberingSystem:r,outputCalendar:a}={}){const i=this.loc.clone({locale:e,numberingSystem:r,outputCalendar:a});return clone(this,{loc:i})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const r=normalizeObject(e,normalizeUnitWithLocalWeeks),{minDaysInFirstWeek:a,startOfWeek:i}=usesLocalWeekValues(r,this.loc),o=!isUndefined(r.weekYear)||!isUndefined(r.weekNumber)||!isUndefined(r.weekday),u=!isUndefined(r.ordinal),c=!isUndefined(r.year),f=!isUndefined(r.month)||!isUndefined(r.day),d=c||f,m=r.weekYear||r.weekNumber;if((d||u)&&m)throw new ConflictingSpecificationError("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(f&&u)throw new ConflictingSpecificationError("Can't mix ordinal dates with month/day");let h;o?h=weekToGregorian({...gregorianToWeek(this.c,a,i),...r},a,i):isUndefined(r.ordinal)?(h={...this.toObject(),...r},isUndefined(r.day)&&(h.day=Math.min(daysInMonth(h.year,h.month),h.day))):h=ordinalToGregorian({...gregorianToOrdinal(this.c),...r});const[_,p]=objToTS(h,this.o,this.zone);return clone(this,{ts:_,o:p})}plus(e){if(!this.isValid)return this;const r=Duration.fromDurationLike(e);return clone(this,adjustTime(this,r))}minus(e){if(!this.isValid)return this;const r=Duration.fromDurationLike(e).negate();return clone(this,adjustTime(this,r))}startOf(e,{useLocaleWeeks:r=!1}={}){if(!this.isValid)return this;const a={},i=Duration.normalizeUnit(e);switch(i){case"years":a.month=1;case"quarters":case"months":a.day=1;case"weeks":case"days":a.hour=0;case"hours":a.minute=0;case"minutes":a.second=0;case"seconds":a.millisecond=0;break}if(i==="weeks")if(r){const o=this.loc.getStartOfWeek(),{weekday:u}=this;u<o&&(a.weekNumber=this.weekNumber-1),a.weekday=o}else a.weekday=1;if(i==="quarters"){const o=Math.ceil(this.month/3);a.month=(o-1)*3+1}return this.set(a)}endOf(e,r){return this.isValid?this.plus({[e]:1}).startOf(e,r).minus(1):this}toFormat(e,r={}){return this.isValid?Formatter.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,e):INVALID}toLocaleString(e=DATE_SHORT,r={}){return this.isValid?Formatter.create(this.loc.clone(r),e).formatDateTime(this):INVALID}toLocaleParts(e={}){return this.isValid?Formatter.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:r=!1,suppressMilliseconds:a=!1,includeOffset:i=!0,extendedZone:o=!1}={}){if(!this.isValid)return null;const u=e==="extended";let c=toISODate(this,u);return c+="T",c+=toISOTime(this,u,r,a,i,o),c}toISODate({format:e="extended"}={}){return this.isValid?toISODate(this,e==="extended"):null}toISOWeekDate(){return toTechFormat(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:r=!1,includeOffset:a=!0,includePrefix:i=!1,extendedZone:o=!1,format:u="extended"}={}){return this.isValid?(i?"T":"")+toISOTime(this,u==="extended",r,e,a,o):null}toRFC2822(){return toTechFormat(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return toTechFormat(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?toISODate(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:r=!1,includeOffsetSpace:a=!0}={}){let i="HH:mm:ss.SSS";return(r||e)&&(a&&(i+=" "),r?i+="z":e&&(i+="ZZ")),toTechFormat(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():INVALID}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const r={...this.c};return e.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,r="milliseconds",a={}){if(!this.isValid||!e.isValid)return Duration.invalid("created by diffing an invalid DateTime");const i={locale:this.locale,numberingSystem:this.numberingSystem,...a},o=maybeArray(r).map(Duration.normalizeUnit),u=e.valueOf()>this.valueOf(),c=u?this:e,f=u?e:this,d=diff(c,f,o,i);return u?d.negate():d}diffNow(e="milliseconds",r={}){return this.diff(DateTime.now(),e,r)}until(e){return this.isValid?Interval.fromDateTimes(this,e):this}hasSame(e,r,a){if(!this.isValid)return!1;const i=e.valueOf(),o=this.setZone(e.zone,{keepLocalTime:!0});return o.startOf(r,a)<=i&&i<=o.endOf(r,a)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const r=e.base||DateTime.fromObject({},{zone:this.zone}),a=e.padding?this<r?-e.padding:e.padding:0;let i=["years","months","days","hours","minutes","seconds"],o=e.unit;return Array.isArray(e.unit)&&(i=e.unit,o=void 0),diffRelative(r,this.plus(a),{...e,numeric:"always",units:i,unit:o})}toRelativeCalendar(e={}){return this.isValid?diffRelative(e.base||DateTime.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(DateTime.isDateTime))throw new InvalidArgumentError("min requires all arguments be DateTimes");return bestBy(e,r=>r.valueOf(),Math.min)}static max(...e){if(!e.every(DateTime.isDateTime))throw new InvalidArgumentError("max requires all arguments be DateTimes");return bestBy(e,r=>r.valueOf(),Math.max)}static fromFormatExplain(e,r,a={}){const{locale:i=null,numberingSystem:o=null}=a,u=Locale.fromOpts({locale:i,numberingSystem:o,defaultToEN:!0});return explainFromTokens(u,e,r)}static fromStringExplain(e,r,a={}){return DateTime.fromFormatExplain(e,r,a)}static get DATE_SHORT(){return DATE_SHORT}static get DATE_MED(){return DATE_MED}static get DATE_MED_WITH_WEEKDAY(){return DATE_MED_WITH_WEEKDAY}static get DATE_FULL(){return DATE_FULL}static get DATE_HUGE(){return DATE_HUGE}static get TIME_SIMPLE(){return TIME_SIMPLE}static get TIME_WITH_SECONDS(){return TIME_WITH_SECONDS}static get TIME_WITH_SHORT_OFFSET(){return TIME_WITH_SHORT_OFFSET}static get TIME_WITH_LONG_OFFSET(){return TIME_WITH_LONG_OFFSET}static get TIME_24_SIMPLE(){return TIME_24_SIMPLE}static get TIME_24_WITH_SECONDS(){return TIME_24_WITH_SECONDS}static get TIME_24_WITH_SHORT_OFFSET(){return TIME_24_WITH_SHORT_OFFSET}static get TIME_24_WITH_LONG_OFFSET(){return TIME_24_WITH_LONG_OFFSET}static get DATETIME_SHORT(){return DATETIME_SHORT}static get DATETIME_SHORT_WITH_SECONDS(){return DATETIME_SHORT_WITH_SECONDS}static get DATETIME_MED(){return DATETIME_MED}static get DATETIME_MED_WITH_SECONDS(){return DATETIME_MED_WITH_SECONDS}static get DATETIME_MED_WITH_WEEKDAY(){return DATETIME_MED_WITH_WEEKDAY}static get DATETIME_FULL(){return DATETIME_FULL}static get DATETIME_FULL_WITH_SECONDS(){return DATETIME_FULL_WITH_SECONDS}static get DATETIME_HUGE(){return DATETIME_HUGE}static get DATETIME_HUGE_WITH_SECONDS(){return DATETIME_HUGE_WITH_SECONDS}}function friendlyDateTime(t){if(DateTime.isDateTime(t))return t;if(t&&t.valueOf&&isNumber(t.valueOf()))return DateTime.fromJSDate(t);if(t&&typeof t=="object")return DateTime.fromObject(t);throw new InvalidArgumentError(`Unknown datetime argument: ${t}, of type ${typeof t}`)}class Token{constructor(e,r){this._value=e,this._type=r,this._format=""}get value(){return this._value}set value(e){this._value=e}get type(){return this._type}set type(e){this._type=e}get format(){return this._format}set format(e){this._format=e}}class Parser{constructor(e,r){this.name=e,this.pattern=r}parse(e){const r=this.pattern.exec(e);if(!r||!r.groups)return;let a=[];for(const[i,o]of Object.entries(r.groups))o&&a.push(new Token(o,/delim\d+/.test(i)?"delimiter":i));return{tokens:a,index:r.index,parser:this.name}}}const abbreviatedTimezones="UT|CAT|CET|CVT|EAT|EET|GMT|MUT|RET|SAST|SCT|WAST|WAT|WEST|WET|WST|WT|ADT|AFT|ALMT|AMST|AMT|ANAST|ANAT|AQTT|AST|AZST|AZT|BNT|BST|BTT|CHOST|CHOT|CST|EEST|EET|GET|GST|HKT|HOVST|HOVT|ICT|IDT|IRDT|IRKST|IRKT|IST|JST|KGT|KRAST|KRAT|KST|MAGST|MAGT|MMT|MSK|MVT|NOVST|NOVT|NPT|OMSST|OMST|ORAT|PETST|PETT|PHT|PKT|PYT|QYZT|SAKT|SGT|SRET|TJT|TLT|TMT|TRT|ULAST|ULAT|UZT|VLAST|VLAT|WIB|WIT|YAKST|YAKT|YEKST|YEKT|ART|CAST|CEST|CLST|CLT|DAVT|DDUT|GMT|MAWT|NZDT|NZST|ROTT|SYOT|VOST|ADT|AST|AT|AZOST|AZOT|ACDT|ACST|ACT|ACWST|AEDT|AEST|AET|AWDT|AWST|CXT|LHDT|LHST|NFDT|NFT|AST|AT|CDT|CIDST|CIST|CST|EDT|EST|ET|CST|CT|EST|ET|BST|CEST|CET|EEST|EET|FET|GET|GMT|IST|KUYT|MSD|MSK|SAMT|TRT|WEST|WET|CCT|EAT|IOT|TFT|ADT|AKDT|AKST|AST|AT|CDT|CST|CT|EDT|EGST|EGT|ET|GMT|HDT|HST|MDT|MST|MT|NDT|NST|PDT|PMDT|PMST|PST|PT|WGST|WGT|AoE|BST|CHADT|CHAST|CHUT|CKT|ChST|EASST|EAST|FJST|FJT|GALT|GAMT|GILT|HST|KOST|LINT|MART|MHT|NCT|NRT|NUT|NZDT|NZST|PGT|PHOT|PONT|PST|PWT|SBT|SST|TAHT|TKT|TOST|TOT|TVT|VUT|WAKT|WFT|WST|YAPT|ACT|AMST|AMT|ART|BOT|BRST|BRT|CLST|CLT|COT|ECT|FKST|FKT|FNT|GFT|GST|GYT|PET|PYST|PYT|SRT|UYST|UYT|VET|WARST",dayOfMonthAndMonthNameDateFormatParser=new Parser("DayOfMonthAndMonthNameDateFormatParser",new RegExp(`^(?<dayOfWeek>(?:Sun?|Mon?|Tu(?:es)?|We(?:dnes)?|Th(?:urs)?|Fri?|Sa(?:tur)?)(?:day)?)?(?<delim1>,)?(?<delim2>\\s)?(?<dayOfMonth>(?:3[0-1]|[1-2]\\d|0?[1-9])(?:st|nd|rd|th)?)(?<delim3>\\s)(?<month>Jan(?:uary)?|Feb(?:ruary)?|Mar(?:ch)?|Apr(?:il)?|May|June?|July?|Aug(?:ust)?|Sep(?:tember)?|Oct(?:ober)?|Nov(?:ember)?|Dec(?:ember)?)(?<delim4>,)?(?<delim5>\\s)?(?<year>\\d{4}|\\d{2})?(?:(?<delim6>,)?(?<delim7>\\s)(?:(?<twentyFourHour>2[0-3]|0?\\d|1\\d)|(?<twelveHour>0?[1-9]|1[0-2]))(?:(?<delim8>[:.])(?<minute>[0-5]\\d))?(?:(?<delim9>[:.])(?<second>[0-5]\\d))?(?:(?<delim10>.)(?<millisecond>\\d{3}))?(?<delim11>\\s)?(?<meridiem>am|pm|AM|PM)?(?:(?<delim12>\\s)(?<timezone>[+-]\\d{2}(?::?\\d{2})?|Z|${abbreviatedTimezones}))?)?$`)),iSO8601BasicDateTimeFormatParser=new Parser("ISO8601BasicDateTimeFormatParser",new RegExp("^(?<year>[+-]\\d{6}|\\d{4})(?:(?<month>\\d{2})(?:(?<dayOfMonth>\\d{2}))?|(?<escapeText>W)(?<isoWeekOfYear>\\d{2})(?:(?<isoDayOfWeek>\\d))?|(?<dayOfYear>\\d{3}))?(?:(?<delim1>T| )(?:(?<twentyFourHour>\\d{2})(?:(?<minute>\\d{2})(?:(?<second>\\d{2})(?:(?<delim2>[.,])(?<millisecond>\\d{1,9}))?)?)?)(?<timezone>[+-]\\d{2}(?::?\\d{2})?|Z)?)?$")),iSO8601ExtendedDateTimeFormatParser=new Parser("ISO8601ExtendedDateTimeFormatParser",new RegExp("^(?<year>[+-]\\d{6}|\\d{4})(?<delim1>\\-)(?:(?<month>\\d{2})(?:(?<delim2>\\-)(?<dayOfMonth>\\d{2}))?|(?<escapeText>W)(?<isoWeekOfYear>\\d{2})(?:(?<delim3>\\-)(?<isoDayOfWeek>\\d))?|(?<dayOfYear>\\d{3}))(?:(?<delim4>T| )(?:(?<twentyFourHour>\\d{2})(?:(?<delim5>:)(?<minute>\\d{2})(?:(?<delim6>:)(?<second>\\d{2})(?:(?<delim7>[.,])(?<millisecond>\\d{1,9}))?)?)?)(?<timezone>[+-]\\d{2}(?::?\\d{2})?|Z)?)?$")),monthNameAndDayOfMonthDateFormatParser=new Parser("MonthNameAndDayOfMonthDateFormatParser",new RegExp(`^(?<dayOfWeek>(?:Sun?|Mon?|Tu(?:es)?|We(?:dnes)?|Th(?:urs)?|Fri?|Sa(?:tur)?)(?:day)?)?(?<delim1>,)?(?<delim2>\\s)?(?<month>Jan(?:uary)?|Feb(?:ruary)?|Mar(?:ch)?|Apr(?:il)?|May|June?|July?|Aug(?:ust)?|Sep(?:tember)?|Oct(?:ober)?|Nov(?:ember)?|Dec(?:ember)?)(?<delim3>\\s)(?<dayOfMonth>(?:3[0-1]|[1-2]\\d|0?[1-9])(?:st|nd|rd|th)?)(?<delim4>,)?(?<delim5>\\s)?(?<year>\\d{4}|\\d{2})?(?:(?:(?<delim6>,)?(?<delim7>\\s)(?:(?<twentyFourHour>2[0-3]|0?\\d|1\\d)|(?<twelveHour>0?[1-9]|1[0-2]))(?:(?<delim8>[:.])(?<minute>[0-5]\\d))?(?:(?<delim9>[:.])(?<second>[0-5]\\d))?(?:(?<delim10>.)(?<millisecond>\\d{3}))?(?<delim11>\\s)?(?<meridiem>am|pm|AM|PM)?(?:(?<delim12>\\s)(?<timezone>[+-]\\d{2}(?::?\\d{2})?|Z|${abbreviatedTimezones}))?)?)?$`)),rFC2822DateTimeFormatParser=new Parser("RFC2822DateTimeFormatParser",new RegExp("^(?:(?<dayOfWeek>Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?<delim1>,)?(?<delim2>\\s))?(?<dayOfMonth>\\d{1,2})(?<delim3>\\s)(?<month>Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)(?<delim4>\\s)(?<year>\\d{2,4})(?<delim5>\\s)(?<twentyFourHour>\\d{2})(?<delim6>:)(?<minute>\\d{2})(?:(?<delim7>:)(?<second>\\d{2}))?(?<delim8>\\s)(?<timezone>(?:(?:UT|GMT|[ECMP][SD]T)|[Zz]|[+-]\\d{4}))$")),slashDelimitedDateTimeFormatParser=new Parser("SlashDelimitedDateFormatParser",new RegExp(`^(?<year>\\d{4}|\\d{2})(?<delim1>[/.-])(?<month>0?[1-9]|1[0-2])(?:(?<delim2>[/.-])(?<dayOfMonth>0?[1-9]|[1-2]\\d|3[0-1]))?(?:(?:(?<delim3>,)?(?<delim4>\\s)(?:(?<twentyFourHour>2[0-3]|0?\\d|1\\d)|(?<twelveHour>0?[1-9]|1[0-2]))(?:(?<delim5>[:.])(?<minute>[0-5]\\d))?(?:(?<delim6>[:.])(?<second>[0-5]\\d))?(?:(?<delim7>.)(?<millisecond>\\d{3}))?(?<delim8>\\s)?(?<meridiem>am|pm|AM|PM)?(?:(?<delim9>\\s)(?<timezone>[+-]\\d{2}(?::?\\d{2})?|Z|${abbreviatedTimezones}))?)?)?$`)),twelveHourTimeFormatParser=new Parser("TwelveHourTimeFormatParser",new RegExp(`^(?<twelveHour>0?[1-9]|1[0-2])(?:(?<delim1>[:.])(?<minute>[0-5]\\d))?(?:(?<delim2>[:.])(?<second>[0-5]\\d))?(?:(?<delim3>.)(?<millisecond>\\d{3}))?(?<delim4>\\s)?(?<meridiem>am|pm|AM|PM)(?:(?<delim5>\\s)(?<timezone>[+-]\\d{2}(?::?\\d{2})?|Z|${abbreviatedTimezones}))?$`)),twentyFourHourTimeFormatParser=new Parser("TwentyFourHourTimeFormatParser",new RegExp(`^(?<twentyFourHour>2[0-3]|0?\\d|1\\d)(?<delim1>[:.])(?<minute>[0-5]\\d)(?:(?<delim2>[:.])(?<second>[0-5]\\d))?(?:(?<delim3>.)(?<millisecond>\\d{3}))?(?:(?<delim4>\\s)(?<timezone>[+-]\\d{2}(?::?\\d{2})?|Z|${abbreviatedTimezones}))?$`)),uKStyleSlashDelimitedDateTimeFormatParser=new Parser("UKStyleSlashDelimitedDateFormatParser",new RegExp(`^(?<dayOfMonth>0?[1-9]|[1-2]\\d|3[0-1])(?<delim1>[/.-])(?<month>0?[1-9]|1[0-2])(?:(?<delim2>[/.-])(?<year>\\d{4}|\\d{2}))?(?:(?:(?<delim3>,)?(?<delim4>\\s)(?:(?<twentyFourHour>2[0-3]|0?\\d|1\\d)|(?<twelveHour>0?[1-9]|1[0-2]))(?:(?<delim5>[:.])(?<minute>[0-5]\\d))?(?:(?<delim6>[:.])(?<second>[0-5]\\d))?(?:(?<delim7>.)(?<millisecond>\\d{3}))?(?<delim8>\\s)?(?<meridiem>am|pm|AM|PM)?(?:(?<delim9>\\s)(?<timezone>[+-]\\d{2}(?::?\\d{2})?|Z|${abbreviatedTimezones}))?)?)?$`)),uSStyleSlashDelimitedDateTimeFormatParser=new Parser("USStyleSlashDelimitedDateFormatParser",new RegExp(`^(?<month>0?[1-9]|1[0-2])(?<delim1>[/.-])(?<dayOfMonth>0?[1-9]|[1-2]\\d|3[0-1])(?:(?<delim2>[/.-])(?<year>\\d{4}|\\d{2}))?(?:(?:(?<delim3>,)?(?<delim4>\\s)(?:(?<twentyFourHour>2[0-3]|0?\\d|1\\d)|(?<twelveHour>0?[1-9]|1[0-2]))(?:(?<delim5>[:.])(?<minute>[0-5]\\d))?(?:(?<delim6>[:.])(?<second>[0-5]\\d))?(?:(?<delim7>.)(?<millisecond>\\d{3}))?(?<delim8>\\s)?(?<meridiem>am|pm|AM|PM)?(?:(?<delim9>\\s)(?<timezone>[+-]\\d{2}(?::?\\d{2})?|Z|${abbreviatedTimezones}))?)?)?$`)),dashDelimitedWithMonthNameDateTimeFormatParser=new Parser("DashDelimitedWithMonthNameDateTimeFormatParser",new RegExp(`^(?<dayOfMonth>0?[1-9]|[1-2]\\d|3[0-1])(?<delim1>-)(?<month>Jan(?:uary)?|Feb(?:ruary)?|Mar(?:ch)?|Apr(?:il)?|May|June?|July?|Aug(?:ust)?|Sep(?:tember)?|Oct(?:ober)?|Nov(?:ember)?|Dec(?:ember)?)(?<delim2>-)?(?<year>\\d{4}|\\d{2})?(?:(?:(?<delim3>,)?(?<delim4>\\s)(?:(?<twentyFourHour>2[0-3]|0?\\d|1\\d)|(?<twelveHour>0?[1-9]|1[0-2]))(?:(?<delim5>[:.])(?<minute>[0-5]\\d))?(?:(?<delim6>[:.])(?<second>[0-5]\\d))?(?:(?<delim7>.)(?<millisecond>\\d{3}))?(?<delim8>\\s)?(?<meridiem>am|pm|AM|PM)?(?:(?<delim9>\\s)(?<timezone>[+-]\\d{2}(?::?\\d{2})?|Z|${abbreviatedTimezones}))?)?)?$`)),parsers=[iSO8601ExtendedDateTimeFormatParser,iSO8601BasicDateTimeFormatParser,rFC2822DateTimeFormatParser,slashDelimitedDateTimeFormatParser,uKStyleSlashDelimitedDateTimeFormatParser,uSStyleSlashDelimitedDateTimeFormatParser,monthNameAndDayOfMonthDateFormatParser,dayOfMonthAndMonthNameDateFormatParser,twentyFourHourTimeFormatParser,twelveHourTimeFormatParser,dashDelimitedWithMonthNameDateTimeFormatParser];class StandardFormatParsersRefiner{constructor(e){this.name=e}refine(e){const r=e.filter(a=>a.parser==="ISO8601ExtendedDateTimeFormatParser"||a.parser==="ISO8601BasicDateTimeFormatParser"||a.parser==="RFC2822DateTimeFormatParser");return r.length===0?e:r}}class TimeFormatRefiner{constructor(e){this.name=e}refine(e){return e.forEach(r=>{let a=!1;r.tokens.forEach(i=>{i.type==="meridiem"&&(a=!0)}),a&&r.tokens.forEach(i=>{i.type==="twentyFourHour"&&(i.type="twelveHour")})}),e}}const timeFormatRefiner=new TimeFormatRefiner("TimeFormatRefiner"),standardFormatParsersRefiner=new StandardFormatParsersRefiner("StandardFormatParsersRefiner"),refiners=[standardFormatParsersRefiner,timeFormatRefiner];class YearFormatTokenAssigner{constructor(e,r,a){this.name=e,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?(this._map.set(/\d{2}/,"YY"),this._map.set(/\d{4}/,"YYYY"),this._map.set(/[+-]\d{6}/,"YYYYYY")):(this._map.set(/\d{2}/,"%y"),this._map.set(/\d{4}/,"%Y"),this._map.set(/[+-]\d{6}/,"NA"))}_testTokenType(e){return e.type===this.type}assign(e){this._map.forEach((r,a)=>{this._testTokenType(e)&&a.test(e.value)&&(e.format=r)})}}class MonthFormatTokenAssigner{constructor(e,r,a){this.name=e,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?(this._map.set(/\d{1,2}/,"M"),this._map.set(/\d{2}/,"MM"),this._map.set(/\d{1,2}(?:st|nd|rd|th)/,"Mo"),this._map.set(/^(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)$/,"MMM"),this._map.set(/^(January|February|March|April|May|June|July|August|September|October|November|December)$/,"MMMM")):(this._map.set(/\d{1,2}/,"NA"),this._map.set(/\d{2}/,"%m"),this._map.set(/\d{1,2}(?:st|nd|rd|th)/,"NA"),this._map.set(/^(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)$/,"%b"),this._map.set(/^(January|February|March|April|May|June|July|August|September|October|November|December)$/,"%B"))}_testTokenType(e){return e.type===this.type}assign(e){this._map.forEach((r,a)=>{this._testTokenType(e)&&a.test(e.value)&&(e.format=r)})}}class DayOfMonthFormatTokenAssigner{constructor(e,r,a){this.name=e,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?(this._map.set(/\d{1,2}/,"D"),this._map.set(/\d{2}/,"DD"),this._map.set(/\d{1,2}(?:st|nd|rd|th)/,"Do")):(this._map.set(/\d{1,2}/,"%-e"),this._map.set(/\d{2}/,"%d"),this._map.set(/\d{1,2}(?:st|nd|rd|th)/,"%o"))}_testTokenType(e){return e.type===this.type}assign(e){this._map.forEach((r,a)=>{this._testTokenType(e)&&a.test(e.value)&&(e.format=r)})}}class DelimiterFormatTokenAssigner{constructor(e,r,a){this.name=e,this.format=a,this.type=r}assign(e){}}class MinuteFormatTokenAssigner{constructor(e,r,a){this.name=e,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?(this._map.set(/\d{1,2}/,"m"),this._map.set(/\d{2}/,"mm")):(this._map.set(/\d{1,2}/,"NA"),this._map.set(/\d{2}/,"%M"))}_testTokenType(e){return e.type===this.type}assign(e){this._map.forEach((r,a)=>{this._testTokenType(e)&&a.test(e.value)&&(e.format=r)})}}class SecondFormatTokenAssigner{constructor(e,r,a){this.name=e,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?(this._map.set(/\d{2}/,"ss"),this._map.set(/\d{1,2}/,"s")):(this._map.set(/\d{1,2}/,"NA"),this._map.set(/\d{2}/,"%S"))}_testTokenType(e){return e.type===this.type}assign(e){this._map.forEach((r,a)=>{this._testTokenType(e)&&a.test(e.value)&&(e.format=r)})}}class MillisecondFormatTokenAssigner{constructor(e,r,a){this.name=e,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?(this._map.set(/\d/,"S"),this._map.set(/\d{2}/,"SS"),this._map.set(/\d{3}/,"SSS")):(this._map.set(/\d/,"NA"),this._map.set(/\d{2}/,"NA"),this._map.set(/\d{3}/,"%L"))}_testTokenType(e){return e.type===this.type}assign(e){this._map.forEach((r,a)=>{this._testTokenType(e)&&a.test(e.value)&&(e.format=r)})}}class TimezoneFormatTokenAssigner{constructor(e,r,a){this.name=e,this.type=r,this.format=a,this._map=new Map;const i=new RegExp("UT|CAT|CET|CVT|EAT|EET|GMT|MUT|RET|SAST|SCT|WAST|WAT|WEST|WET|WST|WT|ADT|AFT|ALMT|AMST|AMT|ANAST|ANAT|AQTT|AST|AZST|AZT|BNT|BST|BTT|CHOST|CHOT|CST|EEST|EET|GET|GST|HKT|HOVST|HOVT|ICT|IDT|IRDT|IRKST|IRKT|IST|JST|KGT|KRAST|KRAT|KST|MAGST|MAGT|MMT|MSK|MVT|NOVST|NOVT|NPT|OMSST|OMST|ORAT|PETST|PETT|PHT|PKT|PYT|QYZT|SAKT|SGT|SRET|TJT|TLT|TMT|TRT|ULAST|ULAT|UZT|VLAST|VLAT|WIB|WIT|YAKST|YAKT|YEKST|YEKT|ART|CAST|CEST|CLST|CLT|DAVT|DDUT|GMT|MAWT|NZDT|NZST|ROTT|SYOT|VOST|ADT|AST|AT|AZOST|AZOT|ACDT|ACST|ACT|ACWST|AEDT|AEST|AET|AWDT|AWST|CXT|LHDT|LHST|NFDT|NFT|AST|AT|CDT|CIDST|CIST|CST|EDT|EST|ET|CST|CT|EST|ET|BST|CEST|CET|EEST|EET|FET|GET|GMT|IST|KUYT|MSD|MSK|SAMT|TRT|WEST|WET|CCT|EAT|IOT|TFT|ADT|AKDT|AKST|AST|AT|CDT|CST|CT|EDT|EGST|EGT|ET|GMT|HDT|HST|MDT|MST|MT|NDT|NST|PDT|PMDT|PMST|PST|PT|WGST|WGT|AoE|BST|CHADT|CHAST|CHUT|CKT|ChST|EASST|EAST|FJST|FJT|GALT|GAMT|GILT|HST|KOST|LINT|MART|MHT|NCT|NRT|NUT|NZDT|NZST|PGT|PHOT|PONT|PST|PWT|SBT|SST|TAHT|TKT|TOST|TOT|TVT|VUT|WAKT|WFT|WST|YAPT|ACT|AMST|AMT|ART|BOT|BRST|BRT|CLST|CLT|COT|ECT|FKST|FKT|FNT|GFT|GST|GYT|PET|PYST|PYT|SRT|UYST|UYT|VET|WARST");!a||a==="default"?(this._map.set(/[+-]\d{2}(?::\d{2})?/,"Z"),this._map.set(/[+-]\d{4}/,"ZZ"),this._map.set(/Z/,"[Z]"),this._map.set(/z/,"[z]"),this._map.set(i,"z")):(this._map.set(/[+-]\d{2}(?::\d{2})?/,"%:z"),this._map.set(/[+-]\d{4}/,"%z"),this._map.set(/Z/,"Z"),this._map.set(/z/,"z"),this._map.set(i,"%Z"))}_testTokenType(e){return e.type===this.type}assign(e){this._map.forEach((r,a)=>{this._testTokenType(e)&&a.test(e.value)&&(e.format=r)})}}class DayOfYearFormatTokenAssigner{constructor(e,r,a){this.name=e,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?(this._map.set(/\d{1,3}/,"DDD"),this._map.set(/\d{3}/,"DDDD"),this._map.set(/\d{1,3}(?:st|nd|rd|th)/,"DDDo")):(this._map.set(/\d{1,3}/,"NA"),this._map.set(/\d{3}/,"%j"),this._map.set(/\d{1,3}(?:st|nd|rd|th)/,"NA"))}_testTokenType(e){return e.type===this.type}assign(e){this._map.forEach((r,a)=>{this._testTokenType(e)&&a.test(e.value)&&(e.format=r)})}}class EscapeTextFormatTokenAssigner{constructor(e,r,a){this.name=e,this.type=r,this.format=a}_testTokenType(e){return e.type===this.type}assign(e){this._testTokenType(e)&&(e.format=!this.format||this.format==="default"?`[${e.value}]`:e.value)}}class ISODayOfWeekFormatTokenAssigner{constructor(e,r,a){this.name=e,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?this._map.set(/[1-7]/,"E"):this._map.set(/[1-7]/,"%u")}_testTokenType(e){return e.type===this.type}assign(e){this._map.forEach((r,a)=>{this._testTokenType(e)&&a.test(e.value)&&(e.format=r)})}}class ISOWeekOfYearFormatTokenAssigner{constructor(e,r,a){this.name=e,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?(this._map.set(/\d{1,2}/,"W"),this._map.set(/\d{2}/,"WW"),this._map.set(/\d{1,2}(?:st|nd|rd|th)/,"Wo")):(this._map.set(/\d{1,2}/,"NA"),this._map.set(/\d{2}/,"%U"),this._map.set(/\d{1,2}(?:st|nd|rd|th)/,"NA"))}_testTokenType(e){return e.type===this.type}assign(e){this._map.forEach((r,a)=>{this._testTokenType(e)&&a.test(e.value)&&(e.format=r)})}}class TwentyFourHourFormatTokenAssigner{constructor(e,r,a){this.name=e,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?(this._map.set(/^([0-1]\d|2[0-3])$/,"HH"),this._map.set(/^(\d|1\d|2[0-3])$/,"H")):(this._map.set(/^(\d|1\d|2[0-3])$/,"%-k"),this._map.set(/^([0-1]\d|2[0-3])$/,"%H"))}_testTokenType(e){return e.type===this.type}assign(e){this._map.forEach((r,a)=>{this._testTokenType(e)&&a.test(e.value)&&(e.format=r)})}}class TwelveHourFormatTokenAssigner{constructor(e,r,a){this.name=e,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?(this._map.set(/^(0\d|1[0-2])$/,"hh"),this._map.set(/^([1-9]|1[0-9])$/,"h")):(this._map.set(/^([1-9]|1[0-2])$/,"%-l"),this._map.set(/^(0\d|1[0-2])$/,"%I"))}_testTokenType(e){return e.type===this.type}assign(e){this._map.forEach((r,a)=>{this._testTokenType(e)&&a.test(e.value)&&(e.format=r)})}}class DayOfWeekFormatTokenAssigner{constructor(e,r,a){this.name=e,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?(this._map.set(/[0-6](?:st|nd|rd|th)/,"do"),this._map.set(/(?:Su|Mo|Tu|We|Th|Fr|Sa)/,"dd"),this._map.set(/(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)/,"ddd"),this._map.set(/(?:Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday)/,"dddd")):(this._map.set(/[0-6]/,"%w"),this._map.set(/[0-6](?:st|nd|rd|th)/,"NA"),this._map.set(/(?:Su|Mo|Tu|We|Th|Fr|Sa)/,"NA"),this._map.set(/(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)/,"%a"),this._map.set(/(?:Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday)/,"%A"))}_testTokenType(e){return e.type===this.type}assign(e){this._map.forEach((r,a)=>{this._testTokenType(e)&&a.test(e.value)&&(e.format=r)})}}class MeridiemFormatTokenAssigner{constructor(e,r,a){this.name=e,this.type=r,this.format=a,this._map=new Map,!a||a==="default"?(this._map.set(/am|pm/,"a"),this._map.set(/AM|PM/,"A")):(this._map.set(/am|pm/,"%P"),this._map.set(/AM|PM/,"%p"))}_testTokenType(e){return e.type===this.type}assign(e){this._map.forEach((r,a)=>{this._testTokenType(e)&&a.test(e.value)&&(e.format=r)})}}const dayOfMonthFormatTokenAssigner=new DayOfMonthFormatTokenAssigner("DelimiterFormatTokenAssigner","dayOfMonth"),dayOfWeekFormatTokenAssigner=new DayOfWeekFormatTokenAssigner("DayOfWeekFormatTokenAssigner","dayOfWeek"),dayOfYearFormatTokenAssigner=new DayOfYearFormatTokenAssigner("DayOfYearFormatTokenAssigner","dayOfYear"),delimiterFormatTokenAssigner=new DelimiterFormatTokenAssigner("DelimiterFormatTokenAssigner","delimiter"),escapeTextFormatTokenAssigner=new EscapeTextFormatTokenAssigner("EscapeTextFormatTokenAssigner","escapeText"),iSODayOfWeekFormatTokenAssigner=new ISODayOfWeekFormatTokenAssigner("ISODayOfWeekFormatTokenAssigner","isoDayOfWeek"),iSOWeekOfYearFormatTokenAssigner=new ISOWeekOfYearFormatTokenAssigner("ISOWeekOfYearFormatTokenAssigner","isoWeekOfYear"),meridiemFormatTokenAssigner=new MeridiemFormatTokenAssigner("MeridiemFormatTokenAssigner","meridiem"),millisecondFormatTokenAssigner=new MillisecondFormatTokenAssigner("MillisecondFormatTokenAssigner","millisecond"),minuteFormatTokenAssigner=new MinuteFormatTokenAssigner("MinuteFormatTokenAssigner","minute"),monthFormatTokenAssigner=new MonthFormatTokenAssigner("MonthFormatTokenAssigner","month"),secondFormatTokenAssigner=new SecondFormatTokenAssigner("SecondFormatTokenAssigner","second"),timezoneFormatTokenAssigner=new TimezoneFormatTokenAssigner("TimezoneFormatTokenAssigner","timezone"),twelveHourFormatTokenAssigner=new TwelveHourFormatTokenAssigner("TwelveHourFormatTokenAssigner","twelveHour"),twentyFourHourFormatTokenAssigner=new TwentyFourHourFormatTokenAssigner("TwentyFourHourFormatTokenAssigner","twentyFourHour"),yearFormatTokenAssigner=new YearFormatTokenAssigner("YearFormatTokenAssigner","year"),strftimeDayOfMonthFormatTokenAssigner=new DayOfMonthFormatTokenAssigner("DelimiterFormatTokenAssigner","dayOfMonth","strftime"),strftimeDayOfWeekFormatTokenAssigner=new DayOfWeekFormatTokenAssigner("DayOfWeekFormatTokenAssigner","dayOfWeek","strftime"),strftimeDayOfYearFormatTokenAssigner=new DayOfYearFormatTokenAssigner("DayOfYearFormatTokenAssigner","dayOfYear","strftime"),strftimeDelimiterFormatTokenAssigner=new DelimiterFormatTokenAssigner("DelimiterFormatTokenAssigner","delimiter","strftime"),strftimeEscapeTextFormatTokenAssigner=new EscapeTextFormatTokenAssigner("EscapeTextFormatTokenAssigner","escapeText","strftime"),strftimeISODayOfWeekFormatTokenAssigner=new ISODayOfWeekFormatTokenAssigner("ISODayOfWeekFormatTokenAssigner","isoDayOfWeek","strftime"),strftimeISOWeekOfYearFormatTokenAssigner=new ISOWeekOfYearFormatTokenAssigner("ISOWeekOfYearFormatTokenAssigner","isoWeekOfYear","strftime"),strftimeMeridiemFormatTokenAssigner=new MeridiemFormatTokenAssigner("MeridiemFormatTokenAssigner","meridiem","strftime"),strftimeMillisecondFormatTokenAssigner=new MillisecondFormatTokenAssigner("MillisecondFormatTokenAssigner","millisecond","strftime"),strftimeMinuteFormatTokenAssigner=new MinuteFormatTokenAssigner("MinuteFormatTokenAssigner","minute","strftime"),strftimeMonthFormatTokenAssigner=new MonthFormatTokenAssigner("MonthFormatTokenAssigner","month","strftime"),strftimeSecondFormatTokenAssigner=new SecondFormatTokenAssigner("SecondFormatTokenAssigner","second","strftime"),strftimeTimezoneFormatTokenAssigner=new TimezoneFormatTokenAssigner("TimezoneFormatTokenAssigner","timezone","strftime"),strftimeTwelveHourFormatTokenAssigner=new TwelveHourFormatTokenAssigner("TwelveHourFormatTokenAssigner","twelveHour","strftime"),strftimeTwentyFourHourFormatTokenAssigner=new TwentyFourHourFormatTokenAssigner("TwentyFourHourFormatTokenAssigner","twentyFourHour","strftime"),strftimeYearFormatTokenAssigner=new YearFormatTokenAssigner("YearFormatTokenAssigner","year","strftime"),defaultAssigners=[yearFormatTokenAssigner,monthFormatTokenAssigner,dayOfMonthFormatTokenAssigner,delimiterFormatTokenAssigner,minuteFormatTokenAssigner,secondFormatTokenAssigner,millisecondFormatTokenAssigner,timezoneFormatTokenAssigner,dayOfYearFormatTokenAssigner,escapeTextFormatTokenAssigner,iSODayOfWeekFormatTokenAssigner,iSOWeekOfYearFormatTokenAssigner,twentyFourHourFormatTokenAssigner,twelveHourFormatTokenAssigner,dayOfWeekFormatTokenAssigner,meridiemFormatTokenAssigner],strftimeAssigners=[strftimeDayOfMonthFormatTokenAssigner,strftimeDayOfWeekFormatTokenAssigner,strftimeDayOfYearFormatTokenAssigner,strftimeDelimiterFormatTokenAssigner,strftimeEscapeTextFormatTokenAssigner,strftimeISODayOfWeekFormatTokenAssigner,strftimeISOWeekOfYearFormatTokenAssigner,strftimeMeridiemFormatTokenAssigner,strftimeMillisecondFormatTokenAssigner,strftimeMinuteFormatTokenAssigner,strftimeMonthFormatTokenAssigner,strftimeSecondFormatTokenAssigner,strftimeTimezoneFormatTokenAssigner,strftimeTwelveHourFormatTokenAssigner,strftimeTwentyFourHourFormatTokenAssigner,strftimeYearFormatTokenAssigner];class Guesser{constructor(){}static parse(e){const r=[];return parsers.forEach(a=>{const i=a.parse(e);i&&r.push(Object.assign({},i))}),r}static refine(e){let r=[...e];return refiners.forEach(a=>{r=[...a.refine(r)]}),r}static assign(e,r){(!r||r==="default"?defaultAssigners:strftimeAssigners).forEach(i=>{e.forEach(o=>{i.assign(o)})})}static getFormatString(e){let r="";return e.forEach(a=>{if(a.format==="NA")throw Error(`Couldn't find strftime modifier for "${a.value}"`);r+=a.format?a.format:a.value}),r}}function guessFormat(t,e){const r=Guesser.parse(t),a=Guesser.refine(r);if(a.length===0)throw Error("Couldn't parse date");a.forEach(o=>Guesser.assign(o.tokens,e));let i=[];return a.forEach(o=>i.push(Guesser.getFormatString(o.tokens))),i.length===1?i[0]:i}function convertFormat(t){const e={from:["A","D","DD","M","MM","YY","YYYY"],to:["a","d","dd","L","LL","yy","yyyy"]};let r=t;return e.from.forEach((a,i)=>{const o=e.to[i],u=new RegExp(`\\b${a}\\b`,"g");r=r.replace(u,o)}),r}function guessDateFormat(t){const e=guessFormat(t);return typeof e=="string"?[e]:e}function guessDateofArray(t){try{let e=guessDateFormat(t[0]);for(let a=1;a<t.length;a++)e=[...new Set([...e,...guessDateFormat(t[a])])];const r=e.filter(a=>t.every(i=>DateTime.fromFormat(i,convertFormat(a)).invalid===null));return r.length==1?r[0]:e[0]}catch{return-1}}function calculateTimeDifference(t,e,r){if(t===null||e===null||t===void 0||e===void 0)return null;t=DateTime.fromFormat(t,r),e=DateTime.fromFormat(e,r);var a=e.diff(t,"hours");return a.hours}function getPeriod(t,e){let r=new Array(t.length-1);for(let a=1;a<t.length;a++)r[a-1]=calculateTimeDifference(t[a-1],t[a],convertFormat(e));return{minDiff:Math.min(...r),constant:Math.min(...r)===Math.max(...r)}}function getstartTimeOffset(t,e,r){let a=DateTime.fromISO(t);return DateTime.fromFormat(e,convertFormat(r)).diff(a,"hours").hours}function getGuessedFormat(t){return guessDateofArray(t)}function forceFormat(t,e){return t.map(a=>calculateTimeDifference(t[0],a,convertFormat(e)))}function formatTimeFromISO(t){if(t){const[e,r]=t.split("T"),[a,i,o]=e.split("-"),[u,c]=r.split(":"),d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][+i-1];return`${o} ${d} ${a} ${u}:${c}`}else return""}function getISODate(t,e){return DateTime.fromFormat(t,convertFormat(e)).toISO()}function addTime(t,e){return formatTimeFromISO(DateTime.fromISO(t).plus({hours:e}).toISO())}function get_each_context$b(t,e,r){const a=t.slice();return a[20]=e[r],a[21]=e,a[22]=r,a}function create_if_block$i(t){let e,r;return e=new Dialog({props:{title:"GENERATE SIMULATED DATA",$$slots:{default:[create_default_slot$6]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment)},m(a,i){mount_component(e,a,i),r=!0},p(a,i){const o={};i&8388671&&(o.$$scope={dirty:i,ctx:a}),e.$set(o)},i(a){r||(transition_in(e.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),r=!1},d(a){destroy_component(e,a)}}}function create_each_block$b(t){let e,r,a,i,o,u,c,f,d,m,h,_,p,g,D,v,b;function y(){return t[15](t[22])}function T(k){t[16](k,t[22])}let w={min:21,max:26,limits:[6,72],step:"0.1",label:"Rhythm period (hours):"};t[4][t[22]]!==void 0&&(w.value=t[4][t[22]]),d=new Slider({props:w}),binding_callbacks.push(()=>bind(d,"value",T));function A(k){t[17](k,t[22])}let E={min:1,max:100,limits:[10,1e4],label:"Max values:"};return t[5][t[22]]!==void 0&&(E.value=t[5][t[22]]),p=new Slider({props:E}),binding_callbacks.push(()=>bind(p,"value",A)),{c(){e=element("div"),r=element("div"),a=element("div"),a.textContent=`value${t[22]}:`,i=space(),o=element("div"),o.textContent="",u=space(),c=element("div"),f=element("div"),create_component(d.$$.fragment),h=space(),_=element("div"),create_component(p.$$.fragment),attr(o,"class","removeData hoverbutton svelte-13hhe3j"),attr(r,"class","dataTitle svelte-13hhe3j"),attr(e,"class","datum svelte-13hhe3j")},m(k,O){insert(k,e,O),append(e,r),append(r,a),append(r,i),append(r,o),append(r,u),append(r,c),append(c,f),mount_component(d,f,null),append(c,h),append(c,_),mount_component(p,_,null),D=!0,v||(b=listen(o,"click",y),v=!0)},p(k,O){t=k;const L={};!m&&O&16&&(m=!0,L.value=t[4][t[22]],add_flush_callback(()=>m=!1)),d.$set(L);const P={};!g&&O&32&&(g=!0,P.value=t[5][t[22]],add_flush_callback(()=>g=!1)),p.$set(P)},i(k){D||(transition_in(d.$$.fragment,k),transition_in(p.$$.fragment,k),D=!0)},o(k){transition_out(d.$$.fragment,k),transition_out(p.$$.fragment,k),D=!1},d(k){k&&detach(e),destroy_component(d),destroy_component(p),v=!1,b()}}}function create_default_slot$6(t){let e,r,a,i,o,u,c,f,d,m,h,_,p,g,D,v,b,y,T,w,A,E,k,O;function L($){t[10]($)}let P={min:5,max:30,limits:[1,1/0],label:"Days:"};t[0]!==void 0&&(P.value=t[0]),r=new Slider({props:P}),binding_callbacks.push(()=>bind(r,"value",L));function C($){t[11]($)}let W={min:1,max:240,step:1,limits:[1,240],label:"Sampling period (minutes):"};t[1]!==void 0&&(W.value=t[1]),u=new Slider({props:W}),binding_callbacks.push(()=>bind(u,"value",C));let x=ensure_array_like(Array.from({length:t[3]})),M=[];for(let $=0;$<x.length;$+=1)M[$]=create_each_block$b(get_each_context$b(t,x,$));const S=$=>transition_out(M[$],1,1,()=>{M[$]=null});return{c(){e=element("div"),create_component(r.$$.fragment),i=space(),o=element("div"),create_component(u.$$.fragment),f=space(),d=element("div"),m=element("label"),m.textContent="Start time:",h=space(),_=element("input"),p=space(),g=element("hr"),D=space(),v=element("h2"),v.textContent="Data:",b=space(),y=element("span"),y.textContent="",T=space();for(let $=0;$<M.length;$+=1)M[$].c();w=space(),A=element("button"),A.textContent="Generate",attr(m,"for","val"),attr(_,"type","datetime-local"),attr(_,"name","start"),attr(y,"class","addSimDataButton svelte-13hhe3j")},m($,F){insert($,e,F),mount_component(r,e,null),insert($,i,F),insert($,o,F),mount_component(u,o,null),insert($,f,F),insert($,d,F),append(d,m),append(d,h),append(d,_),set_input_value(_,t[2]),insert($,p,F),insert($,g,F),insert($,D,F),insert($,v,F),insert($,b,F),insert($,y,F),insert($,T,F);for(let H=0;H<M.length;H+=1)M[H]&&M[H].m($,F);insert($,w,F),insert($,A,F),E=!0,k||(O=[listen(_,"input",t[12]),listen(_,"change",t[13]),listen(y,"click",t[14]),listen(A,"click",t[18])],k=!0)},p($,F){const H={};!a&&F&1&&(a=!0,H.value=$[0],add_flush_callback(()=>a=!1)),r.$set(H);const I={};if(!c&&F&2&&(c=!0,I.value=$[1],add_flush_callback(()=>c=!1)),u.$set(I),F&4&&set_input_value(_,$[2]),F&312){x=ensure_array_like(Array.from({length:$[3]}));let N;for(N=0;N<x.length;N+=1){const U=get_each_context$b($,x,N);M[N]?(M[N].p(U,F),transition_in(M[N],1)):(M[N]=create_each_block$b(U),M[N].c(),transition_in(M[N],1),M[N].m(w.parentNode,w))}for(group_outros(),N=x.length;N<M.length;N+=1)S(N);check_outros()}},i($){if(!E){transition_in(r.$$.fragment,$),transition_in(u.$$.fragment,$);for(let F=0;F<x.length;F+=1)transition_in(M[F]);E=!0}},o($){transition_out(r.$$.fragment,$),transition_out(u.$$.fragment,$),M=M.filter(Boolean);for(let F=0;F<M.length;F+=1)transition_out(M[F]);E=!1},d($){$&&(detach(e),detach(i),detach(o),detach(f),detach(d),detach(p),detach(g),detach(D),detach(v),detach(b),detach(y),detach(T),detach(w),detach(A)),destroy_component(r),destroy_component(u),destroy_each(M,$),k=!1,run_all(O)}}}function create_fragment$r(t){let e,r,a=t[6]==="generateSim"&&create_if_block$i(t);return{c(){a&&a.c(),e=empty$1()},m(i,o){a&&a.m(i,o),insert(i,e,o),r=!0},p(i,[o]){i[6]==="generateSim"?a?(a.p(i,o),o&64&&transition_in(a,1)):(a=create_if_block$i(i),a.c(),transition_in(a,1),a.m(e.parentNode,e)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(i){r||(transition_in(a),r=!0)},o(i){transition_out(a),r=!1},d(i){i&&detach(e),a&&a.d(i)}}}function instance$r(t,e,r){let a,i;component_subscribe(t,menuModalType,k=>r(6,a=k)),component_subscribe(t,data,k=>r(19,i=k)),onMount(()=>{o(28,15,DateTime.now().set({hour:0,minute:0,second:0,millisecond:0}).toJSDate(),[24,28],[100,150])});function o(k,O,L,P,C){const W={id:i.length,importedFrom:`simulated(${k},${C[0]})`,displayName:`Simulated_${i.length+1}`,datalength:k*24*(60/O),data:{}},x=[];for(let F=0;F<W.datalength;F++){const H=new Date(L.getTime()+F*O*60*1e3).toLocaleString("en-US");x.push(H)}const M=guessDateofArray(x),S=forceFormat(x,M),$=getPeriod(x,M);W.data.time={name:"time",type:"time",data:x,timeData:S,processSteps:[],processedData:[],timeFormat:M,recordPeriod:$};for(let F=0;F<P.length;F++){const H=`value${F}`,I=[],N=C[F],z=P[F]*(60/O);for(let V=0;V<W.datalength;V++){const B=V%z<z/2?N*.05:N,ce=Math.random()*B;I.push(Math.round(ce))}W.data[H]={name:H,type:"value",data:I,processSteps:[],processedData:[]}}data.update(F=>[...F,W]),set_store_value(menuModalType,a=null,a)}let u=28,c=15,f=DateTime.now().set({hour:0,minute:0,second:0,millisecond:0}).toJSDate(),d=2,m=[24,25],h=[200,400];function _(k){r(3,d-=1),m.slice(k,1),h.slice(k,1)}function p(){r(3,d+=1),m.push(24),h.push(100)}function g(k){u=k,r(0,u)}function D(k){c=k,r(1,c)}function v(){f=this.value,r(2,f)}const b=k=>console.log(k),y=()=>p(),T=k=>_(k);function w(k,O){t.$$.not_equal(m[O],k)&&(m[O]=k,r(4,m))}function A(k,O){t.$$.not_equal(h[O],k)&&(h[O]=k,r(5,h))}return[u,c,f,d,m,h,a,o,_,p,g,D,v,b,y,T,w,A,()=>o(u,c,f,m,h)]}class GenerateSimulated extends SvelteComponent{constructor(e){super(),init(this,e,instance$r,create_fragment$r,safe_not_equal,{})}}function create_fragment$q(t){let e,r,a,i,o,u,c;return{c(){e=element("label"),e.textContent="From:",r=element("input"),a=space(),i=element("label"),i.textContent="To:",o=element("input")},m(f,d){insert(f,e,d),insert(f,r,d),set_input_value(r,t[0].from),insert(f,a,d),insert(f,i,d),insert(f,o,d),set_input_value(o,t[0].to),u||(c=[listen(r,"input",t[3]),listen(o,"input",t[4])],u=!0)},p(f,[d]){d&1&&r.value!==f[0].from&&set_input_value(r,f[0].from),d&1&&o.value!==f[0].to&&set_input_value(o,f[0].to)},i:noop,o:noop,d(f){f&&(detach(e),detach(r),detach(a),detach(i),detach(o)),u=!1,run_all(c)}}}function replace(t=[1,2,3],e={from:0,to:100}){var r=[...t];for(let a=0;a<r.length;a++)r[a]==e.from&&(r[a]=e.to);return r}function instance$q(t,e,r){const a=createEventDispatcher();let{paramsStart:i}=e,{typeTime:o}=e,{params:u={from:0,to:100}}=e;Object.keys(i).length>0&&(u=Object.assign({},i));function c(){u.from=this.value,r(0,u)}function f(){u.to=this.value,r(0,u)}return t.$$set=d=>{"paramsStart"in d&&r(1,i=d.paramsStart),"typeTime"in d&&r(2,o=d.typeTime),"params"in d&&r(0,u=d.params)},t.$$.update=()=>{t.$$.dirty&1&&a("update",{params:u})},[u,i,o,c,f]}class Replace extends SvelteComponent{constructor(e){super(),init(this,e,instance$q,create_fragment$q,safe_not_equal,{paramsStart:1,typeTime:2,params:0})}}function create_if_block_1$9(t){let e,r,a,i,o,u;function c(h){t[5](h)}let f={min:dataMin-1,max:dataMax+1,label:"Min (hrs):"};t[0].min!==void 0&&(f.value=t[0].min),e=new Slider({props:f}),binding_callbacks.push(()=>bind(e,"value",c));function d(h){t[6](h)}let m={min:dataMin-1,max:dataMax+1,label:"Max (hrs):"};return t[0].max!==void 0&&(m.value=t[0].max),i=new Slider({props:m}),binding_callbacks.push(()=>bind(i,"value",d)),{c(){create_component(e.$$.fragment),a=space(),create_component(i.$$.fragment)},m(h,_){mount_component(e,h,_),insert(h,a,_),mount_component(i,h,_),u=!0},p(h,_){const p={};!r&&_&1&&(r=!0,p.value=h[0].min,add_flush_callback(()=>r=!1)),e.$set(p);const g={};!o&&_&1&&(o=!0,g.value=h[0].max,add_flush_callback(()=>o=!1)),i.$set(g)},i(h){u||(transition_in(e.$$.fragment,h),transition_in(i.$$.fragment,h),u=!0)},o(h){transition_out(e.$$.fragment,h),transition_out(i.$$.fragment,h),u=!1},d(h){h&&detach(a),destroy_component(e,h),destroy_component(i,h)}}}function create_if_block$h(t){let e,r,a,i,o,u;function c(h){t[3](h)}let f={min:dataMin-1,max:dataMax+1,label:"Min:"};t[0].min!==void 0&&(f.value=t[0].min),e=new Slider({props:f}),binding_callbacks.push(()=>bind(e,"value",c));function d(h){t[4](h)}let m={min:dataMin-1,max:dataMax+1,label:"Max:"};return t[0].max!==void 0&&(m.value=t[0].max),i=new Slider({props:m}),binding_callbacks.push(()=>bind(i,"value",d)),{c(){create_component(e.$$.fragment),a=space(),create_component(i.$$.fragment)},m(h,_){mount_component(e,h,_),insert(h,a,_),mount_component(i,h,_),u=!0},p(h,_){const p={};!r&&_&1&&(r=!0,p.value=h[0].min,add_flush_callback(()=>r=!1)),e.$set(p);const g={};!o&&_&1&&(o=!0,g.value=h[0].max,add_flush_callback(()=>o=!1)),i.$set(g)},i(h){u||(transition_in(e.$$.fragment,h),transition_in(i.$$.fragment,h),u=!0)},o(h){transition_out(e.$$.fragment,h),transition_out(i.$$.fragment,h),u=!1},d(h){h&&detach(a),destroy_component(e,h),destroy_component(i,h)}}}function create_fragment$p(t){let e,r,a,i;const o=[create_if_block$h,create_if_block_1$9],u=[];function c(f,d){return f[1].type==="value"?0:f[1].type==="time"?1:-1}return~(e=c(t))&&(r=u[e]=o[e](t)),{c(){r&&r.c(),a=empty$1()},m(f,d){~e&&u[e].m(f,d),insert(f,a,d),i=!0},p(f,[d]){let m=e;e=c(f),e===m?~e&&u[e].p(f,d):(r&&(group_outros(),transition_out(u[m],1,1,()=>{u[m]=null}),check_outros()),~e?(r=u[e],r?r.p(f,d):(r=u[e]=o[e](f),r.c()),transition_in(r,1),r.m(a.parentNode,a)):r=null)},i(f){i||(transition_in(r),i=!0)},o(f){transition_out(r),i=!1},d(f){f&&detach(a),~e&&u[e].d(f)}}}function filter$1(t=[1,2,3],e={min:0,max:12}){Math.min(...t),Math.max(...t);var r=[...t];for(let a=0;a<r.length;a++)r[a]<e.min?r[a]=NaN:r[a]>e.max&&(r[a]=NaN);return r}const dataMin=0,dataMax=1e4;function instance$p(t,e,r){const a=createEventDispatcher();let{paramsStart:i}=e,{typeTime:o}=e,{params:u={min:dataMin,max:dataMax}}=e;Object.keys(i).length>0&&(u=Object.assign({},i));function c(h){t.$$.not_equal(u.min,h)&&(u.min=h,r(0,u))}function f(h){t.$$.not_equal(u.max,h)&&(u.max=h,r(0,u))}function d(h){t.$$.not_equal(u.min,h)&&(u.min=h,r(0,u))}function m(h){t.$$.not_equal(u.max,h)&&(u.max=h,r(0,u))}return t.$$set=h=>{"paramsStart"in h&&r(2,i=h.paramsStart),"typeTime"in h&&r(1,o=h.typeTime),"params"in h&&r(0,u=h.params)},t.$$.update=()=>{t.$$.dirty&1&&u.max<u.min&&r(0,u.max=u.min,u),t.$$.dirty&1&&a("update",{params:u})},[u,o,i,c,f,d,m]}class Filter extends SvelteComponent{constructor(e){super(),init(this,e,instance$p,create_fragment$p,safe_not_equal,{paramsStart:2,typeTime:1,params:0})}}function create_if_block_1$8(t){let e,r,a;function i(u){t[4](u)}let o={min:-20,max:20,step:.5,label:"Add (hrs):"};return t[0].val!==void 0&&(o.value=t[0].val),e=new Slider({props:o}),binding_callbacks.push(()=>bind(e,"value",i)),{c(){create_component(e.$$.fragment)},m(u,c){mount_component(e,u,c),a=!0},p(u,c){const f={};!r&&c&1&&(r=!0,f.value=u[0].val,add_flush_callback(()=>r=!1)),e.$set(f)},i(u){a||(transition_in(e.$$.fragment,u),a=!0)},o(u){transition_out(e.$$.fragment,u),a=!1},d(u){destroy_component(e,u)}}}function create_if_block$g(t){let e,r,a;function i(u){t[3](u)}let o={min:-20,max:20,label:"Add:"};return t[0].val!==void 0&&(o.value=t[0].val),e=new Slider({props:o}),binding_callbacks.push(()=>bind(e,"value",i)),{c(){create_component(e.$$.fragment)},m(u,c){mount_component(e,u,c),a=!0},p(u,c){const f={};!r&&c&1&&(r=!0,f.value=u[0].val,add_flush_callback(()=>r=!1)),e.$set(f)},i(u){a||(transition_in(e.$$.fragment,u),a=!0)},o(u){transition_out(e.$$.fragment,u),a=!1},d(u){destroy_component(e,u)}}}function create_fragment$o(t){let e,r,a,i;const o=[create_if_block$g,create_if_block_1$8],u=[];function c(f,d){return f[1].type==="value"?0:f[1].type==="time"?1:-1}return~(e=c(t))&&(r=u[e]=o[e](t)),{c(){r&&r.c(),a=empty$1()},m(f,d){~e&&u[e].m(f,d),insert(f,a,d),i=!0},p(f,[d]){let m=e;e=c(f),e===m?~e&&u[e].p(f,d):(r&&(group_outros(),transition_out(u[m],1,1,()=>{u[m]=null}),check_outros()),~e?(r=u[e],r?r.p(f,d):(r=u[e]=o[e](f),r.c()),transition_in(r,1),r.m(a.parentNode,a)):r=null)},i(f){i||(transition_in(r),i=!0)},o(f){transition_out(r),i=!1},d(f){f&&detach(a),~e&&u[e].d(f)}}}function add(t=[1,2,3],e={val:0}){var r=[...t];for(let a=0;a<r.length;a++)r[a]=r[a]+e.val;return r}function instance$o(t,e,r){const a=createEventDispatcher();let{paramsStart:i}=e,{typeTime:o}=e,{params:u={val:0}}=e;Object.keys(i).length>0&&(u=Object.assign({},i));function c(d){t.$$.not_equal(u.val,d)&&(u.val=d,r(0,u))}function f(d){t.$$.not_equal(u.val,d)&&(u.val=d,r(0,u))}return t.$$set=d=>{"paramsStart"in d&&r(2,i=d.paramsStart),"typeTime"in d&&r(1,o=d.typeTime),"params"in d&&r(0,u=d.params)},t.$$.update=()=>{t.$$.dirty&1&&a("update",{params:u})},[u,o,i,c,f]}class Add extends SvelteComponent{constructor(e){super(),init(this,e,instance$o,create_fragment$o,safe_not_equal,{paramsStart:2,typeTime:1,params:0})}}function getDataFromTable(t,e,r=!0){const a=get_store_value(data)[get_store_value(data).findIndex(i=>i.id===t)].data[e];return a.processedData.length>0&&r?a.processedData:a.type==="time"?a.timeData:a.data}function getFieldName(t,e){return get_store_value(data)[get_store_value(data).findIndex(a=>a.id===t)].data[e].name}function getDataFromSource(t,e){const r=get_store_value(graphs)[get_store_value(activeGraphTab)].sourceData[t];if(e.processedData.length>0)return e.processedData;{const a=r.tableID;return getDataFromTable(a,e.field)}}function getFieldType(t,e){return get_store_value(data)[get_store_value(data).findIndex(a=>a.id===t)].data[e].type}function averageBinnedValues(t,e,r){const a=Math.ceil((Math.max(...t.filter(f=>f||0))+r)/r),i=new Array(a),o=new Array(a),u=new Array(a);for(let f=0;f<a;f++)i[f]=f*r+r/2,o[f]=0,u[f]=0;for(let f=0;f<t.length;f++){const d=Math.floor(t[f]/r);e[f]&&(o[d]+=e[f],u[d]++)}const c=o.map((f,d)=>u[d]>0?f/u[d]:0);return{time:i,values:c}}function getDiffs(t){let e=[];for(let r=1;r<t.length;r++)e[r-1]=t[r]-t[r-1];return e}function bestFitOnsets(t){const e=calculateMedian(t),r=calculateMAD(t,e),a=t.filter(o=>Math.abs(o-e)<=2*r);return calculateMean(a)}function calculateMedian(t){const e=t.slice().sort((a,i)=>a-i),r=Math.floor(e.length/2);return e.length%2===0?(e[r-1]+e[r])/2:e[r]}function calculateMAD(t,e){const r=t.map(a=>Math.abs(a-e));return calculateMedian(r)}function calculateMean(t){return t.reduce((r,a)=>r+a,0)/t.length}const componentMap={add:{component:Add,startParams:{val:0},func:add,forTypes:["value","time"]},filter:{component:Filter,startParams:{min:0,max:12},func:filter$1,forTypes:["value","time"]},replace:{component:Replace,startParams:{from:-999,to:NaN},func:replace,forTypes:["value"]}};let selectedSettings=null;function addProcess(t,e,r,a){selectedSettings={process:t,parameters:componentMap[t].startParams},e==="data"&&(data.update(i=>{const o=[...i],u=o.find(c=>c.id===r);return u&&u.data[a]&&u.data[a].processSteps.push(selectedSettings),o}),updateDataProcess(r,a)),e==="graph"&&(graphs.update(i=>{const o=[...i];return o.find(u=>u.id===r),o[get_store_value(activeGraphTab)].sourceData[r].chartvalues[a].processSteps.push(selectedSettings),o}),updateGraphProcess(get_store_value(activeGraphTab),r,a))}function processData(t,e){for(const r of t){const a=r.process,i=componentMap[a].func;typeof i=="function"?e=i(e,r.parameters):console.error(`Function '${a}' does not exist.`)}return e}function updateGraphProcess(t,e,r){let a=get_store_value(graphs)[t].sourceData[e].tableID,i=get_store_value(graphs)[t].sourceData[e].chartvalues[r].field,o=getDataFromTable(a,i),u=get_store_value(graphs)[t].sourceData[e].chartvalues[r].processSteps;u.length>0&&(o=processData(u,o)),graphs.update(c=>{const f=[...c];return f[t].sourceData[e].chartvalues[r].processedData=o,f})}function updateDataProcess(t,e){let r=getDataFromTable(t,e,!1),a=get_store_value(data).find(i=>i.id===t).data[e].processSteps;a.length>0&&(r=processData(a,r)),data.update(i=>{const o=[...i],u=o.find(c=>c.id===t);return u&&u.data[e]&&(u.data[e].processedData=r),o}),get_store_value(graphs).forEach((i,o)=>{i.sourceData.forEach((u,c)=>{u.tableID===t&&Object.keys(u.chartvalues).forEach(f=>{u.chartvalues[f].field===e&&updateGraphProcess(o,c,f)})})})}class ProcessStep extends SvelteComponent{constructor(e){super(),init(this,e,null,null,safe_not_equal,{})}}function create_else_block$7(t){let e,r,a,i;return{c(){e=element("span"),r=text(t[0]),attr(e,"class","svelte-1tdrfqa")},m(o,u){insert(o,e,u),append(e,r),a||(i=[listen(e,"dblclick",t[9]),listen(e,"click",click_handler$1)],a=!0)},p(o,u){u&1&&set_data(r,o[0])},d(o){o&&detach(e),a=!1,run_all(i)}}}function create_if_block$f(t){let e,r,a,i,o;return{c(){e=element("form"),r=element("input"),r.required=t[1],attr(r,"class",a=null_to_empty(t[2]?"editing":"")+" svelte-1tdrfqa"),attr(e,"class","svelte-1tdrfqa")},m(u,c){insert(u,e,c),append(e,r),set_input_value(r,t[0]),t[8](r),i||(o=[listen(r,"input",t[7]),listen(r,"blur",t[5]),listen(e,"submit",prevent_default(t[5])),listen(e,"keydown",t[6])],i=!0)},p(u,c){c&2&&(r.required=u[1]),c&4&&a!==(a=null_to_empty(u[2]?"editing":"")+" svelte-1tdrfqa")&&attr(r,"class",a),c&1&&r.value!==u[0]&&set_input_value(r,u[0])},d(u){u&&detach(e),t[8](null),i=!1,run_all(o)}}}function create_fragment$n(t){let e;function r(o,u){return o[2]?create_if_block$f:create_else_block$7}let a=r(t),i=a(t);return{c(){i.c(),e=empty$1()},m(o,u){i.m(o,u),insert(o,e,u)},p(o,[u]){a===(a=r(o))&&i?i.p(o,u):(i.d(1),i=a(o),i&&(i.c(),i.m(e.parentNode,e)))},i:noop,o:noop,d(o){o&&detach(e),i.d(o)}}}const click_handler$1=t=>{t.target.parentElement.className.includes("tabname")||t.preventDefault()};function instance$n(t,e,r){let{value:a,required:i=!0}=e;const o=createEventDispatcher();let u=!1,c,f;onMount(()=>{c=a}),afterUpdate(()=>{u&&(f.focus(),f.click())});function d(D){r(2,u=!0)}function m(){a!=c&&o("submit",a),r(2,u=!1)}function h(D){D.key=="Escape"&&(D.preventDefault(),r(0,a=c),r(2,u=!1))}function _(){a=this.value,r(0,a)}function p(D){binding_callbacks[D?"unshift":"push"](()=>{f=D,r(3,f)})}const g=D=>{d()};return t.$$set=D=>{"value"in D&&r(0,a=D.value),"required"in D&&r(1,i=D.required)},[a,i,u,f,d,m,h,_,p,g]}class InPlaceEdit extends SvelteComponent{constructor(e){super(),init(this,e,instance$n,create_fragment$n,safe_not_equal,{value:0,required:1})}}function get_each_context$a(t,e,r){const a=t.slice();return a[17]=e[r],a[18]=e,a[19]=r,a}function get_each_context_1$6(t,e,r){const a=t.slice();return a[20]=e[r][0],a[21]=e[r][1],a[22]=e,a[23]=r,a}function get_each_context_2$4(t,e,r){const a=t.slice();return a[24]=e[r],a[26]=r,a}function create_each_block_2$4(t){let e,r,a=t[24].process+"",i,o,u,c,f,d,m,h,_;function p(...b){return t[11](t[17],t[20],t[26],...b)}function g(...b){return t[12](t[17],t[20],t[26],...b)}var D=componentMap[t[24].process].component;function v(b,y){return{props:{paramsStart:b[24].parameters,typeTime:{type:b[0][b[19]].data[b[20]].type,tocheck:{tableID:b[17].id,key:b[20]}}}}}return D&&(d=construct_svelte_component(D,v(t)),d.$on("update",g)),{c(){e=element("details"),r=element("summary"),i=text(a),o=space(),u=element("div"),u.textContent="",c=space(),f=element("div"),d&&create_component(d.$$.fragment),attr(u,"class","deleteProcess hoverbutton svelte-hshnm9"),attr(r,"class","svelte-hshnm9"),attr(f,"class","processDetails svelte-hshnm9"),e.open=!0,attr(e,"class","process svelte-hshnm9")},m(b,y){insert(b,e,y),append(e,r),append(r,i),append(r,o),append(r,u),append(e,c),append(e,f),d&&mount_component(d,f,null),m=!0,h||(_=listen(u,"click",p),h=!0)},p(b,y){if(t=b,(!m||y&1)&&a!==(a=t[24].process+"")&&set_data(i,a),y&1&&D!==(D=componentMap[t[24].process].component)){if(d){group_outros();const T=d;transition_out(T.$$.fragment,1,0,()=>{destroy_component(T,1)}),check_outros()}D?(d=construct_svelte_component(D,v(t)),d.$on("update",g),create_component(d.$$.fragment),transition_in(d.$$.fragment,1),mount_component(d,f,null)):d=null}else if(D){const T={};y&1&&(T.paramsStart=t[24].parameters),y&1&&(T.typeTime={type:t[0][t[19]].data[t[20]].type,tocheck:{tableID:t[17].id,key:t[20]}}),d.$set(T)}},i(b){m||(d&&transition_in(d.$$.fragment,b),m=!0)},o(b){d&&transition_out(d.$$.fragment,b),m=!1},d(b){b&&detach(e),d&&destroy_component(d),h=!1,_()}}}function create_each_block_1$6(t,e){let r,a,i,o,u,c,f,d,m,h;function _(y){e[9](y,e[17],e[20])}let p={};e[17].data[e[20]].name!==void 0&&(p.value=e[17].data[e[20]].name),i=new InPlaceEdit({props:p}),binding_callbacks.push(()=>bind(i,"value",_));function g(...y){return e[10](e[17],e[20],...y)}let D=ensure_array_like(e[17].data[e[20]].processSteps),v=[];for(let y=0;y<D.length;y+=1)v[y]=create_each_block_2$4(get_each_context_2$4(e,D,y));const b=y=>transition_out(v[y],1,1,()=>{v[y]=null});return{key:t,first:null,c(){r=element("details"),a=element("summary"),create_component(i.$$.fragment),u=element("span"),u.textContent="+",c=space();for(let y=0;y<v.length;y+=1)v[y].c();attr(u,"class","addbutton hoverbutton showContextMenu svelte-hshnm9"),attr(a,"class","svelte-hshnm9"),r.open=!0,attr(r,"class",f="field "+(e[17].data[e[20]].processSteps.length>0?"":"no-arrow")+" svelte-hshnm9"),this.first=r},m(y,T){insert(y,r,T),append(r,a),mount_component(i,a,null),append(a,u),append(r,c);for(let w=0;w<v.length;w+=1)v[w]&&v[w].m(r,null);d=!0,m||(h=listen(u,"click",g),m=!0)},p(y,T){e=y;const w={};if(!o&&T&1&&(o=!0,w.value=e[17].data[e[20]].name,add_flush_callback(()=>o=!1)),i.$set(w),T&13){D=ensure_array_like(e[17].data[e[20]].processSteps);let A;for(A=0;A<D.length;A+=1){const E=get_each_context_2$4(e,D,A);v[A]?(v[A].p(E,T),transition_in(v[A],1)):(v[A]=create_each_block_2$4(E),v[A].c(),transition_in(v[A],1),v[A].m(r,null))}for(group_outros(),A=D.length;A<v.length;A+=1)b(A);check_outros()}(!d||T&1&&f!==(f="field "+(e[17].data[e[20]].processSteps.length>0?"":"no-arrow")+" svelte-hshnm9"))&&attr(r,"class",f)},i(y){if(!d){transition_in(i.$$.fragment,y);for(let T=0;T<D.length;T+=1)transition_in(v[T]);d=!0}},o(y){transition_out(i.$$.fragment,y),v=v.filter(Boolean);for(let T=0;T<v.length;T+=1)transition_out(v[T]);d=!1},d(y){y&&detach(r),destroy_component(i),destroy_each(v,y),m=!1,h()}}}function create_each_block$a(t){let e,r,a,i,o,u,c,f,d,m=[],h=new Map,_,p,g,D;function v(E){t[6](E,t[17])}let b={};t[17].displayName!==void 0&&(b.value=t[17].displayName),a=new InPlaceEdit({props:b}),binding_callbacks.push(()=>bind(a,"value",v));function y(...E){return t[7](t[17],...E)}function T(...E){return t[8](t[17],...E)}let w=ensure_array_like(Object.entries(t[17].data));const A=E=>E[20];for(let E=0;E<w.length;E+=1){let k=get_each_context_1$6(t,w,E),O=A(k);h.set(O,m[E]=create_each_block_1$6(O,k))}return{c(){e=element("details"),r=element("summary"),create_component(a.$$.fragment),o=space(),u=element("div"),u.textContent="",c=space(),f=element("div"),f.textContent="",d=space();for(let E=0;E<m.length;E+=1)m[E].c();_=space(),attr(u,"class","deleteTable hoverbutton svelte-hshnm9"),attr(f,"class","viewTable hoverbutton svelte-hshnm9"),attr(r,"class","svelte-hshnm9"),e.open=!0,attr(e,"class","dataTable svelte-hshnm9")},m(E,k){insert(E,e,k),append(e,r),mount_component(a,r,null),append(r,o),append(r,u),append(r,c),append(r,f),append(e,d);for(let O=0;O<m.length;O+=1)m[O]&&m[O].m(e,null);append(e,_),p=!0,g||(D=[listen(u,"click",y),listen(f,"click",T)],g=!0)},p(E,k){t=E;const O={};!i&&k&1&&(i=!0,O.value=t[17].displayName,add_flush_callback(()=>i=!1)),a.$set(O),k&45&&(w=ensure_array_like(Object.entries(t[17].data)),group_outros(),m=update_keyed_each(m,k,A,1,t,w,h,e,outro_and_destroy_block,create_each_block_1$6,_,get_each_context_1$6),check_outros())},i(E){if(!p){transition_in(a.$$.fragment,E);for(let k=0;k<w.length;k+=1)transition_in(m[k]);p=!0}},o(E){transition_out(a.$$.fragment,E);for(let k=0;k<m.length;k+=1)transition_out(m[k]);p=!1},d(E){E&&detach(e),destroy_component(a);for(let k=0;k<m.length;k+=1)m[k].d();g=!1,run_all(D)}}}function create_fragment$m(t){let e,r,a,i,o,u=ensure_array_like(t[0]),c=[];for(let d=0;d<u.length;d+=1)c[d]=create_each_block$a(get_each_context$a(t,u,d));const f=d=>transition_out(c[d],1,1,()=>{c[d]=null});return{c(){e=element("div"),r=element("h1"),r.textContent="Data Tables",a=space(),i=element("div");for(let d=0;d<c.length;d+=1)c[d].c();attr(i,"class","dataTree scroll-shadows svelte-hshnm9"),attr(e,"id","dataTreeContainer"),set_style(e,"overflow","auto"),set_style(e,"height","100%"),set_style(e,"width","auto")},m(d,m){insert(d,e,m),append(e,r),append(e,a),append(e,i);for(let h=0;h<c.length;h+=1)c[h]&&c[h].m(i,null);o=!0},p(d,[m]){if(m&63){u=ensure_array_like(d[0]);let h;for(h=0;h<u.length;h+=1){const _=get_each_context$a(d,u,h);c[h]?(c[h].p(_,m),transition_in(c[h],1)):(c[h]=create_each_block$a(_),c[h].c(),transition_in(c[h],1),c[h].m(i,null))}for(group_outros(),h=u.length;h<c.length;h+=1)f(h);check_outros()}},i(d){if(!o){for(let m=0;m<u.length;m+=1)transition_in(c[m]);o=!0}},o(d){c=c.filter(Boolean);for(let m=0;m<c.length;m+=1)transition_out(c[m]);o=!1},d(d){d&&detach(e),destroy_each(c,d)}}}function instance$m(t,e,r){let a,i,o,u,c;component_subscribe(t,contextMenu,w=>r(13,a=w)),component_subscribe(t,data,w=>r(0,i=w)),component_subscribe(t,dataIDsforTables,w=>r(14,o=w)),component_subscribe(t,activeTableTab,w=>r(15,u=w)),component_subscribe(t,showalldata,w=>r(16,c=w));function f(w){const A=o.indexOf(w);A<0?(o.push(w),dataIDsforTables.set(o),c.push(!1),showalldata.set(c),set_store_value(activeTableTab,u=o.length-1,u)):set_store_value(activeTableTab,u=A,u)}function d(w,A,E,k){let O=i.findIndex(L=>L.id===w);set_store_value(data,i[O].data[A].processSteps[E].parameters=k,i),updateDataProcess(w,A)}function m(w,A,E){let k=i.findIndex(O=>O.id===w);i[k].data[A].processSteps.splice(E,1),updateDataProcess(w,A),i[k].data[A].processSteps.length===0&&set_store_value(data,i[k].data[A].processedData=[],i)}function h(w){set_store_value(dataIDsforTables,o=o.filter(E=>E!==w),o),set_store_value(activeTableTab,u=o.length>0?0:-1,u),graphs.update(E=>E.map(k=>{const O=k.sourceData.filter(L=>L.tableID!==w);return{...k,sourceData:O}}));let A=i.findIndex(E=>E.id===w);data.update(E=>(E.splice(A,1),E))}function _(w,A,E){set_store_value(contextMenu,a={labels:[],funcs:[]},a);const k=getFieldType(A,E),O=Object.keys(componentMap);for(let L=0;L<O.length;L++)componentMap[O[L]].forTypes.includes(k)&&(set_store_value(contextMenu,a.labels[L]=O[L],a),set_store_value(contextMenu,a.funcs[L]=()=>addProcess(O[L],w,A,E),a))}function p(w,A){t.$$.not_equal(A.displayName,w)&&(A.displayName=w,data.set(i))}const g=(w,A)=>{A.preventDefault(),h(w.id)},D=(w,A)=>{A.preventDefault(),f(w.id)};function v(w,A,E){t.$$.not_equal(A.data[E].name,w)&&(A.data[E].name=w,data.set(i))}return[i,f,d,m,h,_,p,g,D,v,(w,A,E)=>{E.preventDefault(),_("data",w.id,A)},(w,A,E,k)=>{k.preventDefault(),m(w.id,A,E)},(w,A,E,k)=>d(w.id,A,E,k.detail.params)]}class DataTree extends SvelteComponent{constructor(e){super(),init(this,e,instance$m,create_fragment$m,safe_not_equal,{})}}function create_if_block$e(t){let e,r;return{c(){e=element("div"),r=text(t[0]),set_style(e,"top",t[3]+"px"),set_style(e,"left",t[2]+"px"),attr(e,"class","tooltip svelte-1926ilb")},m(a,i){insert(a,e,i),append(e,r)},p(a,i){i&1&&set_data(r,a[0]),i&8&&set_style(e,"top",a[3]+"px"),i&4&&set_style(e,"left",a[2]+"px")},d(a){a&&detach(e)}}}function create_fragment$l(t){let e,r,a,i,o,u;const c=t[8].default,f=create_slot(c,t,t[7],null);let d=t[1]&&create_if_block$e(t);return{c(){e=element("div"),f&&f.c(),r=space(),d&&d.c(),a=empty$1()},m(m,h){insert(m,e,h),f&&f.m(e,null),insert(m,r,h),d&&d.m(m,h),insert(m,a,h),i=!0,o||(u=[listen(e,"mouseover",t[4]),listen(e,"mouseleave",t[6]),listen(e,"mousemove",t[5])],o=!0)},p(m,[h]){f&&f.p&&(!i||h&128)&&update_slot_base(f,c,m,m[7],i?get_slot_changes(c,m[7],h,null):get_all_dirty_from_scope(m[7]),null),m[1]?d?d.p(m,h):(d=create_if_block$e(m),d.c(),d.m(a.parentNode,a)):d&&(d.d(1),d=null)},i(m){i||(transition_in(f,m),i=!0)},o(m){transition_out(f,m),i=!1},d(m){m&&(detach(e),detach(r),detach(a)),f&&f.d(m),d&&d.d(m),o=!1,run_all(u)}}}function instance$l(t,e,r){let{$$slots:a={},$$scope:i}=e,{tipcontent:o=""}=e,u=!1,c,f;function d(_){r(1,u=!0),r(2,c=_.clientX+5),r(3,f=_.clientY+5)}function m(_){r(2,c=_.clientX+5),r(3,f=_.clientY+5)}function h(){r(1,u=!1)}return t.$$set=_=>{"tipcontent"in _&&r(0,o=_.tipcontent),"$$scope"in _&&r(7,i=_.$$scope)},[o,u,c,f,d,m,h,i,a]}class Tooltip extends SvelteComponent{constructor(e){super(),init(this,e,instance$l,create_fragment$l,safe_not_equal,{tipcontent:0})}}function create_default_slot_2$3(t){let e,r,a;return{c(){e=element("div"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M304 192v32c0 6.6-5.4 12-12 12h-56v56c0 6.6-5.4 12-12 12h-32c-6.6 0-12-5.4-12-12v-56h-56c-6.6 0-12-5.4-12-12v-32c0-6.6 5.4-12 12-12h56v-56c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v56h56c6.6 0 12 5.4 12 12zm201 284.7L476.7 505c-9.4 9.4-24.6 9.4-33.9 0L343 405.3c-4.5-4.5-7-10.6-7-17V372c-35.3 27.6-79.7 44-128 44C93.1 416 0 322.9 0 208S93.1 0 208 0s208 93.1 208 208c0 48.3-16.4 92.7-44 128h16.3c6.4 0 12.5 2.5 17 7l99.7 99.7c9.3 9.4 9.3 24.6 0 34zM344 208c0-75.2-60.8-136-136-136S72 132.8 72 208s60.8 136 136 136 136-60.8 136-136z" style="transform: scale(0.04); fill: var(--font-color); "></path></svg>',attr(e,"class","button svelte-1289zmx"),attr(e,"id","Zoom in")},m(i,o){insert(i,e,o),r||(a=listen(e,"click",t[0]),r=!0)},p:noop,d(i){i&&detach(e),r=!1,a()}}}function create_default_slot_1$3(t){let e,r,a;return{c(){e=element("div"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M304 192v32c0 6.6-5.4 12-12 12H124c-6.6 0-12-5.4-12-12v-32c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm201 284.7L476.7 505c-9.4 9.4-24.6 9.4-33.9 0L343 405.3c-4.5-4.5-7-10.6-7-17V372c-35.3 27.6-79.7 44-128 44C93.1 416 0 322.9 0 208S93.1 0 208 0s208 93.1 208 208c0 48.3-16.4 92.7-44 128h16.3c6.4 0 12.5 2.5 17 7l99.7 99.7c9.3 9.4 9.3 24.6 0 34zM344 208c0-75.2-60.8-136-136-136S72 132.8 72 208s60.8 136 136 136 136-60.8 136-136z" style="transform: scale(0.04); fill: var(--font-color); "></path></svg>',attr(e,"class","button svelte-1289zmx"),attr(e,"id","Zoom in")},m(i,o){insert(i,e,o),r||(a=listen(e,"click",t[1]),r=!0)},p:noop,d(i){i&&detach(e),r=!1,a()}}}function create_default_slot$5(t){let e,r,a;return{c(){e=element("div"),e.textContent="",attr(e,"class","button svelte-1289zmx"),attr(e,"id","export")},m(i,o){insert(i,e,o),r||(a=listen(e,"click",t[2]),r=!0)},p:noop,d(i){i&&detach(e),r=!1,a()}}}function create_fragment$k(t){let e,r,a,i,o,u,c;return r=new Tooltip({props:{tipcontent:"Zoom in",$$slots:{default:[create_default_slot_2$3]},$$scope:{ctx:t}}}),i=new Tooltip({props:{tipcontent:"Zoom out",$$slots:{default:[create_default_slot_1$3]},$$scope:{ctx:t}}}),u=new Tooltip({props:{tipcontent:"Save plot",$$slots:{default:[create_default_slot$5]},$$scope:{ctx:t}}}),{c(){e=element("div"),create_component(r.$$.fragment),a=space(),create_component(i.$$.fragment),o=space(),create_component(u.$$.fragment),attr(e,"id","chartTools"),attr(e,"class","svelte-1289zmx")},m(f,d){insert(f,e,d),mount_component(r,e,null),append(e,a),mount_component(i,e,null),append(e,o),mount_component(u,e,null),c=!0},p(f,[d]){const m={};d&8&&(m.$$scope={dirty:d,ctx:f}),r.$set(m);const h={};d&8&&(h.$$scope={dirty:d,ctx:f}),i.$set(h);const _={};d&8&&(_.$$scope={dirty:d,ctx:f}),u.$set(_)},i(f){c||(transition_in(r.$$.fragment,f),transition_in(i.$$.fragment,f),transition_in(u.$$.fragment,f),c=!0)},o(f){transition_out(r.$$.fragment,f),transition_out(i.$$.fragment,f),transition_out(u.$$.fragment,f),c=!1},d(f){f&&detach(e),destroy_component(r),destroy_component(i),destroy_component(u)}}}function exportSVG(){if(get_store_value(activeGraphTab)<0){console.log("Nothing to export");return}const t=document.getElementById("thePlot").querySelector("svg").outerHTML,e=new Blob([t],{type:"image/svg+xml;charset=utf-8"}),r=URL.createObjectURL(e),a=document.createElement("a");a.href=r,a.download=get_store_value(graphTabs)[get_store_value(activeGraphTab)].name+".svg",document.body.appendChild(a),a.click(),URL.revokeObjectURL(r)}function Zoom(t="in"){const e=document.getElementById("svgContainer");var a=parseFloat(e.style.transform.slice(e.style.transform.indexOf("scale")+6));t==="in"?a+=.1:a-=.1,e.style.transform="scale("+a+")",e.style.width=""}function instance$k(t){return[i=>Zoom("in"),i=>Zoom("out"),i=>exportSVG()]}class Charttools extends SvelteComponent{constructor(e){super(),init(this,e,instance$k,create_fragment$k,safe_not_equal,{})}}function get_each_context$9(t,e,r){const a=t.slice();return a[8]=e[r],a[9]=e,a[10]=r,a}function create_else_block$6(t){let e,r,a,i,o,u=ensure_array_like(t[0]),c=[];for(let d=0;d<u.length;d+=1)c[d]=create_each_block$9(get_each_context$9(t,u,d));const f=d=>transition_out(c[d],1,1,()=>{c[d]=null});return i=new Charttools({}),{c(){e=element("nav"),r=element("ul");for(let d=0;d<c.length;d+=1)c[d].c();a=space(),create_component(i.$$.fragment),attr(r,"class","svelte-1gfrvzx"),attr(e,"class","svelte-1gfrvzx")},m(d,m){insert(d,e,m),append(e,r);for(let h=0;h<c.length;h+=1)c[h]&&c[h].m(r,null);insert(d,a,m),mount_component(i,d,m),o=!0},p(d,m){if(m&15){u=ensure_array_like(d[0]);let h;for(h=0;h<u.length;h+=1){const _=get_each_context$9(d,u,h);c[h]?(c[h].p(_,m),transition_in(c[h],1)):(c[h]=create_each_block$9(_),c[h].c(),transition_in(c[h],1),c[h].m(r,null))}for(group_outros(),h=u.length;h<c.length;h+=1)f(h);check_outros()}},i(d){if(!o){for(let m=0;m<u.length;m+=1)transition_in(c[m]);transition_in(i.$$.fragment,d),o=!0}},o(d){c=c.filter(Boolean);for(let m=0;m<c.length;m+=1)transition_out(c[m]);transition_out(i.$$.fragment,d),o=!1},d(d){d&&(detach(e),detach(a)),destroy_each(c,d),destroy_component(i,d)}}}function create_if_block$d(t){let e;return{c(){e=element("h3"),e.textContent="Need to add a chart"},m(r,a){insert(r,e,a)},p:noop,i:noop,o:noop,d(r){r&&detach(e)}}}function create_each_block$9(t){let e,r,a,i,o,u,c,f,d,m,h;function _(v){t[4](v,t[8])}let p={};t[8].name!==void 0&&(p.value=t[8].name),a=new InPlaceEdit({props:p}),binding_callbacks.push(()=>bind(a,"value",_));function g(){return t[5](t[10])}function D(){return t[6](t[10])}return{c(){e=element("li"),r=element("span"),create_component(a.$$.fragment),o=space(),u=element("button"),u.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="svelte-1gfrvzx"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg>',c=space(),attr(r,"class","tabname svelte-1gfrvzx"),attr(u,"class","closeButton svelte-1gfrvzx"),attr(e,"class",f=null_to_empty(t[1]===t[10]?"active":"")+" svelte-1gfrvzx")},m(v,b){insert(v,e,b),append(e,r),mount_component(a,r,null),append(e,o),append(e,u),append(e,c),d=!0,m||(h=[listen(r,"click",g),listen(u,"click",D)],m=!0)},p(v,b){t=v;const y={};!i&&b&1&&(i=!0,y.value=t[8].name,add_flush_callback(()=>i=!1)),a.$set(y),(!d||b&2&&f!==(f=null_to_empty(t[1]===t[10]?"active":"")+" svelte-1gfrvzx"))&&attr(e,"class",f)},i(v){d||(transition_in(a.$$.fragment,v),d=!0)},o(v){transition_out(a.$$.fragment,v),d=!1},d(v){v&&detach(e),destroy_component(a),m=!1,run_all(h)}}}function create_fragment$j(t){let e,r,a,i;const o=[create_if_block$d,create_else_block$6],u=[];function c(f,d){return f[1]<0?0:1}return r=c(t),a=u[r]=o[r](t),{c(){e=element("div"),a.c(),attr(e,"id","graphTabs"),set_style(e,"margin","0 1em"),attr(e,"class","svelte-1gfrvzx")},m(f,d){insert(f,e,d),u[r].m(e,null),i=!0},p(f,[d]){let m=r;r=c(f),r===m?u[r].p(f,d):(group_outros(),transition_out(u[m],1,1,()=>{u[m]=null}),check_outros(),a=u[r],a?a.p(f,d):(a=u[r]=o[r](f),a.c()),transition_in(a,1),a.m(e,null))},i(f){i||(transition_in(a),i=!0)},o(f){transition_out(a),i=!1},d(f){f&&detach(e),u[r].d()}}}function instance$j(t,e,r){let a,i,o;component_subscribe(t,graphTabs,h=>r(0,a=h)),component_subscribe(t,graphs,h=>r(7,i=h)),component_subscribe(t,activeGraphTab,h=>r(1,o=h));function u(h){set_store_value(activeGraphTab,o=h,o)}function c(h){i.splice(h,1),a.splice(h,1),set_store_value(activeGraphTab,o=i.length-1,o),console.log(o),graphs.set(i),graphTabs.set(a)}function f(h,_){t.$$.not_equal(_.name,h)&&(_.name=h,graphTabs.set(a))}return[a,o,u,c,f,h=>u(h),h=>c(h)]}class GraphTabs extends SvelteComponent{constructor(e){super(),init(this,e,instance$j,create_fragment$j,safe_not_equal,{})}}function ascending$1(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function descending(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function bisector(t){let e,r,a;t.length!==2?(e=ascending$1,r=(c,f)=>ascending$1(t(c),f),a=(c,f)=>t(c)-f):(e=t===ascending$1||t===descending?t:zero$1,r=t,a=t);function i(c,f,d=0,m=c.length){if(d<m){if(e(f,f)!==0)return m;do{const h=d+m>>>1;r(c[h],f)<0?d=h+1:m=h}while(d<m)}return d}function o(c,f,d=0,m=c.length){if(d<m){if(e(f,f)!==0)return m;do{const h=d+m>>>1;r(c[h],f)<=0?d=h+1:m=h}while(d<m)}return d}function u(c,f,d=0,m=c.length){const h=i(c,f,d,m-1);return h>d&&a(c[h-1],f)>-a(c[h],f)?h-1:h}return{left:i,center:u,right:o}}function zero$1(){return 0}function number$2(t){return t===null?NaN:+t}const ascendingBisect=bisector(ascending$1),bisectRight=ascendingBisect.right;bisector(number$2).center;const e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(t,e,r){const a=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(a)),o=a/Math.pow(10,i),u=o>=e10?10:o>=e5?5:o>=e2?2:1;let c,f,d;return i<0?(d=Math.pow(10,-i)/u,c=Math.round(t*d),f=Math.round(e*d),c/d<t&&++c,f/d>e&&--f,d=-d):(d=Math.pow(10,i)*u,c=Math.round(t/d),f=Math.round(e/d),c*d<t&&++c,f*d>e&&--f),f<c&&.5<=r&&r<2?tickSpec(t,e,r*2):[c,f,d]}function ticks(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const a=e<t,[i,o,u]=a?tickSpec(e,t,r):tickSpec(t,e,r);if(!(o>=i))return[];const c=o-i+1,f=new Array(c);if(a)if(u<0)for(let d=0;d<c;++d)f[d]=(o-d)/-u;else for(let d=0;d<c;++d)f[d]=(o-d)*u;else if(u<0)for(let d=0;d<c;++d)f[d]=(i+d)/-u;else for(let d=0;d<c;++d)f[d]=(i+d)*u;return f}function tickIncrement(t,e,r){return e=+e,t=+t,r=+r,tickSpec(t,e,r)[2]}function tickStep(t,e,r){e=+e,t=+t,r=+r;const a=e<t,i=a?tickIncrement(e,t,r):tickIncrement(t,e,r);return(a?-1:1)*(i<0?1/-i:i)}function initRange(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function define(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function extend(t,e){var r=Object.create(t.prototype);for(var a in e)r[a]=e[a];return r}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=reHex.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?rgbn(e):r===3?new Rgb(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?rgba(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?rgba(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=reRgbInteger.exec(t))?new Rgb(e[1],e[2],e[3],1):(e=reRgbPercent.exec(t))?new Rgb(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=reRgbaInteger.exec(t))?rgba(e[1],e[2],e[3],e[4]):(e=reRgbaPercent.exec(t))?rgba(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=reHslPercent.exec(t))?hsla(e[1],e[2]/100,e[3]/100,1):(e=reHslaPercent.exec(t))?hsla(e[1],e[2]/100,e[3]/100,e[4]):named.hasOwnProperty(t)?rgbn(named[t]):t==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(t){return new Rgb(t>>16&255,t>>8&255,t&255,1)}function rgba(t,e,r,a){return a<=0&&(t=e=r=NaN),new Rgb(t,e,r,a)}function rgbConvert(t){return t instanceof Color||(t=color(t)),t?(t=t.rgb(),new Rgb(t.r,t.g,t.b,t.opacity)):new Rgb}function rgb$1(t,e,r,a){return arguments.length===1?rgbConvert(t):new Rgb(t,e,r,a??1)}function Rgb(t,e,r,a){this.r=+t,this.g=+e,this.b=+r,this.opacity=+a}define(Rgb,rgb$1,extend(Color,{brighter(t){return t=t==null?brighter:Math.pow(brighter,t),new Rgb(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?darker:Math.pow(darker,t),new Rgb(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const t=clampa(this.opacity);return`${t===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${t===1?")":`, ${t})`}`}function clampa(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function clampi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function hex(t){return t=clampi(t),(t<16?"0":"")+t.toString(16)}function hsla(t,e,r,a){return a<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Hsl(t,e,r,a)}function hslConvert(t){if(t instanceof Hsl)return new Hsl(t.h,t.s,t.l,t.opacity);if(t instanceof Color||(t=color(t)),!t)return new Hsl;if(t instanceof Hsl)return t;t=t.rgb();var e=t.r/255,r=t.g/255,a=t.b/255,i=Math.min(e,r,a),o=Math.max(e,r,a),u=NaN,c=o-i,f=(o+i)/2;return c?(e===o?u=(r-a)/c+(r<a)*6:r===o?u=(a-e)/c+2:u=(e-r)/c+4,c/=f<.5?o+i:2-o-i,u*=60):c=f>0&&f<1?0:u,new Hsl(u,c,f,t.opacity)}function hsl(t,e,r,a){return arguments.length===1?hslConvert(t):new Hsl(t,e,r,a??1)}function Hsl(t,e,r,a){this.h=+t,this.s=+e,this.l=+r,this.opacity=+a}define(Hsl,hsl,extend(Color,{brighter(t){return t=t==null?brighter:Math.pow(brighter,t),new Hsl(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?darker:Math.pow(darker,t),new Hsl(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,a=r+(r<.5?r:1-r)*e,i=2*r-a;return new Rgb(hsl2rgb(t>=240?t-240:t+120,i,a),hsl2rgb(t,i,a),hsl2rgb(t<120?t+240:t-120,i,a),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=clampa(this.opacity);return`${t===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${t===1?")":`, ${t})`}`}}));function clamph(t){return t=(t||0)%360,t<0?t+360:t}function clampt(t){return Math.max(0,Math.min(1,t||0))}function hsl2rgb(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const constant$1=t=>()=>t;function linear$1(t,e){return function(r){return t+r*e}}function exponential(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(a){return Math.pow(t+a*e,r)}}function gamma(t){return(t=+t)==1?nogamma:function(e,r){return r-e?exponential(e,r,t):constant$1(isNaN(e)?r:e)}}function nogamma(t,e){var r=e-t;return r?linear$1(t,r):constant$1(isNaN(t)?e:t)}const rgb=function t(e){var r=gamma(e);function a(i,o){var u=r((i=rgb$1(i)).r,(o=rgb$1(o)).r),c=r(i.g,o.g),f=r(i.b,o.b),d=nogamma(i.opacity,o.opacity);return function(m){return i.r=u(m),i.g=c(m),i.b=f(m),i.opacity=d(m),i+""}}return a.gamma=t,a}(1);function numberArray(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,a=e.slice(),i;return function(o){for(i=0;i<r;++i)a[i]=t[i]*(1-o)+e[i]*o;return a}}function isNumberArray(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function genericArray(t,e){var r=e?e.length:0,a=t?Math.min(r,t.length):0,i=new Array(a),o=new Array(r),u;for(u=0;u<a;++u)i[u]=interpolate(t[u],e[u]);for(;u<r;++u)o[u]=e[u];return function(c){for(u=0;u<a;++u)o[u]=i[u](c);return o}}function date(t,e){var r=new Date;return t=+t,e=+e,function(a){return r.setTime(t*(1-a)+e*a),r}}function interpolateNumber(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function object(t,e){var r={},a={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=interpolate(t[i],e[i]):a[i]=e[i];return function(o){for(i in r)a[i]=r[i](o);return a}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(t){return function(){return t}}function one(t){return function(e){return t(e)+""}}function string(t,e){var r=reA.lastIndex=reB.lastIndex=0,a,i,o,u=-1,c=[],f=[];for(t=t+"",e=e+"";(a=reA.exec(t))&&(i=reB.exec(e));)(o=i.index)>r&&(o=e.slice(r,o),c[u]?c[u]+=o:c[++u]=o),(a=a[0])===(i=i[0])?c[u]?c[u]+=i:c[++u]=i:(c[++u]=null,f.push({i:u,x:interpolateNumber(a,i)})),r=reB.lastIndex;return r<e.length&&(o=e.slice(r),c[u]?c[u]+=o:c[++u]=o),c.length<2?f[0]?one(f[0].x):zero(e):(e=f.length,function(d){for(var m=0,h;m<e;++m)c[(h=f[m]).i]=h.x(d);return c.join("")})}function interpolate(t,e){var r=typeof e,a;return e==null||r==="boolean"?constant$1(e):(r==="number"?interpolateNumber:r==="string"?(a=color(e))?(e=a,rgb):string:e instanceof color?rgb:e instanceof Date?date:isNumberArray(e)?numberArray:Array.isArray(e)?genericArray:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?object:interpolateNumber)(t,e)}function interpolateRound(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function constants(t){return function(){return t}}function number$1(t){return+t}var unit=[0,1];function identity$2(t){return t}function normalize(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:constants(isNaN(e)?NaN:.5)}function clamper(t,e){var r;return t>e&&(r=t,t=e,e=r),function(a){return Math.max(t,Math.min(e,a))}}function bimap(t,e,r){var a=t[0],i=t[1],o=e[0],u=e[1];return i<a?(a=normalize(i,a),o=r(u,o)):(a=normalize(a,i),o=r(o,u)),function(c){return o(a(c))}}function polymap(t,e,r){var a=Math.min(t.length,e.length)-1,i=new Array(a),o=new Array(a),u=-1;for(t[a]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++u<a;)i[u]=normalize(t[u],t[u+1]),o[u]=r(e[u],e[u+1]);return function(c){var f=bisectRight(t,c,1,a)-1;return o[f](i[f](c))}}function copy(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function transformer(){var t=unit,e=unit,r=interpolate,a,i,o,u=identity$2,c,f,d;function m(){var _=Math.min(t.length,e.length);return u!==identity$2&&(u=clamper(t[0],t[_-1])),c=_>2?polymap:bimap,f=d=null,h}function h(_){return _==null||isNaN(_=+_)?o:(f||(f=c(t.map(a),e,r)))(a(u(_)))}return h.invert=function(_){return u(i((d||(d=c(e,t.map(a),interpolateNumber)))(_)))},h.domain=function(_){return arguments.length?(t=Array.from(_,number$1),m()):t.slice()},h.range=function(_){return arguments.length?(e=Array.from(_),m()):e.slice()},h.rangeRound=function(_){return e=Array.from(_),r=interpolateRound,m()},h.clamp=function(_){return arguments.length?(u=_?!0:identity$2,m()):u!==identity$2},h.interpolate=function(_){return arguments.length?(r=_,m()):r},h.unknown=function(_){return arguments.length?(o=_,h):o},function(_,p){return a=_,i=p,m()}}function continuous(){return transformer()(identity$2,identity$2)}function formatDecimal(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function formatDecimalParts(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,a=t.slice(0,r);return[a.length>1?a[0]+a.slice(2):a,+t.slice(r+1)]}function exponent(t){return t=formatDecimalParts(Math.abs(t)),t?t[1]:NaN}function formatGroup(t,e){return function(r,a){for(var i=r.length,o=[],u=0,c=t[0],f=0;i>0&&c>0&&(f+c+1>a&&(c=Math.max(1,a-f)),o.push(r.substring(i-=c,i+c)),!((f+=c+1)>a));)c=t[u=(u+1)%t.length];return o.reverse().join(e)}}function formatNumerals(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(t){if(!(e=re.exec(t)))throw new Error("invalid format: "+t);var e;return new FormatSpecifier({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(t){e:for(var e=t.length,r=1,a=-1,i;r<e;++r)switch(t[r]){case".":a=i=r;break;case"0":a===0&&(a=r),i=r;break;default:if(!+t[r])break e;a>0&&(a=0);break}return a>0?t.slice(0,a)+t.slice(i+1):t}var prefixExponent;function formatPrefixAuto(t,e){var r=formatDecimalParts(t,e);if(!r)return t+"";var a=r[0],i=r[1],o=i-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,u=a.length;return o===u?a:o>u?a+new Array(o-u+1).join("0"):o>0?a.slice(0,o)+"."+a.slice(o):"0."+new Array(1-o).join("0")+formatDecimalParts(t,Math.max(0,e+o-1))[0]}function formatRounded(t,e){var r=formatDecimalParts(t,e);if(!r)return t+"";var a=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+a:a.length>i+1?a.slice(0,i+1)+"."+a.slice(i+1):a+new Array(i-a.length+2).join("0")}const formatTypes={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:formatDecimal,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>formatRounded(t*100,e),r:formatRounded,s:formatPrefixAuto,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function identity$1(t){return t}var map=Array.prototype.map,prefixes=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function formatLocale(t){var e=t.grouping===void 0||t.thousands===void 0?identity$1:formatGroup(map.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",a=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?identity$1:formatNumerals(map.call(t.numerals,String)),u=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"":t.minus+"",f=t.nan===void 0?"NaN":t.nan+"";function d(h){h=formatSpecifier(h);var _=h.fill,p=h.align,g=h.sign,D=h.symbol,v=h.zero,b=h.width,y=h.comma,T=h.precision,w=h.trim,A=h.type;A==="n"?(y=!0,A="g"):formatTypes[A]||(T===void 0&&(T=12),w=!0,A="g"),(v||_==="0"&&p==="=")&&(v=!0,_="0",p="=");var E=D==="$"?r:D==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",k=D==="$"?a:/[%p]/.test(A)?u:"",O=formatTypes[A],L=/[defgprs%]/.test(A);T=T===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function P(C){var W=E,x=k,M,S,$;if(A==="c")x=O(C)+x,C="";else{C=+C;var F=C<0||1/C<0;if(C=isNaN(C)?f:O(Math.abs(C),T),w&&(C=formatTrim(C)),F&&+C==0&&g!=="+"&&(F=!1),W=(F?g==="("?g:c:g==="-"||g==="("?"":g)+W,x=(A==="s"?prefixes[8+prefixExponent/3]:"")+x+(F&&g==="("?")":""),L){for(M=-1,S=C.length;++M<S;)if($=C.charCodeAt(M),48>$||$>57){x=($===46?i+C.slice(M+1):C.slice(M))+x,C=C.slice(0,M);break}}}y&&!v&&(C=e(C,1/0));var H=W.length+C.length+x.length,I=H<b?new Array(b-H+1).join(_):"";switch(y&&v&&(C=e(I+C,I.length?b-x.length:1/0),I=""),p){case"<":C=W+C+x+I;break;case"=":C=W+I+C+x;break;case"^":C=I.slice(0,H=I.length>>1)+W+C+x+I.slice(H);break;default:C=I+W+C+x;break}return o(C)}return P.toString=function(){return h+""},P}function m(h,_){var p=d((h=formatSpecifier(h),h.type="f",h)),g=Math.max(-8,Math.min(8,Math.floor(exponent(_)/3)))*3,D=Math.pow(10,-g),v=prefixes[8+g/3];return function(b){return p(D*b)+v}}return{format:d,formatPrefix:m}}var locale,format,formatPrefix;defaultLocale({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale(t){return locale=formatLocale(t),format=locale.format,formatPrefix=locale.formatPrefix,locale}function precisionFixed(t){return Math.max(0,-exponent(Math.abs(t)))}function precisionPrefix(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(e)/3)))*3-exponent(Math.abs(t)))}function precisionRound(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,exponent(e)-exponent(t))+1}function tickFormat(t,e,r,a){var i=tickStep(t,e,r),o;switch(a=formatSpecifier(a??",f"),a.type){case"s":{var u=Math.max(Math.abs(t),Math.abs(e));return a.precision==null&&!isNaN(o=precisionPrefix(i,u))&&(a.precision=o),formatPrefix(a,u)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(o=precisionRound(i,Math.max(Math.abs(t),Math.abs(e))))&&(a.precision=o-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(o=precisionFixed(i))&&(a.precision=o-(a.type==="%")*2);break}}return format(a)}function linearish(t){var e=t.domain;return t.ticks=function(r){var a=e();return ticks(a[0],a[a.length-1],r??10)},t.tickFormat=function(r,a){var i=e();return tickFormat(i[0],i[i.length-1],r??10,a)},t.nice=function(r){r==null&&(r=10);var a=e(),i=0,o=a.length-1,u=a[i],c=a[o],f,d,m=10;for(c<u&&(d=u,u=c,c=d,d=i,i=o,o=d);m-- >0;){if(d=tickIncrement(u,c,r),d===f)return a[i]=u,a[o]=c,e(a);if(d>0)u=Math.floor(u/d)*d,c=Math.ceil(c/d)*d;else if(d<0)u=Math.ceil(u*d)/d,c=Math.floor(c*d)/d;else break;f=d}return t},t}function linear(){var t=continuous();return t.copy=function(){return copy(t,linear())},initRange.apply(t,arguments),linearish(t)}var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),namespaces.hasOwnProperty(e)?{space:namespaces[e],local:t}:t}function creatorInherit(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===xhtml&&e.documentElement.namespaceURI===xhtml?e.createElement(t):e.createElementNS(r,t)}}function creatorFixed(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function creator(t){var e=namespace(t);return(e.local?creatorFixed:creatorInherit)(e)}function none(){}function selector(t){return t==null?none:function(){return this.querySelector(t)}}function selection_select(t){typeof t!="function"&&(t=selector(t));for(var e=this._groups,r=e.length,a=new Array(r),i=0;i<r;++i)for(var o=e[i],u=o.length,c=a[i]=new Array(u),f,d,m=0;m<u;++m)(f=o[m])&&(d=t.call(f,f.__data__,m,o))&&("__data__"in f&&(d.__data__=f.__data__),c[m]=d);return new Selection(a,this._parents)}function array(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function empty(){return[]}function selectorAll(t){return t==null?empty:function(){return this.querySelectorAll(t)}}function arrayAll(t){return function(){return array(t.apply(this,arguments))}}function selection_selectAll(t){typeof t=="function"?t=arrayAll(t):t=selectorAll(t);for(var e=this._groups,r=e.length,a=[],i=[],o=0;o<r;++o)for(var u=e[o],c=u.length,f,d=0;d<c;++d)(f=u[d])&&(a.push(t.call(f,f.__data__,d,u)),i.push(f));return new Selection(a,i)}function matcher(t){return function(){return this.matches(t)}}function childMatcher(t){return function(e){return e.matches(t)}}var find=Array.prototype.find;function childFind(t){return function(){return find.call(this.children,t)}}function childFirst(){return this.firstElementChild}function selection_selectChild(t){return this.select(t==null?childFirst:childFind(typeof t=="function"?t:childMatcher(t)))}var filter=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(t){return function(){return filter.call(this.children,t)}}function selection_selectChildren(t){return this.selectAll(t==null?children:childrenFilter(typeof t=="function"?t:childMatcher(t)))}function selection_filter(t){typeof t!="function"&&(t=matcher(t));for(var e=this._groups,r=e.length,a=new Array(r),i=0;i<r;++i)for(var o=e[i],u=o.length,c=a[i]=[],f,d=0;d<u;++d)(f=o[d])&&t.call(f,f.__data__,d,o)&&c.push(f);return new Selection(a,this._parents)}function sparse(t){return new Array(t.length)}function selection_enter(){return new Selection(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}EnterNode.prototype={constructor:EnterNode,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function constant(t){return function(){return t}}function bindIndex(t,e,r,a,i,o){for(var u=0,c,f=e.length,d=o.length;u<d;++u)(c=e[u])?(c.__data__=o[u],a[u]=c):r[u]=new EnterNode(t,o[u]);for(;u<f;++u)(c=e[u])&&(i[u]=c)}function bindKey(t,e,r,a,i,o,u){var c,f,d=new Map,m=e.length,h=o.length,_=new Array(m),p;for(c=0;c<m;++c)(f=e[c])&&(_[c]=p=u.call(f,f.__data__,c,e)+"",d.has(p)?i[c]=f:d.set(p,f));for(c=0;c<h;++c)p=u.call(t,o[c],c,o)+"",(f=d.get(p))?(a[c]=f,f.__data__=o[c],d.delete(p)):r[c]=new EnterNode(t,o[c]);for(c=0;c<m;++c)(f=e[c])&&d.get(_[c])===f&&(i[c]=f)}function datum(t){return t.__data__}function selection_data(t,e){if(!arguments.length)return Array.from(this,datum);var r=e?bindKey:bindIndex,a=this._parents,i=this._groups;typeof t!="function"&&(t=constant(t));for(var o=i.length,u=new Array(o),c=new Array(o),f=new Array(o),d=0;d<o;++d){var m=a[d],h=i[d],_=h.length,p=arraylike(t.call(m,m&&m.__data__,d,a)),g=p.length,D=c[d]=new Array(g),v=u[d]=new Array(g),b=f[d]=new Array(_);r(m,h,D,v,b,p,e);for(var y=0,T=0,w,A;y<g;++y)if(w=D[y]){for(y>=T&&(T=y+1);!(A=v[T])&&++T<g;);w._next=A||null}}return u=new Selection(u,a),u._enter=c,u._exit=f,u}function arraylike(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function selection_exit(){return new Selection(this._exit||this._groups.map(sparse),this._parents)}function selection_join(t,e,r){var a=this.enter(),i=this,o=this.exit();return typeof t=="function"?(a=t(a),a&&(a=a.selection())):a=a.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),r==null?o.remove():r(o),a&&i?a.merge(i).order():i}function selection_merge(t){for(var e=t.selection?t.selection():t,r=this._groups,a=e._groups,i=r.length,o=a.length,u=Math.min(i,o),c=new Array(i),f=0;f<u;++f)for(var d=r[f],m=a[f],h=d.length,_=c[f]=new Array(h),p,g=0;g<h;++g)(p=d[g]||m[g])&&(_[g]=p);for(;f<i;++f)c[f]=r[f];return new Selection(c,this._parents)}function selection_order(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var a=t[e],i=a.length-1,o=a[i],u;--i>=0;)(u=a[i])&&(o&&u.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(u,o),o=u);return this}function selection_sort(t){t||(t=ascending);function e(h,_){return h&&_?t(h.__data__,_.__data__):!h-!_}for(var r=this._groups,a=r.length,i=new Array(a),o=0;o<a;++o){for(var u=r[o],c=u.length,f=i[o]=new Array(c),d,m=0;m<c;++m)(d=u[m])&&(f[m]=d);f.sort(e)}return new Selection(i,this._parents).order()}function ascending(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function selection_call(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var a=t[e],i=0,o=a.length;i<o;++i){var u=a[i];if(u)return u}return null}function selection_size(){let t=0;for(const e of this)++t;return t}function selection_empty(){return!this.node()}function selection_each(t){for(var e=this._groups,r=0,a=e.length;r<a;++r)for(var i=e[r],o=0,u=i.length,c;o<u;++o)(c=i[o])&&t.call(c,c.__data__,o,i);return this}function attrRemove(t){return function(){this.removeAttribute(t)}}function attrRemoveNS(t){return function(){this.removeAttributeNS(t.space,t.local)}}function attrConstant(t,e){return function(){this.setAttribute(t,e)}}function attrConstantNS(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function attrFunction(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function attrFunctionNS(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function selection_attr(t,e){var r=namespace(t);if(arguments.length<2){var a=this.node();return r.local?a.getAttributeNS(r.space,r.local):a.getAttribute(r)}return this.each((e==null?r.local?attrRemoveNS:attrRemove:typeof e=="function"?r.local?attrFunctionNS:attrFunction:r.local?attrConstantNS:attrConstant)(r,e))}function defaultView(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function styleRemove(t){return function(){this.style.removeProperty(t)}}function styleConstant(t,e,r){return function(){this.style.setProperty(t,e,r)}}function styleFunction(t,e,r){return function(){var a=e.apply(this,arguments);a==null?this.style.removeProperty(t):this.style.setProperty(t,a,r)}}function selection_style(t,e,r){return arguments.length>1?this.each((e==null?styleRemove:typeof e=="function"?styleFunction:styleConstant)(t,e,r??"")):styleValue(this.node(),t)}function styleValue(t,e){return t.style.getPropertyValue(e)||defaultView(t).getComputedStyle(t,null).getPropertyValue(e)}function propertyRemove(t){return function(){delete this[t]}}function propertyConstant(t,e){return function(){this[t]=e}}function propertyFunction(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function selection_property(t,e){return arguments.length>1?this.each((e==null?propertyRemove:typeof e=="function"?propertyFunction:propertyConstant)(t,e)):this.node()[t]}function classArray(t){return t.trim().split(/^|\s+/)}function classList(t){return t.classList||new ClassList(t)}function ClassList(t){this._node=t,this._names=classArray(t.getAttribute("class")||"")}ClassList.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function classedAdd(t,e){for(var r=classList(t),a=-1,i=e.length;++a<i;)r.add(e[a])}function classedRemove(t,e){for(var r=classList(t),a=-1,i=e.length;++a<i;)r.remove(e[a])}function classedTrue(t){return function(){classedAdd(this,t)}}function classedFalse(t){return function(){classedRemove(this,t)}}function classedFunction(t,e){return function(){(e.apply(this,arguments)?classedAdd:classedRemove)(this,t)}}function selection_classed(t,e){var r=classArray(t+"");if(arguments.length<2){for(var a=classList(this.node()),i=-1,o=r.length;++i<o;)if(!a.contains(r[i]))return!1;return!0}return this.each((typeof e=="function"?classedFunction:e?classedTrue:classedFalse)(r,e))}function textRemove(){this.textContent=""}function textConstant(t){return function(){this.textContent=t}}function textFunction(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function selection_text(t){return arguments.length?this.each(t==null?textRemove:(typeof t=="function"?textFunction:textConstant)(t)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(t){return function(){this.innerHTML=t}}function htmlFunction(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function selection_html(t){return arguments.length?this.each(t==null?htmlRemove:(typeof t=="function"?htmlFunction:htmlConstant)(t)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(t){var e=typeof t=="function"?t:creator(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function constantNull(){return null}function selection_insert(t,e){var r=typeof t=="function"?t:creator(t),a=e==null?constantNull:typeof e=="function"?e:selector(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),a.apply(this,arguments)||null)})}function remove(){var t=this.parentNode;t&&t.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function selection_cloneDeep(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function selection_clone(t){return this.select(t?selection_cloneDeep:selection_cloneShallow)}function selection_datum(t){return arguments.length?this.property("__data__",t):this.node().__data__}function contextListener(t){return function(e){t.call(this,e,this.__data__)}}function parseTypenames(t){return t.trim().split(/^|\s+/).map(function(e){var r="",a=e.indexOf(".");return a>=0&&(r=e.slice(a+1),e=e.slice(0,a)),{type:e,name:r}})}function onRemove(t){return function(){var e=this.__on;if(e){for(var r=0,a=-1,i=e.length,o;r<i;++r)o=e[r],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++a]=o;++a?e.length=a:delete this.__on}}}function onAdd(t,e,r){return function(){var a=this.__on,i,o=contextListener(e);if(a){for(var u=0,c=a.length;u<c;++u)if((i=a[u]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=r),i.value=e;return}}this.addEventListener(t.type,o,r),i={type:t.type,name:t.name,value:e,listener:o,options:r},a?a.push(i):this.__on=[i]}}function selection_on(t,e,r){var a=parseTypenames(t+""),i,o=a.length,u;if(arguments.length<2){var c=this.node().__on;if(c){for(var f=0,d=c.length,m;f<d;++f)for(i=0,m=c[f];i<o;++i)if((u=a[i]).type===m.type&&u.name===m.name)return m.value}return}for(c=e?onAdd:onRemove,i=0;i<o;++i)this.each(c(a[i],e,r));return this}function dispatchEvent(t,e,r){var a=defaultView(t),i=a.CustomEvent;typeof i=="function"?i=new i(e,r):(i=a.document.createEvent("Event"),r?(i.initEvent(e,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function dispatchConstant(t,e){return function(){return dispatchEvent(this,t,e)}}function dispatchFunction(t,e){return function(){return dispatchEvent(this,t,e.apply(this,arguments))}}function selection_dispatch(t,e){return this.each((typeof e=="function"?dispatchFunction:dispatchConstant)(t,e))}function*selection_iterator(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var a=t[e],i=0,o=a.length,u;i<o;++i)(u=a[i])&&(yield u)}var root=[null];function Selection(t,e){this._groups=t,this._parents=e}function selection_selection(){return this}Selection.prototype={constructor:Selection,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};function select(t){return typeof t=="string"?new Selection([[document.querySelector(t)]],[document.documentElement]):new Selection([[t]],root)}function identity(t){return t}var top=1,right=2,bottom=3,left=4,epsilon=1e-6;function translateX(t){return"translate("+t+",0)"}function translateY(t){return"translate(0,"+t+")"}function number(t){return e=>+t(e)}function center(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),r=>+t(r)+e}function entering(){return!this.__axis}function axis(t,e){var r=[],a=null,i=null,o=6,u=6,c=3,f=typeof window<"u"&&window.devicePixelRatio>1?0:.5,d=t===top||t===left?-1:1,m=t===left||t===right?"x":"y",h=t===top||t===bottom?translateX:translateY;function _(p){var g=a??(e.ticks?e.ticks.apply(e,r):e.domain()),D=i??(e.tickFormat?e.tickFormat.apply(e,r):identity),v=Math.max(o,0)+c,b=e.range(),y=+b[0]+f,T=+b[b.length-1]+f,w=(e.bandwidth?center:number)(e.copy(),f),A=p.selection?p.selection():p,E=A.selectAll(".domain").data([null]),k=A.selectAll(".tick").data(g,e).order(),O=k.exit(),L=k.enter().append("g").attr("class","tick"),P=k.select("line"),C=k.select("text");E=E.merge(E.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),k=k.merge(L),P=P.merge(L.append("line").attr("stroke","currentColor").attr(m+"2",d*o)),C=C.merge(L.append("text").attr("fill","currentColor").attr(m,d*v).attr("dy",t===top?"0em":t===bottom?"0.71em":"0.32em")),p!==A&&(E=E.transition(p),k=k.transition(p),P=P.transition(p),C=C.transition(p),O=O.transition(p).attr("opacity",epsilon).attr("transform",function(W){return isFinite(W=w(W))?h(W+f):this.getAttribute("transform")}),L.attr("opacity",epsilon).attr("transform",function(W){var x=this.parentNode.__axis;return h((x&&isFinite(x=x(W))?x:w(W))+f)})),O.remove(),E.attr("d",t===left||t===right?u?"M"+d*u+","+y+"H"+f+"V"+T+"H"+d*u:"M"+f+","+y+"V"+T:u?"M"+y+","+d*u+"V"+f+"H"+T+"V"+d*u:"M"+y+","+f+"H"+T),k.attr("opacity",1).attr("transform",function(W){return h(w(W)+f)}),P.attr(m+"2",d*o),C.attr(m,d*v).text(D),A.filter(entering).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===right?"start":t===left?"end":"middle"),A.each(function(){this.__axis=w})}return _.scale=function(p){return arguments.length?(e=p,_):e},_.ticks=function(){return r=Array.from(arguments),_},_.tickArguments=function(p){return arguments.length?(r=p==null?[]:Array.from(p),_):r.slice()},_.tickValues=function(p){return arguments.length?(a=p==null?null:Array.from(p),_):a&&a.slice()},_.tickFormat=function(p){return arguments.length?(i=p,_):i},_.tickSize=function(p){return arguments.length?(o=u=+p,_):o},_.tickSizeInner=function(p){return arguments.length?(o=+p,_):o},_.tickSizeOuter=function(p){return arguments.length?(u=+p,_):u},_.tickPadding=function(p){return arguments.length?(c=+p,_):c},_.offset=function(p){return arguments.length?(f=+p,_):f},_}function axisTop(t){return axis(top,t)}function axisRight(t){return axis(right,t)}function axisBottom(t){return axis(bottom,t)}function axisLeft(t){return axis(left,t)}function create_fragment$i(t){let e;return{c(){e=svg_element("g"),attr(e,"class","axis"),attr(e,"transform",t[1])},m(r,a){insert(r,e,a),t[10](e)},p(r,[a]){a&2&&attr(e,"transform",r[1])},i:noop,o:noop,d(r){r&&detach(e),t[10](null)}}}function instance$i(t,e,r){let{innerHeight:a=0}=e,{width:i=0}=e,{yoffset:o=0}=e,{xoffset:u=0}=e,{position:c="left"}=e,{scale:f}=e,{nticks:d=5}=e,{colour:m=""}=e,h,_;function p(g){binding_callbacks[g?"unshift":"push"](()=>{_=g,r(0,_)})}return t.$$set=g=>{"innerHeight"in g&&r(3,a=g.innerHeight),"width"in g&&r(4,i=g.width),"yoffset"in g&&r(5,o=g.yoffset),"xoffset"in g&&r(6,u=g.xoffset),"position"in g&&r(7,c=g.position),"scale"in g&&r(8,f=g.scale),"nticks"in g&&r(9,d=g.nticks),"colour"in g&&r(2,m=g.colour)},t.$$.update=()=>{if(t.$$.dirty&1021){select(_).selectAll("*").remove(),m===""&&r(2,m=getComputedStyle(document.documentElement).getPropertyValue("--font-color"));let g;switch(c){case"bottom":g=axisBottom(f).tickSizeOuter(0).ticks(d),r(1,h=`translate(0, ${a})`);break;case"top":g=axisTop(f).tickSizeOuter(0).ticks(d),r(1,h="translate(0, 0)");break;case"left":g=axisLeft(f).tickSizeOuter(0).ticks(d),r(1,h=`translate(${u}, ${o})`);break;case"right":g=axisRight(f).tickSizeOuter(0).ticks(d),r(1,h=`translate(${u+i}, ${o})`);break}select(_).call(g).selectAll("path").style("stroke",m),select(_).call(g).selectAll("text").style("fill",m)}},[_,h,m,a,i,o,u,c,f,d,p]}class Axis extends SvelteComponent{constructor(e){super(),init(this,e,instance$i,create_fragment$i,safe_not_equal,{innerHeight:3,width:4,yoffset:5,xoffset:6,position:7,scale:8,nticks:9,colour:2})}}function createSequenceArray(t,e,r=1){const a=[];for(let i=t;i<=e;i+=r)a.push(i);return a}function mean(t){return t.reduce((e,r)=>e+r,0)/t.length}function get_each_context$8(t,e,r){const a=t.slice();return a[32]=e[r],a[34]=r,a}function get_each_context_1$5(t,e,r){const a=t.slice();return a[35]=e[r],a[37]=r,a}function get_each_context_2$3(t,e,r){const a=t.slice();return a[38]=e[r],a[34]=r,a}function get_each_context_3$2(t,e,r){const a=t.slice();return a[37]=e[r],a}function create_if_block$c(t){let e,r,a,i,o,u,c,f,d,m,h,_,p,g;const D=[create_if_block_2$4,create_else_block$5],v=[];function b(w,A){return w[9].length>0?0:1}u=b(t),c=v[u]=D[u](t),d=new Axis({props:{innerHeight:t[12],yoffset:"0",scale:t[11],position:"top",nticks:t[6][t[5]].params.periodHrs}});let y=ensure_array_like(t[6][t[5]].chartData.onsets),T=[];for(let w=0;w<y.length;w+=1)T[w]=create_each_block$8(get_each_context$8(t,y,w));return{c(){e=element("div"),a=space(),i=svg_element("svg"),o=svg_element("g"),c.c(),f=empty$1(),create_component(d.$$.fragment);for(let w=0;w<T.length;w+=1)T[w].c();attr(e,"class","overlay svelte-1hj8mph"),attr(e,"style",r=t[7]?"display:block; left:"+t[8].x+"px; top:"+t[8].y+"px;":"display:none;"),attr(o,"transform",m=`translate(${t[0].left},${t[0].top})`),attr(i,"id","svgContainer"),attr(i,"margin-lr",h=t[0].left+t[0].right),set_style(i,"transform-origin","top left"),set_style(i,"transform","scale(1)"),attr(i,"width",t[3]),attr(i,"height",t[4])},m(w,A){insert(w,e,A),insert(w,a,A),insert(w,i,A),append(i,o),v[u].m(o,null),append(o,f),mount_component(d,o,null);for(let E=0;E<T.length;E+=1)T[E]&&T[E].m(o,null);_=!0,p||(g=[listen(i,"mousedown",t[16]),listen(i,"mousemove",t[17]),listen(i,"mouseup",t[18]),listen(i,"click",click_handler),listen(i,"dblclick",t[19])],p=!0)},p(w,A){(!_||A[0]&384&&r!==(r=w[7]?"display:block; left:"+w[8].x+"px; top:"+w[8].y+"px;":"display:none;"))&&attr(e,"style",r);let E=u;u=b(w),u===E?v[u].p(w,A):(group_outros(),transition_out(v[E],1,1,()=>{v[E]=null}),check_outros(),c=v[u],c?c.p(w,A):(c=v[u]=D[u](w),c.c()),transition_in(c,1),c.m(o,f));const k={};if(A[0]&4096&&(k.innerHeight=w[12]),A[0]&2048&&(k.scale=w[11]),A[0]&96&&(k.nticks=w[6][w[5]].params.periodHrs),d.$set(k),A[0]&2150){y=ensure_array_like(w[6][w[5]].chartData.onsets);let O;for(O=0;O<y.length;O+=1){const L=get_each_context$8(w,y,O);T[O]?T[O].p(L,A):(T[O]=create_each_block$8(L),T[O].c(),T[O].m(o,null))}for(;O<T.length;O+=1)T[O].d(1);T.length=y.length}(!_||A[0]&1&&m!==(m=`translate(${w[0].left},${w[0].top})`))&&attr(o,"transform",m),(!_||A[0]&1&&h!==(h=w[0].left+w[0].right))&&attr(i,"margin-lr",h),(!_||A[0]&8)&&attr(i,"width",w[3]),(!_||A[0]&16)&&attr(i,"height",w[4])},i(w){_||(transition_in(c),transition_in(d.$$.fragment,w),_=!0)},o(w){transition_out(c),transition_out(d.$$.fragment,w),_=!1},d(w){w&&(detach(e),detach(a),detach(i)),v[u].d(),destroy_component(d),destroy_each(T,w),p=!1,run_all(g)}}}function create_else_block$5(t){let e;return{c(){e=svg_element("text"),attr(e,"x","50%"),attr(e,"y","50%"),attr(e,"text-anchor","middle"),attr(e,"fill","red")},m(r,a){insert(r,e,a)},p:noop,i:noop,o:noop,d(r){r&&detach(e)}}}function create_if_block_2$4(t){let e,r,a=ensure_array_like(t[9]),i=[];for(let u=0;u<a.length;u+=1)i[u]=create_each_block_2$3(get_each_context_2$3(t,a,u));const o=u=>transition_out(i[u],1,1,()=>{i[u]=null});return{c(){for(let u=0;u<i.length;u+=1)i[u].c();e=empty$1()},m(u,c){for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(u,c);insert(u,e,c),r=!0},p(u,c){if(c[0]&5743){a=ensure_array_like(u[9]);let f;for(f=0;f<a.length;f+=1){const d=get_each_context_2$3(u,a,f);i[f]?(i[f].p(d,c),transition_in(i[f],1)):(i[f]=create_each_block_2$3(d),i[f].c(),transition_in(i[f],1),i[f].m(e.parentNode,e))}for(group_outros(),f=a.length;f<i.length;f+=1)o(f);check_outros()}},i(u){if(!r){for(let c=0;c<a.length;c+=1)transition_in(i[c]);r=!0}},o(u){i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)transition_out(i[c]);r=!1},d(u){u&&detach(e),destroy_each(i,u)}}}function create_if_block_3$4(t){let e,r;return e=new Axis({props:{innerHeight:t[12],yoffset:t[37]*(t[2]+t[1]),xoffset:15*t[34],width:t[3]-t[0].left-t[0].right-15,scale:t[10][t[34]][t[37]],position:t[34]===0?"left":"right",nticks:t[2]/30+1,colour:t[6][t[5]].sourceData[t[34]].col.hex}}),{c(){create_component(e.$$.fragment)},m(a,i){mount_component(e,a,i),r=!0},p(a,i){const o={};i[0]&4096&&(o.innerHeight=a[12]),i[0]&518&&(o.yoffset=a[37]*(a[2]+a[1])),i[0]&9&&(o.width=a[3]-a[0].left-a[0].right-15),i[0]&1536&&(o.scale=a[10][a[34]][a[37]]),i[0]&4&&(o.nticks=a[2]/30+1),i[0]&96&&(o.colour=a[6][a[5]].sourceData[a[34]].col.hex),e.$set(o)},i(a){r||(transition_in(e.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),r=!1},d(a){destroy_component(e,a)}}}function create_each_block_3$2(t){let e,r,a,i,o,u,c=t[6][t[5]].params.showAxes&&create_if_block_3$4(t);return{c(){e=svg_element("path"),c&&c.c(),o=empty$1(),attr(e,"d",r=t[9][t[34]][t[37]]),attr(e,"fill",a=t[6][t[5]].sourceData[t[34]].col.hex),attr(e,"fill-opacity",i=t[6][t[5]].sourceData[t[34]].col.alpha)},m(f,d){insert(f,e,d),c&&c.m(f,d),insert(f,o,d),u=!0},p(f,d){(!u||d[0]&512&&r!==(r=f[9][f[34]][f[37]]))&&attr(e,"d",r),(!u||d[0]&96&&a!==(a=f[6][f[5]].sourceData[f[34]].col.hex))&&attr(e,"fill",a),(!u||d[0]&96&&i!==(i=f[6][f[5]].sourceData[f[34]].col.alpha))&&attr(e,"fill-opacity",i),f[6][f[5]].params.showAxes?c?(c.p(f,d),d[0]&96&&transition_in(c,1)):(c=create_if_block_3$4(f),c.c(),transition_in(c,1),c.m(o.parentNode,o)):c&&(group_outros(),transition_out(c,1,1,()=>{c=null}),check_outros())},i(f){u||(transition_in(c),u=!0)},o(f){transition_out(c),u=!1},d(f){f&&(detach(e),detach(o)),c&&c.d(f)}}}function create_each_block_2$3(t){let e,r,a=ensure_array_like(createSequenceArray(0,t[9][t[34]].length-1)),i=[];for(let u=0;u<a.length;u+=1)i[u]=create_each_block_3$2(get_each_context_3$2(t,a,u));const o=u=>transition_out(i[u],1,1,()=>{i[u]=null});return{c(){for(let u=0;u<i.length;u+=1)i[u].c();e=empty$1()},m(u,c){for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(u,c);insert(u,e,c),r=!0},p(u,c){if(c[0]&5743){a=ensure_array_like(createSequenceArray(0,u[9][u[34]].length-1));let f;for(f=0;f<a.length;f+=1){const d=get_each_context_3$2(u,a,f);i[f]?(i[f].p(d,c),transition_in(i[f],1)):(i[f]=create_each_block_3$2(d),i[f].c(),transition_in(i[f],1),i[f].m(e.parentNode,e))}for(group_outros(),f=a.length;f<i.length;f+=1)o(f);check_outros()}},i(u){if(!r){for(let c=0;c<a.length;c+=1)transition_in(i[c]);r=!0}},o(u){i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)transition_out(i[c]);r=!1},d(u){u&&detach(e),destroy_each(i,u)}}}function create_if_block_1$7(t){let e,r=ensure_array_like(t[6][t[5]].chartData.onsets[t[34]].onsetTimes),a=[];for(let i=0;i<r.length;i+=1)a[i]=create_each_block_1$5(get_each_context_1$5(t,r,i));return{c(){for(let i=0;i<a.length;i+=1)a[i].c();e=empty$1()},m(i,o){for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(i,o);insert(i,e,o)},p(i,o){if(o[0]&2150){r=ensure_array_like(i[6][i[5]].chartData.onsets[i[34]].onsetTimes);let u;for(u=0;u<r.length;u+=1){const c=get_each_context_1$5(i,r,u);a[u]?a[u].p(c,o):(a[u]=create_each_block_1$5(c),a[u].c(),a[u].m(e.parentNode,e))}for(;u<a.length;u+=1)a[u].d(1);a.length=r.length}},d(i){i&&detach(e),destroy_each(a,i)}}}function create_each_block_1$5(t){let e,r,a,i;return{c(){e=svg_element("circle"),attr(e,"cx",r=t[11](t[35]-t[37]*t[6][t[5]].params.periodHrs)),attr(e,"cy",a=t[37]*(t[2]+t[1])+t[2]),attr(e,"r","2"),attr(e,"fill",i=t[6][t[5]].sourceData[t[34]].col.hex),attr(e,"stroke-width","1"),attr(e,"stroke","black")},m(o,u){insert(o,e,u)},p(o,u){u[0]&2144&&r!==(r=o[11](o[35]-o[37]*o[6][o[5]].params.periodHrs))&&attr(e,"cx",r),u[0]&6&&a!==(a=o[37]*(o[2]+o[1])+o[2])&&attr(e,"cy",a),u[0]&96&&i!==(i=o[6][o[5]].sourceData[o[34]].col.hex)&&attr(e,"fill",i)},d(o){o&&detach(e)}}}function create_each_block$8(t){let e,r=t[6][t[5]].sourceData[t[34]].showOnsets&&create_if_block_1$7(t);return{c(){r&&r.c(),e=empty$1()},m(a,i){r&&r.m(a,i),insert(a,e,i)},p(a,i){a[6][a[5]].sourceData[a[34]].showOnsets?r?r.p(a,i):(r=create_if_block_1$7(a),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},d(a){a&&detach(e),r&&r.d(a)}}}function create_fragment$h(t){var i;let e,r,a=((i=t[6][t[5]])==null?void 0:i.graph)==="actigram"&&t[6][t[5]].sourceData.length>0&&create_if_block$c(t);return{c(){a&&a.c(),e=empty$1()},m(o,u){a&&a.m(o,u),insert(o,e,u),r=!0},p(o,u){var c;((c=o[6][o[5]])==null?void 0:c.graph)==="actigram"&&o[6][o[5]].sourceData.length>0?a?(a.p(o,u),u[0]&96&&transition_in(a,1)):(a=create_if_block$c(o),a.c(),transition_in(a,1),a.m(e.parentNode,e)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(o){r||(transition_in(a),r=!0)},o(o){transition_out(a),r=!1},d(o){o&&detach(e),a&&a.d(o)}}}function findCentileValue(t,e){const a=t.filter(u=>!isNaN(u)&&u!==0).slice().sort((u,c)=>u-c),i=Math.ceil(e/100*a.length)-1;return a[i]}function findBestMatchIndex(t,e){let r=-1,a=-1/0;for(let i=0;i<=t.length-e.length;i++){let o=0;for(let u=0;u<e.length;u++)o+=t[i+u]*e[u];o>a&&(a=o,r=i)}return r}const click_handler=t=>{t.preventDefault()};function instance$h(t,e,r){let a,i,o,u,c,f,d,m,h,_,p;component_subscribe(t,activeGraphTab,I=>r(5,m=I)),component_subscribe(t,graphs,I=>r(6,h=I)),component_subscribe(t,statusData,I=>r(22,_=I)),component_subscribe(t,data,I=>r(23,p=I));let g={top:50,bottom:20,left:80,right:80},D=!1,v={x:0,y:0},b="",y=[],T=linear().domain([0,100]).range([0,d]);function w(I){I?r(0,g={top:50,bottom:20,left:80,right:80}):r(0,g={top:50,bottom:20,left:50,right:50})}function A(I,N,U){var z,V;if(((z=h[m])==null?void 0:z.graph)==="actigram"){let ne;return((V=h[m].chartData.onsets)==null?void 0:V.length)>0||E(h[m].sourceData,h[m].params.binSizeHrs,h[m].params.periodHrs,h[m].params.startTime),ne=h[m].chartData.onsets[0].onsetTimes.length,r(4,a=I.top+I.bottom+(N+U)*ne-U),a<I.top+I.bottom&&r(4,a=I.top+I.bottom),a}}function E(I,N,U,z){var V;if(((V=h[m])==null?void 0:V.graph)==="actigram"){let ne,B,ce={data:[{time:[],values:[],day:[],scaleLimits:[]}],startOffsets:[],onsets:[]};I.forEach((le,q)=>{le.chartvalues.time.field!=""&&(ne=getDataFromSource(q,le.chartvalues.time)),le.chartvalues.values.field!=""&&(B=getDataFromSource(q,le.chartvalues.values));const he=averageBinnedValues(ne,B,N);ce.startOffsets=k(z,m),q>0&&(ce.data[q]={time:[],values:[],day:[],scaleLimits:[]}),ce.data[q].time=he.time,ce.data[q].values=he.values;let J=Math.floor(he.time[0]/U);for(let ae=0;ae<he.time.length;ae++){const ue=Math.floor(he.time[ae]/U);if(ce.data[q].day[ae]=ue,ue===J){const ie=he.values[ae];ce.data[q].scaleLimits[ue]?(ce.data[q].scaleLimits[ue].min=Math.min(ie,ce.data[q].scaleLimits[ue].min),ce.data[q].scaleLimits[ue].max=Math.max(ie,ce.data[q].scaleLimits[ue].max)):ce.data[q].scaleLimits[ue]={min:ie,max:ie}}else J=ue,ce.data[q].scaleLimits[J]={min:he.values[ae],max:he.values[ae]}}}),set_store_value(graphs,h[m].chartData=ce,h);for(let le=0;le<I.length;le++)L(le)}}function k(I,N){let U=[];if(h[N].graph==="actigram"&&h[N].sourceData.length>0){U=Array.from({length:h[N].sourceData.length},()=>0);for(let z=0;z<h[N].sourceData.length;z++){const V=h[N].sourceData[z].chartvalues.time.field,ne=p.findIndex(B=>B.id===h[N].sourceData[z].tableID);if(p[ne].data[V].type=="time"){const B=p[ne].data[V].data[0];U[z]=getstartTimeOffset(I,B,p[ne].data[V].timeFormat);const ce=h[m].params.periodHrs*h[m].params.doublePlot;U[z]>=ce&&(U[z]=0,set_store_value(graphs,h[m].params.startTime=getISODate(B,p[ne].data[V].timeFormat),h))}}}else U=Array.from({length:1},()=>0);return set_store_value(graphs,h[m].chartData.startOffsets=U,h),U}function O(I,N,U,z,V){if(I&&h[m].graph==="actigram"){const B=z/V,ce=h[m].chartData.data.length;r(11,T=linear().domain([0,h[m].params.periodHrs*h[m].params.doublePlot]).range([0,d]));const le=T(i/2);r(9,b=[]),r(10,y=[]);for(let q=0;q<ce;q++){r(9,b[q]=[],b),r(10,y[q]=[],y);const he=h[m].chartData.data[q].scaleLimits.length;var ne=linear().domain([Math.min(...h[m].chartData.data[q].values),Math.max(...h[m].chartData.data[q].values)]).range([N,0]);for(let J=0;J<he;J++){r(9,b[q][J]="",b);const ae=J*(N+c);if(h[m].params.scaleAxes==="byPlot"){let G=h[m].chartData.data[q].scaleLimits[J].min,fe=h[m].chartData.data[q].scaleLimits[J].max;for(let ve=J;ve<Math.min(J+U,h[m].chartData.data[q].scaleLimits.length);ve++)h[m].chartData.data[q].scaleLimits[ve].min<G&&(G=h[m].chartData.data[q].scaleLimits[ve].min),h[m].chartData.data[q].scaleLimits[ve].max>fe&&(fe=h[m].chartData.data[q].scaleLimits[ve].max);ne=linear().domain([G,fe]).range([N,0])}r(10,y[q][J]=ne,y);const ue=`M0,${J*(N+c)+N}`;r(9,b[q][J]=b[q][J]+ue+" ",b);for(let G=J*B;G<Math.min(I.data[q].time.length,(J+U)*B);G++){const fe=I.data[q].time[G]-J*z,ve=I.data[q].values[G],oe=ne(ve)+ae,Te=T(fe),we=`${Te-le},${ae+N}  ${Te-le},${oe} ${Te+le},${oe} ${Te+le},${ae+N}`;Te!=null&&Te!=null&&!isNaN(Te)&&oe!=null&&oe!=null&&!isNaN(oe)&&r(9,b[q][J]=b[q][J]+we+" ",b)}const ie=`${T(z*U)},${J*(N+c)+N} 0,${J*(N+c)+N}`;r(9,b[q][J]=b[q][J]+ie+" Z",b)}}return b}}function L(I){const V=h[m].params.binSizeHrs,ne=P(3,3,V);h[m].chartData.data[I].time;const B=h[m].chartData.data[I].values,ce=findCentileValue(B,60),le=B.map(oe=>oe<=ce||isNaN(oe)?-1:1),he=h[m].params.periodHrs/V;h[m].params.doublePlot;let J=[],ae=[];for(let oe=0;oe<le.length/he;oe++)J[oe]=findBestMatchIndex(le.slice(oe*he,(oe+1)*he),ne)+Math.round(3/V),ae[oe]=h[m].chartData.data[I].time[J[oe]+oe*he];const ue=bestFitOnsets(getDiffs(ae));_.push({display:"Estimated period for "+h[m].sourceData[I].name+" = "+ue.toFixed(3)}),statusData.set(_);let ie=[];for(let oe=0;oe<ae.length;oe++)ie[oe]=T(ae[oe]-oe*h[m].params.periodHrs)+g.left,oe*(u+c)+u+g.top;const G=h[m].params.periodHrs-ue,fe=calculateMedian(ie),ve=ie.reduce((oe,Te,we)=>Math.abs(Te-fe)<Math.abs(ie[oe]-fe)?we:oe,0);set_store_value(graphs,h[m].chartData.onsets[I]={onsetTimes:ae,estimate:ue,median:fe,estDay:ve,moveXDay:T(G),slope:T(G)/(h[m].params.dayHeight+h[m].params.betweenHeight)},h)}function P(I,N,U){const z=Math.round(I/U),V=Math.round(N/U);return Array.from({length:z},()=>-1).concat(Array.from({length:V},()=>1))}function C(I){if(I.offsetX<g.left||I.offsetX>g.left+o||I.offsetY<g.top||I.offsetY>g.top+f)return null;const N=h[m].params.periodHrs,U=h[m].params.doublePlot,z=Math.floor((I.offsetY-g.top)/(u+c)),V=(I.offsetX-g.left)/d*N*U;return z*N+V}function W(I){I&&(_.push({display:x(I)}),statusData.set(_))}function x(I){Math.floor(I/h[m].params.periodHrs);let N=Math.round((I-h[m].chartData.data[0].time[0])/h[m].params.binSizeHrs);N<0&&(N=0);let U="";U=addTime(h[m].params.startTime,h[m].chartData.data[0].time[N]);for(let z=0;z<h[m].chartData.data.length;z++)U+="<br><a style='color:"+h[m].sourceData[z].col.hex+";''>"+getFieldName(h[m].sourceData[z].tableID,h[m].sourceData[z].chartvalues.values.field)+": "+h[m].chartData.data[z].values[N].toFixed(2)+"</a>";return U}function M(I){r(8,v={x:10+I.pageX,y:-10+I.pageY}),(I.offsetX<g.left||I.offsetX>g.left+d||I.offsetY<g.top||I.offsetY>g.top+f)&&r(7,D=!1);try{var N=document.querySelector(".overlay");const U=C(I);N.innerHTML=x(U)}catch{r(7,D=!1)}}const S=I=>{I.preventDefault(),r(7,D=!0),M(I)},$=I=>{D&&(I.preventDefault(),C(I),M(I))},F=I=>{I.preventDefault(),r(7,D=!1),C(I)},H=I=>{I.preventDefault();const N=C(I);W(N)};return t.$$.update=()=>{var I,N,U,z,V,ne,B,ce,le,q,he,J,ae,ue;t.$$.dirty[0]&96&&w((I=h[m])==null?void 0:I.params.showAxes),t.$$.dirty[0]&96&&r(2,u=(N=h[m])==null?void 0:N.params.dayHeight),t.$$.dirty[0]&96&&r(1,c=(U=h[m])==null?void 0:U.params.betweenHeight),t.$$.dirty[0]&7&&r(4,a=A(g,u,c)),t.$$.dirty[0]&96&&(i=(z=h[m])==null?void 0:z.params.binSizeHrs),t.$$.dirty[0]&96&&r(3,o=(V=h[m])==null?void 0:V.params.width),t.$$.dirty[0]&17&&r(12,f=a-g.top-g.bottom),t.$$.dirty[0]&9&&(d=o-g.left-g.right),t.$$.dirty[0]&96&&E((ne=h[m])==null?void 0:ne.sourceData,(B=h[m])==null?void 0:B.params.binSizeHrs,(ce=h[m])==null?void 0:ce.params.periodHrs,(le=h[m])==null?void 0:le.params.startTime),t.$$.dirty[0]&96&&r(9,b=O((q=h[m])==null?void 0:q.chartData,(he=h[m])==null?void 0:he.params.dayHeight,(J=h[m])==null?void 0:J.params.doublePlot,(ae=h[m])==null?void 0:ae.params.periodHrs,(ue=h[m])==null?void 0:ue.params.binSizeHrs))},[g,c,u,o,a,m,h,D,v,b,y,T,f,C,W,M,S,$,F,H]}class Actigram extends SvelteComponent{constructor(e){super(),init(this,e,instance$h,create_fragment$h,safe_not_equal,{},null,[-1,-1])}}function create_if_block$b(t){var Te,we;let e,r,a,i,o,u=formatTimeFromISO(t[1][t[0]].params.startTime)+"",c,f,d,m,h,_,p,g,D,v,b,y,T,w,A,E,k,O,L,P,C,W,x,M,S,$,F,H,I,N,U,z,V,ne,B,ce,le;function q(Q){t[6](Q)}let he={min:10,max:40,limits:[1,1/0],label:"Period (hrs):"};t[1][t[0]].params.periodHrs!==void 0&&(he.value=t[1][t[0]].params.periodHrs),_=new Slider({props:he}),binding_callbacks.push(()=>bind(_,"value",q));function J(Q){t[7](Q)}let ae={min:.05,max:1,step:"0.05",limits:[.05,(Te=t[1][t[0]])==null?void 0:Te.params.periodHrs],label:"Bin size (hrs):"};t[1][t[0]].params.binSizeHrs!==void 0&&(ae.value=t[1][t[0]].params.binSizeHrs),v=new Slider({props:ae}),binding_callbacks.push(()=>bind(v,"value",J));function ue(Q){t[8](Q)}let ie={min:100,max:1e3,step:"1",limits:[5,1/0],label:"Width: "};t[1][t[0]].params.width!==void 0&&(ie.value=t[1][t[0]].params.width),w=new Slider({props:ie}),binding_callbacks.push(()=>bind(w,"value",ue));function G(Q){t[9](Q)}let fe={min:10,max:30,step:"1",limits:[5,1/0],label:"Day Height:"};t[1][t[0]].params.dayHeight!==void 0&&(fe.value=t[1][t[0]].params.dayHeight),O=new Slider({props:fe}),binding_callbacks.push(()=>bind(O,"value",G));function ve(Q){t[10](Q)}let oe={min:1,max:20,step:"1",limits:[-((we=t[1][t[0]])==null?void 0:we.params.dayHeight),1/0],label:"Between Height:"};return t[1][t[0]].params.betweenHeight!==void 0&&(oe.value=t[1][t[0]].params.betweenHeight),W=new Slider({props:oe}),binding_callbacks.push(()=>bind(W,"value",ve)),{c(){e=element("div"),r=element("div"),a=element("span"),a.textContent="Start time:",i=space(),o=element("div"),c=text(u),f=space(),d=element("input"),m=space(),h=element("div"),create_component(_.$$.fragment),g=space(),D=element("div"),create_component(v.$$.fragment),y=space(),T=element("div"),create_component(w.$$.fragment),E=space(),k=element("div"),create_component(O.$$.fragment),P=space(),C=element("div"),create_component(W.$$.fragment),M=space(),S=element("div"),$=element("a"),$.textContent="y-Axes:",F=space(),H=element("a"),H.textContent="Show",I=space(),N=element("input"),U=space(),z=element("select"),V=element("option"),V.textContent="By row / plot",ne=element("option"),ne.textContent="Overall",attr(a,"class","svelte-1xir1xc"),attr(o,"class","datepicklabel datepicklabelshow svelte-1xir1xc"),set_style(o,"display","inline-block"),set_style(o,"margin-right","2px"),set_style(o,"margin-left","auto"),set_style(o,"text-align","center"),attr(d,"class","dateInput svelte-1xir1xc"),attr(d,"type","datetime-local"),attr(d,"id","startTime"),attr(d,"name","startTime"),attr(r,"class","sliderContainer svelte-1xir1xc"),attr(h,"class","sliderContainer svelte-1xir1xc"),attr(D,"class","sliderContainer svelte-1xir1xc"),attr(T,"class","sliderContainer svelte-1xir1xc"),attr(k,"class","sliderContainer svelte-1xir1xc"),attr(C,"class","sliderContainer svelte-1xir1xc"),attr($,"class","svelte-1xir1xc"),attr(H,"class","svelte-1xir1xc"),attr(N,"type","checkbox"),attr(N,"class","svelte-1xir1xc"),V.__value="byPlot",set_input_value(V,V.__value),attr(V,"class","svelte-1xir1xc"),ne.__value="overall",set_input_value(ne,ne.__value),attr(ne,"class","svelte-1xir1xc"),attr(z,"class","selectField svelte-1xir1xc"),set_style(z,"margin-right","0",1),t[1][t[0]].params.scaleAxes===void 0&&add_render_callback(()=>t[12].call(z)),attr(S,"class","sliderContainer svelte-1xir1xc"),attr(e,"class","chartControls svelte-1xir1xc")},m(Q,X){insert(Q,e,X),append(e,r),append(r,a),append(r,i),append(r,o),append(o,c),append(r,f),append(r,d),set_input_value(d,t[1][t[0]].params.startTime),append(e,m),append(e,h),mount_component(_,h,null),append(e,g),append(e,D),mount_component(v,D,null),append(e,y),append(e,T),mount_component(w,T,null),append(e,E),append(e,k),mount_component(O,k,null),append(e,P),append(e,C),mount_component(W,C,null),append(e,M),append(e,S),append(S,$),append(S,F),append(S,H),append(S,I),append(S,N),N.checked=t[1][t[0]].params.showAxes,append(S,U),append(S,z),append(z,V),append(z,ne),select_option(z,t[1][t[0]].params.scaleAxes,!0),B=!0,ce||(le=[listen(o,"dblclick",t[3]),listen(d,"input",t[4]),listen(d,"keydown",t[5]),listen(N,"change",t[11]),listen(z,"change",t[12])],ce=!0)},p(Q,X){var Se,R;(!B||X&3)&&u!==(u=formatTimeFromISO(Q[1][Q[0]].params.startTime)+"")&&set_data(c,u),X&3&&set_input_value(d,Q[1][Q[0]].params.startTime);const de={};!p&&X&3&&(p=!0,de.value=Q[1][Q[0]].params.periodHrs,add_flush_callback(()=>p=!1)),_.$set(de);const ke={};X&3&&(ke.limits=[.05,(Se=Q[1][Q[0]])==null?void 0:Se.params.periodHrs]),!b&&X&3&&(b=!0,ke.value=Q[1][Q[0]].params.binSizeHrs,add_flush_callback(()=>b=!1)),v.$set(ke);const pe={};!A&&X&3&&(A=!0,pe.value=Q[1][Q[0]].params.width,add_flush_callback(()=>A=!1)),w.$set(pe);const ye={};!L&&X&3&&(L=!0,ye.value=Q[1][Q[0]].params.dayHeight,add_flush_callback(()=>L=!1)),O.$set(ye);const ge={};X&3&&(ge.limits=[-((R=Q[1][Q[0]])==null?void 0:R.params.dayHeight),1/0]),!x&&X&3&&(x=!0,ge.value=Q[1][Q[0]].params.betweenHeight,add_flush_callback(()=>x=!1)),W.$set(ge),X&3&&(N.checked=Q[1][Q[0]].params.showAxes),X&3&&select_option(z,Q[1][Q[0]].params.scaleAxes)},i(Q){B||(transition_in(_.$$.fragment,Q),transition_in(v.$$.fragment,Q),transition_in(w.$$.fragment,Q),transition_in(O.$$.fragment,Q),transition_in(W.$$.fragment,Q),B=!0)},o(Q){transition_out(_.$$.fragment,Q),transition_out(v.$$.fragment,Q),transition_out(w.$$.fragment,Q),transition_out(O.$$.fragment,Q),transition_out(W.$$.fragment,Q),B=!1},d(Q){Q&&detach(e),destroy_component(_),destroy_component(v),destroy_component(w),destroy_component(O),destroy_component(W),ce=!1,run_all(le)}}}function create_fragment$g(t){let e,r,a=t[0]>=0&&create_if_block$b(t);return{c(){a&&a.c(),e=empty$1()},m(i,o){a&&a.m(i,o),insert(i,e,o),r=!0},p(i,[o]){i[0]>=0?a?(a.p(i,o),o&1&&transition_in(a,1)):(a=create_if_block$b(i),a.c(),transition_in(a,1),a.m(e.parentNode,e)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(i){r||(transition_in(a),r=!0)},o(i){transition_out(a),r=!1},d(i){i&&detach(e),a&&a.d(i)}}}function instance$g(t,e,r){let a,i;component_subscribe(t,activeGraphTab,b=>r(0,a=b)),component_subscribe(t,graphs,b=>r(1,i=b));let o=!0;function u(){o=!o;const b=document.querySelector(".datepicklabel"),y=document.querySelector(".dateInput");o?(b.style.display="inline-block",y.style.width="18px"):(b.style.display="none",y.style.width="60%")}const c=b=>{u()};function f(){i[a].params.startTime=this.value,graphs.set(i)}const d=b=>{b.key==="Enter"&&u()};function m(b){t.$$.not_equal(i[a].params.periodHrs,b)&&(i[a].params.periodHrs=b,graphs.set(i))}function h(b){t.$$.not_equal(i[a].params.binSizeHrs,b)&&(i[a].params.binSizeHrs=b,graphs.set(i))}function _(b){t.$$.not_equal(i[a].params.width,b)&&(i[a].params.width=b,graphs.set(i))}function p(b){t.$$.not_equal(i[a].params.dayHeight,b)&&(i[a].params.dayHeight=b,graphs.set(i))}function g(b){t.$$.not_equal(i[a].params.betweenHeight,b)&&(i[a].params.betweenHeight=b,graphs.set(i))}function D(){i[a].params.showAxes=this.checked,graphs.set(i)}function v(){i[a].params.scaleAxes=select_value(this),graphs.set(i)}return[a,i,u,c,f,d,m,h,_,p,g,D,v]}class Actigram_controls extends SvelteComponent{constructor(e){super(),init(this,e,instance$g,create_fragment$g,safe_not_equal,{})}}function bisection(t,e,r,a,i){var o=function(d){return d>0?1:d<0?-1:0},u=o(t(e));o(t(r));for(var c=.5*(e+r),f=t(c);r-e>i&&r-e>a*Math.abs(c)&&Math.abs(f)>i;)f*u>0?(e=c,u=o(f)):r=c,c=.5*(e+r),f=t(c);return c}function gamnln(t){var e=[.5723649429247001,0,-.1207822376352452,0,.2846828704729192,.6931471805599453,1.200973602347074,1.791759469228055,2.453736570842442,3.178053830347946,3.957813967618717,4.787491742782046,5.662562059857142,6.579251212010101,7.534364236758733,8.525161361065415,9.549267257300997,10.60460290274525,11.68933342079727,12.80182748008147,13.94062521940376,15.10441257307552,16.29200047656724,17.50230784587389,18.73434751193645,19.98721449566188,21.2600761562447,22.55216385312342,23.86276584168909,25.19122118273868,26.53691449111561,27.89927138384089,29.27775451504082,30.67186010608068,32.08111489594736,33.50507345013689,34.94331577687682,36.39544520803305,37.86108650896109,39.3398841871995,40.8315009745308,42.33561646075349,43.85192586067515,45.3801388984769,46.91997879580877,48.47118135183522,50.03349410501914,51.60667556776437,53.19049452616927,54.78472939811231,56.38916764371993,58.00360522298051,59.62784609588432,61.26170176100199,62.9049908288765,64.55753862700632,66.21917683354901,67.88974313718154,69.56908092082364,71.257038967168,72.9534711841694,74.65823634883016,76.37119786778275,78.0922235533153,79.82118541361436,81.55795945611503,83.30242550295004,85.05446701758153,86.81397094178108,88.58082754219767,90.35493026581838,92.1361756036871,93.92446296229978,95.71969454214322,97.52177522288821,99.33061245478741,101.1461161558646,102.9681986145138,104.7967743971583,106.6317602606435,108.4730750690654,110.3206397147574,112.1743770431779,114.0342117814617,115.9000704704145,117.7718813997451,119.6495745463449,121.5330815154387,123.4223354844396,125.3172711493569,127.2178246736118,129.1239336391272,131.0355369995686,132.9525750356163,134.8749893121619,136.8027226373264,138.7357190232026,140.6739236482343,142.617282821146,144.5657439463449,146.5192554907206,148.477766951773,150.4412288270019,152.4095925844974,154.3828106346716,156.3608363030788,158.3436238042692,160.3311282166309,162.3233054581712,164.3201122631952,166.3215061598404,168.3274454484277,170.3378891805928,172.3527971391628,174.3721298187452,176.3958484069973,178.4239147665485,180.4562914175438,182.4929415207863,184.5338288614495,186.5789178333379,188.6281734236716,190.6815611983747,192.7390472878449,194.8005983731871,196.86618167289,198.9357649299295,201.0093163992815,203.0868048358281,205.1681994826412,207.2534700596299,209.3425867525368,211.435520202271,213.5322414945632,215.6327221499328,217.7369341139542,219.8448497478113,221.9564418191303,224.0716834930795,226.1905483237276,228.3130102456502,230.4390435657769,232.5686229554685,234.7017234428182,236.8383204051684,238.9783895618343,241.121906967029,243.2688490029827,245.4191923732478,247.5729140961868,249.7299914986334,251.8904022097232,254.0541241548883,256.2211355500095,258.3914148957209,260.5649409718632,262.7416928320802,264.9216497985528,267.1047914568685,269.2910976510198,271.4805484785288,273.6731242856937,275.8688056629533,278.0675734403662,280.2694086832001,282.4742926876305,284.6822069765408,286.893133295427,289.1070536083976,291.3239500942703,293.5438051427607,295.7666013507606,297.9923215187034,300.2209486470141,302.4524659326413,304.6868567656687,306.9241047260048,309.1641935801469,311.4071072780187,313.652829949879,315.9013459032995,318.1526396202093,320.4066957540055,322.6634991267262,324.9230347262869,327.1852877037753,329.4502433708053,331.7178871969285,333.9882048070999,336.2611819791985,338.5368046415996,340.815058870799,343.0959308890863,345.3794070622669,347.6654738974312,349.9541180407703,352.245326275435,354.5390855194408,356.835382823613,359.1342053695754];if(t<201)return e[t-1];var r=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],a=2.5066282746310007,i=.5*t,o=i,u=i+5.5;u=(i+.5)*Math.log(u)-u;for(var c=1.000000000190015,f=0;f<6;f++)o=o+1,c=c+r[f]/o;var d=u+Math.log(a*c/i);return d}function gser(t,e){for(var r=1e8,a=1e-8,i=gamnln(t),o=.5*t,u=o,c=1/o,f=c,t=1;t<r&&(u++,f=f*e/u,c+=f,!(f<c*a));t++);return c*Math.exp(-e+o*Math.log(e)-i)}function gcf(t,e){for(var r=1e8,a=1e-8,i=gamnln(t),o=.5*t,u=e+1-o,c=1e-300,f=1/c,d=1/u,m=d,h=1;h<r;h++){var _=-h*(h-o);u+=2,d=_*d+u,Math.abs(d)<c&&(d=c),f=u+_/f,Math.abs(f)<c&&(f=c),d=1/d;var p=d*f;if(m=m*p,Math.abs(p-1)<a)break}return m*Math.exp(-e+o*Math.log(e)-i)}function gammp(t,e){return e<.5*t+1?gser(t,e):1-gcf(t,e)}function gammq(t,e){return e<.5*t+1?1-gser(t,e):gcf(t,e)}function pchisq(t,e,r=1){return r==1?gammq(e,.5*t):gammp(e,.5*t)}function qchisq(t,e,r=1){if(r==1){if(t==0)return 1/0;if(t==1)return 0}if(r==2){if(t==0)return 0;if(t==1)return 1/0}var a=1e-6,i=0,o=Math.sqrt(2*e),u=2*o,c=1;for(r==2&&(c=-1);c*pchisq(u,e,r)>t*c;)i=u,u+=2*o;var f=function(d){return pchisq(d,e,r)-t};return bisection(f,i,u,a,0)}function create_fragment$f(t){let e,r;return{c(){e=element("div"),r=text(t[0]),set_style(e,"top",t[2]+5+"px"),set_style(e,"left",t[1]+5+"px"),attr(e,"class","svelte-1wb4l5o")},m(a,i){insert(a,e,i),append(e,r)},p(a,[i]){i&1&&set_data(r,a[0]),i&4&&set_style(e,"top",a[2]+5+"px"),i&2&&set_style(e,"left",a[1]+5+"px")},i:noop,o:noop,d(a){a&&detach(e)}}}function instance$f(t,e,r){let{tipcontent:a}=e,{x:i}=e,{y:o}=e;return t.$$set=u=>{"tipcontent"in u&&r(0,a=u.tipcontent),"x"in u&&r(1,i=u.x),"y"in u&&r(2,o=u.y)},[a,i,o]}class TooltipFromUse extends SvelteComponent{constructor(e){super(),init(this,e,instance$f,create_fragment$f,safe_not_equal,{tipcontent:0,x:1,y:2})}}function tooltip(t){let e,r;function a(u){e=t.getAttribute("tipcontent"),t.removeAttribute("title"),r=new TooltipFromUse({props:{tipcontent:e,x:u.pageX,y:u.pageY},target:document.body})}function i(u){r.$set({x:u.pageX,y:u.pageY})}function o(){r.$destroy(),t.setAttribute("tipcontent",e)}return t.addEventListener("mouseover",a),t.addEventListener("mouseleave",o),t.addEventListener("mousemove",i),{destroy(){t.removeEventListener("mouseover",a),t.removeEventListener("mouseleave",o),t.removeEventListener("mousemove",i)}}}function get_each_context$7(t,e,r){const a=t.slice();return a[11]=e[r],a[13]=r,a}function get_each_context_1$4(t,e,r){const a=t.slice();return a[14]=e[r],a[16]=r,a}function create_if_block$a(t){let e,r,a,i,o,u,c,f,d,m,h,_,p,g;function D(y,T){return y[3][y[2]].chartData.data.periods.length>0?create_if_block_1$6:create_else_block$4}let v=D(t),b=v(t);return o=new Axis({props:{innerHeight:t[6],yoffset:"0",scale:t[3][t[2]].chartData.xScale,position:"bottom"}}),u=new Axis({props:{innerHeight:t[6],yoffset:"0",scale:t[3][t[2]].chartData.yScale,position:"left"}}),{c(){e=element("div"),r=svg_element("svg"),a=svg_element("g"),b.c(),i=empty$1(),create_component(o.$$.fragment),create_component(u.$$.fragment),c=svg_element("text"),f=text("Chi-sq"),m=svg_element("text"),h=text("Period"),set_style(c,"text-anchor","middle"),attr(c,"transform",d=`translate(-50,${t[6]/2}) rotate(-90)     `),set_style(m,"text-anchor","middle"),attr(m,"x",_=t[7]/2),attr(m,"y",p=t[6]+32),attr(a,"transform",`translate(${t[8].left},${t[8].top})`),attr(r,"id","svgContainer"),attr(r,"width",t[1]),attr(r,"height",t[0]),set_style(r,"transform-origin","top left"),set_style(r,"transform","scale(1)"),attr(e,"class","periodogram")},m(y,T){insert(y,e,T),append(e,r),append(r,a),b.m(a,null),append(a,i),mount_component(o,a,null),mount_component(u,a,null),append(a,c),append(c,f),append(a,m),append(m,h),g=!0},p(y,T){v===(v=D(y))&&b?b.p(y,T):(b.d(1),b=v(y),b&&(b.c(),b.m(a,i)));const w={};T&64&&(w.innerHeight=y[6]),T&12&&(w.scale=y[3][y[2]].chartData.xScale),o.$set(w);const A={};T&64&&(A.innerHeight=y[6]),T&12&&(A.scale=y[3][y[2]].chartData.yScale),u.$set(A),(!g||T&64&&d!==(d=`translate(-50,${y[6]/2}) rotate(-90)     `))&&attr(c,"transform",d),(!g||T&128&&_!==(_=y[7]/2))&&attr(m,"x",_),(!g||T&64&&p!==(p=y[6]+32))&&attr(m,"y",p),(!g||T&2)&&attr(r,"width",y[1]),(!g||T&1)&&attr(r,"height",y[0])},i(y){g||(transition_in(o.$$.fragment,y),transition_in(u.$$.fragment,y),g=!0)},o(y){transition_out(o.$$.fragment,y),transition_out(u.$$.fragment,y),g=!1},d(y){y&&detach(e),b.d(),destroy_component(o),destroy_component(u)}}}function create_else_block$4(t){let e,r;return{c(){e=svg_element("text"),r=text("No Data "),attr(e,"x","50%"),attr(e,"y","50%"),attr(e,"text-anchor","middle"),attr(e,"fill","red")},m(a,i){insert(a,e,i),append(e,r)},p:noop,d(a){a&&detach(e)}}}function create_if_block_1$6(t){let e,r=ensure_array_like(t[3][t[2]].chartData.data.periods),a=[];for(let i=0;i<r.length;i+=1)a[i]=create_each_block$7(get_each_context$7(t,r,i));return{c(){for(let i=0;i<a.length;i+=1)a[i].c();e=empty$1()},m(i,o){for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(i,o);insert(i,e,o)},p(i,o){if(o&60){r=ensure_array_like(i[3][i[2]].chartData.data.periods);let u;for(u=0;u<r.length;u+=1){const c=get_each_context$7(i,r,u);a[u]?a[u].p(c,o):(a[u]=create_each_block$7(c),a[u].c(),a[u].m(e.parentNode,e))}for(;u<a.length;u+=1)a[u].d(1);a.length=r.length}},d(i){i&&detach(e),destroy_each(a,i)}}}function create_each_block_1$4(t){let e,r,a,i,o,u,c,f;return{c(){e=svg_element("circle"),attr(e,"tipcontent",r=t[14].toFixed(2)+", "+t[3][t[2]].chartData.data.power[t[13]][t[16]].toFixed(2)+" ("+t[3][t[2]].chartData.data.pvalue[t[13]][t[16]].toFixed(2)+")"),attr(e,"cx",a=t[3][t[2]].chartData.xScale(t[14])),attr(e,"cy",i=t[3][t[2]].chartData.yScale(t[3][t[2]].chartData.data.power[t[13]][t[16]])),attr(e,"r","3"),attr(e,"fill",o=t[3][t[2]].sourceData[t[13]].col.hex),attr(e,"fill-opacity",u=t[3][t[2]].sourceData[t[13]].col.alpha)},m(d,m){insert(d,e,m),c||(f=action_destroyer(tooltip.call(null,e)),c=!0)},p(d,m){m&12&&r!==(r=d[14].toFixed(2)+", "+d[3][d[2]].chartData.data.power[d[13]][d[16]].toFixed(2)+" ("+d[3][d[2]].chartData.data.pvalue[d[13]][d[16]].toFixed(2)+")")&&attr(e,"tipcontent",r),m&12&&a!==(a=d[3][d[2]].chartData.xScale(d[14]))&&attr(e,"cx",a),m&12&&i!==(i=d[3][d[2]].chartData.yScale(d[3][d[2]].chartData.data.power[d[13]][d[16]]))&&attr(e,"cy",i),m&12&&o!==(o=d[3][d[2]].sourceData[d[13]].col.hex)&&attr(e,"fill",o),m&12&&u!==(u=d[3][d[2]].sourceData[d[13]].col.alpha)&&attr(e,"fill-opacity",u)},d(d){d&&detach(e),c=!1,f()}}}function create_each_block$7(t){let e,r,a,i,o,u,c,f=ensure_array_like(t[11]),d=[];for(let m=0;m<f.length;m+=1)d[m]=create_each_block_1$4(get_each_context_1$4(t,f,m));return{c(){for(let m=0;m<d.length;m+=1)d[m].c();e=svg_element("path"),o=svg_element("path"),attr(e,"d",r=t[4][t[13]]),attr(e,"fill","none"),attr(e,"stroke",a=t[3][t[2]].sourceData[t[13]].col.hex),attr(e,"stroke-opacity",i=t[3][t[2]].sourceData[t[13]].col.alpha),attr(e,"stroke-width","2px"),attr(o,"d",u=t[5][t[13]]),attr(o,"fill","none"),attr(o,"stroke","red"),attr(o,"stroke-opacity",c=t[3][t[2]].sourceData[t[13]].col.alpha),attr(o,"stroke-width","1px")},m(m,h){for(let _=0;_<d.length;_+=1)d[_]&&d[_].m(m,h);insert(m,e,h),insert(m,o,h)},p(m,h){if(h&12){f=ensure_array_like(m[11]);let _;for(_=0;_<f.length;_+=1){const p=get_each_context_1$4(m,f,_);d[_]?d[_].p(p,h):(d[_]=create_each_block_1$4(p),d[_].c(),d[_].m(e.parentNode,e))}for(;_<d.length;_+=1)d[_].d(1);d.length=f.length}h&16&&r!==(r=m[4][m[13]])&&attr(e,"d",r),h&12&&a!==(a=m[3][m[2]].sourceData[m[13]].col.hex)&&attr(e,"stroke",a),h&12&&i!==(i=m[3][m[2]].sourceData[m[13]].col.alpha)&&attr(e,"stroke-opacity",i),h&32&&u!==(u=m[5][m[13]])&&attr(o,"d",u),h&12&&c!==(c=m[3][m[2]].sourceData[m[13]].col.alpha)&&attr(o,"stroke-opacity",c)},d(m){m&&(detach(e),detach(o)),destroy_each(d,m)}}}function create_fragment$e(t){var i,o;let e,r,a=((i=t[3][t[2]])==null?void 0:i.graph)==="periodogram"&&((o=t[3][t[2]])==null?void 0:o.sourceData.length)>0&&create_if_block$a(t);return{c(){a&&a.c(),e=empty$1()},m(u,c){a&&a.m(u,c),insert(u,e,c),r=!0},p(u,[c]){var f,d;((f=u[3][u[2]])==null?void 0:f.graph)==="periodogram"&&((d=u[3][u[2]])==null?void 0:d.sourceData.length)>0?a?(a.p(u,c),c&12&&transition_in(a,1)):(a=create_if_block$a(u),a.c(),transition_in(a,1),a.m(e.parentNode,e)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(u){r||(transition_in(a),r=!0)},o(u){transition_out(a),r=!1},d(u){u&&detach(e),a&&a.d(u)}}}function instance$e(t,e,r){let a,i,o,u,c,f;component_subscribe(t,activeGraphTab,g=>r(2,c=g)),component_subscribe(t,graphs,g=>r(3,f=g));let d={top:20,bottom:40,left:80,right:20},m=[],h=[];function _(g,D,v,b,y){var T;if(((T=f[c])==null?void 0:T.graph)==="periodogram"){let A,E,k={data:{periods:[],power:[],sigThreshold:[],pvalue:[]},xScale:linear().domain([v,b]).range([0,u]),yScale:linear().domain([0,100]).range([i,0])},O={ymin:1/0,ymax:-1/0};g.forEach((L,P)=>{L.chartvalues.time.field!=""&&(A=getDataFromSource(P,L.chartvalues.time)),L.chartvalues.values.field!=""&&(E=getDataFromSource(P,L.chartvalues.values));const C=averageBinnedValues(A,E,D);console.log(C.values),k.data.periods[P]=[],k.data.power[P]=[],k.data.pvalue[P]=[],k.data.sigThreshold[P]=[];let W=0;const x=1+(b-v)/y,M=Math.pow(1-.05,1/x);for(let S=v;S<b;S+=y)k.data.periods[P][W]=S,k.data.power[P][W]=p(C.values,D,S),k.data.pvalue[P][W]=pchisq(k.data.power[P][W],Math.round(S/D)),k.data.sigThreshold[P][W]=qchisq(M,Math.round(S/D)),k.data.power[P][W]<O.ymin&&(O.ymin=k.data.power[P][W]),k.data.power[P][W]>O.ymax&&(O.ymax=k.data.power[P][W]),W++}),set_store_value(graphs,f[c].chartData=k,f),set_store_value(graphs,f[c].chartData.yScale=linear().domain([O.ymin,O.ymax]).range([o,0]),f),g.forEach((L,P)=>{for(let C=0;C<k.data.power[P].length;C++)C===0&&(r(4,m[P]="M ",m),r(5,h[P]="M",h)),r(4,m[P]+=`${f[c].chartData.xScale(k.data.periods[P][C])} ${f[c].chartData.yScale(k.data.power[P][C])} `,m),r(5,h[P]+=`${f[c].chartData.xScale(k.data.periods[P][C])} ${f[c].chartData.yScale(k.data.sigThreshold[P][C])} `,h)})}}function p(g,D,v){const b=Math.round(v/D),y=Math.ceil(g.length/b),T=Array.from({length:b},(k,O)=>{const L=O,P=Array.from({length:y},(C,W)=>g[L+W*b]).filter(C=>C!==void 0&&!isNaN(C));return mean(P)}),w=mean(g),A=T.reduce((k,O)=>k+Math.pow(O-w,2),0)*(g.length*y),E=g.reduce((k,O)=>k+Math.pow(O-w,2),0);return A/E}return t.$$.update=()=>{var g,D,v,b,y,T,w;t.$$.dirty&12&&r(1,a=(g=f[c])==null?void 0:g.params.width),t.$$.dirty&12&&r(0,i=(D=f[c])==null?void 0:D.params.height),t.$$.dirty&1&&r(6,o=i-d.top-d.bottom),t.$$.dirty&2&&r(7,u=a-d.left-d.right),t.$$.dirty&12&&_((v=f[c])==null?void 0:v.sourceData,(b=f[c])==null?void 0:b.params.binSizeHrs,(y=f[c])==null?void 0:y.params.minPeriod,(T=f[c])==null?void 0:T.params.maxPeriod,(w=f[c])==null?void 0:w.params.stepPeriod)},[i,a,c,f,m,h,o,u,d]}class Periodogram extends SvelteComponent{constructor(e){super(),init(this,e,instance$e,create_fragment$e,safe_not_equal,{})}}function create_if_block$9(t){let e,r,a,i,o,u,c,f,d,m,h,_,p,g,D,v,b,y,T,w,A,E,k,O,L;function P(z){t[2](z)}let C={min:10,max:t[1][t[0]].params.maxPeriod,limits:[1,1/0],label:"Min period:"};t[1][t[0]].params.minPeriod!==void 0&&(C.value=t[1][t[0]].params.minPeriod),a=new Slider({props:C}),binding_callbacks.push(()=>bind(a,"value",P));function W(z){t[3](z)}let x={min:t[1][t[0]].params.minPeriod,max:30,limits:[1,1/0],label:"Max period:"};t[1][t[0]].params.maxPeriod!==void 0&&(x.value=t[1][t[0]].params.maxPeriod),c=new Slider({props:x}),binding_callbacks.push(()=>bind(c,"value",W));function M(z){t[4](z)}let S={min:.1,max:1,step:.01,limits:[.1,1],label:"Period step:"};t[1][t[0]].params.stepPeriod!==void 0&&(S.value=t[1][t[0]].params.stepPeriod),h=new Slider({props:S}),binding_callbacks.push(()=>bind(h,"value",M));function $(z){t[5](z)}let F={min:.05,max:1,step:"0.05",limits:[.05,t[1][t[0]].params.maxPeriod],label:"Bin size (hrs):"};t[1][t[0]].params.binSizeHrs!==void 0&&(F.value=t[1][t[0]].params.binSizeHrs),D=new Slider({props:F}),binding_callbacks.push(()=>bind(D,"value",$));function H(z){t[6](z)}let I={min:100,max:1e3,step:"1",limits:[5,1/0],label:"Width: "};t[1][t[0]].params.width!==void 0&&(I.value=t[1][t[0]].params.width),T=new Slider({props:I}),binding_callbacks.push(()=>bind(T,"value",H));function N(z){t[7](z)}let U={min:10,max:30,step:"1",limits:[5,1/0],label:"Height:"};return t[1][t[0]].params.height!==void 0&&(U.value=t[1][t[0]].params.height),k=new Slider({props:U}),binding_callbacks.push(()=>bind(k,"value",N)),{c(){e=element("div"),r=element("div"),create_component(a.$$.fragment),o=space(),u=element("div"),create_component(c.$$.fragment),d=space(),m=element("div"),create_component(h.$$.fragment),p=space(),g=element("div"),create_component(D.$$.fragment),b=space(),y=element("div"),create_component(T.$$.fragment),A=space(),E=element("div"),create_component(k.$$.fragment),attr(r,"class","sliderContainer"),attr(u,"class","sliderContainer"),attr(m,"class","sliderContainer"),attr(g,"class","sliderContainer"),attr(y,"class","sliderContainer"),attr(E,"class","sliderContainer"),attr(e,"class","chartControls")},m(z,V){insert(z,e,V),append(e,r),mount_component(a,r,null),append(e,o),append(e,u),mount_component(c,u,null),append(e,d),append(e,m),mount_component(h,m,null),append(e,p),append(e,g),mount_component(D,g,null),append(e,b),append(e,y),mount_component(T,y,null),append(e,A),append(e,E),mount_component(k,E,null),L=!0},p(z,V){const ne={};V&3&&(ne.max=z[1][z[0]].params.maxPeriod),!i&&V&3&&(i=!0,ne.value=z[1][z[0]].params.minPeriod,add_flush_callback(()=>i=!1)),a.$set(ne);const B={};V&3&&(B.min=z[1][z[0]].params.minPeriod),!f&&V&3&&(f=!0,B.value=z[1][z[0]].params.maxPeriod,add_flush_callback(()=>f=!1)),c.$set(B);const ce={};!_&&V&3&&(_=!0,ce.value=z[1][z[0]].params.stepPeriod,add_flush_callback(()=>_=!1)),h.$set(ce);const le={};V&3&&(le.limits=[.05,z[1][z[0]].params.maxPeriod]),!v&&V&3&&(v=!0,le.value=z[1][z[0]].params.binSizeHrs,add_flush_callback(()=>v=!1)),D.$set(le);const q={};!w&&V&3&&(w=!0,q.value=z[1][z[0]].params.width,add_flush_callback(()=>w=!1)),T.$set(q);const he={};!O&&V&3&&(O=!0,he.value=z[1][z[0]].params.height,add_flush_callback(()=>O=!1)),k.$set(he)},i(z){L||(transition_in(a.$$.fragment,z),transition_in(c.$$.fragment,z),transition_in(h.$$.fragment,z),transition_in(D.$$.fragment,z),transition_in(T.$$.fragment,z),transition_in(k.$$.fragment,z),L=!0)},o(z){transition_out(a.$$.fragment,z),transition_out(c.$$.fragment,z),transition_out(h.$$.fragment,z),transition_out(D.$$.fragment,z),transition_out(T.$$.fragment,z),transition_out(k.$$.fragment,z),L=!1},d(z){z&&detach(e),destroy_component(a),destroy_component(c),destroy_component(h),destroy_component(D),destroy_component(T),destroy_component(k)}}}function create_fragment$d(t){let e,r,a=t[0]>=0&&create_if_block$9(t);return{c(){a&&a.c(),e=empty$1()},m(i,o){a&&a.m(i,o),insert(i,e,o),r=!0},p(i,[o]){i[0]>=0?a?(a.p(i,o),o&1&&transition_in(a,1)):(a=create_if_block$9(i),a.c(),transition_in(a,1),a.m(e.parentNode,e)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(i){r||(transition_in(a),r=!0)},o(i){transition_out(a),r=!1},d(i){i&&detach(e),a&&a.d(i)}}}function instance$d(t,e,r){let a,i;component_subscribe(t,activeGraphTab,h=>r(0,a=h)),component_subscribe(t,graphs,h=>r(1,i=h));function o(h){t.$$.not_equal(i[a].params.minPeriod,h)&&(i[a].params.minPeriod=h,graphs.set(i))}function u(h){t.$$.not_equal(i[a].params.maxPeriod,h)&&(i[a].params.maxPeriod=h,graphs.set(i))}function c(h){t.$$.not_equal(i[a].params.stepPeriod,h)&&(i[a].params.stepPeriod=h,graphs.set(i))}function f(h){t.$$.not_equal(i[a].params.binSizeHrs,h)&&(i[a].params.binSizeHrs=h,graphs.set(i))}function d(h){t.$$.not_equal(i[a].params.width,h)&&(i[a].params.width=h,graphs.set(i))}function m(h){t.$$.not_equal(i[a].params.height,h)&&(i[a].params.height=h,graphs.set(i))}return[a,i,o,u,c,f,d,m]}class Periodogram_controls extends SvelteComponent{constructor(e){super(),init(this,e,instance$d,create_fragment$d,safe_not_equal,{})}}function get_each_context$6(t,e,r){const a=t.slice();return a[12]=e[r],a[14]=r,a}function get_each_context_1$3(t,e,r){const a=t.slice();return a[15]=e[r],a[17]=r,a}function create_if_block$8(t){let e,r,a,i,o,u,c,f=t[7][t[6]].params.yAxisLabel+"",d,m,h,_=t[7][t[6]].params.xAxisLabel+"",p,g,D,v,b=ensure_array_like(t[1]),y=[];for(let T=0;T<b.length;T+=1)y[T]=create_each_block$6(get_each_context$6(t,b,T));return o=new Axis({props:{innerHeight:t[2],scale:t[8],position:"bottom"}}),u=new Axis({props:{innerHeight:t[2],scale:t[9],position:"left"}}),{c(){e=element("div"),r=svg_element("svg"),a=svg_element("g");for(let T=0;T<y.length;T+=1)y[T].c();i=empty$1(),create_component(o.$$.fragment),create_component(u.$$.fragment),c=svg_element("text"),d=text(f),h=svg_element("text"),p=text(_),set_style(c,"text-anchor","middle"),attr(c,"transform",m=`translate(-30,${t[2]/2}) rotate(-90)     `),set_style(h,"text-anchor","middle"),attr(h,"x",g=t[3]/2),attr(h,"y",D=t[2]+32),attr(a,"transform",`translate(${t[10].left},${t[10].right})`),attr(r,"id","svgContainer"),attr(r,"width",t[4]),attr(r,"height",t[5]),set_style(r,"transform-origin","top left"),set_style(r,"transform","scale(1)"),attr(e,"class","rawGraph")},m(T,w){insert(T,e,w),append(e,r),append(r,a);for(let A=0;A<y.length;A+=1)y[A]&&y[A].m(a,null);append(a,i),mount_component(o,a,null),mount_component(u,a,null),append(a,c),append(c,d),append(a,h),append(h,p),v=!0},p(T,w){if(w&963){b=ensure_array_like(T[1]);let k;for(k=0;k<b.length;k+=1){const O=get_each_context$6(T,b,k);y[k]?y[k].p(O,w):(y[k]=create_each_block$6(O),y[k].c(),y[k].m(a,i))}for(;k<y.length;k+=1)y[k].d(1);y.length=b.length}const A={};w&4&&(A.innerHeight=T[2]),w&256&&(A.scale=T[8]),o.$set(A);const E={};w&4&&(E.innerHeight=T[2]),w&512&&(E.scale=T[9]),u.$set(E),(!v||w&192)&&f!==(f=T[7][T[6]].params.yAxisLabel+"")&&set_data(d,f),(!v||w&4&&m!==(m=`translate(-30,${T[2]/2}) rotate(-90)     `))&&attr(c,"transform",m),(!v||w&192)&&_!==(_=T[7][T[6]].params.xAxisLabel+"")&&set_data(p,_),(!v||w&8&&g!==(g=T[3]/2))&&attr(h,"x",g),(!v||w&4&&D!==(D=T[2]+32))&&attr(h,"y",D),(!v||w&16)&&attr(r,"width",T[4]),(!v||w&32)&&attr(r,"height",T[5])},i(T){v||(transition_in(o.$$.fragment,T),transition_in(u.$$.fragment,T),v=!0)},o(T){transition_out(o.$$.fragment,T),transition_out(u.$$.fragment,T),v=!1},d(T){T&&detach(e),destroy_each(y,T),destroy_component(o),destroy_component(u)}}}function create_if_block_1$5(t){let e,r,a,i,o,u,c,f,d,m,h,_;return{c(){e=svg_element("circle"),attr(e,"tipcontent",r=t[0][t[14]][t[17]]+", "+t[15]),attr(e,"cx",a=t[8](t[0][t[14]][t[17]])),attr(e,"cy",i=t[9](t[15])),attr(e,"r",o=t[7][t[6]].sourceData[t[14]].size),attr(e,"stroke",u=t[7][t[6]].sourceData[t[14]].strokeCol.hex),attr(e,"stroke-opacity",c=t[7][t[6]].sourceData[t[14]].strokeCol.alpha),attr(e,"stroke-width",f=t[7][t[6]].sourceData[t[14]].strokeWidth),attr(e,"fill",d=t[7][t[6]].sourceData[t[14]].col.hex),attr(e,"fill-opacity",m=t[7][t[6]].sourceData[t[14]].col.alpha)},m(p,g){insert(p,e,g),h||(_=action_destroyer(tooltip.call(null,e)),h=!0)},p(p,g){g&3&&r!==(r=p[0][p[14]][p[17]]+", "+p[15])&&attr(e,"tipcontent",r),g&257&&a!==(a=p[8](p[0][p[14]][p[17]]))&&attr(e,"cx",a),g&514&&i!==(i=p[9](p[15]))&&attr(e,"cy",i),g&192&&o!==(o=p[7][p[6]].sourceData[p[14]].size)&&attr(e,"r",o),g&192&&u!==(u=p[7][p[6]].sourceData[p[14]].strokeCol.hex)&&attr(e,"stroke",u),g&192&&c!==(c=p[7][p[6]].sourceData[p[14]].strokeCol.alpha)&&attr(e,"stroke-opacity",c),g&192&&f!==(f=p[7][p[6]].sourceData[p[14]].strokeWidth)&&attr(e,"stroke-width",f),g&192&&d!==(d=p[7][p[6]].sourceData[p[14]].col.hex)&&attr(e,"fill",d),g&192&&m!==(m=p[7][p[6]].sourceData[p[14]].col.alpha)&&attr(e,"fill-opacity",m)},d(p){p&&detach(e),h=!1,_()}}}function create_each_block_1$3(t){let e=t[15]!==null&&!isNaN(t[15])&&t[0][t[14]][t[17]]!==null&&!isNaN(t[0][t[14]][t[17]]),r,a=e&&create_if_block_1$5(t);return{c(){a&&a.c(),r=empty$1()},m(i,o){a&&a.m(i,o),insert(i,r,o)},p(i,o){o&3&&(e=i[15]!==null&&!isNaN(i[15])&&i[0][i[14]][i[17]]!==null&&!isNaN(i[0][i[14]][i[17]])),e?a?a.p(i,o):(a=create_if_block_1$5(i),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null)},d(i){i&&detach(r),a&&a.d(i)}}}function create_each_block$6(t){let e,r=ensure_array_like(t[12]),a=[];for(let i=0;i<r.length;i+=1)a[i]=create_each_block_1$3(get_each_context_1$3(t,r,i));return{c(){for(let i=0;i<a.length;i+=1)a[i].c();e=empty$1()},m(i,o){for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(i,o);insert(i,e,o)},p(i,o){if(o&963){r=ensure_array_like(i[12]);let u;for(u=0;u<r.length;u+=1){const c=get_each_context_1$3(i,r,u);a[u]?a[u].p(c,o):(a[u]=create_each_block_1$3(c),a[u].c(),a[u].m(e.parentNode,e))}for(;u<a.length;u+=1)a[u].d(1);a.length=r.length}},d(i){i&&detach(e),destroy_each(a,i)}}}function create_fragment$c(t){var i,o;let e,r,a=((i=t[7][t[6]])==null?void 0:i.graph)==="raw"&&((o=t[7][t[6]])==null?void 0:o.sourceData.length)>0&&create_if_block$8(t);return{c(){a&&a.c(),e=empty$1()},m(u,c){a&&a.m(u,c),insert(u,e,c),r=!0},p(u,[c]){var f,d;((f=u[7][u[6]])==null?void 0:f.graph)==="raw"&&((d=u[7][u[6]])==null?void 0:d.sourceData.length)>0?a?(a.p(u,c),c&192&&transition_in(a,1)):(a=create_if_block$8(u),a.c(),transition_in(a,1),a.m(e.parentNode,e)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(u){r||(transition_in(a),r=!0)},o(u){transition_out(a),r=!1},d(u){u&&detach(e),a&&a.d(u)}}}function instance$c(t,e,r){let a,i,o,u,c,f,d;component_subscribe(t,activeGraphTab,D=>r(6,c=D)),component_subscribe(t,graphs,D=>r(7,f=D)),component_subscribe(t,data,D=>r(11,d=D));const m={top:20,bottom:60,left:60,right:20};let h=[],_=[],p,g;return t.$$.update=()=>{var D,v,b;if(t.$$.dirty&192&&r(4,a=(D=f[c])==null?void 0:D.params.width),t.$$.dirty&192&&r(5,i=(v=f[c])==null?void 0:v.params.height),t.$$.dirty&32&&r(2,o=i-m.top-m.bottom),t.$$.dirty&16&&r(3,u=a-m.left-m.right),t.$$.dirty&2255){r(0,h=[]),r(1,_=[]);let y,T;((b=f[c])==null?void 0:b.graph)==="raw"&&(f[c].sourceData.forEach((w,A)=>{d.findIndex(E=>E.id===w.tableID),w.chartvalues.x.field!=""&&(y=getDataFromSource(A,w.chartvalues.x)),w.chartvalues.y.field!=""&&(T=getDataFromSource(A,w.chartvalues.y)),h.push(y),_.push(T)}),r(8,p=linear().domain([f[c].params.xDomainMin,f[c].params.xDomainMax]).range([0,u])),r(9,g=linear().domain([f[c].params.yDomainMin,f[c].params.yDomainMax]).range([o,0])))}},[h,_,o,u,a,i,c,f,p,g,m,d]}class Raw extends SvelteComponent{constructor(e){super(),init(this,e,instance$c,create_fragment$c,safe_not_equal,{})}}function create_if_block$7(t){let e,r,a,i,o,u,c,f,d,m,h,_,p,g,D,v,b,y,T,w,A,E,k,O,L,P,C,W,x,M,S,$,F,H,I,N,U;function z(G){t[2](G)}let V={min:100,max:1e3,limits:[5,1/0],label:"Width:"};t[1][t[0]].params.width!==void 0&&(V.value=t[1][t[0]].params.width),a=new Slider({props:V}),binding_callbacks.push(()=>bind(a,"value",z));function ne(G){t[3](G)}let B={min:10,max:3e3,limits:[5,1/0],label:"Height: "};t[1][t[0]].params.height!==void 0&&(B.value=t[1][t[0]].params.height),c=new Slider({props:B}),binding_callbacks.push(()=>bind(c,"value",ne));function ce(G){t[5](G)}let le={min:-10,max:30,label:"Min X:"};t[1][t[0]].params.xDomainMin!==void 0&&(le.value=t[1][t[0]].params.xDomainMin),v=new Slider({props:le}),binding_callbacks.push(()=>bind(v,"value",ce));function q(G){t[6](G)}let he={min:-10,max:30,label:"Max X:"};t[1][t[0]].params.xDomainMax!==void 0&&(he.value=t[1][t[0]].params.xDomainMax),w=new Slider({props:he}),binding_callbacks.push(()=>bind(w,"value",q));function J(G){t[8](G)}let ae={min:-10,max:30,label:"Min Y:"};t[1][t[0]].params.yDomainMin!==void 0&&(ae.value=t[1][t[0]].params.yDomainMin),x=new Slider({props:ae}),binding_callbacks.push(()=>bind(x,"value",J));function ue(G){t[9](G)}let ie={min:-10,max:30,label:"Max Y:"};return t[1][t[0]].params.yDomainMax!==void 0&&(ie.value=t[1][t[0]].params.yDomainMax),F=new Slider({props:ie}),binding_callbacks.push(()=>bind(F,"value",ue)),{c(){e=element("div"),r=element("div"),create_component(a.$$.fragment),o=space(),u=element("div"),create_component(c.$$.fragment),d=space(),m=element("div"),h=element("label"),h.textContent="X-axis:",_=space(),p=element("input"),g=space(),D=element("div"),create_component(v.$$.fragment),y=space(),T=element("div"),create_component(w.$$.fragment),E=space(),k=element("div"),O=element("label"),O.textContent="Y-axis:",L=space(),P=element("input"),C=space(),W=element("div"),create_component(x.$$.fragment),S=space(),$=element("div"),create_component(F.$$.fragment),attr(r,"class","sliderContainer"),attr(u,"class","sliderContainer"),attr(h,"for","val"),attr(p,"type","text"),attr(p,"id","min"),attr(m,"class","sliderContainer"),attr(D,"class","sliderContainer"),attr(T,"class","sliderContainer"),attr(O,"for","val"),attr(P,"type","text"),attr(P,"id","min"),attr(k,"class","sliderContainer"),attr(W,"class","sliderContainer"),attr($,"class","sliderContainer"),attr(e,"class","chartControls")},m(G,fe){insert(G,e,fe),append(e,r),mount_component(a,r,null),append(e,o),append(e,u),mount_component(c,u,null),append(e,d),append(e,m),append(m,h),append(m,_),append(m,p),set_input_value(p,t[1][t[0]].params.xAxisLabel),append(e,g),append(e,D),mount_component(v,D,null),append(e,y),append(e,T),mount_component(w,T,null),append(e,E),append(e,k),append(k,O),append(k,L),append(k,P),set_input_value(P,t[1][t[0]].params.yAxisLabel),append(e,C),append(e,W),mount_component(x,W,null),append(e,S),append(e,$),mount_component(F,$,null),I=!0,N||(U=[listen(p,"input",t[4]),listen(P,"input",t[7])],N=!0)},p(G,fe){const ve={};!i&&fe&3&&(i=!0,ve.value=G[1][G[0]].params.width,add_flush_callback(()=>i=!1)),a.$set(ve);const oe={};!f&&fe&3&&(f=!0,oe.value=G[1][G[0]].params.height,add_flush_callback(()=>f=!1)),c.$set(oe),fe&3&&p.value!==G[1][G[0]].params.xAxisLabel&&set_input_value(p,G[1][G[0]].params.xAxisLabel);const Te={};!b&&fe&3&&(b=!0,Te.value=G[1][G[0]].params.xDomainMin,add_flush_callback(()=>b=!1)),v.$set(Te);const we={};!A&&fe&3&&(A=!0,we.value=G[1][G[0]].params.xDomainMax,add_flush_callback(()=>A=!1)),w.$set(we),fe&3&&P.value!==G[1][G[0]].params.yAxisLabel&&set_input_value(P,G[1][G[0]].params.yAxisLabel);const Q={};!M&&fe&3&&(M=!0,Q.value=G[1][G[0]].params.yDomainMin,add_flush_callback(()=>M=!1)),x.$set(Q);const X={};!H&&fe&3&&(H=!0,X.value=G[1][G[0]].params.yDomainMax,add_flush_callback(()=>H=!1)),F.$set(X)},i(G){I||(transition_in(a.$$.fragment,G),transition_in(c.$$.fragment,G),transition_in(v.$$.fragment,G),transition_in(w.$$.fragment,G),transition_in(x.$$.fragment,G),transition_in(F.$$.fragment,G),I=!0)},o(G){transition_out(a.$$.fragment,G),transition_out(c.$$.fragment,G),transition_out(v.$$.fragment,G),transition_out(w.$$.fragment,G),transition_out(x.$$.fragment,G),transition_out(F.$$.fragment,G),I=!1},d(G){G&&detach(e),destroy_component(a),destroy_component(c),destroy_component(v),destroy_component(w),destroy_component(x),destroy_component(F),N=!1,run_all(U)}}}function create_fragment$b(t){let e,r,a=t[0]>=0&&create_if_block$7(t);return{c(){a&&a.c(),e=empty$1()},m(i,o){a&&a.m(i,o),insert(i,e,o),r=!0},p(i,[o]){i[0]>=0?a?(a.p(i,o),o&1&&transition_in(a,1)):(a=create_if_block$7(i),a.c(),transition_in(a,1),a.m(e.parentNode,e)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(i){r||(transition_in(a),r=!0)},o(i){transition_out(a),r=!1},d(i){i&&detach(e),a&&a.d(i)}}}function instance$b(t,e,r){let a,i;component_subscribe(t,activeGraphTab,p=>r(0,a=p)),component_subscribe(t,graphs,p=>r(1,i=p));function o(p){t.$$.not_equal(i[a].params.width,p)&&(i[a].params.width=p,graphs.set(i))}function u(p){t.$$.not_equal(i[a].params.height,p)&&(i[a].params.height=p,graphs.set(i))}function c(){i[a].params.xAxisLabel=this.value,graphs.set(i)}function f(p){t.$$.not_equal(i[a].params.xDomainMin,p)&&(i[a].params.xDomainMin=p,graphs.set(i))}function d(p){t.$$.not_equal(i[a].params.xDomainMax,p)&&(i[a].params.xDomainMax=p,graphs.set(i))}function m(){i[a].params.yAxisLabel=this.value,graphs.set(i)}function h(p){t.$$.not_equal(i[a].params.yDomainMin,p)&&(i[a].params.yDomainMin=p,graphs.set(i))}function _(p){t.$$.not_equal(i[a].params.yDomainMax,p)&&(i[a].params.yDomainMax=p,graphs.set(i))}return[a,i,o,u,c,f,d,m,h,_]}class Raw_controls extends SvelteComponent{constructor(e){super(),init(this,e,instance$b,create_fragment$b,safe_not_equal,{})}}const graphMap={actigram:{graph:Actigram,controls:Actigram_controls,prototypechartvalues:{time:"time",values:"values"},prototypeother:{col:{hex:"#1B1D50",alpha:.5},showOnsets:!0},othertypes:["colour","checkbox"],params:{startTime:DateTime.now().set({hour:0,minute:0,second:0,millisecond:0}).toISO().slice(0,16),periodHrs:24,binSizeHrs:.25,width:800,dayHeight:10,betweenHeight:2,doublePlot:2,scaleAxes:"byPlot",showAxes:!1},chartData:{data:[{time:[],values:[],day:[],scaleLimits:[]}],startOffsets:[],onsets:[]}},periodogram:{graph:Periodogram,controls:Periodogram_controls,prototypechartvalues:{time:"any",values:"any"},prototypeother:{col:{hex:"#78322e",alpha:.5}},othertypes:["colour"],params:{width:600,height:200,minPeriod:4,maxPeriod:30,stepPeriod:.25,binSizeHrs:.25},chartData:{}},raw:{graph:Raw,controls:Raw_controls,prototypechartvalues:{x:"any",y:"any"},prototypeother:{col:{hex:"#78322e",alpha:.5},size:2,strokeWidth:1,strokeCol:{hex:"#000000",alpha:.9}},othertypes:["colour","slider","slider","colour"],params:{width:600,height:200,yDomainMin:0,yDomainMax:200,xDomainMin:0,xDomainMax:680,yAxisLabel:"y-axis",xAxisLabel:"x-axis title here"},chartData:{}}};function getRandomHexColour(){return"#"+Math.floor(Math.random()*16777215).toString(16)}function putChartValues(t,e){const r={};for(let a=0;a<t.length;a++)r[t[a]]={field:e[a],processSteps:[],processedData:[]};return r}function makeNewChart(t){let e={graph:t,id:getID(),sourceData:[{tableID:0,name:"Data 0",chartvalues:putChartValues(Object.keys(graphMap[t].prototypechartvalues),["time","value0"]),...deepCopy$1(graphMap[t].prototypeother)},{tableID:0,name:"Data 1",chartvalues:putChartValues(Object.keys(graphMap[t].prototypechartvalues),["time","value1"]),...deepCopy$1(graphMap[t].prototypeother)}],params:{...deepCopy$1(graphMap[t].params)},chartData:{...deepCopy$1(graphMap[t].chartData)}};for(let r=0;r<graphMap[t].othertypes.length;r++)if(graphMap[t].othertypes[r]==="colour")for(let a=0;a<e.sourceData.length;a++)e.sourceData[a][Object.keys(graphMap[t].prototypeother)[r]].hex=getRandomHexColour();get_store_value(graphs).push(e),get_store_value(graphTabs).push({name:"Chart "+getID()}),graphTabs.update(r=>[...r]),activeGraphTab.update(()=>get_store_value(graphTabs).length-1)}function getID(){if(get_store_value(graphs).length===0)return 0;let t=[];return get_store_value(graphs).forEach(e=>t.push(e.id)),Math.max(...t)+1}function deepCopy$1(t){return JSON.parse(JSON.stringify(t))}function get_each_context$5(t,e,r){const a=t.slice();return a[29]=e[r],a[30]=e,a[31]=r,a}function get_each_context_1$2(t,e,r){const a=t.slice();return a[32]=e[r],a[33]=e,a[34]=r,a}function get_each_context_2$2(t,e,r){const a=t.slice();return a[35]=e[r],a[36]=e,a[37]=r,a}function get_each_context_3$1(t,e,r){const a=t.slice();return a[38]=e[r],a[40]=r,a}function get_each_context_4$1(t,e,r){const a=t.slice();return a[41]=e[r],a}function create_else_block$3(t){let e,r,a=t[3][t[0]].name+"",i,o,u,c,f,d,m,h,_,p=ensure_array_like(t[1][t[0]].sourceData),g=[];for(let v=0;v<p.length;v+=1)g[v]=create_each_block$5(get_each_context$5(t,p,v));const D=v=>transition_out(g[v],1,1,()=>{g[v]=null});return{c(){e=element("div"),r=element("h1"),i=text(a),o=text(" Data"),u=space(),c=element("span"),c.textContent="+",f=space(),d=element("div");for(let v=0;v<g.length;v+=1)g[v].c();set_style(r,"display","inline"),attr(c,"class","addbutton hoverbutton showContextMenu svelte-tzfpl2"),set_style(e,"margin","1em 1em 0 0"),attr(d,"class","graphDataTree svelte-tzfpl2")},m(v,b){insert(v,e,b),append(e,r),append(r,i),append(r,o),append(e,u),append(e,c),insert(v,f,b),insert(v,d,b);for(let y=0;y<g.length;y+=1)g[y]&&g[y].m(d,null);m=!0,h||(_=listen(c,"click",t[11]),h=!0)},p(v,b){if((!m||b[0]&9)&&a!==(a=v[3][v[0]].name+"")&&set_data(i,a),b[0]&503){p=ensure_array_like(v[1][v[0]].sourceData);let y;for(y=0;y<p.length;y+=1){const T=get_each_context$5(v,p,y);g[y]?(g[y].p(T,b),transition_in(g[y],1)):(g[y]=create_each_block$5(T),g[y].c(),transition_in(g[y],1),g[y].m(d,null))}for(group_outros(),y=p.length;y<g.length;y+=1)D(y);check_outros()}},i(v){if(!m){for(let b=0;b<p.length;b+=1)transition_in(g[b]);m=!0}},o(v){g=g.filter(Boolean);for(let b=0;b<g.length;b+=1)transition_out(g[b]);m=!1},d(v){v&&(detach(e),detach(f),detach(d)),destroy_each(g,v),h=!1,_()}}}function create_if_block$6(t){return{c:noop,m:noop,p:noop,i:noop,o:noop,d:noop}}function create_each_block_4$1(t){let e,r=t[2][t[2].findIndex(o)].data[t[41]].name+"",a,i;function o(...u){return t[16](t[29],...u)}return{c(){e=element("option"),a=text(r),e.__value=i=t[41],set_input_value(e,e.__value)},m(u,c){insert(u,e,c),append(e,a)},p(u,c){t=u,c[0]&7&&r!==(r=t[2][t[2].findIndex(o)].data[t[41]].name+"")&&set_data(a,r),c[0]&67&&i!==(i=t[41])&&(e.__value=i,set_input_value(e,e.__value))},d(u){u&&detach(e)}}}function create_each_block_3$1(t){let e,r,a=t[38].process+"",i,o,u,c,f,d,m,h,_;function p(...y){return t[19](t[31],t[35],t[40],...y)}function g(...y){return t[20](t[29],...y)}function D(...y){return t[21](t[35],t[31],t[40],...y)}var v=componentMap[t[38].process].component;function b(y,T){return{props:{paramsStart:y[38].parameters,typeTime:{type:y[2][y[2].findIndex(g)].data[y[29].chartvalues[y[35]].field].type,tocheck:{tableID:y[29].tableID,key:y[35]}}}}}return v&&(d=construct_svelte_component(v,b(t)),d.$on("update",D)),{c(){e=element("details"),r=element("summary"),i=text(a),o=space(),u=element("div"),u.textContent="",c=space(),f=element("div"),d&&create_component(d.$$.fragment),attr(u,"class","deleteProcess hoverbutton svelte-tzfpl2"),attr(r,"class","svelte-tzfpl2"),attr(f,"class","processDetails svelte-tzfpl2"),e.open=!0,attr(e,"class","process svelte-tzfpl2")},m(y,T){insert(y,e,T),append(e,r),append(r,i),append(r,o),append(r,u),append(e,c),append(e,f),d&&mount_component(d,f,null),m=!0,h||(_=listen(u,"click",p),h=!0)},p(y,T){if(t=y,(!m||T[0]&3)&&a!==(a=t[38].process+"")&&set_data(i,a),T[0]&3&&v!==(v=componentMap[t[38].process].component)){if(d){group_outros();const w=d;transition_out(w.$$.fragment,1,0,()=>{destroy_component(w,1)}),check_outros()}v?(d=construct_svelte_component(v,b(t)),d.$on("update",D),create_component(d.$$.fragment),transition_in(d.$$.fragment,1),mount_component(d,f,null)):d=null}else if(v){const w={};T[0]&3&&(w.paramsStart=t[38].parameters),T[0]&7&&(w.typeTime={type:t[2][t[2].findIndex(g)].data[t[29].chartvalues[t[35]].field].type,tocheck:{tableID:t[29].tableID,key:t[35]}}),d.$set(w)}},i(y){m||(d&&transition_in(d.$$.fragment,y),m=!0)},o(y){d&&transition_out(d.$$.fragment,y),m=!1},d(y){y&&detach(e),d&&destroy_component(d),h=!1,_()}}}function create_each_block_2$2(t){let e,r,a=t[35]+"",i,o,u,c,f,d,m,h,_,p,g,D;function v(...O){return t[15](t[31],t[35],...O)}let b=ensure_array_like(t[6](t[29])),y=[];for(let O=0;O<b.length;O+=1)y[O]=create_each_block_4$1(get_each_context_4$1(t,b,O));function T(){t[17].call(d,t[35],t[30],t[31])}function w(...O){return t[18](t[31],t[35],...O)}let A=ensure_array_like(t[29].chartvalues[t[35]].processSteps),E=[];for(let O=0;O<A.length;O+=1)E[O]=create_each_block_3$1(get_each_context_3$1(t,A,O));const k=O=>transition_out(E[O],1,1,()=>{E[O]=null});return{c(){e=element("details"),r=element("summary"),i=text(a),o=text(`:
              `),u=element("span"),u.textContent="+",c=space(),f=element("span"),d=element("select");for(let O=0;O<y.length;O+=1)y[O].c();m=space();for(let O=0;O<E.length;O+=1)E[O].c();h=space(),attr(u,"class","addbutton hoverbutton showContextMenu svelte-tzfpl2"),attr(d,"class","selectField"),t[29].chartvalues[t[35]].field===void 0&&add_render_callback(T),attr(r,"class","svelte-tzfpl2"),e.open=!0,attr(e,"class",_="field "+(t[29].chartvalues[t[35]].processSteps.length>0?"":"no-arrow")+" svelte-tzfpl2")},m(O,L){insert(O,e,L),append(e,r),append(r,i),append(r,o),append(r,u),append(r,c),append(r,f),append(f,d);for(let P=0;P<y.length;P+=1)y[P]&&y[P].m(d,null);select_option(d,t[29].chartvalues[t[35]].field,!0),append(e,m);for(let P=0;P<E.length;P+=1)E[P]&&E[P].m(e,null);append(e,h),p=!0,g||(D=[listen(u,"click",v),listen(d,"change",T),listen(d,"change",w)],g=!0)},p(O,L){if(t=O,(!p||L[0]&3)&&a!==(a=t[35]+"")&&set_data(i,a),L[0]&71){b=ensure_array_like(t[6](t[29]));let P;for(P=0;P<b.length;P+=1){const C=get_each_context_4$1(t,b,P);y[P]?y[P].p(C,L):(y[P]=create_each_block_4$1(C),y[P].c(),y[P].m(d,null))}for(;P<y.length;P+=1)y[P].d(1);y.length=b.length}if(L[0]&67&&select_option(d,t[29].chartvalues[t[35]].field),L[0]&55){A=ensure_array_like(t[29].chartvalues[t[35]].processSteps);let P;for(P=0;P<A.length;P+=1){const C=get_each_context_3$1(t,A,P);E[P]?(E[P].p(C,L),transition_in(E[P],1)):(E[P]=create_each_block_3$1(C),E[P].c(),transition_in(E[P],1),E[P].m(e,h))}for(group_outros(),P=A.length;P<E.length;P+=1)k(P);check_outros()}(!p||L[0]&67&&_!==(_="field "+(t[29].chartvalues[t[35]].processSteps.length>0?"":"no-arrow")+" svelte-tzfpl2"))&&attr(e,"class",_)},i(O){if(!p){for(let L=0;L<A.length;L+=1)transition_in(E[L]);p=!0}},o(O){E=E.filter(Boolean);for(let L=0;L<E.length;L+=1)transition_out(E[L]);p=!1},d(O){O&&detach(e),destroy_each(y,O),destroy_each(E,O),g=!1,run_all(D)}}}function create_if_block_3$3(t){let e,r,a,i,o,u,c,f,d;function m(){t[22].call(r,t[31],t[32])}function h(p){t[23](p,t[31],t[32])}let _={min:"0",max:"1",step:"0.01",limits:[0,1],label:"Alpha: "};return t[1][t[0]].sourceData[t[31]][t[32]].alpha!==void 0&&(_.value=t[1][t[0]].sourceData[t[31]][t[32]].alpha),o=new Slider({props:_}),binding_callbacks.push(()=>bind(o,"value",h)),{c(){e=element("div"),r=element("input"),a=space(),i=element("div"),create_component(o.$$.fragment),attr(r,"class","colourPicker svelte-tzfpl2"),attr(r,"id",t[31]),attr(r,"type","color"),set_style(r,"background",t[1][t[0]].sourceData[t[31]][t[32]].hex),attr(i,"class","sliderContainer svelte-tzfpl2"),attr(e,"class","colour svelte-tzfpl2")},m(p,g){insert(p,e,g),append(e,r),set_input_value(r,t[1][t[0]].sourceData[t[31]][t[32]].hex),append(e,a),append(e,i),mount_component(o,i,null),c=!0,f||(d=listen(r,"input",m),f=!0)},p(p,g){t=p,(!c||g[0]&3)&&set_style(r,"background",t[1][t[0]].sourceData[t[31]][t[32]].hex),g[0]&67&&set_input_value(r,t[1][t[0]].sourceData[t[31]][t[32]].hex);const D={};!u&&g[0]&3&&(u=!0,D.value=t[1][t[0]].sourceData[t[31]][t[32]].alpha,add_flush_callback(()=>u=!1)),o.$set(D)},i(p){c||(transition_in(o.$$.fragment,p),c=!0)},o(p){transition_out(o.$$.fragment,p),c=!1},d(p){p&&detach(e),destroy_component(o),f=!1,d()}}}function create_if_block_2$3(t){let e,r,a,i;function o(c){t[24](c,t[31],t[32])}let u={min:"0.5",max:"10",step:"0.5",label:t[32].charAt(0).toUpperCase()+t[32].slice(1)+":"};return t[1][t[0]].sourceData[t[31]][t[32]]!==void 0&&(u.value=t[1][t[0]].sourceData[t[31]][t[32]]),r=new Slider({props:u}),binding_callbacks.push(()=>bind(r,"value",o)),{c(){e=element("div"),create_component(r.$$.fragment),attr(e,"class","itemsliderContainer svelte-tzfpl2")},m(c,f){insert(c,e,f),mount_component(r,e,null),i=!0},p(c,f){t=c;const d={};f[0]&3&&(d.label=t[32].charAt(0).toUpperCase()+t[32].slice(1)+":"),!a&&f[0]&3&&(a=!0,d.value=t[1][t[0]].sourceData[t[31]][t[32]],add_flush_callback(()=>a=!1)),r.$set(d)},i(c){i||(transition_in(r.$$.fragment,c),i=!0)},o(c){transition_out(r.$$.fragment,c),i=!1},d(c){c&&detach(e),destroy_component(r)}}}function create_if_block_1$4(t){let e,r,a=t[32].charAt(0).toUpperCase()+t[32].slice(1)+":",i,o,u,c,f;function d(){t[25].call(u,t[31],t[32])}return{c(){e=element("div"),r=element("a"),i=text(a),o=space(),u=element("input"),attr(u,"type","checkbox"),attr(e,"class","itemsliderContainer svelte-tzfpl2")},m(m,h){insert(m,e,h),append(e,r),append(r,i),append(e,o),append(e,u),u.checked=t[1][t[0]].sourceData[t[31]][t[32]],c||(f=listen(u,"change",d),c=!0)},p(m,h){t=m,h[0]&3&&a!==(a=t[32].charAt(0).toUpperCase()+t[32].slice(1)+":")&&set_data(i,a),h[0]&67&&(u.checked=t[1][t[0]].sourceData[t[31]][t[32]])},d(m){m&&detach(e),c=!1,f()}}}function create_each_block_1$2(t){let e,r,a,i,o=graphMap[t[1][t[0]].graph].othertypes[t[34]]==="colour"&&create_if_block_3$3(t),u=graphMap[t[1][t[0]].graph].othertypes[t[34]]==="slider"&&create_if_block_2$3(t),c=graphMap[t[1][t[0]].graph].othertypes[t[34]]==="checkbox"&&create_if_block_1$4(t);return{c(){o&&o.c(),e=space(),u&&u.c(),r=space(),c&&c.c(),a=empty$1()},m(f,d){o&&o.m(f,d),insert(f,e,d),u&&u.m(f,d),insert(f,r,d),c&&c.m(f,d),insert(f,a,d),i=!0},p(f,d){graphMap[f[1][f[0]].graph].othertypes[f[34]]==="colour"?o?(o.p(f,d),d[0]&3&&transition_in(o,1)):(o=create_if_block_3$3(f),o.c(),transition_in(o,1),o.m(e.parentNode,e)):o&&(group_outros(),transition_out(o,1,1,()=>{o=null}),check_outros()),graphMap[f[1][f[0]].graph].othertypes[f[34]]==="slider"?u?(u.p(f,d),d[0]&3&&transition_in(u,1)):(u=create_if_block_2$3(f),u.c(),transition_in(u,1),u.m(r.parentNode,r)):u&&(group_outros(),transition_out(u,1,1,()=>{u=null}),check_outros()),graphMap[f[1][f[0]].graph].othertypes[f[34]]==="checkbox"?c?c.p(f,d):(c=create_if_block_1$4(f),c.c(),c.m(a.parentNode,a)):c&&(c.d(1),c=null)},i(f){i||(transition_in(o),transition_in(u),i=!0)},o(f){transition_out(o),transition_out(u),i=!1},d(f){f&&(detach(e),detach(r),detach(a)),o&&o.d(f),u&&u.d(f),c&&c.d(f)}}}function create_each_block$5(t){let e,r,a,i,o,u,c,f,d,m=t[2].find(A).displayName+"",h,_,p,g,D,v,b;function y(W){t[12](W,t[29])}let T={};t[29].name!==void 0&&(T.value=t[29].name),a=new InPlaceEdit({props:T}),binding_callbacks.push(()=>bind(a,"value",y));function w(...W){return t[13](t[31],...W)}function A(...W){return t[14](t[29],...W)}let E=ensure_array_like(Object.keys(t[29].chartvalues)),k=[];for(let W=0;W<E.length;W+=1)k[W]=create_each_block_2$2(get_each_context_2$2(t,E,W));const O=W=>transition_out(k[W],1,1,()=>{k[W]=null});let L=ensure_array_like(Object.keys(graphMap[t[1][t[0]].graph].prototypeother)),P=[];for(let W=0;W<L.length;W+=1)P[W]=create_each_block_1$2(get_each_context_1$2(t,L,W));const C=W=>transition_out(P[W],1,1,()=>{P[W]=null});return{c(){e=element("details"),r=element("summary"),create_component(a.$$.fragment),o=space(),u=element("div"),u.textContent="",c=space(),f=element("div"),d=text("Table: "),h=text(m),_=space();for(let W=0;W<k.length;W+=1)k[W].c();p=space();for(let W=0;W<P.length;W+=1)P[W].c();g=space(),attr(u,"class","deleteTable hoverbutton svelte-tzfpl2"),attr(r,"class","svelte-tzfpl2"),attr(f,"class","tableLabel svelte-tzfpl2"),e.open=!0,attr(e,"class","dataTable svelte-tzfpl2")},m(W,x){insert(W,e,x),append(e,r),mount_component(a,r,null),append(r,o),append(r,u),append(e,c),append(e,f),append(f,d),append(f,h),append(e,_);for(let M=0;M<k.length;M+=1)k[M]&&k[M].m(e,null);append(e,p);for(let M=0;M<P.length;M+=1)P[M]&&P[M].m(e,null);append(e,g),D=!0,v||(b=listen(u,"click",w),v=!0)},p(W,x){t=W;const M={};if(!i&&x[0]&3&&(i=!0,M.value=t[29].name,add_flush_callback(()=>i=!1)),a.$set(M),(!D||x[0]&7)&&m!==(m=t[2].find(A).displayName+"")&&set_data(h,m),x[0]&375){E=ensure_array_like(Object.keys(t[29].chartvalues));let S;for(S=0;S<E.length;S+=1){const $=get_each_context_2$2(t,E,S);k[S]?(k[S].p($,x),transition_in(k[S],1)):(k[S]=create_each_block_2$2($),k[S].c(),transition_in(k[S],1),k[S].m(e,p))}for(group_outros(),S=E.length;S<k.length;S+=1)O(S);check_outros()}if(x[0]&3){L=ensure_array_like(Object.keys(graphMap[t[1][t[0]].graph].prototypeother));let S;for(S=0;S<L.length;S+=1){const $=get_each_context_1$2(t,L,S);P[S]?(P[S].p($,x),transition_in(P[S],1)):(P[S]=create_each_block_1$2($),P[S].c(),transition_in(P[S],1),P[S].m(e,g))}for(group_outros(),S=L.length;S<P.length;S+=1)C(S);check_outros()}},i(W){if(!D){transition_in(a.$$.fragment,W);for(let x=0;x<E.length;x+=1)transition_in(k[x]);for(let x=0;x<L.length;x+=1)transition_in(P[x]);D=!0}},o(W){transition_out(a.$$.fragment,W),k=k.filter(Boolean);for(let x=0;x<k.length;x+=1)transition_out(k[x]);P=P.filter(Boolean);for(let x=0;x<P.length;x+=1)transition_out(P[x]);D=!1},d(W){W&&detach(e),destroy_component(a),destroy_each(k,W),destroy_each(P,W),v=!1,b()}}}function create_fragment$a(t){let e,r,a,i;const o=[create_if_block$6,create_else_block$3],u=[];function c(f,d){return f[0]<0?0:1}return e=c(t),r=u[e]=o[e](t),{c(){r.c(),a=empty$1()},m(f,d){u[e].m(f,d),insert(f,a,d),i=!0},p(f,d){let m=e;e=c(f),e===m?u[e].p(f,d):(group_outros(),transition_out(u[m],1,1,()=>{u[m]=null}),check_outros(),r=u[e],r?r.p(f,d):(r=u[e]=o[e](f),r.c()),transition_in(r,1),r.m(a.parentNode,a))},i(f){i||(transition_in(r),i=!0)},o(f){transition_out(r),i=!1},d(f){f&&detach(a),u[e].d(f)}}}function deepCopy(t){return JSON.parse(JSON.stringify(t))}function instance$a(t,e,r){let a,i,o,u,c;component_subscribe(t,data,$=>r(2,a=$)),component_subscribe(t,contextMenu,$=>r(28,i=$)),component_subscribe(t,activeGraphTab,$=>r(0,o=$)),component_subscribe(t,graphs,$=>r(1,u=$)),component_subscribe(t,graphTabs,$=>r(3,c=$)),onMount(()=>{updateGraphProcess(o,0,"time"),updateGraphProcess(o,1,"time"),set_store_value(graphs,u[o].params.dayHeight=15,u)});let f={},d={};function m($,F,H,I){set_store_value(graphs,u[o].sourceData[F].chartvalues[$].processSteps[H].parameters=I,u),updateGraphProcess(o,F,$)}function h($,F,H){u[o].sourceData[$].chartvalues[F].processSteps.splice(H,1),updateGraphProcess(o,$,F)}function _($){return Object.keys(a[a.findIndex(F=>F.id===$.tableID)].data)}function p($){let F={};Object.keys(f).forEach((H,I)=>{F[H]={field:Object.keys(a[a.findIndex(N=>N.id===$)].data)[I],processSteps:[],processedData:[]}}),u[o].sourceData.push({tableID:$,name:"Data "+(1+u[o].sourceData.length),chartvalues:F,...deepCopy(d)}),graphs.set(u)}function g($){graphs.update(F=>{const H=[...F],I=H[o].id,N=H.find(U=>U.id===I);return N&&N.sourceData&&N.sourceData.splice($,1),H})}function D($,F,H){set_store_value(contextMenu,i={labels:[],funcs:[]},i);const I=getFieldType(u[o].sourceData[F].tableID,u[o].sourceData[F].chartvalues[H].field),N=Object.keys(componentMap);for(let U=0;U<N.length;U++)componentMap[N[U]].forTypes.includes(I)&&(set_store_value(contextMenu,i.labels[U]=N[U],i),set_store_value(contextMenu,i.funcs[U]=()=>addProcess(N[U],$,F,H),i))}function v(){set_store_value(contextMenu,i.labels=[],i),set_store_value(contextMenu,i.funcs=[],i);for(let $=0;$<a.length;$++)i.labels.push(a[$].displayName),i.funcs.push(()=>p(a[$].id))}const b=$=>{$.preventDefault(),v()};function y($,F){t.$$.not_equal(F.name,$)&&(F.name=$,graphs.set(u))}const T=($,F)=>{F.preventDefault(),g($)},w=($,F)=>F.id===$.tableID,A=($,F,H)=>{H.preventDefault(),D("graph",$,F)},E=($,F)=>F.id===$.tableID;function k($,F,H){F[H].chartvalues[$].field=select_value(this),graphs.set(u),r(6,_)}const O=($,F,H)=>{updateGraphProcess(o,$,F)},L=($,F,H,I)=>{I.preventDefault(),h($,F,H)},P=($,F)=>F.id===$.tableID,C=($,F,H,I)=>{m($,F,H,I.detail.params)};function W($,F){u[o].sourceData[$][F].hex=this.value,graphs.set(u),r(6,_)}function x($,F,H){t.$$.not_equal(u[o].sourceData[F][H].alpha,$)&&(u[o].sourceData[F][H].alpha=$,graphs.set(u))}function M($,F,H){t.$$.not_equal(u[o].sourceData[F][H],$)&&(u[o].sourceData[F][H]=$,graphs.set(u))}function S($,F){u[o].sourceData[$][F]=this.checked,graphs.set(u),r(6,_)}return t.$$.update=()=>{t.$$.dirty[0]&3&&o>=0&&(f=graphMap[u[o].graph].prototypechartvalues,d=graphMap[u[o].graph].prototypeother)},[o,u,a,c,m,h,_,g,D,v,p,b,y,T,w,A,E,k,O,L,P,C,W,x,M,S]}class ChartMaster extends SvelteComponent{constructor(e){super(),init(this,e,instance$a,create_fragment$a,safe_not_equal,{addDataToGraph:10},null,[-1,-1])}get addDataToGraph(){return this.$$.ctx[10]}}function create_else_block_1$1(t){let e=t[1][t[0]].graph+"",r;return{c(){r=text(e)},m(a,i){insert(a,r,i)},p(a,i){i&3&&e!==(e=a[1][a[0]].graph+"")&&set_data(r,e)},i:noop,o:noop,d(a){a&&detach(r)}}}function create_if_block_3$2(t){let e,r,a;var i=graphMap[t[1][t[0]].graph].graph;function o(u,c){return{}}return i&&(e=construct_svelte_component(i,o())),{c(){e&&create_component(e.$$.fragment),r=empty$1()},m(u,c){e&&mount_component(e,u,c),insert(u,r,c),a=!0},p(u,c){if(c&3&&i!==(i=graphMap[u[1][u[0]].graph].graph)){if(e){group_outros();const f=e;transition_out(f.$$.fragment,1,0,()=>{destroy_component(f,1)}),check_outros()}i?(e=construct_svelte_component(i,o()),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,r.parentNode,r)):e=null}},i(u){a||(e&&transition_in(e.$$.fragment,u),a=!0)},o(u){e&&transition_out(e.$$.fragment,u),a=!1},d(u){u&&detach(r),e&&destroy_component(e,u)}}}function create_if_block_2$2(t){return{c:noop,m:noop,p:noop,i:noop,o:noop,d:noop}}function create_default_slot_3$2(t){let e,r,a,i,o,u;e=new GraphTabs({});const c=[create_if_block_2$2,create_if_block_3$2,create_else_block_1$1],f=[];function d(m,h){return m[0]<0?0:m[1][m[0]].graph in graphMap?1:2}return i=d(t),o=f[i]=c[i](t),{c(){create_component(e.$$.fragment),r=space(),a=element("div"),o.c(),attr(a,"id","thePlot"),set_style(a,"height","calc(100% - 4em)"),set_style(a,"overflow","auto"),set_style(a,"width","auto")},m(m,h){mount_component(e,m,h),insert(m,r,h),insert(m,a,h),f[i].m(a,null),u=!0},p(m,h){let _=i;i=d(m),i===_?f[i].p(m,h):(group_outros(),transition_out(f[_],1,1,()=>{f[_]=null}),check_outros(),o=f[i],o?o.p(m,h):(o=f[i]=c[i](m),o.c()),transition_in(o,1),o.m(a,null))},i(m){u||(transition_in(e.$$.fragment,m),transition_in(o),u=!0)},o(m){transition_out(e.$$.fragment,m),transition_out(o),u=!1},d(m){m&&(detach(r),detach(a)),destroy_component(e,m),f[i].d()}}}function create_else_block$2(t){let e=JSON.stringify(t[1][t[0]].sourceData)+"",r;return{c(){r=text(e)},m(a,i){insert(a,r,i)},p(a,i){i&3&&e!==(e=JSON.stringify(a[1][a[0]].sourceData)+"")&&set_data(r,e)},i:noop,o:noop,d(a){a&&detach(r)}}}function create_if_block_1$3(t){let e,r,a,i,o,u,c;var f=graphMap[t[1][t[0]].graph].controls;function d(m,h){return{}}return f&&(i=construct_svelte_component(f,d())),u=new ChartMaster({}),{c(){e=element("div"),r=element("div"),r.innerHTML='<h1 style="padding: 6px 6px 0px 6px; font-weight: bold; font-size: 1.2em; text-decoration: underline;">Controls</h1>',a=space(),i&&create_component(i.$$.fragment),o=space(),create_component(u.$$.fragment),set_style(r,"display","flex"),set_style(r,"min-width","200px"),attr(e,"id","chartControlsTree"),set_style(e,"height","100%"),set_style(e,"width","auto"),set_style(e,"overflow","auto")},m(m,h){insert(m,e,h),append(e,r),append(e,a),i&&mount_component(i,e,null),append(e,o),mount_component(u,e,null),c=!0},p(m,h){if(h&3&&f!==(f=graphMap[m[1][m[0]].graph].controls)){if(i){group_outros();const _=i;transition_out(_.$$.fragment,1,0,()=>{destroy_component(_,1)}),check_outros()}f?(i=construct_svelte_component(f,d()),create_component(i.$$.fragment),transition_in(i.$$.fragment,1),mount_component(i,e,o)):i=null}},i(m){c||(i&&transition_in(i.$$.fragment,m),transition_in(u.$$.fragment,m),c=!0)},o(m){i&&transition_out(i.$$.fragment,m),transition_out(u.$$.fragment,m),c=!1},d(m){m&&detach(e),i&&destroy_component(i),destroy_component(u)}}}function create_if_block$5(t){return{c:noop,m:noop,p:noop,i:noop,o:noop,d:noop}}function create_default_slot_2$2(t){let e,r,a,i;const o=[create_if_block$5,create_if_block_1$3,create_else_block$2],u=[];function c(f,d){return f[0]<0?0:f[1][f[0]].graph in graphMap?1:2}return e=c(t),r=u[e]=o[e](t),{c(){r.c(),a=empty$1()},m(f,d){u[e].m(f,d),insert(f,a,d),i=!0},p(f,d){let m=e;e=c(f),e===m?u[e].p(f,d):(group_outros(),transition_out(u[m],1,1,()=>{u[m]=null}),check_outros(),r=u[e],r?r.p(f,d):(r=u[e]=o[e](f),r.c()),transition_in(r,1),r.m(a.parentNode,a))},i(f){i||(transition_in(r),i=!0)},o(f){transition_out(r),i=!1},d(f){f&&detach(a),u[e].d(f)}}}function create_default_slot_1$2(t){let e,r,a,i;return e=new Pane({props:{$$slots:{default:[create_default_slot_3$2]},$$scope:{ctx:t}}}),a=new Pane({props:{size:25,$$slots:{default:[create_default_slot_2$2]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment),r=space(),create_component(a.$$.fragment)},m(o,u){mount_component(e,o,u),insert(o,r,u),mount_component(a,o,u),i=!0},p(o,u){const c={};u&7&&(c.$$scope={dirty:u,ctx:o}),e.$set(c);const f={};u&7&&(f.$$scope={dirty:u,ctx:o}),a.$set(f)},i(o){i||(transition_in(e.$$.fragment,o),transition_in(a.$$.fragment,o),i=!0)},o(o){transition_out(e.$$.fragment,o),transition_out(a.$$.fragment,o),i=!1},d(o){o&&detach(r),destroy_component(e,o),destroy_component(a,o)}}}function create_default_slot$4(t){let e,r;return e=new Splitpanes({props:{theme:"modern-theme",style:"height: 100%;",pushOtherPanes:!1,dblClickSplitter:!1,$$slots:{default:[create_default_slot_1$2]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment)},m(a,i){mount_component(e,a,i),r=!0},p(a,i){const o={};i&7&&(o.$$scope={dirty:i,ctx:a}),e.$set(o)},i(a){r||(transition_in(e.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),r=!1},d(a){destroy_component(e,a)}}}function create_fragment$9(t){let e,r;return e=new Pane({props:{size:80,$$slots:{default:[create_default_slot$4]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment)},m(a,i){mount_component(e,a,i),r=!0},p(a,[i]){const o={};i&7&&(o.$$scope={dirty:i,ctx:a}),e.$set(o)},i(a){r||(transition_in(e.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),r=!1},d(a){destroy_component(e,a)}}}function instance$9(t,e,r){let a,i;return component_subscribe(t,activeGraphTab,o=>r(0,a=o)),component_subscribe(t,graphs,o=>r(1,i=o)),[a,i]}class GraphMaster extends SvelteComponent{constructor(e){super(),init(this,e,instance$9,create_fragment$9,safe_not_equal,{})}}function get_each_context_2$1(t,e,r){const a=t.slice();return a[16]=e[r],a[18]=r,a}function get_each_context_3(t,e,r){const a=t.slice();return a[22]=e[r],a[20]=r,a}function get_each_context$4(t,e,r){const a=t.slice();return a[16]=e[r],a[18]=r,a}function get_each_context_1$1(t,e,r){const a=t.slice();return a[16]=e[r],a[20]=r,a}function get_each_context_4(t,e,r){const a=t.slice();return a[24]=e[r],a[26]=r,a}function get_each_context_5(t,e,r){const a=t.slice();return a[27]=e[r],a[28]=e,a[29]=r,a}function create_else_block_4(t){let e,r,a,i=ensure_array_like(t[5]),o=[];for(let c=0;c<i.length;c+=1)o[c]=create_each_block_5(get_each_context_5(t,i,c));const u=c=>transition_out(o[c],1,1,()=>{o[c]=null});return{c(){e=element("nav"),r=element("ul");for(let c=0;c<o.length;c+=1)o[c].c();attr(r,"class","svelte-nulfcf"),attr(e,"class","svelte-nulfcf")},m(c,f){insert(c,e,f),append(e,r);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(r,null);a=!0},p(c,f){if(f&422){i=ensure_array_like(c[5]);let d;for(d=0;d<i.length;d+=1){const m=get_each_context_5(c,i,d);o[d]?(o[d].p(m,f),transition_in(o[d],1)):(o[d]=create_each_block_5(m),o[d].c(),transition_in(o[d],1),o[d].m(r,null))}for(group_outros(),d=i.length;d<o.length;d+=1)u(d);check_outros()}},i(c){if(!a){for(let f=0;f<i.length;f+=1)transition_in(o[f]);a=!0}},o(c){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)transition_out(o[f]);a=!1},d(c){c&&detach(e),destroy_each(o,c)}}}function create_if_block_6(t){let e;return{c(){e=element("h3"),e.textContent="Need to add a table"},m(r,a){insert(r,e,a)},p:noop,i:noop,o:noop,d(r){r&&detach(e)}}}function create_each_block_5(t){let e,r,a,i,o,u,c,f,d,m,h;function _(...b){return t[10](t[27],...b)}function p(b){t[9](b,t[27])}let g={};t[1][t[1].findIndex(_)].displayName!==void 0&&(g.value=t[1][t[1].findIndex(_)].displayName),a=new InPlaceEdit({props:g}),binding_callbacks.push(()=>bind(a,"value",p));function D(){return t[11](t[29])}function v(){return t[12](t[29])}return{c(){e=element("li"),r=element("span"),create_component(a.$$.fragment),o=space(),u=element("button"),u.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 svelte-nulfcf"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg>',c=space(),attr(r,"class","tabname svelte-nulfcf"),attr(u,"class","closeButton svelte-nulfcf"),attr(e,"class",f=null_to_empty(t[2]===t[29]?"active":"")+" svelte-nulfcf")},m(b,y){insert(b,e,y),append(e,r),mount_component(a,r,null),append(e,o),append(e,u),append(e,c),d=!0,m||(h=[listen(u,"click",D),listen(e,"click",v)],m=!0)},p(b,y){t=b;const T={};!i&&y&34&&(i=!0,T.value=t[1][t[1].findIndex(_)].displayName,add_flush_callback(()=>i=!1)),a.$set(T),(!d||y&4&&f!==(f=null_to_empty(t[2]===t[29]?"active":"")+" svelte-nulfcf"))&&attr(e,"class",f)},i(b){d||(transition_in(a.$$.fragment,b),d=!0)},o(b){transition_out(a.$$.fragment,b),d=!1},d(b){b&&detach(e),destroy_component(a),m=!1,run_all(h)}}}function create_if_block$4(t){let e,r,a,i,o,u,c,f,d,m=ensure_array_like(t[3].headings),h=[];for(let v=0;v<m.length;v+=1)h[v]=create_each_block_4(get_each_context_4(t,m,v));function _(v,b){return v[4][v[2]]?create_if_block_2$1:create_else_block_1}let p=_(t),g=p(t),D=!t[4][t[2]]&&create_if_block_1$2(t);return{c(){e=element("main"),r=element("table"),a=element("thead"),i=element("tr");for(let v=0;v<h.length;v+=1)h[v].c();o=space(),u=element("tbody"),g.c(),c=space(),D&&D.c(),f=empty$1(),attr(a,"class","svelte-nulfcf"),attr(r,"class","svelte-nulfcf")},m(v,b){insert(v,e,b),append(e,r),append(r,a),append(a,i);for(let y=0;y<h.length;y+=1)h[y]&&h[y].m(i,null);append(r,o),append(r,u),g.m(u,null),insert(v,c,b),D&&D.m(v,b),insert(v,f,b),d=!0},p(v,b){if(b&8){m=ensure_array_like(v[3].headings);let y;for(y=0;y<m.length;y+=1){const T=get_each_context_4(v,m,y);h[y]?h[y].p(T,b):(h[y]=create_each_block_4(T),h[y].c(),h[y].m(i,null))}for(;y<h.length;y+=1)h[y].d(1);h.length=m.length}p===(p=_(v))&&g?g.p(v,b):(g.d(1),g=p(v),g&&(g.c(),g.m(u,null))),v[4][v[2]]?D&&(group_outros(),transition_out(D,1,1,()=>{D=null}),check_outros()):D?(D.p(v,b),b&20&&transition_in(D,1)):(D=create_if_block_1$2(v),D.c(),transition_in(D,1),D.m(f.parentNode,f))},i(v){d||(transition_in(D),d=!0)},o(v){transition_out(D),d=!1},d(v){v&&(detach(e),detach(c),detach(f)),destroy_each(h,v),g.d(),D&&D.d(v)}}}function create_else_block_3(t){let e,r=t[24]+"",a;return{c(){e=element("th"),a=text(r),attr(e,"class","svelte-nulfcf")},m(i,o){insert(i,e,o),append(e,a)},p(i,o){o&8&&r!==(r=i[24]+"")&&set_data(a,r)},d(i){i&&detach(e)}}}function create_if_block_5(t){let e,r,a=t[24]+"",i,o;return{c(){e=element("th"),r=element("i"),i=text(a),o=text("*"),attr(e,"class","svelte-nulfcf")},m(u,c){insert(u,e,c),append(e,r),append(r,i),append(r,o)},p(u,c){c&8&&a!==(a=u[24]+"")&&set_data(i,a)},d(u){u&&detach(e)}}}function create_each_block_4(t){let e;function r(o,u){return o[3].processed[o[26]]?create_if_block_5:create_else_block_3}let a=r(t),i=a(t);return{c(){i.c(),e=empty$1()},m(o,u){i.m(o,u),insert(o,e,u)},p(o,u){a===(a=r(o))&&i?i.p(o,u):(i.d(1),i=a(o),i&&(i.c(),i.m(e.parentNode,e)))},d(o){o&&detach(e),i.d(o)}}}function create_else_block_1(t){let e,r=ensure_array_like({length:minrowstoshow}),a=[];for(let i=0;i<r.length;i+=1)a[i]=create_each_block_2$1(get_each_context_2$1(t,r,i));return{c(){for(let i=0;i<a.length;i+=1)a[i].c();e=empty$1()},m(i,o){for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(i,o);insert(i,e,o)},p(i,o){if(o&9){r=ensure_array_like({length:minrowstoshow});let u;for(u=0;u<r.length;u+=1){const c=get_each_context_2$1(i,r,u);a[u]?a[u].p(c,o):(a[u]=create_each_block_2$1(c),a[u].c(),a[u].m(e.parentNode,e))}for(;u<a.length;u+=1)a[u].d(1);a.length=r.length}},d(i){i&&detach(e),destroy_each(a,i)}}}function create_if_block_2$1(t){let e,r=ensure_array_like(t[0][0]),a=[];for(let i=0;i<r.length;i+=1)a[i]=create_each_block$4(get_each_context$4(t,r,i));return{c(){for(let i=0;i<a.length;i+=1)a[i].c();e=empty$1()},m(i,o){for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(i,o);insert(i,e,o)},p(i,o){if(o&9){r=ensure_array_like(i[0][0]);let u;for(u=0;u<r.length;u+=1){const c=get_each_context$4(i,r,u);a[u]?a[u].p(c,o):(a[u]=create_each_block$4(c),a[u].c(),a[u].m(e.parentNode,e))}for(;u<a.length;u+=1)a[u].d(1);a.length=r.length}},d(i){i&&detach(e),destroy_each(a,i)}}}function create_else_block_2(t){let e,r=t[0][t[20]][t[18]]+"",a;return{c(){e=element("td"),a=text(r),attr(e,"class","svelte-nulfcf")},m(i,o){insert(i,e,o),append(e,a)},p(i,o){o&1&&r!==(r=i[0][i[20]][i[18]]+"")&&set_data(a,r)},d(i){i&&detach(e)}}}function create_if_block_4$1(t){let e,r,a=t[0][t[20]][t[18]]+"",i;return{c(){e=element("td"),r=element("i"),i=text(a),attr(e,"class","svelte-nulfcf")},m(o,u){insert(o,e,u),append(e,r),append(r,i)},p(o,u){u&1&&a!==(a=o[0][o[20]][o[18]]+"")&&set_data(i,a)},d(o){o&&detach(e)}}}function create_each_block_3(t){let e;function r(o,u){return o[3].processed[o[20]]?create_if_block_4$1:create_else_block_2}let a=r(t),i=a(t);return{c(){i.c(),e=empty$1()},m(o,u){i.m(o,u),insert(o,e,u)},p(o,u){a===(a=r(o))&&i?i.p(o,u):(i.d(1),i=a(o),i&&(i.c(),i.m(e.parentNode,e)))},d(o){o&&detach(e),i.d(o)}}}function create_each_block_2$1(t){let e,r,a=ensure_array_like(t[0]),i=[];for(let o=0;o<a.length;o+=1)i[o]=create_each_block_3(get_each_context_3(t,a,o));return{c(){e=element("tr");for(let o=0;o<i.length;o+=1)i[o].c();r=space()},m(o,u){insert(o,e,u);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(e,null);append(e,r)},p(o,u){if(u&9){a=ensure_array_like(o[0]);let c;for(c=0;c<a.length;c+=1){const f=get_each_context_3(o,a,c);i[c]?i[c].p(f,u):(i[c]=create_each_block_3(f),i[c].c(),i[c].m(e,r))}for(;c<i.length;c+=1)i[c].d(1);i.length=a.length}},d(o){o&&detach(e),destroy_each(i,o)}}}function create_else_block$1(t){let e,r=t[0][t[20]][t[18]]+"",a;return{c(){e=element("td"),a=text(r),attr(e,"class","svelte-nulfcf")},m(i,o){insert(i,e,o),append(e,a)},p(i,o){o&1&&r!==(r=i[0][i[20]][i[18]]+"")&&set_data(a,r)},d(i){i&&detach(e)}}}function create_if_block_3$1(t){let e,r,a=t[0][t[20]][t[18]]+"",i;return{c(){e=element("td"),r=element("i"),i=text(a),attr(e,"class","svelte-nulfcf")},m(o,u){insert(o,e,u),append(e,r),append(r,i)},p(o,u){u&1&&a!==(a=o[0][o[20]][o[18]]+"")&&set_data(i,a)},d(o){o&&detach(e)}}}function create_each_block_1$1(t){let e;function r(o,u){return o[3].processed[o[20]]?create_if_block_3$1:create_else_block$1}let a=r(t),i=a(t);return{c(){i.c(),e=empty$1()},m(o,u){i.m(o,u),insert(o,e,u)},p(o,u){a===(a=r(o))&&i?i.p(o,u):(i.d(1),i=a(o),i&&(i.c(),i.m(e.parentNode,e)))},d(o){o&&detach(e),i.d(o)}}}function create_each_block$4(t){let e,r,a=ensure_array_like(t[0]),i=[];for(let o=0;o<a.length;o+=1)i[o]=create_each_block_1$1(get_each_context_1$1(t,a,o));return{c(){e=element("tr");for(let o=0;o<i.length;o+=1)i[o].c();r=space()},m(o,u){insert(o,e,u);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(e,null);append(e,r)},p(o,u){if(u&9){a=ensure_array_like(o[0]);let c;for(c=0;c<a.length;c+=1){const f=get_each_context_1$1(o,a,c);i[c]?i[c].p(f,u):(i[c]=create_each_block_1$1(f),i[c].c(),i[c].m(e,r))}for(;c<i.length;c+=1)i[c].d(1);i.length=a.length}},d(o){o&&detach(e),destroy_each(i,o)}}}function create_if_block_1$2(t){let e,r;return e=new Tooltip({props:{tipcontent:"Show more data",$$slots:{default:[create_default_slot$3]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment)},m(a,i){mount_component(e,a,i),r=!0},p(a,i){const o={};i&1073741844&&(o.$$scope={dirty:i,ctx:a}),e.$set(o)},i(a){r||(transition_in(e.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),r=!1},d(a){destroy_component(e,a)}}}function create_default_slot$3(t){let e,r,a,i;return{c(){e=element("button"),r=text("..."),attr(e,"class","showmorebutton svelte-nulfcf"),set_style(e,"display",t[4][t[2]]?"none":"block")},m(o,u){insert(o,e,u),append(e,r),a||(i=listen(e,"click",t[13]),a=!0)},p(o,u){u&20&&set_style(e,"display",o[4][o[2]]?"none":"block")},d(o){o&&detach(e),a=!1,i()}}}function create_fragment$8(t){let e,r,a,i,o,u;const c=[create_if_block_6,create_else_block_4],f=[];function d(h,_){return h[2]<0?0:1}r=d(t),a=f[r]=c[r](t);let m=t[2]>=0&&t[0].length>0&&create_if_block$4(t);return{c(){e=element("div"),a.c(),i=space(),m&&m.c(),o=empty$1(),attr(e,"id","tableTabs"),set_style(e,"margin","0 1em"),attr(e,"class","svelte-nulfcf")},m(h,_){insert(h,e,_),f[r].m(e,null),insert(h,i,_),m&&m.m(h,_),insert(h,o,_),u=!0},p(h,[_]){let p=r;r=d(h),r===p?f[r].p(h,_):(group_outros(),transition_out(f[p],1,1,()=>{f[p]=null}),check_outros(),a=f[r],a?a.p(h,_):(a=f[r]=c[r](h),a.c()),transition_in(a,1),a.m(e,null)),h[2]>=0&&h[0].length>0?m?(m.p(h,_),_&5&&transition_in(m,1)):(m=create_if_block$4(h),m.c(),transition_in(m,1),m.m(o.parentNode,o)):m&&(group_outros(),transition_out(m,1,1,()=>{m=null}),check_outros())},i(h){u||(transition_in(a),transition_in(m),u=!0)},o(h){transition_out(a),transition_out(m),u=!1},d(h){h&&(detach(e),detach(i),detach(o)),f[r].d(),m&&m.d(h)}}}let minrowstoshow=100;function makeTableData(t,e){let r=[];for(const a in t)r.push(t[a].data),t[a].type==="time"&&r.push(t[a].timeData),t[a].processSteps.length>0&&r.push(t[a].processedData);return r}function instance$8(t,e,r){let a,i,o,u,c;component_subscribe(t,data,T=>r(1,i=T)),component_subscribe(t,activeTableTab,T=>r(2,o=T)),component_subscribe(t,showalldata,T=>r(4,u=T)),component_subscribe(t,dataIDsforTables,T=>r(5,c=T));function f(){set_store_value(showalldata,u[o]=!0,u)}function d(T){set_store_value(activeTableTab,o=T,o)}function m(T){c.splice(T,1),dataIDsforTables.set(c),u.splice(T,1),showalldata.set(u),set_store_value(activeTableTab,o=c.length>0?0:-1,o)}function h(T){return c.length>0?i.find(w=>w.id===c[T]):{data:-1,displayName:-1}}function _(T,w){if(c.length>0){var A=[],E=[];for(const k in T)A.push(T[k].name),E.push(!1),T[k].processSteps.length>0&&(A.push(T[k].name),E.push(!0)),T[k].type==="time"&&(A.push(T[k].name+" (hrs)"),E.push(!0));return{headings:A,processed:E}}else return{headings:[""],processed:[!1]}}let p;const g=(T,w)=>w.id===T;function D(T,w){t.$$.not_equal(i[i.findIndex(A=>A.id===w)].displayName,T)&&(i[i.findIndex(A=>A.id===w)].displayName=T,data.set(i))}const v=T=>m(T),b=T=>d(T),y=T=>f();return t.$$.update=()=>{t.$$.dirty&7&&(r(0,p=makeTableData(h(o).data)),p.length>0&&p[0].length<=minrowstoshow&&(console.log(p[0].length),console.log(p[0].length<=minrowstoshow),set_store_value(showalldata,u[o]=!0,u))),t.$$.dirty&6&&r(3,a=_(h(o).data))},[p,i,o,a,u,c,f,d,m,D,g,v,b,y]}class TableTabs extends SvelteComponent{constructor(e){super(),init(this,e,instance$8,create_fragment$8,safe_not_equal,{})}}function get_each_context$3(t,e,r){const a=t.slice();return a[10]=e[r],a[11]=e,a[12]=r,a}function create_default_slot_3$1(t){let e,r,a;return r=new TableTabs({}),{c(){e=element("div"),create_component(r.$$.fragment),attr(e,"id","TableMain"),set_style(e,"height","100%"),set_style(e,"width","auto"),set_style(e,"overflow","auto")},m(i,o){insert(i,e,o),mount_component(r,e,null),a=!0},p:noop,i(i){a||(transition_in(r.$$.fragment,i),a=!0)},o(i){transition_out(r.$$.fragment,i),a=!1},d(i){i&&detach(e),destroy_component(r)}}}function create_if_block$3(t){let e,r;return e=new Pane({props:{size:30,$$slots:{default:[create_default_slot_2$1]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment)},m(a,i){mount_component(e,a,i),r=!0},p(a,i){const o={};i&8193&&(o.$$scope={dirty:i,ctx:a}),e.$set(o)},i(a){r||(transition_in(e.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),r=!1},d(a){destroy_component(e,a)}}}function create_if_block_1$1(t){let e,r=t[0].data[t[10]].name+"",a,i,o,u,c,f,d,m,h=t[0].data[t[10]].recordPeriod.minDiff+"",_,p,g=t[0].data[t[10]].recordPeriod.constant?"equal":"unequal",D,v,b,y;function T(){t[7].call(o,t[10])}function w(...E){return t[8](t[10],...E)}function A(...E){return t[9](t[10],...E)}return{c(){e=element("div"),a=text(r),i=space(),o=element("input"),u=space(),c=element("button"),c.textContent="",f=space(),d=element("div"),m=text("Sampling freq: "),_=text(h),p=text(`
                  hrs,
                  `),D=text(g),v=space(),attr(o,"type","text"),attr(c,"class","guessFmtBtn svelte-1wt1n0s"),set_style(e,"display","flex"),set_style(e,"margin","5px"),set_style(d,"display","flex"),set_style(d,"margin","5px"),set_style(d,"margin-left","1em")},m(E,k){insert(E,e,k),append(e,a),append(e,i),append(e,o),set_input_value(o,t[0].data[t[10]].timeFormat),append(e,u),append(e,c),insert(E,f,k),insert(E,d,k),append(d,m),append(d,_),append(d,p),append(d,D),append(d,v),b||(y=[listen(o,"input",T),listen(o,"input",w),listen(c,"click",A)],b=!0)},p(E,k){t=E,k&1&&r!==(r=t[0].data[t[10]].name+"")&&set_data(a,r),k&1&&o.value!==t[0].data[t[10]].timeFormat&&set_input_value(o,t[0].data[t[10]].timeFormat),k&1&&h!==(h=t[0].data[t[10]].recordPeriod.minDiff+"")&&set_data(_,h),k&1&&g!==(g=t[0].data[t[10]].recordPeriod.constant?"equal":"unequal")&&set_data(D,g)},d(E){E&&(detach(e),detach(f),detach(d)),b=!1,run_all(y)}}}function create_each_block$3(t){let e,r=t[0].data[t[10]].type==="time"&&create_if_block_1$1(t);return{c(){r&&r.c(),e=empty$1()},m(a,i){r&&r.m(a,i),insert(a,e,i)},p(a,i){a[0].data[a[10]].type==="time"?r?r.p(a,i):(r=create_if_block_1$1(a),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},d(a){a&&detach(e),r&&r.d(a)}}}function create_default_slot_2$1(t){let e,r,a,i,o=t[0].displayName+"",u,c,f,d,m=t[0].importedFrom+"",h,_,p=ensure_array_like(Object.keys(t[0].data)),g=[];for(let D=0;D<p.length;D+=1)g[D]=create_each_block$3(get_each_context$3(t,p,D));return{c(){e=element("div"),r=element("div"),a=element("div"),i=text("Data: "),u=text(o),c=space(),f=element("div"),d=text("Imported: "),h=text(m),_=space();for(let D=0;D<g.length;D+=1)g[D].c();attr(r,"class","tableData"),attr(e,"id","TableMeta"),set_style(e,"height","100%"),set_style(e,"width","auto"),set_style(e,"overflow","auto")},m(D,v){insert(D,e,v),append(e,r),append(r,a),append(a,i),append(a,u),append(r,c),append(r,f),append(f,d),append(f,h),append(r,_);for(let b=0;b<g.length;b+=1)g[b]&&g[b].m(r,null)},p(D,v){if(v&1&&o!==(o=D[0].displayName+"")&&set_data(u,o),v&1&&m!==(m=D[0].importedFrom+"")&&set_data(h,m),v&13){p=ensure_array_like(Object.keys(D[0].data));let b;for(b=0;b<p.length;b+=1){const y=get_each_context$3(D,p,b);g[b]?g[b].p(y,v):(g[b]=create_each_block$3(y),g[b].c(),g[b].m(r,null))}for(;b<g.length;b+=1)g[b].d(1);g.length=p.length}},d(D){D&&detach(e),destroy_each(g,D)}}}function create_default_slot_1$1(t){let e,r,a,i;e=new Pane({props:{$$slots:{default:[create_default_slot_3$1]},$$scope:{ctx:t}}});let o=t[1]&&create_if_block$3(t);return{c(){create_component(e.$$.fragment),r=space(),o&&o.c(),a=empty$1()},m(u,c){mount_component(e,u,c),insert(u,r,c),o&&o.m(u,c),insert(u,a,c),i=!0},p(u,c){const f={};c&8192&&(f.$$scope={dirty:c,ctx:u}),e.$set(f),u[1]?o?(o.p(u,c),c&2&&transition_in(o,1)):(o=create_if_block$3(u),o.c(),transition_in(o,1),o.m(a.parentNode,a)):o&&(group_outros(),transition_out(o,1,1,()=>{o=null}),check_outros())},i(u){i||(transition_in(e.$$.fragment,u),transition_in(o),i=!0)},o(u){transition_out(e.$$.fragment,u),transition_out(o),i=!1},d(u){u&&(detach(r),detach(a)),destroy_component(e,u),o&&o.d(u)}}}function create_default_slot$2(t){let e,r;return e=new Splitpanes({props:{theme:"modern-theme",style:"height: 100%",pushOtherPanes:!1,dblClickSplitter:!1,$$slots:{default:[create_default_slot_1$1]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment)},m(a,i){mount_component(e,a,i),r=!0},p(a,i){const o={};i&8195&&(o.$$scope={dirty:i,ctx:a}),e.$set(o)},i(a){r||(transition_in(e.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),r=!1},d(a){destroy_component(e,a)}}}function create_fragment$7(t){let e,r;return e=new Pane({props:{$$slots:{default:[create_default_slot$2]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment)},m(a,i){mount_component(e,a,i),r=!0},p(a,[i]){const o={};i&8195&&(o.$$scope={dirty:i,ctx:a}),e.$set(o)},i(a){r||(transition_in(e.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),r=!1},d(a){destroy_component(e,a)}}}function instance$7(t,e,r){let a,i,o,u,c;component_subscribe(t,activeTableTab,p=>r(4,o=p)),component_subscribe(t,dataIDsforTables,p=>r(5,u=p)),component_subscribe(t,data,p=>r(6,c=p));function f(p){set_store_value(data,c[c.findIndex(g=>g.id===u[o])].data[p].timeData=forceFormat(i.data[p].data,i.data[p].timeFormat),c),set_store_value(data,c[c.findIndex(g=>g.id===u[o])].data[p].recordPeriod=getPeriod(i.data[p].data,i.data[p].timeFormat),c),updateDataProcess(u[o],p)}function d(p){set_store_value(data,c[c.findIndex(g=>g.id===u[o])].data[p].timeFormat=getGuessedFormat(i.data[p].data),c),f(p)}function m(p){i.data[p].timeFormat=this.value,r(0,i),r(6,c),r(5,u),r(4,o)}const h=(p,g)=>{f(p)},_=(p,g)=>{d(p)};return t.$$.update=()=>{t.$$.dirty&16&&r(1,a=o>=0),t.$$.dirty&112&&r(0,i=c[c.findIndex(p=>p.id===u[o])])},[i,a,f,d,o,u,c,m,h,_]}class TableMaster extends SvelteComponent{constructor(e){super(),init(this,e,instance$7,create_fragment$7,safe_not_equal,{})}}function create_fragment$6(t){let e,r,a;return{c(){e=svg_element("svg"),r=svg_element("circle"),attr(r,"role","presentation"),attr(r,"cx","16"),attr(r,"cy","16"),attr(r,"r",t[4]),attr(r,"stroke",t[2]),attr(r,"fill","none"),attr(r,"stroke-width",t[3]),attr(r,"stroke-dasharray",a=t[5]+",100"),attr(r,"stroke-linecap","round"),attr(e,"height",t[0]),attr(e,"width",t[0]),set_style(e,"animation-duration",t[1]+"ms"),attr(e,"class","svelte-spinner svelte-ynopmf"),attr(e,"viewBox","0 0 32 32")},m(i,o){insert(i,e,o),append(e,r)},p(i,[o]){o&16&&attr(r,"r",i[4]),o&4&&attr(r,"stroke",i[2]),o&8&&attr(r,"stroke-width",i[3]),o&32&&a!==(a=i[5]+",100")&&attr(r,"stroke-dasharray",a),o&1&&attr(e,"height",i[0]),o&1&&attr(e,"width",i[0]),o&2&&set_style(e,"animation-duration",i[1]+"ms")},i:noop,o:noop,d(i){i&&detach(e)}}}function instance$6(t,e,r){let{size:a=25}=e,{speed:i=750}=e,{color:o="rgba(0,0,0,0.4)"}=e,{thickness:u=5}=e,{gap:c=30}=e,{radius:f=15}=e,d;return t.$$set=m=>{"size"in m&&r(0,a=m.size),"speed"in m&&r(1,i=m.speed),"color"in m&&r(2,o=m.color),"thickness"in m&&r(3,u=m.thickness),"gap"in m&&r(6,c=m.gap),"radius"in m&&r(4,f=m.radius)},t.$$.update=()=>{t.$$.dirty&80&&r(5,d=2*Math.PI*f*(100-c)/100)},[a,i,o,u,f,d,c]}class Spinner extends SvelteComponent{constructor(e){super(),init(this,e,instance$6,create_fragment$6,safe_not_equal,{size:0,speed:1,color:2,thickness:3,gap:6,radius:4})}}function get_each_context$2(t,e,r){const a=t.slice();return a[4]=e[r],a}function create_each_block$2(t){let e,r=t[4].display+"";return{c(){e=element("p")},m(a,i){insert(a,e,i),e.innerHTML=r},p(a,i){i&2&&r!==(r=a[4].display+"")&&(e.innerHTML=r)},d(a){a&&detach(e)}}}function create_fragment$5(t){let e,r,a,i,o,u;i=new Spinner({props:{size:"1em",color:"var(--primary-color)"}});let c=ensure_array_like(t[1]),f=[];for(let d=0;d<c.length;d+=1)f[d]=create_each_block$2(get_each_context$2(t,c,d));return{c(){e=element("div"),r=element("h3"),r.textContent="statusbar",a=space(),create_component(i.$$.fragment),o=space();for(let d=0;d<f.length;d+=1)f[d].c();set_style(e,"height","100%"),set_style(e,"overflow","auto")},m(d,m){insert(d,e,m),append(e,r),append(e,a),mount_component(i,e,null),append(e,o);for(let h=0;h<f.length;h+=1)f[h]&&f[h].m(e,null);t[2](e),u=!0},p(d,[m]){if(m&2){c=ensure_array_like(d[1]);let h;for(h=0;h<c.length;h+=1){const _=get_each_context$2(d,c,h);f[h]?f[h].p(_,m):(f[h]=create_each_block$2(_),f[h].c(),f[h].m(e,null))}for(;h<f.length;h+=1)f[h].d(1);f.length=c.length}},i(d){u||(transition_in(i.$$.fragment,d),u=!0)},o(d){transition_out(i.$$.fragment,d),u=!1},d(d){d&&detach(e),destroy_component(i),destroy_each(f,d),t[2](null)}}}function instance$5(t,e,r){let a;component_subscribe(t,statusData,c=>r(1,a=c));let i;afterUpdate(()=>{statusData&&o(i)});const o=async c=>{c.scroll({top:c.scrollHeight,behavior:"smooth"})};function u(c){binding_callbacks[c?"unshift":"push"](()=>{i=c,r(0,i)})}return[i,a,u]}class StatusMaster extends SvelteComponent{constructor(e){super(),init(this,e,instance$5,create_fragment$5,safe_not_equal,{})}}function saveStoreData(){const t=get_store_value(data),e=get_store_value(graphTabs),r=get_store_value(activeGraphTab),a=get_store_value(graphs),i=get_store_value(dataIDsforTables),o=get_store_value(showalldata),u=get_store_value(activeTableTab),c=get_store_value(selectedTheme),f=get_store_value(statusData),d={_data:t,_graphTabs:e,_activeGraphTab:r,_graphs:a,_dataIDsforTables:i,_showalldata:o,_activeTableTab:u,_selectedTheme:c,_statusData:f},m="testStore.ancir",h=JSON.stringify(d),_=new Blob([h],{type:"application/json"}),p=URL.createObjectURL(_),g=document.createElement("a");g.href=p,g.download=m,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(p)}function loadStoreData(){const t=document.createElement("input");t.type="file",t.id="fileInput",t.style.display="none",document.body.appendChild(t),t.addEventListener("change",handleFileSelect),t.click()}function loadTheData(jsonString){console.log("TODO: load script not working ");const loadedObject=JSON.parse(jsonString);for(const key in loadedObject)if(loadedObject.hasOwnProperty(key)){const modifiedKey=key.substring(1);loadedObject[key],eval(`${modifiedKey}.update((current) => {return loadedObject[key]});`)}}function handleFileSelect(t){const e=t.target.files[0];if(e){const r=new FileReader;r.onload=function(a){const i=a.target.result,o=loadTheData(i);console.log(o)},r.readAsText(e)}}function get_each_context$1(t,e,r){const a=t.slice();return a[20]=e[r],a[21]=e,a[22]=r,a}function get_each_context_1(t,e,r){const a=t.slice();return a[23]=e[r],a[24]=e,a[25]=r,a}function get_each_context_2(t,e,r){const a=t.slice();return a[26]=e[r],a}function create_if_block$2(t){let e,r=ensure_array_like(t[20].items),a=[];for(let i=0;i<r.length;i+=1)a[i]=create_each_block_1(get_each_context_1(t,r,i));return{c(){e=element("ul");for(let i=0;i<a.length;i+=1)a[i].c();attr(e,"class","secondmenu dontclose svelte-osm4b5")},m(i,o){insert(i,e,o);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(e,null)},p(i,o){if(o&11){r=ensure_array_like(i[20].items);let u;for(u=0;u<r.length;u+=1){const c=get_each_context_1(i,r,u);a[u]?a[u].p(c,o):(a[u]=create_each_block_1(c),a[u].c(),a[u].m(e,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=r.length}},d(i){i&&detach(e),destroy_each(a,i)}}}function create_else_block(t){let e,r,a=t[23].displayText+"",i,o;function u(...c){return t[13](t[23],...c)}return{c(){e=element("li"),r=element("button"),attr(r,"class","svelte-osm4b5"),attr(e,"class","svelte-osm4b5")},m(c,f){insert(c,e,f),append(e,r),r.innerHTML=a,i||(o=listen(r,"click",u),i=!0)},p(c,f){t=c,f&2&&a!==(a=t[23].displayText+"")&&(r.innerHTML=a)},d(c){c&&detach(e),i=!1,o()}}}function create_if_block_3(t){let e,r,a,i=t[23].displayText+"",o,u,c,f,d;function m(){return t[8](t[23],t[24],t[25])}function h(){return t[9](t[23],t[24],t[25])}let _=(t[23].visibleState||t[0])&&create_if_block_4(t);return{c(){e=element("li"),r=element("button"),a=new HtmlTag(!1),o=space(),u=element("span"),u.textContent="",c=space(),_&&_.c(),a.a=o,set_style(u,"float","right"),attr(r,"class","svelte-osm4b5"),attr(e,"class","svelte-osm4b5")},m(p,g){insert(p,e,g),append(e,r),a.m(i,r),append(r,o),append(r,u),append(e,c),_&&_.m(e,null),f||(d=[listen(r,"mouseover",m),listen(r,"mouseleave",h)],f=!0)},p(p,g){t=p,g&2&&i!==(i=t[23].displayText+"")&&a.p(i),t[23].visibleState||t[0]?_?_.p(t,g):(_=create_if_block_4(t),_.c(),_.m(e,null)):_&&(_.d(1),_=null)},d(p){p&&detach(e),_&&_.d(),f=!1,run_all(d)}}}function create_if_block_2(t){let e;return{c(){e=element("hr"),attr(e,"class","svelte-osm4b5")},m(r,a){insert(r,e,a)},p:noop,d(r){r&&detach(e)}}}function create_if_block_1(t){return{c:noop,m:noop,p:noop,d:noop}}function create_if_block_4(t){let e,r,a,i=ensure_array_like(t[23].items[0]),o=[];for(let u=0;u<i.length;u+=1)o[u]=create_each_block_2(get_each_context_2(t,i,u));return{c(){e=element("ul");for(let u=0;u<o.length;u+=1)o[u].c();attr(e,"class","thirdmenu dontclose svelte-osm4b5")},m(u,c){insert(u,e,c);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);r||(a=[listen(e,"mouseover",t[11]),listen(e,"mouseleave",t[12])],r=!0)},p(u,c){if(c&10){i=ensure_array_like(u[23].items[0]);let f;for(f=0;f<i.length;f+=1){const d=get_each_context_2(u,i,f);o[f]?o[f].p(d,c):(o[f]=create_each_block_2(d),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=i.length}},d(u){u&&detach(e),destroy_each(o,u),r=!1,run_all(a)}}}function create_each_block_2(t){let e,r,a=t[26].displayText+"",i,o,u,c;function f(...d){return t[10](t[26],...d)}return{c(){e=element("li"),r=element("button"),i=text(a),o=space(),attr(r,"class","svelte-osm4b5"),attr(e,"class","svelte-osm4b5")},m(d,m){insert(d,e,m),append(e,r),append(r,i),append(e,o),u||(c=listen(r,"click",f),u=!0)},p(d,m){t=d,m&2&&a!==(a=t[26].displayText+"")&&set_data(i,a)},d(d){d&&detach(e),u=!1,c()}}}function create_each_block_1(t){let e;function r(o,u){return o[23]===null?create_if_block_1:o[23].displayText==="--hr"?create_if_block_2:o[23].items?create_if_block_3:create_else_block}let a=r(t),i=a(t);return{c(){i.c(),e=space()},m(o,u){i.m(o,u),insert(o,e,u)},p(o,u){a===(a=r(o))&&i?i.p(o,u):(i.d(1),i=a(o),i&&(i.c(),i.m(e.parentNode,e)))},d(o){o&&detach(e),i.d(o)}}}function create_each_block$1(t){let e,r,a=t[20].displayText+"",i,o,u,c;function f(){return t[6](t[20],t[21],t[22])}function d(){return t[7](t[20])}let m=t[20].visibleState&&create_if_block$2(t);return{c(){e=element("li"),r=element("button"),i=space(),m&&m.c(),o=space(),attr(r,"class","dontclose svelte-osm4b5"),attr(e,"class","svelte-osm4b5")},m(h,_){insert(h,e,_),append(e,r),r.innerHTML=a,append(e,i),m&&m.m(e,null),append(e,o),u||(c=[listen(r,"click",f),listen(r,"mouseover",d)],u=!0)},p(h,_){t=h,_&2&&a!==(a=t[20].displayText+"")&&(r.innerHTML=a),t[20].visibleState?m?m.p(t,_):(m=create_if_block$2(t),m.c(),m.m(e,o)):m&&(m.d(1),m=null)},d(h){h&&detach(e),m&&m.d(),u=!1,run_all(c)}}}function create_fragment$4(t){let e,r,a,i,o,u,c,f=ensure_array_like(t[1]),d=[];for(let m=0;m<f.length;m+=1)d[m]=create_each_block$1(get_each_context$1(t,f,m));return{c(){e=element("nav"),r=element("div"),a=element("ul");for(let m=0;m<d.length;m+=1)d[m].c();i=space(),o=element("input"),attr(a,"class","topmenu svelte-osm4b5"),attr(o,"type","checkbox"),attr(o,"id","switchtheme"),attr(o,"class","svelte-osm4b5"),attr(r,"class","applicationmenu svelte-osm4b5"),attr(e,"class","svelte-osm4b5")},m(m,h){insert(m,e,h),append(e,r),append(r,a);for(let _=0;_<d.length;_+=1)d[_]&&d[_].m(a,null);append(r,i),append(r,o),u||(c=listen(o,"change",t[14]),u=!0)},p(m,[h]){if(h&31){f=ensure_array_like(m[1]);let _;for(_=0;_<f.length;_+=1){const p=get_each_context$1(m,f,_);d[_]?d[_].p(p,h):(d[_]=create_each_block$1(p),d[_].c(),d[_].m(a,null))}for(;_<d.length;_+=1)d[_].d(1);d.length=f.length}},i:noop,o:noop,d(m){m&&detach(e),destroy_each(d,m),u=!1,c()}}}function switchTheme(t){t.target.checked?document.documentElement.setAttribute("data-theme","dark"):document.documentElement.setAttribute("data-theme","light")}function createMenuItem(t,e,r=!1){return r?null:{displayText:t,onClick:e,visibleState:!1}}function instance$4(t,e,r){let a,i,o,u,c;component_subscribe(t,menuModalType,k=>r(15,i=k)),component_subscribe(t,graphTabs,k=>r(16,o=k)),component_subscribe(t,importFileOpen,k=>r(17,u=k)),component_subscribe(t,activeGraphTab,k=>r(5,c=k));let f=!1;function d(){return Object.keys(graphMap).map(O=>createMenuItem(O,()=>makeNewChart(O.toString())))}function m(k){var O;return console.log(a),[{displayText:"Data",items:[createMenuItem("Import Data",()=>set_store_value(importFileOpen,u=!0,u)),createMenuItem("Simulate Data",()=>{set_store_value(menuModalType,i="generateSim",i)}),{displayText:"--hr"},createMenuItem("Save session",saveStoreData),createMenuItem("Load session",loadStoreData)]},{displayText:"Chart",items:[{displayText:"Insert Chart",items:[d()]},createMenuItem("Export <i>"+((O=o[k])==null?void 0:O.name)+"</i>",()=>exportSVG(),k<0)]},{displayText:"Help",items:[createMenuItem("About",()=>{set_store_value(menuModalType,i="about",i)})]}]}function h(k){a.forEach(O=>{O!==k&&O.visibleState&&(O.visibleState=!1)}),r(1,a),r(5,c)}function _(){a.forEach(k=>{k.visibleState=!1}),r(1,a),r(5,c)}function p(k){a.forEach(O=>{O!==k&&O.visibleState?O.visibleState=!1:O===k&&(O.visibleState=!0)}),r(1,a),r(5,c)}onMount(()=>{makeNewChart("actigram");const k=O=>{try{O.srcElement&&O.srcElement.className.includes("dontclose")||_()}catch{_()}};return document.addEventListener("click",k),()=>{document.removeEventListener("click",k)}});const g=(k,O,L)=>{r(1,O[L].visibleState=!k.visibleState,a),h(k)},D=k=>{a.some(O=>O.visibleState)&&p(k)},v=(k,O,L)=>r(1,O[L].visibleState=!0,a),b=(k,O,L)=>setTimeout(()=>{r(1,O[L].visibleState=!1,a)},50),y=(k,O)=>{k.onClick(),_()},T=()=>{r(0,f=!0)},w=()=>{setTimeout(()=>r(0,f=!1),50)},A=(k,O)=>{k.onClick(),_()},E=k=>switchTheme(k);return t.$$.update=()=>{t.$$.dirty&32&&r(1,a=m(c))},[f,a,h,_,p,c,g,D,v,b,y,T,w,A,E]}class MenuMaster extends SvelteComponent{constructor(e){super(),init(this,e,instance$4,create_fragment$4,safe_not_equal,{})}}const{window:window_1}=globals;function get_each_context(t,e,r){const a=t.slice();return a[9]=e[r],a[11]=r,a}function create_if_block$1(t){let e,r,a,i,o,u=ensure_array_like(t[2].labels),c=[];for(let f=0;f<u.length;f+=1)c[f]=create_each_block(get_each_context(t,u,f));return{c(){e=element("nav"),r=element("div"),a=element("ul");for(let f=0;f<c.length;f+=1)c[f].c();attr(a,"class","svelte-ouzgb9"),attr(r,"class","navbar svelte-ouzgb9"),attr(r,"id","navbar"),set_style(e,"position","absolute"),set_style(e,"top",t[0].y+"px"),set_style(e,"left",t[0].x+"px"),set_style(e,"z-index","999")},m(f,d){insert(f,e,d),append(e,r),append(r,a);for(let m=0;m<c.length;m+=1)c[m]&&c[m].m(a,null);i||(o=action_destroyer(t[4].call(null,e)),i=!0)},p(f,d){if(d&6){u=ensure_array_like(f[2].labels);let m;for(m=0;m<u.length;m+=1){const h=get_each_context(f,u,m);c[m]?c[m].p(h,d):(c[m]=create_each_block(h),c[m].c(),c[m].m(a,null))}for(;m<c.length;m+=1)c[m].d(1);c.length=u.length}d&1&&set_style(e,"top",f[0].y+"px"),d&1&&set_style(e,"left",f[0].x+"px")},d(f){f&&detach(e),destroy_each(c,f),i=!1,o()}}}function create_each_block(t){let e,r,a=t[9]+"",i,o,u,c;function f(...d){return t[6](t[11],...d)}return{c(){e=element("li"),r=element("button"),i=text(a),o=space(),attr(r,"class","svelte-ouzgb9"),attr(e,"class","svelte-ouzgb9")},m(d,m){insert(d,e,m),append(e,r),append(r,i),append(e,o),u||(c=listen(r,"click",f),u=!0)},p(d,m){t=d,m&4&&a!==(a=t[9]+"")&&set_data(i,a)},d(d){d&&detach(e),u=!1,c()}}}function create_fragment$3(t){let e,r,a,i=t[1]&&create_if_block$1(t);return{c(){i&&i.c(),e=empty$1()},m(o,u){i&&i.m(o,u),insert(o,e,u),r||(a=listen(window_1,"click",t[3]),r=!0)},p(o,[u]){o[1]?i?i.p(o,u):(i=create_if_block$1(o),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},i:noop,o:noop,d(o){o&&detach(e),i&&i.d(o),r=!1,a()}}}function instance$3(t,e,r){let a;component_subscribe(t,contextMenu,_=>r(2,a=_));let i={x:0,y:0},o={h:100,w:76},u={h:0,w:0},c;function f(_){_.stopPropagation(),u={w:window.innerWidth,h:window.innerHeight},r(0,i={x:_.clientX,y:_.clientY}),u.h-i.y<o.h&&r(0,i.y=i.y-o.h,i),u.w-i.x<o.w&&r(0,i.x=i.x-o.w,i),r(1,c=!0)}function d(_){try{_.srcElement.className.includes("showContextMenu")?f(_):r(1,c=!1)}catch{r(1,c=!1)}}function m(_){let p=_.offsetHeight,g=_.offsetWidth;o={h:p,w:g}}return[i,c,a,d,m,f,(_,p)=>{a.funcs[_](),r(1,c=!1)}]}class ContextMenu extends SvelteComponent{constructor(e){super(),init(this,e,instance$3,create_fragment$3,safe_not_equal,{rightClickContextMenu:5})}get rightClickContextMenu(){return this.$$.ctx[5]}}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function getAugmentedNamespace(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function a(){return this instanceof a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(a){var i=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(r,a,i.get?i:{enumerable:!0,get:function(){return t[a]}})}),r}var papaparse={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){(function(r,a){t.exports=a()})(commonjsGlobal,function r(){var a=function(){return typeof self<"u"?self:typeof window<"u"?window:typeof a<"u"?a:{}}();function i(){var M=a.URL||a.webkitURL||null,S=r.toString();return d.BLOB_URL||(d.BLOB_URL=M.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",S,")();"],{type:"text/javascript"})))}var o=!a.document&&!!a.postMessage,u=a.IS_PAPA_WORKER||!1,c={},f=0,d={};if(d.parse=h,d.unparse=_,d.RECORD_SEP="",d.UNIT_SEP="",d.BYTE_ORDER_MARK="\uFEFF",d.BAD_DELIMITERS=["\r",`
`,'"',d.BYTE_ORDER_MARK],d.WORKERS_SUPPORTED=!o&&!!a.Worker,d.NODE_STREAM_INPUT=1,d.LocalChunkSize=1024*1024*10,d.RemoteChunkSize=1024*1024*5,d.DefaultDelimiter=",",d.Parser=A,d.ParserHandle=T,d.NetworkStreamer=g,d.FileStreamer=D,d.StringStreamer=v,d.ReadableStreamStreamer=b,typeof PAPA_BROWSER_CONTEXT>"u"&&(d.DuplexStreamStreamer=y),a.jQuery){var m=a.jQuery;m.fn.parse=function(M){var S=M.config||{},$=[];return this.each(function(N){var U=m(this).prop("tagName").toUpperCase()==="INPUT"&&m(this).attr("type").toLowerCase()==="file"&&a.FileReader;if(!U||!this.files||this.files.length===0)return!0;for(var z=0;z<this.files.length;z++)$.push({file:this.files[z],inputElem:this,instanceConfig:m.extend({},S)})}),F(),this;function F(){if($.length===0){x(M.complete)&&M.complete();return}var N=$[0];if(x(M.before)){var U=M.before(N.file,N.inputElem);if(typeof U=="object")if(U.action==="abort"){H("AbortError",N.file,N.inputElem,U.reason);return}else if(U.action==="skip"){I();return}else typeof U.config=="object"&&(N.instanceConfig=m.extend(N.instanceConfig,U.config));else if(U==="skip"){I();return}}var z=N.instanceConfig.complete;N.instanceConfig.complete=function(V){x(z)&&z(V,N.file,N.inputElem),I()},d.parse(N.file,N.instanceConfig)}function H(N,U,z,V){x(M.error)&&M.error({name:N},U,z,V)}function I(){$.splice(0,1),F()}}}u&&(a.onmessage=P);function h(M,S){S=S||{};var $=S.dynamicTyping||!1;if(x($)&&(S.dynamicTypingFunction=$,$={}),S.dynamicTyping=$,S.transform=x(S.transform)?S.transform:!1,S.worker&&d.WORKERS_SUPPORTED){var F=E();F.userStep=S.step,F.userChunk=S.chunk,F.userComplete=S.complete,F.userError=S.error,S.step=x(S.step),S.chunk=x(S.chunk),S.complete=x(S.complete),S.error=x(S.error),delete S.worker,F.postMessage({input:M,config:S,workerId:F.id});return}var H=null;if(M===d.NODE_STREAM_INPUT&&typeof PAPA_BROWSER_CONTEXT>"u")return H=new y(S),H.getStream();return typeof M=="string"?(M=I(M),S.download?H=new g(S):H=new v(S)):M.readable===!0&&x(M.read)&&x(M.on)?H=new b(S):(a.File&&M instanceof File||M instanceof Object)&&(H=new D(S)),H.stream(M);function I(N){return N.charCodeAt(0)===65279?N.slice(1):N}}function _(M,S){var $=!1,F=!0,H=",",I=`\r
`,N='"',U=N+N,z=!1,V=null,ne=!1;ce();var B=new RegExp(w(N),"g");if(typeof M=="string"&&(M=JSON.parse(M)),Array.isArray(M)){if(!M.length||Array.isArray(M[0]))return le(null,M,z);if(typeof M[0]=="object")return le(V||Object.keys(M[0]),M,z)}else if(typeof M=="object")return typeof M.data=="string"&&(M.data=JSON.parse(M.data)),Array.isArray(M.data)&&(M.fields||(M.fields=M.meta&&M.meta.fields||V),M.fields||(M.fields=Array.isArray(M.data[0])?M.fields:typeof M.data[0]=="object"?Object.keys(M.data[0]):[]),!Array.isArray(M.data[0])&&typeof M.data[0]!="object"&&(M.data=[M.data])),le(M.fields||[],M.data||[],z);throw new Error("Unable to serialize unrecognized input");function ce(){if(typeof S=="object"){if(typeof S.delimiter=="string"&&!d.BAD_DELIMITERS.filter(function(J){return S.delimiter.indexOf(J)!==-1}).length&&(H=S.delimiter),(typeof S.quotes=="boolean"||typeof S.quotes=="function"||Array.isArray(S.quotes))&&($=S.quotes),(typeof S.skipEmptyLines=="boolean"||typeof S.skipEmptyLines=="string")&&(z=S.skipEmptyLines),typeof S.newline=="string"&&(I=S.newline),typeof S.quoteChar=="string"&&(N=S.quoteChar),typeof S.header=="boolean"&&(F=S.header),Array.isArray(S.columns)){if(S.columns.length===0)throw new Error("Option columns is empty");V=S.columns}S.escapeChar!==void 0&&(U=S.escapeChar+N),(typeof S.escapeFormulae=="boolean"||S.escapeFormulae instanceof RegExp)&&(ne=S.escapeFormulae instanceof RegExp?S.escapeFormulae:/^[=+\-@\t\r].*$/)}}function le(J,ae,ue){var ie="";typeof J=="string"&&(J=JSON.parse(J)),typeof ae=="string"&&(ae=JSON.parse(ae));var G=Array.isArray(J)&&J.length>0,fe=!Array.isArray(ae[0]);if(G&&F){for(var ve=0;ve<J.length;ve++)ve>0&&(ie+=H),ie+=q(J[ve],ve);ae.length>0&&(ie+=I)}for(var oe=0;oe<ae.length;oe++){var Te=G?J.length:ae[oe].length,we=!1,Q=G?Object.keys(ae[oe]).length===0:ae[oe].length===0;if(ue&&!G&&(we=ue==="greedy"?ae[oe].join("").trim()==="":ae[oe].length===1&&ae[oe][0].length===0),ue==="greedy"&&G){for(var X=[],de=0;de<Te;de++){var ke=fe?J[de]:de;X.push(ae[oe][ke])}we=X.join("").trim()===""}if(!we){for(var pe=0;pe<Te;pe++){pe>0&&!Q&&(ie+=H);var ye=G&&fe?J[pe]:pe;ie+=q(ae[oe][ye],pe)}oe<ae.length-1&&(!ue||Te>0&&!Q)&&(ie+=I)}}return ie}function q(J,ae){if(typeof J>"u"||J===null)return"";if(J.constructor===Date)return JSON.stringify(J).slice(1,25);var ue=!1;ne&&typeof J=="string"&&ne.test(J)&&(J="'"+J,ue=!0);var ie=J.toString().replace(B,U);return ue=ue||$===!0||typeof $=="function"&&$(J,ae)||Array.isArray($)&&$[ae]||he(ie,d.BAD_DELIMITERS)||ie.indexOf(H)>-1||ie.charAt(0)===" "||ie.charAt(ie.length-1)===" ",ue?N+ie+N:ie}function he(J,ae){for(var ue=0;ue<ae.length;ue++)if(J.indexOf(ae[ue])>-1)return!0;return!1}}function p(M){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},S.call(this,M),this.parseChunk=function($,F){if(this.isFirstChunk&&x(this._config.beforeFirstChunk)){var H=this._config.beforeFirstChunk($);H!==void 0&&($=H)}this.isFirstChunk=!1,this._halted=!1;var I=this._partialLine+$;this._partialLine="";var N=this._handle.parse(I,this._baseIndex,!this._finished);if(this._handle.paused()||this._handle.aborted()){this._halted=!0;return}var U=N.meta.cursor;this._finished||(this._partialLine=I.substring(U-this._baseIndex),this._baseIndex=U),N&&N.data&&(this._rowCount+=N.data.length);var z=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(u)a.postMessage({results:N,workerId:d.WORKER_ID,finished:z});else if(x(this._config.chunk)&&!F){if(this._config.chunk(N,this._handle),this._handle.paused()||this._handle.aborted()){this._halted=!0;return}N=void 0,this._completeResults=void 0}return!this._config.step&&!this._config.chunk&&(this._completeResults.data=this._completeResults.data.concat(N.data),this._completeResults.errors=this._completeResults.errors.concat(N.errors),this._completeResults.meta=N.meta),!this._completed&&z&&x(this._config.complete)&&(!N||!N.meta.aborted)&&(this._config.complete(this._completeResults,this._input),this._completed=!0),!z&&(!N||!N.meta.paused)&&this._nextChunk(),N},this._sendError=function($){x(this._config.error)?this._config.error($):u&&this._config.error&&a.postMessage({workerId:d.WORKER_ID,error:$,finished:!1})};function S($){var F=C($);F.chunkSize=parseInt(F.chunkSize),!$.step&&!$.chunk&&(F.chunkSize=null),this._handle=new T(F),this._handle.streamer=this,this._config=F}}function g(M){M=M||{},M.chunkSize||(M.chunkSize=d.RemoteChunkSize),p.call(this,M);var S;o?this._nextChunk=function(){this._readChunk(),this._chunkLoaded()}:this._nextChunk=function(){this._readChunk()},this.stream=function(F){this._input=F,this._nextChunk()},this._readChunk=function(){if(this._finished){this._chunkLoaded();return}if(S=new XMLHttpRequest,this._config.withCredentials&&(S.withCredentials=this._config.withCredentials),o||(S.onload=W(this._chunkLoaded,this),S.onerror=W(this._chunkError,this)),S.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var F=this._config.downloadRequestHeaders;for(var H in F)S.setRequestHeader(H,F[H])}if(this._config.chunkSize){var I=this._start+this._config.chunkSize-1;S.setRequestHeader("Range","bytes="+this._start+"-"+I)}try{S.send(this._config.downloadRequestBody)}catch(N){this._chunkError(N.message)}o&&S.status===0&&this._chunkError()},this._chunkLoaded=function(){if(S.readyState===4){if(S.status<200||S.status>=400){this._chunkError();return}this._start+=this._config.chunkSize?this._config.chunkSize:S.responseText.length,this._finished=!this._config.chunkSize||this._start>=$(S),this.parseChunk(S.responseText)}},this._chunkError=function(F){var H=S.statusText||F;this._sendError(new Error(H))};function $(F){var H=F.getResponseHeader("Content-Range");return H===null?-1:parseInt(H.substring(H.lastIndexOf("/")+1))}}g.prototype=Object.create(p.prototype),g.prototype.constructor=g;function D(M){M=M||{},M.chunkSize||(M.chunkSize=d.LocalChunkSize),p.call(this,M);var S,$,F=typeof FileReader<"u";this.stream=function(H){this._input=H,$=H.slice||H.webkitSlice||H.mozSlice,F?(S=new FileReader,S.onload=W(this._chunkLoaded,this),S.onerror=W(this._chunkError,this)):S=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){!this._finished&&(!this._config.preview||this._rowCount<this._config.preview)&&this._readChunk()},this._readChunk=function(){var H=this._input;if(this._config.chunkSize){var I=Math.min(this._start+this._config.chunkSize,this._input.size);H=$.call(H,this._start,I)}var N=S.readAsText(H,this._config.encoding);F||this._chunkLoaded({target:{result:N}})},this._chunkLoaded=function(H){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(H.target.result)},this._chunkError=function(){this._sendError(S.error)}}D.prototype=Object.create(p.prototype),D.prototype.constructor=D;function v(M){M=M||{},p.call(this,M);var S;this.stream=function($){return S=$,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var $=this._config.chunkSize,F;return $?(F=S.substring(0,$),S=S.substring($)):(F=S,S=""),this._finished=!S,this.parseChunk(F)}}}v.prototype=Object.create(v.prototype),v.prototype.constructor=v;function b(M){M=M||{},p.call(this,M);var S=[],$=!0,F=!1;this.pause=function(){p.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){p.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(H){this._input=H,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){F&&S.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),S.length?this.parseChunk(S.shift()):$=!0},this._streamData=W(function(H){try{S.push(typeof H=="string"?H:H.toString(this._config.encoding)),$&&($=!1,this._checkIsFinished(),this.parseChunk(S.shift()))}catch(I){this._streamError(I)}},this),this._streamError=W(function(H){this._streamCleanUp(),this._sendError(H)},this),this._streamEnd=W(function(){this._streamCleanUp(),F=!0,this._streamData("")},this),this._streamCleanUp=W(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}b.prototype=Object.create(p.prototype),b.prototype.constructor=b;function y(M){var S=require$$0.Duplex,$=C(M),F=!0,H=!1,I=[],N=null;this._onCsvData=function(U){var z=U.data;!N.push(z)&&!this._handle.paused()&&this._handle.pause()},this._onCsvComplete=function(){N.push(null)},$.step=W(this._onCsvData,this),$.complete=W(this._onCsvComplete,this),p.call(this,$),this._nextChunk=function(){H&&I.length===1&&(this._finished=!0),I.length?I.shift()():F=!0},this._addToParseQueue=function(U,z){I.push(W(function(){if(this.parseChunk(typeof U=="string"?U:U.toString($.encoding)),x(z))return z()},this)),F&&(F=!1,this._nextChunk())},this._onRead=function(){this._handle.paused()&&this._handle.resume()},this._onWrite=function(U,z,V){this._addToParseQueue(U,V)},this._onWriteComplete=function(){H=!0,this._addToParseQueue("")},this.getStream=function(){return N},N=new S({readableObjectMode:!0,decodeStrings:!1,read:W(this._onRead,this),write:W(this._onWrite,this)}),N.once("finish",W(this._onWriteComplete,this))}typeof PAPA_BROWSER_CONTEXT>"u"&&(y.prototype=Object.create(p.prototype),y.prototype.constructor=y);function T(M){var S=Math.pow(2,53),$=-S,F=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,H=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,I=this,N=0,U=0,z,V,ne=!1,B=!1,ce,le=[],q={data:[],errors:[],meta:{}};if(x(M.step)){var he=M.step;M.step=function(X){if(q=X,ie())ue();else{if(ue(),q.data.length===0)return;N+=X.data.length,M.preview&&N>M.preview?V.abort():(q.data=q.data[0],he(q,I))}}}this.parse=function(X,de,ke){var pe=M.quoteChar||'"';if(M.newline||(M.newline=we(X,pe)),ce=!1,M.delimiter)x(M.delimiter)&&(M.delimiter=M.delimiter(X),q.meta.delimiter=M.delimiter);else{var ye=Te(X,M.newline,M.skipEmptyLines,M.comments,M.delimitersToGuess);ye.successful?M.delimiter=ye.bestDelimiter:(ce=!0,M.delimiter=d.DefaultDelimiter),q.meta.delimiter=M.delimiter}var ge=C(M);return M.preview&&M.header&&ge.preview++,z=X,V=new A(ge),q=V.parse(z,de,ke),ue(),ne?{meta:{paused:!0}}:q||{meta:{paused:!1}}},this.paused=function(){return ne},this.pause=function(){ne=!0,V.abort(),z=x(M.chunk)?"":z.substring(V.getCharIndex())},this.resume=function(){I.streamer._halted?(ne=!1,I.streamer.parseChunk(z,!0)):setTimeout(I.resume,3)},this.aborted=function(){return B},this.abort=function(){B=!0,V.abort(),q.meta.aborted=!0,x(M.complete)&&M.complete(q),z=""};function J(X){return M.skipEmptyLines==="greedy"?X.join("").trim()==="":X.length===1&&X[0].length===0}function ae(X){if(F.test(X)){var de=parseFloat(X);if(de>$&&de<S)return!0}return!1}function ue(){return q&&ce&&(Q("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+d.DefaultDelimiter+"'"),ce=!1),M.skipEmptyLines&&(q.data=q.data.filter(function(X){return!J(X)})),ie()&&G(),oe()}function ie(){return M.header&&le.length===0}function G(){if(!q)return;function X(ke,pe){x(M.transformHeader)&&(ke=M.transformHeader(ke,pe)),le.push(ke)}if(Array.isArray(q.data[0])){for(var de=0;ie()&&de<q.data.length;de++)q.data[de].forEach(X);q.data.splice(0,1)}else q.data.forEach(X)}function fe(X){return M.dynamicTypingFunction&&M.dynamicTyping[X]===void 0&&(M.dynamicTyping[X]=M.dynamicTypingFunction(X)),(M.dynamicTyping[X]||M.dynamicTyping)===!0}function ve(X,de){return fe(X)?de==="true"||de==="TRUE"?!0:de==="false"||de==="FALSE"?!1:ae(de)?parseFloat(de):H.test(de)?new Date(de):de===""?null:de:de}function oe(){if(!q||!M.header&&!M.dynamicTyping&&!M.transform)return q;function X(ke,pe){var ye=M.header?{}:[],ge;for(ge=0;ge<ke.length;ge++){var Se=ge,R=ke[ge];M.header&&(Se=ge>=le.length?"__parsed_extra":le[ge]),M.transform&&(R=M.transform(R,Se)),R=ve(Se,R),Se==="__parsed_extra"?(ye[Se]=ye[Se]||[],ye[Se].push(R)):ye[Se]=R}return M.header&&(ge>le.length?Q("FieldMismatch","TooManyFields","Too many fields: expected "+le.length+" fields but parsed "+ge,U+pe):ge<le.length&&Q("FieldMismatch","TooFewFields","Too few fields: expected "+le.length+" fields but parsed "+ge,U+pe)),ye}var de=1;return!q.data.length||Array.isArray(q.data[0])?(q.data=q.data.map(X),de=q.data.length):q.data=X(q.data,0),M.header&&q.meta&&(q.meta.fields=le),U+=de,q}function Te(X,de,ke,pe,ye){var ge,Se,R,j;ye=ye||[",","	","|",";",d.RECORD_SEP,d.UNIT_SEP];for(var K=0;K<ye.length;K++){var Z=ye[K],se=0,Y=0,ee=0;R=void 0;for(var te=new A({comments:pe,delimiter:Z,newline:de,preview:10}).parse(X),me=0;me<te.data.length;me++){if(ke&&J(te.data[me])){ee++;continue}var _e=te.data[me].length;if(Y+=_e,typeof R>"u"){R=_e;continue}else _e>0&&(se+=Math.abs(_e-R),R=_e)}te.data.length>0&&(Y/=te.data.length-ee),(typeof Se>"u"||se<=Se)&&(typeof j>"u"||Y>j)&&Y>1.99&&(Se=se,ge=Z,j=Y)}return M.delimiter=ge,{successful:!!ge,bestDelimiter:ge}}function we(X,de){X=X.substring(0,1024*1024);var ke=new RegExp(w(de)+"([^]*?)"+w(de),"gm");X=X.replace(ke,"");var pe=X.split("\r"),ye=X.split(`
`),ge=ye.length>1&&ye[0].length<pe[0].length;if(pe.length===1||ge)return`
`;for(var Se=0,R=0;R<pe.length;R++)pe[R][0]===`
`&&Se++;return Se>=pe.length/2?`\r
`:"\r"}function Q(X,de,ke,pe){var ye={type:X,code:de,message:ke};pe!==void 0&&(ye.row=pe),q.errors.push(ye)}}function w(M){return M.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function A(M){M=M||{};var S=M.delimiter,$=M.newline,F=M.comments,H=M.step,I=M.preview,N=M.fastMode,U;M.quoteChar===void 0||M.quoteChar===null?U='"':U=M.quoteChar;var z=U;if(M.escapeChar!==void 0&&(z=M.escapeChar),(typeof S!="string"||d.BAD_DELIMITERS.indexOf(S)>-1)&&(S=","),F===S)throw new Error("Comment character same as delimiter");F===!0?F="#":(typeof F!="string"||d.BAD_DELIMITERS.indexOf(F)>-1)&&(F=!1),$!==`
`&&$!=="\r"&&$!==`\r
`&&($=`
`);var V=0,ne=!1;this.parse=function(B,ce,le){if(typeof B!="string")throw new Error("Input must be a string");var q=B.length,he=S.length,J=$.length,ae=F.length,ue=x(H);V=0;var ie=[],G=[],fe=[],ve=0;if(!B)return Me();if(M.header&&!ce){var oe=B.split($)[0],Te=oe.split(S),we="_",Q=[],X={},de=!1;for(var ke in Te){var pe=Te[ke];x(M.transformHeader)&&(pe=M.transformHeader(pe,ke));var ye=pe,ge=X[pe]||0;for(ge>0&&(de=!0,ye=pe+we+ge),X[pe]=ge+1;Q.includes(ye);)ye=ye+we+ge;Q.push(ye)}if(de){var Se=B.split($);Se[0]=Q.join(S),B=Se.join($)}}if(N||N!==!1&&B.indexOf(U)===-1){for(var R=B.split($),j=0;j<R.length;j++){if(fe=R[j],V+=fe.length,j!==R.length-1)V+=$.length;else if(le)return Me();if(!(F&&fe.substring(0,ae)===F)){if(ue){if(ie=[],De(fe.split(S)),Fe(),ne)return Me()}else De(fe.split(S));if(I&&j>=I)return ie=ie.slice(0,I),Me(!0)}}return Me()}for(var K=B.indexOf(S,V),Z=B.indexOf($,V),se=new RegExp(w(z)+w(U),"g"),Y=B.indexOf(U,V);;){if(B[V]===U){for(Y=V,V++;;){if(Y=B.indexOf(U,Y+1),Y===-1)return le||G.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ie.length,index:V}),be();if(Y===q-1){var ee=B.substring(V,Y).replace(se,U);return be(ee)}if(U===z&&B[Y+1]===z){Y++;continue}if(!(U!==z&&Y!==0&&B[Y-1]===z)){K!==-1&&K<Y+1&&(K=B.indexOf(S,Y+1)),Z!==-1&&Z<Y+1&&(Z=B.indexOf($,Y+1));var te=Z===-1?K:Math.min(K,Z),me=$e(te);if(B.substr(Y+1+me,he)===S){fe.push(B.substring(V,Y).replace(se,U)),V=Y+1+me+he,B[Y+1+me+he]!==U&&(Y=B.indexOf(U,V)),K=B.indexOf(S,V),Z=B.indexOf($,V);break}var _e=$e(Z);if(B.substring(Y+1+_e,Y+1+_e+J)===$){if(fe.push(B.substring(V,Y).replace(se,U)),Ae(Y+1+_e+J),K=B.indexOf(S,V),Y=B.indexOf(U,V),ue&&(Fe(),ne))return Me();if(I&&ie.length>=I)return Me(!0);break}G.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ie.length,index:V}),Y++}}continue}if(F&&fe.length===0&&B.substring(V,V+ae)===F){if(Z===-1)return Me();V=Z+J,Z=B.indexOf($,V),K=B.indexOf(S,V);continue}if(K!==-1&&(K<Z||Z===-1)){fe.push(B.substring(V,K)),V=K+he,K=B.indexOf(S,V);continue}if(Z!==-1){if(fe.push(B.substring(V,Z)),Ae(Z+J),ue&&(Fe(),ne))return Me();if(I&&ie.length>=I)return Me(!0);continue}break}return be();function De(Oe){ie.push(Oe),ve=V}function $e(Oe){var Ie=0;if(Oe!==-1){var Ce=B.substring(Y+1,Oe);Ce&&Ce.trim()===""&&(Ie=Ce.length)}return Ie}function be(Oe){return le||(typeof Oe>"u"&&(Oe=B.substring(V)),fe.push(Oe),V=q,De(fe),ue&&Fe()),Me()}function Ae(Oe){V=Oe,De(fe),fe=[],Z=B.indexOf($,V)}function Me(Oe){return{data:ie,errors:G,meta:{delimiter:S,linebreak:$,aborted:ne,truncated:!!Oe,cursor:ve+(ce||0)}}}function Fe(){H(Me()),ie=[],G=[]}},this.abort=function(){ne=!0},this.getCharIndex=function(){return V}}function E(){if(!d.WORKERS_SUPPORTED)return!1;var M=i(),S=new a.Worker(M);return S.onmessage=k,S.id=f++,c[S.id]=S,S}function k(M){var S=M.data,$=c[S.workerId],F=!1;if(S.error)$.userError(S.error,S.file);else if(S.results&&S.results.data){var H=function(){F=!0,O(S.workerId,{data:[],errors:[],meta:{aborted:!0}})},I={abort:H,pause:L,resume:L};if(x($.userStep)){for(var N=0;N<S.results.data.length&&($.userStep({data:S.results.data[N],errors:S.results.errors,meta:S.results.meta},I),!F);N++);delete S.results}else x($.userChunk)&&($.userChunk(S.results,I,S.file),delete S.results)}S.finished&&!F&&O(S.workerId,S.results)}function O(M,S){var $=c[M];x($.userComplete)&&$.userComplete(S),$.terminate(),delete c[M]}function L(){throw new Error("Not implemented.")}function P(M){var S=M.data;if(typeof d.WORKER_ID>"u"&&S&&(d.WORKER_ID=S.workerId),typeof S.input=="string")a.postMessage({workerId:d.WORKER_ID,results:d.parse(S.input,S.config),finished:!0});else if(a.File&&S.input instanceof File||S.input instanceof Object){var $=d.parse(S.input,S.config);$&&a.postMessage({workerId:d.WORKER_ID,results:$,finished:!0})}}function C(M){if(typeof M!="object"||M===null)return M;var S=Array.isArray(M)?[]:{};for(var $ in M)S[$]=C(M[$]);return S}function W(M,S){return function(){M.apply(S,arguments)}}function x(M){return typeof M=="function"}return d})})(papaparse);var papaparseExports=papaparse.exports;const Papa=getDefaultExportFromCjs(papaparseExports);function create_fragment$2(t){let e,r,a;return{c(){e=element("input"),attr(e,"type","file"),attr(e,"id","fileInput"),set_style(e,"display","none"),attr(e,"accept",".csv,.txt,.TXT")},m(i,o){insert(i,e,o),r||(a=listen(e,"change",t[2]),r=!0)},p:noop,i:noop,o:noop,d(i){i&&detach(e),r=!1,a()}}}function instance$2(t,e,r){let a,i;component_subscribe(t,data,p=>r(4,a=p)),component_subscribe(t,importFileOpen,p=>r(1,i=p));let o=["NaN","NA","null"],u,c;function f(p,g){const D=v=>Object.values(v).every(b=>b==null);p.data=p.data.filter(v=>!D(v)),d(g),c.datalength=p.data.length,p.meta.fields.forEach(v=>{const b=h(p.data,v);if(!isNaN(b))console.log(c.data),c.data[v]={name:v,type:"value",data:p.data.map(y=>y[v]),processSteps:[],processedData:[]};else if(guessDateofArray([b])!=-1){const y=guessDateofArray([b]);console.log("guessedformat = "+y),c.data[v]={name:v,type:"time",data:p.data.map(T=>T[v]),timeFormat:y,timeData:forceFormat(p.data.map(T=>T[v]),y),recordPeriod:getPeriod(b,y),processSteps:[],rocessedData:[]}}}),a.push(c),data.set(a),console.log(c)}function d(p){c={id:m(),importedFrom:p,displayName:"data_"+m(),datalength:NaN,data:{}}}function m(){if(a.length===0)return 0;let p=[];return a.forEach(g=>p.push(g.id)),Math.max(...p)+1}function h(p,g){for(const D of p){const v=D[g];if(v!==null&&v!==""&&!o.includes(v))return v}return null}function _(){u=this.files,r(0,u)}return t.$$.update=()=>{t.$$.dirty&1&&u&&(console.log(`${u[0].name}: ${u[0].size} bytes`),Papa.parse(u[0],{header:!0,dynamicTyping:!0,error(p,g,D,v){console.log("Error: "+p+" | "+v)},complete(p){console.log(u[0].name),console.log(p.meta),console.log(p.data),f(p,u[0].name)}})),t.$$.dirty&2&&i&&(document.getElementById("fileInput").click(),set_store_value(importFileOpen,i=!1,i))},[u,i,_]}class ImportData extends SvelteComponent{constructor(e){super(),init(this,e,instance$2,create_fragment$2,safe_not_equal,{})}}const version="2.22";function create_if_block(t){let e,r;return e=new Dialog({props:{title:"ABOUT",$$slots:{default:[create_default_slot$1]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment)},m(a,i){mount_component(e,a,i),r=!0},i(a){r||(transition_in(e.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),r=!1},d(a){destroy_component(e,a)}}}function create_default_slot$1(t){let e,r,a,i,o,u,c,f,d,m,h,_,p,g,D,v,b,y,T,w,A,E,k;return{c(){e=element("h3"),e.textContent="Analysis of Circadian Rhythms (AnCir)",r=space(),a=element("p"),a.textContent=`This is our 'AnCir' to the need for a simple-to-use (GUI; no coding) tool
      for analysis of circadian rhythms. Currently, the tool only allows for
      import of csv data and plotting of actigrams.`,i=space(),o=element("p"),o.textContent="This is written in Svelte, with help from @korur and @khromov - thank you!",u=space(),c=element("h4"),c.textContent="For users",f=space(),d=element("p"),d.innerHTML=`AnCiR should start with some sample data already in the <strong>Data</strong> section on the left hand side. If you want to generate more sample data,
      just click on _Data_&gt;_Create_ and a new Sample set should appear. Similarly,
      if you have your own .csv file, then you can import it and it should show up
      in the list.`,m=space(),h=element("p"),h.textContent=`Clicking on the name of the data table should display the contents in the
      bottom viewer, so you can see what the data look like.`,_=space(),p=element("p"),p.textContent=`To create an actigram, click on _Plot_>_Actigram_. You can change the data
      that is used by using the dropdown lists under _Data for this plot_ on the
      right hand panel. You can add multiple data sources and change their
      colours. To see the post-processed data useed in the plot, click on the
      hyperlinked data for each source and see it appear in the data tabs below.`,g=space(),D=element("p"),D.textContent="The other controls for the actigram should be self-explanatory.",v=space(),b=element("p"),b.textContent=`The Periodogram plot is what it says it is, and raw is just a plot of the
      data - with similar controls to the actigram.`,y=space(),T=element("p"),T.textContent="Have fun.",w=space(),A=element("h4"),A.textContent="For developers",E=space(),k=element("p"),k.innerHTML='Any advice or offers of support will be welcommed - email <a href="mailto:d.cumin@auckland.ac.nz?subject=AnCiR">d.cumin@auckland.ac.nz</a>'},m(O,L){insert(O,e,L),insert(O,r,L),insert(O,a,L),insert(O,i,L),insert(O,o,L),insert(O,u,L),insert(O,c,L),insert(O,f,L),insert(O,d,L),insert(O,m,L),insert(O,h,L),insert(O,_,L),insert(O,p,L),insert(O,g,L),insert(O,D,L),insert(O,v,L),insert(O,b,L),insert(O,y,L),insert(O,T,L),insert(O,w,L),insert(O,A,L),insert(O,E,L),insert(O,k,L)},p:noop,d(O){O&&(detach(e),detach(r),detach(a),detach(i),detach(o),detach(u),detach(c),detach(f),detach(d),detach(m),detach(h),detach(_),detach(p),detach(g),detach(D),detach(v),detach(b),detach(y),detach(T),detach(w),detach(A),detach(E),detach(k))}}}function create_fragment$1(t){let e,r,a=t[0]==="about"&&create_if_block(t);return{c(){a&&a.c(),e=empty$1()},m(i,o){a&&a.m(i,o),insert(i,e,o),r=!0},p(i,[o]){i[0]==="about"?a?o&1&&transition_in(a,1):(a=create_if_block(i),a.c(),transition_in(a,1),a.m(e.parentNode,e)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(i){r||(transition_in(a),r=!0)},o(i){transition_out(a),r=!1},d(i){i&&detach(e),a&&a.d(i)}}}function instance$1(t,e,r){let a;return component_subscribe(t,menuModalType,i=>r(0,a=i)),[a]}class About extends SvelteComponent{constructor(e){super(),init(this,e,instance$1,create_fragment$1,safe_not_equal,{})}}function create_default_slot_6(t){let e,r;return e=new DataTree({}),{c(){create_component(e.$$.fragment)},m(a,i){mount_component(e,a,i),r=!0},i(a){r||(transition_in(e.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),r=!1},d(a){destroy_component(e,a)}}}function create_default_slot_5(t){let e,r,a,i;return e=new GraphMaster({}),a=new TableMaster({}),{c(){create_component(e.$$.fragment),r=space(),create_component(a.$$.fragment)},m(o,u){mount_component(e,o,u),insert(o,r,u),mount_component(a,o,u),i=!0},i(o){i||(transition_in(e.$$.fragment,o),transition_in(a.$$.fragment,o),i=!0)},o(o){transition_out(e.$$.fragment,o),transition_out(a.$$.fragment,o),i=!1},d(o){o&&detach(r),destroy_component(e,o),destroy_component(a,o)}}}function create_default_slot_4(t){let e,r;return e=new Splitpanes({props:{theme:"modern-theme",horizontal:!0,style:"height: 100%;",pushOtherPanes:!1,dblClickSplitter:!1,$$slots:{default:[create_default_slot_5]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment)},m(a,i){mount_component(e,a,i),r=!0},p(a,i){const o={};i&2&&(o.$$scope={dirty:i,ctx:a}),e.$set(o)},i(a){r||(transition_in(e.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),r=!1},d(a){destroy_component(e,a)}}}function create_default_slot_3(t){let e,r,a,i;return e=new Pane({props:{size:18,$$slots:{default:[create_default_slot_6]},$$scope:{ctx:t}}}),a=new Pane({props:{$$slots:{default:[create_default_slot_4]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment),r=space(),create_component(a.$$.fragment)},m(o,u){mount_component(e,o,u),insert(o,r,u),mount_component(a,o,u),i=!0},p(o,u){const c={};u&2&&(c.$$scope={dirty:u,ctx:o}),e.$set(c);const f={};u&2&&(f.$$scope={dirty:u,ctx:o}),a.$set(f)},i(o){i||(transition_in(e.$$.fragment,o),transition_in(a.$$.fragment,o),i=!0)},o(o){transition_out(e.$$.fragment,o),transition_out(a.$$.fragment,o),i=!1},d(o){o&&detach(r),destroy_component(e,o),destroy_component(a,o)}}}function create_default_slot_2(t){let e,r;return e=new Splitpanes({props:{theme:"modern-theme",style:"height: 100%;",pushOtherPanes:!1,dblClickSplitter:!0,$$slots:{default:[create_default_slot_3]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment)},m(a,i){mount_component(e,a,i),r=!0},p(a,i){const o={};i&2&&(o.$$scope={dirty:i,ctx:a}),e.$set(o)},i(a){r||(transition_in(e.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),r=!1},d(a){destroy_component(e,a)}}}function create_default_slot_1(t){let e,r;return e=new StatusMaster({}),{c(){create_component(e.$$.fragment)},m(a,i){mount_component(e,a,i),r=!0},i(a){r||(transition_in(e.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),r=!1},d(a){destroy_component(e,a)}}}function create_default_slot(t){let e,r,a,i;return e=new Pane({props:{minSize:30,$$slots:{default:[create_default_slot_2]},$$scope:{ctx:t}}}),a=new Pane({props:{size:10,$$slots:{default:[create_default_slot_1]},$$scope:{ctx:t}}}),{c(){create_component(e.$$.fragment),r=space(),create_component(a.$$.fragment)},m(o,u){mount_component(e,o,u),insert(o,r,u),mount_component(a,o,u),i=!0},p(o,u){const c={};u&2&&(c.$$scope={dirty:u,ctx:o}),e.$set(c);const f={};u&2&&(f.$$scope={dirty:u,ctx:o}),a.$set(f)},i(o){i||(transition_in(e.$$.fragment,o),transition_in(a.$$.fragment,o),i=!0)},o(o){transition_out(e.$$.fragment,o),transition_out(a.$$.fragment,o),i=!1},d(o){o&&detach(r),destroy_component(e,o),destroy_component(a,o)}}}function create_fragment(t){let e,r,a,i,o,u,c,f,d,m,h,_,p,g,D,v,b;return document.title="AnCiR v ."+version,r=new ContextMenu({}),i=new GenerateSimulated({}),u=new About({}),f=new ImportData({}),_=new MenuMaster({}),g=new Splitpanes({props:{theme:"modern-theme",horizontal:!0,style:"height: calc(100vh - 3.4em); width: calc(100vw - 1em);",pushOtherPanes:!1,$$slots:{default:[create_default_slot]},$$scope:{ctx:t}}}),v=new ProcessStep({}),{c(){e=space(),create_component(r.$$.fragment),a=space(),create_component(i.$$.fragment),o=space(),create_component(u.$$.fragment),c=space(),create_component(f.$$.fragment),d=space(),m=element("div"),h=element("div"),create_component(_.$$.fragment),p=space(),create_component(g.$$.fragment),D=space(),create_component(v.$$.fragment),set_style(h,"max-width","100vw"),attr(m,"data-theme",t[0])},m(y,T){insert(y,e,T),mount_component(r,y,T),insert(y,a,T),mount_component(i,y,T),insert(y,o,T),mount_component(u,y,T),insert(y,c,T),mount_component(f,y,T),insert(y,d,T),insert(y,m,T),append(m,h),mount_component(_,h,null),append(m,p),mount_component(g,m,null),append(m,D),mount_component(v,m,null),b=!0},p(y,[T]){const w={};T&2&&(w.$$scope={dirty:T,ctx:y}),g.$set(w),(!b||T&1)&&attr(m,"data-theme",y[0])},i(y){b||(transition_in(r.$$.fragment,y),transition_in(i.$$.fragment,y),transition_in(u.$$.fragment,y),transition_in(f.$$.fragment,y),transition_in(_.$$.fragment,y),transition_in(g.$$.fragment,y),transition_in(v.$$.fragment,y),b=!0)},o(y){transition_out(r.$$.fragment,y),transition_out(i.$$.fragment,y),transition_out(u.$$.fragment,y),transition_out(f.$$.fragment,y),transition_out(_.$$.fragment,y),transition_out(g.$$.fragment,y),transition_out(v.$$.fragment,y),b=!1},d(y){y&&(detach(e),detach(a),detach(o),detach(c),detach(d),detach(m)),destroy_component(r,y),destroy_component(i,y),destroy_component(u,y),destroy_component(f,y),destroy_component(_),destroy_component(g),destroy_component(v)}}}function instance(t,e,r){let a;return component_subscribe(t,selectedTheme,i=>r(0,a=i)),console.log(version),[a]}class App extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{})}}new App({target:document.getElementById("app")});

</script>
    <style>
:root{--bg-color: #fff;--font-color: #424242;--hover-color: #eee;--primary-color: lightblue;--secondary-color: #888888}[data-theme=dark]{--bg-color: #161625;--font-color: #e1e1ff;--hover-color: #888888;--primary-color: #9A97F3;--secondary-color: #888888}*{font-size:10pt;color:var(--font-color)}body{-webkit-tap-highlight-color:transparent;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;background:var(--bg-color)}h1{padding:6px 6px 0;font-weight:700;font-size:1.2em;text-decoration:underline}button{cursor:pointer}::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.3);background-color:#f5f5f5}::-webkit-scrollbar{width:6px;height:6px;background-color:var(--bg-color)}::-webkit-scrollbar-thumb{background-color:var(--secondary-color)}.splitpanes.modern-theme .splitpanes__pane{background-color:hsl(var(--b1))}.splitpanes__splitter{position:relative;cursor:grab;padding:.2em;opacity:.6}.splitpanes--vertical>.splitpanes__splitter{cursor:col-resize}.splitpanes--horizontal>.splitpanes__splitter{cursor:row-resize}.splitpanes.modern-theme .splitpanes__splitter{background-color:var(--hover-color);position:relative}.splitpanes__splitter:before{content:"";position:absolute;left:0;top:0;transition:opacity .4s;background-color:var(--bg-color);opacity:0;z-index:1}.splitpanes__splitter:hover{opacity:.6}.splitpanes__splitter:hover:before{opacity:.6}.splitpanes--vertical>.splitpanes__splitter:before{left:-3px;right:-3px;height:100%}.splitpanes--horizontal>.splitpanes__splitter:before{top:-3px;bottom:-3px;width:100%}.chartControls{width:calc(100% - 28px);border-radius:0;min-width:184px;box-shadow:1px 1px 5px #888;padding:10px 8px;margin:10px 0 10px 6px}.sliderContainer{width:calc(100% - .5em);display:flex}.sliderContainer>label{line-height:1rem;align-self:center;display:flex;padding:15px 0}input[type=text],input[type=datetime-local]{height:1.4em;border-radius:.5rem;align-self:center;padding-left:4px;border-width:1px;display:flex;margin-left:auto;width:60%;background:var(--bg-color)}select{height:1.5rem;align-self:center;border-radius:.5rem;width:50%;float:right;margin-right:calc(.5em + 2px);margin-top:-2px;background-color:var(--bg-color)}.processItem{flex-basis:100%;flex-grow:0;flex-shrink:0}g.axis>path{font-size:10pt;stroke:var(--font-color)!important}#thePlot svg{border:1px solid var(--hover-color)}div.splitpanes--horizontal.splitpanes--dragging{cursor:row-resize}div.splitpanes--vertical.splitpanes--dragging{cursor:col-resize}.splitpanes{display:flex;width:100%;height:100%}.splitpanes--vertical{flex-direction:row}.splitpanes--horizontal{flex-direction:column}.splitpanes--dragging *{-webkit-user-select:none;-moz-user-select:none;user-select:none}.splitpanes__pane{width:100%;height:100%;overflow:hidden}.splitpanes--vertical .splitpanes__pane{transition:width .2s ease-out}.splitpanes--horizontal .splitpanes__pane{transition:height .2s ease-out}.splitpanes--vertical>.splitpanes__pane{transition:width .2s ease-out}.splitpanes--horizontal>.splitpanes__pane{transition:height .2s ease-out}.splitpanes--dragging .splitpanes__pane{transition:none;pointer-events:none}.splitpanes--freeze .splitpanes__pane{transition:none}.splitpanes__splitter{touch-action:none}.splitpanes--vertical>.splitpanes__splitter{min-width:1px}.splitpanes--horizontal>.splitpanes__splitter{min-height:1px}.splitpanes.default-theme .splitpanes__pane{background-color:#f2f2f2}.splitpanes.default-theme .splitpanes__splitter{background-color:#fff;box-sizing:border-box;position:relative;flex-shrink:0}.splitpanes.default-theme .splitpanes__splitter:before,.splitpanes.default-theme .splitpanes__splitter:after{content:"";position:absolute;top:50%;left:50%;background-color:#00000026;transition:background-color .3s}.splitpanes.default-theme .splitpanes__splitter:hover:before,.splitpanes.default-theme .splitpanes__splitter:hover:after{background-color:#00000040}.splitpanes.default-theme .splitpanes__splitter:first-child{cursor:auto}.default-theme.splitpanes .splitpanes .splitpanes__splitter{z-index:1}.default-theme.splitpanes--vertical>.splitpanes__splitter,.default-theme .splitpanes--vertical>.splitpanes__splitter{width:7px;border-left:1px solid #eee;cursor:col-resize}.default-theme.splitpanes--vertical>.splitpanes__splitter:before,.default-theme.splitpanes--vertical>.splitpanes__splitter:after,.default-theme .splitpanes--vertical>.splitpanes__splitter:before,.default-theme .splitpanes--vertical>.splitpanes__splitter:after{transform:translateY(-50%);width:1px;height:30px}.default-theme.splitpanes--vertical>.splitpanes__splitter:before,.default-theme .splitpanes--vertical>.splitpanes__splitter:before{margin-left:-2px}.default-theme.splitpanes--vertical>.splitpanes__splitter:after,.default-theme .splitpanes--vertical>.splitpanes__splitter:after{margin-left:1px}.default-theme.splitpanes--horizontal>.splitpanes__splitter,.default-theme .splitpanes--horizontal>.splitpanes__splitter{height:7px;border-top:1px solid #eee;cursor:row-resize}.default-theme.splitpanes--horizontal>.splitpanes__splitter:before,.default-theme.splitpanes--horizontal>.splitpanes__splitter:after,.default-theme .splitpanes--horizontal>.splitpanes__splitter:before,.default-theme .splitpanes--horizontal>.splitpanes__splitter:after{transform:translate(-50%);width:30px;height:1px}.default-theme.splitpanes--horizontal>.splitpanes__splitter:before,.default-theme .splitpanes--horizontal>.splitpanes__splitter:before{margin-top:-2px}.default-theme.splitpanes--horizontal>.splitpanes__splitter:after,.default-theme .splitpanes--horizontal>.splitpanes__splitter:after{margin-top:1px}.backdrop.svelte-r5e5cj{position:absolute;top:0;left:0;height:100vh;width:100vw;background:#fffc;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);z-index:9998}dialog.svelte-r5e5cj{display:block;position:absolute;top:10vh;max-height:80vh;max-width:80vw;min-width:270px;overflow:auto;background:var(--bg-color);z-index:9999;box-shadow:5px 5px 15px var(--secondary-color);border:none;border-radius:5px}.closeDialogButton.svelte-r5e5cj{width:15px;cursor:pointer;padding:0;float:right;margin-right:5px;margin-top:-10px;border:none;background-color:var(--bg-color)}svg.svelte-r5e5cj:hover{stroke:red}.numberInput.svelte-1o4zp2p.svelte-1o4zp2p{width:40%;max-width:6em;float:right;height:1.1rem;border-radius:.5rem;margin-left:auto;align-self:center;padding-left:4px;border-width:1px;text-align:end;background:var(--bg-color)}.sliderInput.svelte-1o4zp2p.svelte-1o4zp2p{width:100%;accent-color:var(--primary-color);cursor:pointer;box-sizing:border-box;border-width:0;border-style:solid}.sliderLabel.svelte-1o4zp2p.svelte-1o4zp2p{line-height:1rem;display:flex}.sliderLabel.svelte-1o4zp2p>span.svelte-1o4zp2p{align-self:center}.processItem.svelte-1o4zp2p.svelte-1o4zp2p{padding:5px 0}.min.svelte-1o4zp2p.svelte-1o4zp2p{font-size:.7em;display:block;margin-top:-.7em;margin-left:.2em}.max.svelte-1o4zp2p.svelte-1o4zp2p{font-size:.7em;display:block;margin-top:-1.3em;margin-left:.2em;float:right}.stop.svelte-1o4zp2p.svelte-1o4zp2p{font-style:italic;text-decoration:underline}.addSimDataButton.svelte-13hhe3j{float:right;margin-top:-2.2em}.addSimDataButton.svelte-13hhe3j:hover{background:var(--hover-color);padding:.2em .5em;margin:-2.4em -.5em;border-radius:20%;cursor:pointer}.dataTitle.svelte-13hhe3j{margin-top:10px}.datum.svelte-13hhe3j{box-shadow:1px 1px 5px var(--secondary-color);padding:2px 10px;margin:0 0 10px}.removeData.svelte-13hhe3j{display:inline-block;float:right;cursor:pointer;margin-top:-1.3em}.hoverbutton.svelte-13hhe3j:hover{background:var(--hover-color);padding:.2em .5em;margin:-1.5em -.5em;border-radius:20%;cursor:pointer}span.svelte-1tdrfqa{cursor:context-menu}form.svelte-1tdrfqa{display:inline}input.svelte-1tdrfqa{display:inherit;border:none;background:inherit;background-color:inherit;font-size:inherit;color:inherit;font-weight:inherit;text-align:inherit;box-shadow:none}.editing.svelte-1tdrfqa{font-style:italic}.dataTree.svelte-hshnm9.svelte-hshnm9{width:calc(100% - 6px);border-radius:0;margin-left:1px;min-width:200px}details.svelte-hshnm9.svelte-hshnm9{padding:0 10px}summary.svelte-hshnm9.svelte-hshnm9{padding:0 10px;cursor:pointer}.dataTable.svelte-hshnm9.svelte-hshnm9{box-shadow:1px 1px 5px #888;padding:10px 0;margin:8px 0 10px}.dataTable.svelte-hshnm9>summary.svelte-hshnm9{font-size:1.1em;font-weight:700}.field.svelte-hshnm9.svelte-hshnm9{margin-left:1.5em;padding:5px 0}.process[open].svelte-hshnm9.svelte-hshnm9{margin-bottom:15px;margin-top:5px;margin-right:10px;box-shadow:1px 1px 5px #888}.process.svelte-hshnm9.svelte-hshnm9{margin-left:1.5em;padding:5px 0}.processDetails.svelte-hshnm9.svelte-hshnm9{padding:.5em}.no-arrow.svelte-hshnm9 summary.svelte-hshnm9{list-style:none;cursor:default}.no-arrow.svelte-hshnm9 summary.svelte-hshnm9:before{content:"";margin-left:-2px}.addbutton.svelte-hshnm9.svelte-hshnm9{float:right;cursor:pointer;margin-right:0}.addbutton.svelte-hshnm9.svelte-hshnm9:hover{background:var(--hover-color);padding:.2em .5em;margin-right:-.5em;margin-top:-.2em;border-radius:20%}.deleteTable.svelte-hshnm9.svelte-hshnm9{display:inline-block;float:right;cursor:pointer;margin-right:0;z-index:2}.hoverbutton.svelte-hshnm9.svelte-hshnm9:hover{background:var(--hover-color);padding:.2em .5em;margin:-.2em -.5em;border-radius:20%;cursor:pointer}.viewTable.svelte-hshnm9.svelte-hshnm9{display:inline-block;float:right;cursor:pointer;margin-right:.5em}.viewTable.svelte-hshnm9.svelte-hshnm9:hover{margin-right:0;cursor:pointer}.deleteProcess.svelte-hshnm9.svelte-hshnm9{display:inline-block;float:right;cursor:pointer;margin-right:0}.tooltip.svelte-1926ilb{border:1px solid #ddd;box-shadow:1px 1px 1px #ddd;background:#fff;border-radius:4px;padding:4px;position:absolute;margin:0;z-index:9999}#chartTools.svelte-1289zmx{margin-top:-10px;background-color:var(--hover-color);-webkit-backdrop-filter:blur(1px);backdrop-filter:blur(1px);opacity:.4;position:absolute;margin-left:calc(100% - 10em);border-radius:5px;display:flex}.button.svelte-1289zmx{margin:5px;border:none;border-radius:20%;padding:.2em .5em;opacity:1;cursor:pointer;width:20px;height:20px}.button.svelte-1289zmx:hover{background:var(--hover-color)}#chartTools.svelte-1289zmx:hover{opacity:1;background:var(--bg-color)}#graphTabs.svelte-1gfrvzx.svelte-1gfrvzx{position:sticky;top:0;left:0;z-index:999;background:var(--bg-color);padding:0;margin:0!important;display:flow-root}nav.svelte-1gfrvzx.svelte-1gfrvzx{margin:0;background-color:var(--bg-color);z-index:9;width:100%}ul.svelte-1gfrvzx.svelte-1gfrvzx{display:flex;flex-wrap:wrap;list-style:none;border-bottom:3px solid var(--hover-color);margin-left:-2em;margin-top:2px}li.svelte-1gfrvzx.svelte-1gfrvzx{margin-bottom:-3px;margin-right:2px;border-top-left-radius:.25rem;border-top-right-radius:.25rem;background:var(--hover-color)}span.svelte-1gfrvzx.svelte-1gfrvzx{border:3px solid transparent;border-top-left-radius:.25rem;border-top-right-radius:.25rem;display:block;padding:.5rem 1rem;cursor:pointer}li.active.svelte-1gfrvzx>span.svelte-1gfrvzx,li.active.svelte-1gfrvzx>.closeButton.svelte-1gfrvzx,li.active.svelte-1gfrvzx:hover>span.svelte-1gfrvzx{border-color:var(--hover-color) var(--hover-color) var(--bg-color);background:var(--bg-color)}li.svelte-1gfrvzx.svelte-1gfrvzx:hover,li.svelte-1gfrvzx:hover>span.svelte-1gfrvzx,li.svelte-1gfrvzx:hover>.closeButton.svelte-1gfrvzx{border-color:var(--hover-color) var(--hover-color) var(--hover-color);background:var(--bg-color)}li.active.svelte-1gfrvzx:hover>span.svelte-1gfrvzx,li.active.svelte-1gfrvzx:hover>.closeButton.svelte-1gfrvzx{cursor:default;background:var(--bg-color)}.closeButton.svelte-1gfrvzx.svelte-1gfrvzx{width:15px;cursor:pointer;padding:0;float:right;margin-right:3px;margin-top:-32px;border:none;background-color:var(--hover-color)}svg.svelte-1gfrvzx.svelte-1gfrvzx:hover{stroke:red}.overlay.svelte-1hj8mph{position:absolute;cursor:pointer;z-index:10001;background:var(--hover-color);padding:5px;border-radius:10px;box-shadow:0 0 15px -5px var(--font-color)}.dateInput.svelte-1xir1xc{margin-right:2px;width:18px;padding-right:4px;margin-bottom:5px;margin-top:-3px;padding-top:2px;background:var(--primary-color);cursor:pointer}.datepicklabelshow.svelte-1xir1xc{display:inline-block}.datepicklabel.svelte-1xir1xc{display:none}.dateInput.svelte-1xir1xc:hover{background:#eee}.svelte-1xir1xc::-webkit-calendar-picker-indicator:hover{cursor:pointer}div.svelte-1wb4l5o{border:1px solid #ddd;box-shadow:1px 1px 1px #ddd;background:#fff;border-radius:4px;padding:4px;position:absolute}.graphDataTree.svelte-tzfpl2.svelte-tzfpl2{width:calc(100% - 12px);border-radius:0;margin-left:6px;min-width:200px}details.svelte-tzfpl2.svelte-tzfpl2{padding:0 10px}summary.svelte-tzfpl2.svelte-tzfpl2{padding:0 10px;cursor:pointer}.dataTable.svelte-tzfpl2.svelte-tzfpl2{box-shadow:1px 1px 5px #888;padding:10px 0;margin:8px 0 10px}.dataTable.svelte-tzfpl2>summary.svelte-tzfpl2{font-size:1.1em;font-weight:700}.tableLabel.svelte-tzfpl2.svelte-tzfpl2{margin:1em 1em .5em}.field.svelte-tzfpl2.svelte-tzfpl2{margin-left:1.5em;padding:5px 0}.process[open].svelte-tzfpl2.svelte-tzfpl2{margin-bottom:15px;margin-top:5px;margin-right:10px;box-shadow:1px 1px 5px #888}.process.svelte-tzfpl2.svelte-tzfpl2{margin-left:1.5em;padding:5px 0}.processDetails.svelte-tzfpl2.svelte-tzfpl2{padding:.5em}.no-arrow.svelte-tzfpl2 summary.svelte-tzfpl2{list-style:none;cursor:default}.no-arrow.svelte-tzfpl2 summary.svelte-tzfpl2:before{content:"";margin-left:-2px}.addbutton.svelte-tzfpl2.svelte-tzfpl2{float:right;cursor:pointer;margin-right:0}.addbutton.svelte-tzfpl2.svelte-tzfpl2:hover{background:var(--hover-color);padding:.2em .5em;margin-right:-.5em;margin-top:-.2em;border-radius:20%}.deleteTable.svelte-tzfpl2.svelte-tzfpl2{display:inline-block;float:right;cursor:pointer;margin-right:0;z-index:2}.hoverbutton.svelte-tzfpl2.svelte-tzfpl2:hover{background:var(--hover-color);padding:.2em .5em;margin:-.2em -.5em;border-radius:20%;cursor:pointer}.deleteProcess.svelte-tzfpl2.svelte-tzfpl2{display:inline-block;float:right;cursor:pointer;margin-right:0}.colour.svelte-tzfpl2.svelte-tzfpl2{display:flex;align-items:center;margin-left:1em;margin-right:1em}.colourPicker.svelte-tzfpl2.svelte-tzfpl2{border-radius:25px;height:2.5em;padding:0;width:2.5em;margin-right:1em}.colourPicker.svelte-tzfpl2.svelte-tzfpl2::-webkit-color-swatch{display:none}.colourPicker.svelte-tzfpl2.svelte-tzfpl2::-moz-color-swatch{display:none}.sliderContainer.svelte-tzfpl2.svelte-tzfpl2{width:calc(100% - 3.5em)}.itemsliderContainer.svelte-tzfpl2.svelte-tzfpl2{width:calc(100% - 2em);margin-left:1em}#tableTabs.svelte-nulfcf.svelte-nulfcf{position:sticky;top:0;left:0;z-index:999;padding:0;margin:0 2.2em 0 0!important}nav.svelte-nulfcf.svelte-nulfcf{margin:0;z-index:9;width:calc(100% + 2.2em);background-color:var(--bg-color)}ul.svelte-nulfcf.svelte-nulfcf{display:flex;flex-wrap:wrap;list-style:none;border-bottom:3px solid var(--hover-color);margin-top:2px}li.svelte-nulfcf.svelte-nulfcf{margin-bottom:-3px;margin-right:2px;border-top-left-radius:.25rem;border-top-right-radius:.25rem;background:var(--hover-color)}span.svelte-nulfcf.svelte-nulfcf{border:3px solid transparent;border-top-left-radius:.25rem;border-top-right-radius:.25rem;display:block;padding:.5rem 1rem;cursor:pointer}li.active.svelte-nulfcf>span.svelte-nulfcf,li.active.svelte-nulfcf>.closeButton.svelte-nulfcf,li.active.svelte-nulfcf:hover>span.svelte-nulfcf{border-color:var(--hover-color) var(--hover-color) var(--bg-color);background:var(--bg-color)}li.svelte-nulfcf.svelte-nulfcf:hover,li.svelte-nulfcf:hover>span.svelte-nulfcf,li.svelte-nulfcf:hover>.closeButton.svelte-nulfcf{border-color:var(--hover-color) var(--hover-color) var(--hover-color);background:var(--bg-color)}li.active.svelte-nulfcf:hover>span.svelte-nulfcf,li.active.svelte-nulfcf:hover>.closeButton.svelte-nulfcf{cursor:default;background:var(--bg-color)}.closeButton.svelte-nulfcf.svelte-nulfcf{width:15px;cursor:pointer;padding:0;float:right;margin-right:3px;margin-top:-32px;border:none;background-color:var(--hover-color)}svg.svelte-nulfcf.svelte-nulfcf:hover{stroke:red}table.svelte-nulfcf.svelte-nulfcf{border-collapse:collapse;width:-moz-max-content;width:max-content;margin-left:5px}th.svelte-nulfcf.svelte-nulfcf,td.svelte-nulfcf.svelte-nulfcf{border:1px solid var(--hover-color);text-align:left;padding:8px}thead.svelte-nulfcf th.svelte-nulfcf{background-color:var(--hover-color)}.showmorebutton.svelte-nulfcf.svelte-nulfcf{display:flex;padding:0 10px 5px;margin:10px auto;background-color:var(--bg-color)}.guessFmtBtn.svelte-1wt1n0s{margin-right:10px}.svelte-spinner.svelte-ynopmf{transition-property:transform;animation-name:svelte-ynopmf-svelte-spinner_infinite-spin;animation-iteration-count:infinite;animation-timing-function:linear}@keyframes svelte-ynopmf-svelte-spinner_infinite-spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}nav.svelte-osm4b5.svelte-osm4b5{position:sticky;height:2em;background-color:var(--bg-color);z-index:1001}.applicationmenu.svelte-osm4b5.svelte-osm4b5{border-bottom:1px var(--hover-color) solid;height:2em;z-index:3;padding:3px;position:fixed;width:100%;margin:-8px}ul.svelte-osm4b5.svelte-osm4b5{padding:0}ul.topmenu.svelte-osm4b5.svelte-osm4b5{display:flex;flex-direction:row;margin-top:0}ul.topmenu.svelte-osm4b5 li.svelte-osm4b5{list-style-type:none}button.svelte-osm4b5.svelte-osm4b5{border:0px #000 solid;color:var(--font-color);height:30px;padding:0 10px;background:var(--bg-color)}ul.svelte-osm4b5 li button.svelte-osm4b5:hover{background-color:var(--hover-color);cursor:pointer}ul.svelte-osm4b5 li ul.secondmenu.svelte-osm4b5{display:flex;align-items:stretch;flex-direction:column;position:absolute;box-shadow:1px 1px 5px #888}ul.svelte-osm4b5 li ul.secondmenu li button.svelte-osm4b5{width:100%;min-width:150px;text-align:left}ul.svelte-osm4b5 li ul.thirdmenu.svelte-osm4b5{display:flex;align-items:stretch;flex-direction:column;position:absolute;box-shadow:1px 1px 5px #888;margin-left:calc(100% + 1px);margin-top:-30px}hr.svelte-osm4b5.svelte-osm4b5{border:none;border-bottom:1px solid var(--hover-color);margin:0}#switchtheme.svelte-osm4b5.svelte-osm4b5{float:right;margin-right:10px;margin-top:-3em}:root{--theme-toggle-width:3rem;--theme-toggle-height:1.5rem;--theme-toggle-circle-width:0;--theme-toggle-circle-dimensions:calc(var(--theme-toggle-height) - .5rem)}#switchtheme.svelte-osm4b5.svelte-osm4b5{-webkit-appearance:none;outline:none;cursor:pointer;height:var(--theme-toggle-height);width:var(--theme-toggle-width);box-shadow:#63636333 0 2px 8px;border:1px solid var(--hover-color);position:relative;border-radius:var(--theme-toggle-circle-dimensions);padding:.2rem;background-color:var(--bg-color);transition:background-color .5s}#switchtheme.svelte-osm4b5.svelte-osm4b5:before{content:"";width:var(--theme-toggle-circle-dimensions);height:var(--theme-toggle-circle-dimensions);background-color:var(--primary-color);position:absolute;border-radius:50%;top:50%;transform:translateY(-50%) translate(0);transition:transform .5s}#switchtheme.svelte-osm4b5.svelte-osm4b5:after{content:"Light mode";white-space:nowrap;color:var(--bg-color);position:absolute;left:calc(100% + 1.5rem);font-size:1.3rem;top:50%;transform:translateY(-50%);pointer-events:none}#switchtheme.svelte-osm4b5.svelte-osm4b5:checked{background-color:var(--primary-color);border:none}#switchtheme.svelte-osm4b5.svelte-osm4b5:checked:before{background-color:#fff;transform:translateY(-50%) translate(calc(var(--theme-toggle-width) - var(--theme-toggle-height)))}#switchtheme.svelte-osm4b5.svelte-osm4b5:checked:after{content:"Dark mode";color:var(--bg-color)}.navbar.svelte-ouzgb9.svelte-ouzgb9{display:inline-flex;border:1px #999 solid;width:-moz-fit-content;width:fit-content;background-color:var(--bg-color);border-radius:5px;overflow:hidden;flex-direction:column}.navbar.svelte-ouzgb9 ul.svelte-ouzgb9{margin:6px}ul.svelte-ouzgb9.svelte-ouzgb9{padding:0}ul.svelte-ouzgb9 li.svelte-ouzgb9{display:block;list-style-type:none;width:1fr}ul.svelte-ouzgb9 li button.svelte-ouzgb9{font-size:.75rem;width:100%;height:30px;text-align:left;border:0px;background-color:var(--bg-color)}ul.svelte-ouzgb9 li button.svelte-ouzgb9:hover{color:var(--bg-color);text-align:left;border-radius:5px;background-color:#eee}

</style>
  </head>
  <body>
    <div id="app"></div>
  </body>
</html>
